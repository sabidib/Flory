'use strict';var Flory={VERSION:"0.01",timestep:.01,Vector3:function(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c}};
Flory.Vector3.prototype={constructor:Flory.Vector3,dimension:function(){return 3},add:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},sub:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},scale:function(a){this.x*=a;this.y*=a;this.z*=a;return this},mult:function(a){return new Flory.Vector3(this.x*a,this.y*a,this.z*a)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},distanceTo:function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z))},distanceToSq:function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z)},zero:function(){this.z=this.y=this.x=0;return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},clone:function(){return new Flory.Vector3(this.x,this.y,this.z)}};
Flory.Vector2=function(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b};
Flory.Vector2.prototype={constructor:Flory.Vector2,dimension:function(){return 2},add:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a){this.x-=a.x;this.y-=a.y;return this},scale:function(a){this.x*=a;this.y*=a;return this},mult:function(a){return new Flory.Vector2(this.x*a,this.y*a)},dot:function(a){return this.x*a.x+this.y*a.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},distanceTo:function(a){return Math.sqrt((a.x-
this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y))},distanceToSq:function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)},zero:function(){this.y=this.x=0;return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},clone:function(){return new Flory.Vector2(this.x,this.y)}};Flory.Vector=function(a){this.components=void 0==a?[]:"number"==typeof a?[].slice.apply(new Uint8Array(a)):a};
Flory.Vector.prototype={constructor:Flory.Vector,dimension:function(){return this.components.length},add:function(a){if(a.components.length>this.components.length){for(var b=0,c=this.components.length;b<c;b++)this.components[b]+=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]+=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]+=a.components[b];return this},sub:function(a){if(a.components.length>this.components.length){for(var b=
0,c=this.components.length;b<c;b++)this.components[b]-=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]-=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]-=a.components[b];return this},scale:function(a){for(var b=0,c=this.components.length;b<c;b++)this.components[b]*=a;return this},mult:function(a){for(var b=[],c=0,d=this.components.length;c<d;c++)b[c]=a*this.components[c];return new Flory.Vector(b)},dot:function(a){if(a.components.length!=
this.components.length)console.log("Flory.vector.dot(a) can only accept a vector of the same dimension as the object.");else{for(var b=0,c=0,d=a.components.length;c<d;c++)b+=this.components[c]*a.components[c];return b}},length:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return Math.sqrt(a)},lengthSq:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return a},distanceTo:function(a){var b=0,c=
0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=(this.components[c]-0)*(this.components[c]-0)}else for(d=
a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return Math.sqrt(b)},distanceToSq:function(a){var b=0,c=0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-
a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=(this.components[c]-0)*(this.components[c]-0)}else for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return b},zero:function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=0;return this},negate:function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=-this.components[a];return this},clone:function(){return new Flory.Vector(this.components.slice(0))}};
Flory.RandomGen=function(a){void 0==a&&(a=(new Date).getTime());this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=Array(this.N);this.mti=this.N+1;this.init_genrand(a)};Flory.RandomGen.prototype.init_genrand=function(a){this.mt[0]=a>>>0;for(this.mti=1;this.mti<this.N;this.mti++)a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((a&4294901760)>>>16)<<16)+1812433253*(a&65535)+this.mti,this.mt[this.mti]>>>=0};
Flory.RandomGen.prototype.init_by_array=function(a,b){var c,d,e;this.init_genrand(19650218);c=1;d=0;for(e=this.N>b?this.N:b;e;e--){var f=this.mt[c-1]^this.mt[c-1]>>>30;this.mt[c]=(this.mt[c]^(1664525*((f&4294901760)>>>16)<<16)+1664525*(f&65535))+a[d]+d;this.mt[c]>>>=0;c++;d++;c>=this.N&&(this.mt[0]=this.mt[this.N-1],c=1);d>=b&&(d=0)}for(e=this.N-1;e;e--)f=this.mt[c-1]^this.mt[c-1]>>>30,this.mt[c]=(this.mt[c]^(1566083941*((f&4294901760)>>>16)<<16)+1566083941*(f&65535))-c,this.mt[c]>>>=0,c++,c>=this.N&&
(this.mt[0]=this.mt[this.N-1],c=1);this.mt[0]=2147483648};
Flory.RandomGen.prototype.genrand_int32=function(){var a,b=[0,this.MATRIX_A];if(this.mti>=this.N){var c;this.mti==this.N+1&&this.init_genrand(5489);for(c=0;c<this.N-this.M;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+this.M]^a>>>1^b[a&1];for(;c<this.N-1;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+(this.M-this.N)]^a>>>1^b[a&1];a=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-
1]^a>>>1^b[a&1];this.mti=0}a=this.mt[this.mti++];a^=a>>>11;a^=a<<7&2636928640;a^=a<<15&4022730752;return(a^a>>>18)>>>0};Flory.RandomGen.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};Flory.RandomGen.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};Flory.RandomGen.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};Flory.RandomGen.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)};
Flory.RandomGen.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return 1.1102230246251565E-16*(67108864*a+b)};Flory.Matrix4=function(a){this.matrix=[];for(var b=0;16>b;b++)this.matrix[b]=a[b]};
Flory.Matrix4.prototype={contructor:Flory.Matrix4,setElement:function(a,b,c){this.matrix[4*a+b]=c;return this},setMatrix:function(a){this.matrix=a;return this},add:function(a){for(var b=0;16>b;b++)this.matrix[b]+=a.matrix[b];return this},multiply:function(a){m=this.matrix;t=a.matrix;m[0]=m[0]*t[0]+m[1]*t[4]+m[2]*t[8]+m[3]*t[12];m[1]=m[0]*t[1]+m[1]*t[5]+m[2]*t[9]+m[3]*t[13];m[2]=m[0]*t[2]+m[1]*t[6]+m[2]*t[10]+m[3]*t[14];m[3]=m[0]*t[3]+m[1]*t[7]+m[2]*t[11]+m[3]*t[15];m[0]=m[4]*t[0]+m[5]*t[4]+m[6]*t[8]+
m[7]*t[12];m[1]=m[4]*t[1]+m[5]*t[5]+m[6]*t[9]+m[7]*t[13];m[2]=m[4]*t[2]+m[5]*t[6]+m[6]*t[10]+m[7]*t[14];m[3]=m[4]*t[3]+m[5]*t[7]+m[6]*t[11]+m[7]*t[15];m[0]=m[8]*t[0]+m[9]*t[4]+m[10]*t[8]+m[11]*t[12];m[1]=m[8]*t[1]+m[9]*t[5]+m[10]*t[9]+m[11]*t[13];m[2]=m[8]*t[2]+m[9]*t[6]+m[10]*t[10]+m[11]*t[14];m[3]=m[8]*t[3]+m[9]*t[7]+m[10]*t[11]+m[11]*t[15];m[0]=m[12]*t[0]+m[13]*t[4]+m[14]*t[8]+m[15]*t[12];m[1]=m[12]*t[1]+m[13]*t[5]+m[14]*t[9]+m[15]*t[13];m[2]=m[12]*t[2]+m[13]*t[6]+m[14]*t[10]+m[15]*t[14];m[3]=
m[12]*t[3]+m[13]*t[7]+m[14]*t[11]+m[15]*t[15];return this},transpose:function(){for(var a=0;4>a;a++)for(var b=0;4>b;b++)this.matrix[a*b+b]=this.matrix[a*b+a]}};Flory.Matrix4.Identity=new Flory.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);
(function(a){function b(a){this.options=d.extend({},b.defaultOptions,a);this.data=[];this.minValue=this.maxValue=Number.NaN}function c(a){this.options=d.extend({},c.defaultChartOptions,a);this.seriesSet=[];this.currentValueRange=1;this.lastRenderTimeMillis=this.currentVisMinValue=0}var d={extend:function(){arguments[0]=arguments[0]||{};for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]="object"===typeof arguments[a][b]?arguments[a][b]instanceof
Array?arguments[a][b]:d.extend(arguments[0][b],arguments[a][b]):arguments[a][b]);return arguments[0]}};b.defaultOptions={resetBoundsInterval:3E3,resetBounds:!0};b.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1];this.minValue=this.data[0][1];for(var a=1;a<this.data.length;a++){var b=this.data[a][1];b>this.maxValue&&(this.maxValue=b);b<this.minValue&&(this.minValue=b)}}else this.minValue=this.maxValue=Number.NaN};b.prototype.append=function(a,b,c){for(var d=this.data.length-
1;0<d&&this.data[d][0]>a;)d--;0<this.data.length&&this.data[d][0]===a?c?(this.data[d][1]+=b,b=this.data[d][1]):this.data[d][1]=b:d<this.data.length-1?this.data.splice(d+1,0,[a,b]):this.data.push([a,b]);this.maxValue=isNaN(this.maxValue)?b:Math.max(this.maxValue,b);this.minValue=isNaN(this.minValue)?b:Math.min(this.minValue,b)};b.prototype.dropOldData=function(a,b){for(var c=0;this.data.length-c>=b&&this.data[c+1][0]<a;)c++;0!==c&&this.data.splice(0,c)};c.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,
yMinFormatter:function(a,b){return parseFloat(a).toFixed(b)},yMaxFormatter:function(a,b){return parseFloat(a).toFixed(b)},maxValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1E3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2},horizontalLines:[]};c.AnimateCompatibility=function(){return{requestAnimationFrame:function(a,
b){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a((new Date).getTime())},16)}).call(window,a,b)},cancelAnimationFrame:function(a){return(window.cancelAnimationFrame||function(a){clearTimeout(a)}).call(window,a)}}}();c.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"};c.prototype.addTimeSeries=function(a,b){this.seriesSet.push({timeSeries:a,
options:d.extend({},c.defaultSeriesPresentationOptions,b)});a.options.resetBounds&&0<a.options.resetBoundsInterval&&(a.resetBoundsTimerId=setInterval(function(){a.resetBounds()},a.options.resetBoundsInterval))};c.prototype.removeTimeSeries=function(a){for(var b=this.seriesSet.length,c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a){this.seriesSet.splice(c,1);break}a.resetBoundsTimerId&&clearInterval(a.resetBoundsTimerId)};c.prototype.getTimeSeriesOptions=function(a){for(var b=this.seriesSet.length,
c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a)return this.seriesSet[c].options};c.prototype.bringToFront=function(a){for(var b=this.seriesSet.length,c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a){a=this.seriesSet.splice(c,1);this.seriesSet.push(a[0]);break}};c.prototype.streamTo=function(a,b){this.canvas=a;this.delay=b;this.start()};c.prototype.start=function(){if(!this.frame){if(this.options.enableDpiScaling&&window&&1!==window.devicePixelRatio){var a=this.canvas.getAttribute("width"),b=this.canvas.getAttribute("height");
this.canvas.setAttribute("width",a*window.devicePixelRatio);this.canvas.setAttribute("height",b*window.devicePixelRatio);this.canvas.style.width=a+"px";this.canvas.style.height=b+"px";this.canvas.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)}var d=function(){this.frame=c.AnimateCompatibility.requestAnimationFrame(function(){this.render();d()}.bind(this))}.bind(this);d()}};c.prototype.stop=function(){this.frame&&(c.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)};
c.prototype.updateValueRange=function(){for(var a=this.options,b=Number.NaN,c=Number.NaN,d=0;d<this.seriesSet.length;d++){var k=this.seriesSet[d].timeSeries;isNaN(k.maxValue)||(b=isNaN(b)?k.maxValue:Math.max(b,k.maxValue));isNaN(k.minValue)||(c=isNaN(c)?k.minValue:Math.min(c,k.minValue))}b=null!=a.maxValue?a.maxValue:b*a.maxValueScale;null!=a.minValue&&(c=a.minValue);this.options.yRangeFunction&&(b=this.options.yRangeFunction({min:c,max:b}),c=b.min,b=b.max);isNaN(b)||isNaN(c)||(d=b-c-this.currentValueRange,
k=c-this.currentVisMinValue,this.isAnimatingScale=.1<Math.abs(d)||.1<Math.abs(k),this.currentValueRange+=a.scaleSmoothing*d,this.currentVisMinValue+=a.scaleSmoothing*k);this.valueRange={min:c,max:b}};c.prototype.render=function(a,b){var c=(new Date).getTime();if(!this.isAnimatingScale){var d=Math.min(1E3/6,this.options.millisPerPixel);if(c-this.lastRenderTimeMillis<d)return}this.lastRenderTimeMillis=c;a=a||this.canvas;b=b||c-(this.delay||0);b-=b%this.options.millisPerPixel;var c=a.getContext("2d"),
d=this.options,k=a.clientWidth,n=a.clientHeight,q=b-k*d.millisPerPixel,l=function(a){a-=this.currentVisMinValue;return 0===this.currentValueRange?n:n-Math.round(a/this.currentValueRange*n)}.bind(this);this.updateValueRange();c.font=d.labels.fontSize+"px "+d.labels.fontFamily;c.save();c.translate(0,0);c.beginPath();c.rect(0,0,k,n);c.clip();c.save();c.fillStyle=d.grid.fillStyle;c.clearRect(0,0,k,n);c.fillRect(0,0,k,n);c.restore();c.save();c.lineWidth=d.grid.lineWidth;c.strokeStyle=d.grid.strokeStyle;
if(0<d.grid.millisPerLine)for(var s=k-c.measureText(s).width+4,v=b-b%d.grid.millisPerLine;v>=q;v-=d.grid.millisPerLine){var u=Math.round(k-(b-v)/d.millisPerPixel);d.grid.sharpLines&&(u-=.5);c.beginPath();c.moveTo(u,0);c.lineTo(u,n);c.stroke();c.closePath();if(d.timestampFormatter&&u<s){var w=d.timestampFormatter(new Date(v)),y=c.measureText(w).width,s=u-y-2;c.fillStyle=d.labels.fillStyle;c.fillText(w,u-y,n-2)}}for(s=1;s<d.grid.verticalSections;s++)v=Math.round(s*n/d.grid.verticalSections),d.grid.sharpLines&&
(v-=.5),c.beginPath(),c.moveTo(0,v),c.lineTo(k,v),c.stroke(),c.closePath();d.grid.borderVisible&&(c.beginPath(),c.strokeRect(0,0,k,n),c.closePath());c.restore();if(d.horizontalLines&&d.horizontalLines.length)for(s=0;s<d.horizontalLines.length;s++)v=d.horizontalLines[s],u=Math.round(l(v.value))-.5,c.strokeStyle=v.color||"#ffffff",c.lineWidth=v.lineWidth||1,c.beginPath(),c.moveTo(0,u),c.lineTo(k,u),c.stroke(),c.closePath();for(s=0;s<this.seriesSet.length;s++){c.save();w=this.seriesSet[s].timeSeries;
v=w.data;u=this.seriesSet[s].options;w.dropOldData(q,d.maxDataSetLength);c.lineWidth=u.lineWidth;c.strokeStyle=u.strokeStyle;c.beginPath();for(var x=y=w=0,z=0;z<v.length&&1!==v.length;z++){var B=Math.round(k-(b-v[z][0])/d.millisPerPixel),A=l(v[z][1]);if(0===z)w=B,c.moveTo(B,A);else switch(d.interpolation){case "linear":case "line":c.lineTo(B,A);break;default:c.bezierCurveTo(Math.round((y+B)/2),x,Math.round(y+B)/2,A,B,A);break;case "step":c.lineTo(B,x),c.lineTo(B,A)}y=B;x=A}1<v.length&&(u.fillStyle&&
(c.lineTo(k+u.lineWidth+1,x),c.lineTo(k+u.lineWidth+1,n+u.lineWidth+1),c.lineTo(w,n+u.lineWidth),c.fillStyle=u.fillStyle,c.fill()),u.strokeStyle&&"none"!==u.strokeStyle&&c.stroke(),c.closePath());c.restore()}if(!d.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var q=d.yMaxFormatter(this.valueRange.max,d.labels.precision),s=d.yMinFormatter(this.valueRange.min,d.labels.precision);c.fillStyle=d.labels.fillStyle;c.fillText(q,k-c.measureText(q).width-2,d.labels.fontSize);c.fillText(s,
k-c.measureText(s).width-2,n-2)}c.restore()};c.timeFormatter=function(a){function b(a){return(10>a?"0":"")+a}return b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())};a.TimeSeries=b;a.SmoothieChart=c})("undefined"===typeof exports?this:exports);
(function(a,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b=a.length,c=r.type(a);return"function"===c||r.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){if(r.isFunction(b))return r.grep(a,function(a,d){return!!b.call(a,
d,a)!==c});if(b.nodeType)return r.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(la.test(b))return r.filter(b,a,c);b=r.filter(b,a)}return r.grep(a,function(a){return 0<=U.call(b,a)!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=za[a]={};r.each(a.match(ua)||[],function(a,c){b[c]=!0});return b}function g(){ba.removeEventListener("DOMContentLoaded",g,!1);a.removeEventListener("load",g,!1);r.ready()}function h(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=r.expando+Math.random()}function k(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(fb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Ya.test(c)?r.parseJSON(c):c}catch(d){}pa.set(a,b,c)}else c=void 0;return c}function n(){return!0}function q(){return!1}function l(){try{return ba.activeElement}catch(a){}}function s(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function v(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function u(a){var b=ha.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function w(a,b){for(var c=0,d=a.length;c<d;c++)X.set(a[c],"globalEval",!b||X.get(b[c],"globalEval"))}function y(a,b){var c,d,g,e;if(1===b.nodeType){if(X.hasData(a)&&(e=X.access(a),c=X.set(b,e),e=e.events))for(g in delete c.handle,
c.events={},e)for(c=0,d=e[g].length;c<d;c++)r.event.add(b,g,e[g][c]);pa.hasData(a)&&(g=pa.access(a),g=r.extend({},g),pa.set(b,g))}}function x(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function z(b,c){var d,g=r(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(g[0]))?d.display:r.css(g[0],"display");g.detach();return e}function B(a){var b=
ba,c=vb[a];c||(c=z(a,b),"none"!==c&&c||(p=(p||r("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=p[0].contentDocument,b.write(),b.close(),c=z(a,b),p.detach()),vb[a]=c);return c}function A(a,b,c){var d,g,e=a.style;(c=c||Va(a))&&(g=c.getPropertyValue(b)||c[b]);c&&(""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),La.test(g)&&wb.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=g,g=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0!==
g?g+"":g}function D(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function E(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,g=xb.length;g--;)if(b=xb[g]+c,b in a)return b;return d}function H(a,b,c){return(a=Hb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function C(a,b,c,d,g){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=r.css(a,c+na[b],!0,g)),d?("content"===c&&(e-=r.css(a,"padding"+
na[b],!0,g)),"margin"!==c&&(e-=r.css(a,"border"+na[b]+"Width",!0,g))):(e+=r.css(a,"padding"+na[b],!0,g),"padding"!==c&&(e+=r.css(a,"border"+na[b]+"Width",!0,g)));return e}function F(a,b,c){var d=!0,g="width"===b?a.offsetWidth:a.offsetHeight,e=Va(a),f="border-box"===r.css(a,"boxSizing",!1,e);if(0>=g||null==g){g=A(a,b,e);if(0>g||null==g)g=a.style[b];if(La.test(g))return g;d=f&&(ia.boxSizingReliable()||g===a.style[b]);g=parseFloat(g)||0}return g+C(a,b,c||(f?"border":"content"),d,e)+"px"}function O(a,
b){for(var c,d,g,e=[],f=0,h=a.length;f<h;f++)d=a[f],d.style&&(e[f]=X.get(d,"olddisplay"),c=d.style.display,b?(e[f]||"none"!==c||(d.style.display=""),""===d.style.display&&qa(d)&&(e[f]=X.access(d,"olddisplay",B(d.nodeName)))):(g=qa(d),"none"===c&&g||X.set(d,"olddisplay",g?c:r.css(d,"display"))));for(f=0;f<h;f++)d=a[f],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[f]||"":"none");return a}function K(a,b,c,d,g){return new K.prototype.init(a,b,c,d,g)}function da(){setTimeout(function(){ab=
void 0});return ab=r.now()}function L(a,b){var c,d=0,g={height:a};for(b=b?1:0;4>d;d+=2-b)c=na[d],g["margin"+c]=g["padding"+c]=a;b&&(g.opacity=g.width=a);return g}function Q(a,b,c){for(var d,g=(Za[b]||[]).concat(Za["*"]),e=0,f=g.length;e<f;e++)if(d=g[e].call(c,b,a))return d}function V(a,b){var c,d,g,e,f;for(c in a)if(d=r.camelCase(c),g=b[d],e=a[c],r.isArray(e)&&(g=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(f=r.cssHooks[d])&&"expand"in f)for(c in e=f.expand(e),delete a[d],e)c in a||(a[c]=e[c],b[c]=
g);else b[d]=g}function P(a,b,c){var d,g=0,e=ub.length,f=r.Deferred().always(function(){delete h.elem}),h=function(){if(d)return!1;for(var b=ab||da(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),g=0,e=k.tweens.length;g<e;g++)k.tweens[g].run(c);f.notifyWith(a,[k,c,b]);if(1>c&&e)return b;f.resolveWith(a,[k]);return!1},k=f.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ab||da(),duration:c.duration,tweens:[],
createTween:function(b,c){var d=r.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(d);return d},stop:function(b){var c=0,g=b?k.tweens.length:0;if(d)return this;for(d=!0;c<g;c++)k.tweens[c].run(1);b?f.resolveWith(a,[k,b]):f.rejectWith(a,[k,b]);return this}});c=k.props;for(V(c,k.opts.specialEasing);g<e;g++)if(b=ub[g].call(k,a,c,k.opts))return b;r.map(c,Q,k);r.isFunction(k.opts.start)&&k.opts.start.call(a,k);r.fx.timer(r.extend(h,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,
k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function I(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,g=0,e=b.toLowerCase().match(ua)||[];if(r.isFunction(c))for(;d=e[g++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,b,c,d){function g(k){var h;e[k]=!0;r.each(a[k]||[],function(a,k){var ka=k(b,c,d);if("string"===typeof ka&&!f&&!e[ka])return b.dataTypes.unshift(ka),g(ka),!1;if(f)return!(h=ka)});return h}var e={},f=a===ob;
return g(b.dataTypes[0])||!e["*"]&&g("*")}function Y(a,b){var c,d,g=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((g[c]?a:d||(d={}))[c]=b[c]);d&&r.extend(!0,a,d);return a}function W(a,b,c,d){var g;if(r.isArray(b))r.each(b,function(b,g){c||Cc.test(a)?d(a,g):W(a+"["+("object"===typeof g?b:"")+"]",g,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(g in b)W(a+"["+g+"]",b[g],c,d)}function Z(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}var ga=[],S=ga.slice,J=ga.concat,va=ga.push,
U=ga.indexOf,T={},ra=T.toString,ma=T.hasOwnProperty,ia={},ba=a.document,r=function(a,b){return new r.fn.init(a,b)},Qa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ua=/^-ms-/,M=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:"2.1.1",constructor:r,selector:"",length:0,toArray:function(){return S.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:S.call(this)},pushStack:function(a){a=r.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;
return a},each:function(a,b){return r.each(this,a,b)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:va,sort:ga.sort,splice:ga.splice};r.extend=r.fn.extend=function(){var a,
b,c,d,g,e=arguments[0]||{},f=1,k=arguments.length,h=!1;"boolean"===typeof e&&(h=e,e=arguments[f]||{},f++);"object"===typeof e||r.isFunction(e)||(e={});f===k&&(e=this,f--);for(;f<k;f++)if(null!=(a=arguments[f]))for(b in a)c=e[b],d=a[b],e!==d&&(h&&d&&(r.isPlainObject(d)||(g=r.isArray(d)))?(g?(g=!1,c=c&&r.isArray(c)?c:[]):c=c&&r.isPlainObject(c)?c:{},e[b]=r.extend(h,c,d)):void 0!==d&&(e[b]=d));return e};r.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!r.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==r.type(a)||a.nodeType||r.isWindow(a)||a.constructor&&!ma.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
T[ra.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=r.trim(a))1===a.indexOf("use strict")?(b=ba.createElement("script"),b.text=a,ba.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Ua,"ms-").replace(M,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var g,e=0,f=a.length;g=c(a);if(d)if(g)for(;e<f&&(g=b.apply(a[e],d),!1!==g);e++);else for(e in a){if(g=b.apply(a[e],d),!1===
g)break}else if(g)for(;e<f&&(g=b.call(a[e],e,a[e]),!1!==g);e++);else for(e in a)if(g=b.call(a[e],e,a[e]),!1===g)break;return a},trim:function(a){return null==a?"":(a+"").replace(Qa,"")},makeArray:function(a,b){var d=b||[];null!=a&&(c(Object(a))?r.merge(d,"string"===typeof a?[a]:a):va.call(d,a));return d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,g=a.length;d<c;d++)a[g++]=b[d];a.length=g;return a},grep:function(a,b,c){for(var d=[],g=0,e=a.length,
f=!c;g<e;g++)c=!b(a[g],g),c!==f&&d.push(a[g]);return d},map:function(a,b,d){var g,e=0,f=a.length,k=[];if(c(a))for(;e<f;e++)g=b(a[e],e,d),null!=g&&k.push(g);else for(e in a)g=b(a[e],e,d),null!=g&&k.push(g);return J.apply([],k)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(c=a[b],b=a,a=c);if(r.isFunction(a))return d=S.call(arguments,2),c=function(){return a.apply(b||this,d.concat(S.call(arguments)))},c.guid=a.guid=a.guid||r.guid++,c},now:Date.now,support:ia});r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){T["[object "+b+"]"]=b.toLowerCase()});var Ha=function(a){function b(a,c,d,g){var e,f,k,h,n;(c?c.ownerDocument||c:K)!==H&&C(c);c=c||H;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(h=c.nodeType)&&9!==h)return[];if(Q&&!g){if(e=vc.exec(a))if(k=e[1])if(9===h)if((f=c.getElementById(k))&&f.parentNode){if(f.id===k)return d.push(f),d}else return d;else{if(c.ownerDocument&&(f=c.ownerDocument.getElementById(k))&&Zb(c,f)&&f.id===k)return d.push(f),d}else{if(e[2])return ob.apply(d,c.getElementsByTagName(a)),
d;if((k=e[3])&&z.getElementsByClassName&&c.getElementsByClassName)return ob.apply(d,c.getElementsByClassName(k)),d}if(z.qsa&&(!F||!F.test(a))){f=e=M;k=c;n=9===h&&a;if(1===h&&"object"!==c.nodeName.toLowerCase()){h=Ka(a);(e=c.getAttribute("id"))?f=e.replace(Cc,"\\$&"):c.setAttribute("id",f);f="[id='"+f+"'] ";for(k=h.length;k--;)h[k]=f+p(h[k]);k=Ma.test(a)&&q(c.parentNode)||c;n=h.join(",")}if(n)try{return ob.apply(d,k.querySelectorAll(n)),d}catch(ka){}finally{e||c.removeAttribute("id")}}}return ib(a.replace($b,
"$1"),c,d,g)}function c(){function a(c,d){b.push(c+" ")>y.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function d(a){a[M]=!0;return a}function g(a){var b=H.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function f(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function k(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function h(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function n(a){return d(function(b){b=+b;return d(function(c,d){for(var g,e=a([],c.length,b),f=e.length;f--;)c[g=e[f]]&&(c[g]=!(d[g]=c[g]))})})}function q(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function l(){}function p(a){for(var b=
0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function u(a,b,c){var d=b.dir,g=c&&"parentNode"===d,e=ra++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,f){var k,h,n=[V,e];if(f)for(;b=b[d];){if((1===b.nodeType||g)&&a(b,c,f))return!0}else for(;b=b[d];)if(1===b.nodeType||g){h=b[M]||(b[M]={});if((k=h[d])&&k[0]===V&&k[1]===e)return n[2]=k[2];h[d]=n;if(n[2]=a(b,c,f))return!0}}}function r(a){return 1<a.length?function(b,c,d){for(var g=a.length;g--;)if(!a[g](b,
c,d))return!1;return!0}:a[0]}function Sa(a,b,c,d,g){for(var e,f=[],k=0,h=a.length,n=null!=b;k<h;k++)if(e=a[k])if(!c||c(e,d,g))f.push(e),n&&b.push(k);return f}function s(a,c,g,e,f,k){e&&!e[M]&&(e=s(e));f&&!f[M]&&(f=s(f,k));return d(function(d,k,h,n){var ka,q,l=[],p=[],u=k.length,r;if(!(r=d)){r=c||"*";for(var s=h.nodeType?[h]:h,v=[],w=0,sc=s.length;w<sc;w++)b(r,s[w],v);r=v}r=!a||!d&&c?r:Sa(r,l,a,h,n);s=g?f||(d?a:u||e)?[]:k:r;g&&g(r,s,h,n);if(e)for(ka=Sa(s,p),e(ka,[],h,n),h=ka.length;h--;)if(q=ka[h])s[p[h]]=
!(r[p[h]]=q);if(d){if(f||a){if(f){ka=[];for(h=s.length;h--;)(q=s[h])&&ka.push(r[h]=q);f(null,s=[],ka,n)}for(h=s.length;h--;)(q=s[h])&&-1<(ka=f?wa.call(d,q):l[h])&&(d[ka]=!(k[ka]=q))}}else s=Sa(s===k?s.splice(u,s.length):s),f?f(null,k,s,n):ob.apply(k,s)})}function v(a){var b,c,d,g=a.length,e=y.relative[a[0].type];c=e||y.relative[" "];for(var f=e?1:0,k=u(function(a){return a===b},c,!0),h=u(function(a){return-1<wa.call(b,a)},c,!0),n=[function(a,c,d){return!e&&(d||c!==D)||((b=c).nodeType?k(a,c,d):h(a,
c,d))}];f<g;f++)if(c=y.relative[a[f].type])n=[u(r(n),c)];else{c=y.filter[a[f].type].apply(null,a[f].matches);if(c[M]){for(d=++f;d<g&&!y.relative[a[d].type];d++);return s(1<f&&r(n),1<f&&p(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace($b,"$1"),c,f<d&&v(a.slice(f,d)),d<g&&v(a=a.slice(d)),d<g&&p(a))}n.push(c)}return r(n)}function w(a,c){var g=0<c.length,e=0<a.length,f=function(d,f,k,h,n){var ka,q,l,p=0,u="0",r=d&&[],s=[],v=D,w=d||e&&y.find.TAG("*",n),sc=V+=null==v?1:Math.random()||
.1,Sc=w.length;for(n&&(D=f!==H&&f);u!==Sc&&null!=(ka=w[u]);u++){if(e&&ka){for(q=0;l=a[q++];)if(l(ka,f,k)){h.push(ka);break}n&&(V=sc)}g&&((ka=!l&&ka)&&p--,d&&r.push(ka))}p+=u;if(g&&u!==p){for(q=0;l=c[q++];)l(r,s,f,k);if(d){if(0<p)for(;u--;)r[u]||s[u]||(s[u]=I.call(h));s=Sa(s)}ob.apply(h,s);n&&!d&&0<s.length&&1<p+c.length&&b.uniqueSort(h)}n&&(V=sc,D=v);return r};return g?d(f):f}var x,z,y,A,Wa,Ka,B,ib,D,Xa,E,C,H,Pa,Q,F,O,hc,Zb,M="sizzle"+-new Date,K=a.document,V=0,ra=0,pc=c(),da=c(),L=c(),Qa=function(a,
b){a===b&&(E=!0);return 0},P={}.hasOwnProperty,R=[],I=R.pop,G=R.push,ob=R.push,ia=R.slice,wa=R.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},rc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Ua="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rc+"))|)[\\x20\\t\\r\\n\\f]*\\]",Oa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
Ua+")*)|.*)\\)|)",$b=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ma=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Jc=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,J=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,N=new RegExp(Oa),ba=new RegExp("^"+rc+"$"),Ha={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Ua),PSEUDO:new RegExp("^"+Oa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},W=/^(?:input|select|textarea|button)$/i,qb=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,vc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ma=/[+~]/,Cc=/'|\\/g,kb=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Aa=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ob.apply(R=ia.call(K.childNodes),K.childNodes),R[K.childNodes.length].nodeType}catch(ja){ob={apply:R.length?function(a,b){G.apply(a,ia.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}z=b.support={};Wa=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};C=b.setDocument=function(a){var b=a?a.ownerDocument||a:K;a=b.defaultView;if(b===
H||9!==b.nodeType||!b.documentElement)return H;H=b;Pa=b.documentElement;Q=!Wa(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){C()},!1):a.attachEvent&&a.attachEvent("onunload",function(){C()}));z.attributes=g(function(a){a.className="i";return!a.getAttribute("className")});z.getElementsByTagName=g(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});z.getElementsByClassName=X.test(b.getElementsByClassName)&&g(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});z.getById=g(function(a){Pa.appendChild(a).id=M;return!b.getElementsByName||!b.getElementsByName(M).length});z.getById?(y.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&Q){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(kb,Aa);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=
function(a){var b=a.replace(kb,Aa);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});y.find.TAG=z.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],g=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[g++];)1===c.nodeType&&d.push(c);return d}return e};y.find.CLASS=z.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&
Q)return b.getElementsByClassName(a)};O=[];F=[];if(z.qsa=X.test(b.querySelectorAll))g(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||F.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||
F.push(":checked")}),g(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&F.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||F.push(":enabled",":disabled");a.querySelectorAll("*,:x");F.push(",.*:")});(z.matchesSelector=X.test(hc=Pa.matches||Pa.webkitMatchesSelector||Pa.mozMatchesSelector||Pa.oMatchesSelector||Pa.msMatchesSelector))&&g(function(a){z.disconnectedMatch=
hc.call(a,"div");hc.call(a,"[s!='']:x");O.push("!=",Oa)});F=F.length&&new RegExp(F.join("|"));O=O.length&&new RegExp(O.join("|"));Zb=(a=X.test(Pa.compareDocumentPosition))||X.test(Pa.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Qa=a?function(a,c){if(a===c)return E=!0,0;var d=
!a.compareDocumentPosition-!c.compareDocumentPosition;if(d)return d;d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return d&1||!z.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===K&&Zb(K,a)?-1:c===b||c.ownerDocument===K&&Zb(K,c)?1:Xa?wa.call(Xa,a)-wa.call(Xa,c):0:d&4?-1:1}:function(a,c){if(a===c)return E=!0,0;var d,g=0;d=a.parentNode;var e=c.parentNode,k=[a],h=[c];if(!d||!e)return a===b?-1:c===b?1:d?-1:e?1:Xa?wa.call(Xa,a)-wa.call(Xa,c):0;if(d===
e)return f(a,c);for(d=a;d=d.parentNode;)k.unshift(d);for(d=c;d=d.parentNode;)h.unshift(d);for(;k[g]===h[g];)g++;return g?f(k[g],h[g]):k[g]===K?-1:h[g]===K?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==H&&C(a);c=c.replace(J,"='$1']");if(!(!z.matchesSelector||!Q||O&&O.test(c)||F&&F.test(c)))try{var d=hc.call(a,c);if(d||z.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(g){}return 0<b(c,H,null,[a]).length};
b.contains=function(a,b){(a.ownerDocument||a)!==H&&C(a);return Zb(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==H&&C(a);var c=y.attrHandle[b.toLowerCase()],c=c&&P.call(y.attrHandle,b.toLowerCase())?c(a,b,!Q):void 0;return void 0!==c?c:z.attributes||!Q?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,g=0;E=!z.detectDuplicates;Xa=!z.sortStable&&a.slice(0);
a.sort(Qa);if(E){for(;b=a[g++];)b===a[g]&&(d=c.push(g));for(;d--;)a.splice(c[d],1)}Xa=null;return a};A=b.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d++];)c+=A(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===b||4===b)return a.nodeValue;return c};y=b.selectors={cacheLength:50,createPseudo:d,match:Ha,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(kb,Aa);a[3]=(a[3]||a[4]||a[5]||"").replace(kb,Aa);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(Ha.CHILD.test(a[0]))return null;a[3]?
a[2]=a[4]||a[5]||"":c&&N.test(c)&&(b=Ka(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(kb,Aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=pc[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&pc(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==
typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(g){g=b.attr(g,a);if(null==g)return"!="===c;if(!c)return!0;g+="";return"="===c?g===d:"!="===c?g!==d:"^="===c?d&&0===g.indexOf(d):"*="===c?d&&-1<g.indexOf(d):"$="===c?d&&g.slice(-d.length)===d:"~="===c?-1<(" "+g+" ").indexOf(d):"|="===c?g===d||g.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,g){var e="nth"!==a.slice(0,3),f="last"!==a.slice(-4),k="of-type"===b;return 1===d&&0===g?function(a){return!!a.parentNode}:
function(b,c,h){var n,ka,q,l,p;c=e!==f?"nextSibling":"previousSibling";var u=b.parentNode,r=k&&b.nodeName.toLowerCase();h=!h&&!k;if(u){if(e){for(;c;){for(ka=b;ka=ka[c];)if(k?ka.nodeName.toLowerCase()===r:1===ka.nodeType)return!1;p=c="only"===a&&!p&&"nextSibling"}return!0}p=[f?u.firstChild:u.lastChild];if(f&&h)for(h=u[M]||(u[M]={}),n=h[a]||[],l=n[0]===V&&n[1],q=n[0]===V&&n[2],ka=l&&u.childNodes[l];ka=++l&&ka&&ka[c]||(q=l=0)||p.pop();){if(1===ka.nodeType&&++q&&ka===b){h[a]=[V,l,q];break}}else if(h&&
(n=(b[M]||(b[M]={}))[a])&&n[0]===V)q=n[1];else for(;(ka=++l&&ka&&ka[c]||(q=l=0)||p.pop())&&((k?ka.nodeName.toLowerCase()!==r:1!==ka.nodeType)||!++q||(h&&((ka[M]||(ka[M]={}))[a]=[V,q]),ka!==b)););q-=g;return q===d||0===q%d&&0<=q/d}}},PSEUDO:function(a,c){var g,e=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[M]?e(c):1<e.length?(g=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,g=e(a,c),f=g.length;f--;)d=wa.call(a,g[f]),a[d]=
!(b[d]=g[f])}):function(a){return e(a,0,g)}):e}},pseudos:{not:d(function(a){var b=[],c=[],g=B(a.replace($b,"$1"));return g[M]?d(function(a,b,c,d){d=g(a,null,d,[]);for(var e=a.length;e--;)if(c=d[e])a[e]=!(b[e]=c)}):function(a,d,e){b[0]=a;g(b,null,e,c);return!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||A(b)).indexOf(a)}}),lang:d(function(a){ba.test(a||"")||b.error("unsupported lang: "+a);a=
a.replace(kb,Aa).toLowerCase();return function(b){var c;do if(c=Q?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Pa},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===
a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qb.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,b){return[b-1]}),eq:n(function(a,b,c){return[0>c?c+b:c]}),even:n(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:n(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:n(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:n(function(a,b,c){for(c=
0>c?c+b:c;++c<b;)a.push(c);return a})}};y.pseudos.nth=y.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[x]=k(x);for(x in{submit:!0,reset:!0})y.pseudos[x]=h(x);l.prototype=y.filters=y.pseudos;y.setFilters=new l;Ka=b.tokenize=function(a,c){var d,g,e,f,k,h,n;if(k=da[a+" "])return c?0:k.slice(0);k=a;h=[];for(n=y.preFilter;k;){if(!d||(g=ma.exec(k)))g&&(k=k.slice(g[0].length)||k),h.push(e=[]);d=!1;if(g=Jc.exec(k))d=g.shift(),e.push({value:d,type:g[0].replace($b," ")}),k=
k.slice(d.length);for(f in y.filter)!(g=Ha[f].exec(k))||n[f]&&!(g=n[f](g))||(d=g.shift(),e.push({value:d,type:f,matches:g}),k=k.slice(d.length));if(!d)break}return c?k.length:k?b.error(a):da(a,h).slice(0)};B=b.compile=function(a,b){var c,d=[],g=[],e=L[a+" "];if(!e){b||(b=Ka(a));for(c=b.length;c--;)e=v(b[c]),e[M]?d.push(e):g.push(e);e=L(a,w(g,d));e.selector=a}return e};ib=b.select=function(a,b,c,d){var g,e,f,k,h="function"===typeof a&&a,n=!d&&Ka(a=h.selector||a);c=c||[];if(1===n.length){e=n[0]=n[0].slice(0);
if(2<e.length&&"ID"===(f=e[0]).type&&z.getById&&9===b.nodeType&&Q&&y.relative[e[1].type]){b=(y.find.ID(f.matches[0].replace(kb,Aa),b)||[])[0];if(!b)return c;h&&(b=b.parentNode);a=a.slice(e.shift().value.length)}for(g=Ha.needsContext.test(a)?0:e.length;g--;){f=e[g];if(y.relative[k=f.type])break;if(k=y.find[k])if(d=k(f.matches[0].replace(kb,Aa),Ma.test(e[0].type)&&q(b.parentNode)||b)){e.splice(g,1);a=d.length&&p(e);if(!a)return ob.apply(c,d),c;break}}}(h||B(a,n))(d,b,!Q,c,Ma.test(a)&&q(b.parentNode)||
b);return c};z.sortStable=M.split("").sort(Qa).join("")===M;z.detectDuplicates=!!E;C();z.sortDetached=g(function(a){return a.compareDocumentPosition(H.createElement("div"))&1});g(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});z.attributes&&g(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||
e("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});g(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});return b}(a);r.find=Ha;r.expr=Ha.selectors;r.expr[":"]=r.expr.pseudos;r.unique=Ha.uniqueSort;r.text=Ha.getText;
r.isXMLDoc=Ha.isXML;r.contains=Ha.contains;var Ma=r.expr.match.needsContext,$a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,la=/^.[^:#\[\.,]*$/;r.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))};r.fn.extend({find:function(a){var b,c=this.length,d=[],g=this;if("string"!==typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<c;b++)if(r.contains(g[b],this))return!0}));
for(b=0;b<c;b++)r.find(a,g[b],d);d=this.pushStack(1<c?r.unique(d):d);d.selector=this.selector?this.selector+" "+a:a;return d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===typeof a&&Ma.test(a)?r(a):a||[],!1).length}});var sa,ya=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(r.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,
a,null]:ya.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||sa).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ba,!0)),$a.test(c[1])&&r.isPlainObject(b))for(c in b)if(r.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else(c=ba.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=ba,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(r.isFunction(a))return"undefined"!==
typeof sa.ready?sa.ready(a):a(r);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return r.makeArray(a,this)}).prototype=r.fn;sa=r(ba);var Ia=/^(?:parents|prev(?:Until|All))/,Fa={children:!0,contents:!0,next:!0,prev:!0};r.extend({dir:function(a,b,c){for(var d=[],g=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(g&&r(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});r.fn.extend({has:function(a){var b=
r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,g=this.length,e=[],f=Ma.test(a)||"string"!==typeof a?r(a,b||this.context):0;d<g;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&r.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?r.unique(e):e)},index:function(a){return a?"string"===typeof a?U.call(r(a),this[0]):U.call(this,a.jquery?
a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.unique(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});r.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return r.dir(a,"parentNode")},parentsUntil:function(a,b,c){return r.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},
nextAll:function(a){return r.dir(a,"nextSibling")},prevAll:function(a){return r.dir(a,"previousSibling")},nextUntil:function(a,b,c){return r.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return r.dir(a,"previousSibling",c)},siblings:function(a){return r.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return r.sibling(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var g=r.map(this,b,c);"Until"!==a.slice(-5)&&
(d=c);d&&"string"===typeof d&&(g=r.filter(d,g));1<this.length&&(Fa[a]||r.unique(g),Ia.test(a)&&g.reverse());return this.pushStack(g)}});var ua=/\S+/g,za={};r.Callbacks=function(a){a="string"===typeof a?za[a]||f(a):r.extend({},a);var b,c,d,g,e,k,h=[],n=!a.once&&[],q=function(f){b=a.memory&&f;c=!0;k=g||0;g=0;e=h.length;for(d=!0;h&&k<e;k++)if(!1===h[k].apply(f[0],f[1])&&a.stopOnFalse){b=!1;break}d=!1;h&&(n?n.length&&q(n.shift()):b?h=[]:l.disable())},l={add:function(){if(h){var c=h.length;(function Tc(b){r.each(b,
function(b,c){var d=r.type(c);"function"===d?a.unique&&l.has(c)||h.push(c):c&&c.length&&"string"!==d&&Tc(c)})})(arguments);d?e=h.length:b&&(g=c,q(b))}return this},remove:function(){h&&r.each(arguments,function(a,b){for(var c;-1<(c=r.inArray(b,h,c));)h.splice(c,1),d&&(c<=e&&e--,c<=k&&k--)});return this},has:function(a){return a?-1<r.inArray(a,h):!(!h||!h.length)},empty:function(){h=[];e=0;return this},disable:function(){h=n=b=void 0;return this},disabled:function(){return!h},lock:function(){n=void 0;
b||l.disable();return this},locked:function(){return!n},fireWith:function(a,b){!h||c&&!n||(b=b||[],b=[a,b.slice?b.slice():b],d?n.push(b):q(b));return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!c}};return l};r.extend({Deferred:function(a){var b=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){g.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return r.Deferred(function(c){r.each(b,function(b,e){var f=r.isFunction(a[b])&&a[b];g[e[1]](function(){var a=f&&f.apply(this,arguments);if(a&&r.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[e[0]+"With"](this===d?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?r.extend(a,d):d}},g={};d.pipe=d.then;r.each(b,function(a,e){var f=e[2],k=e[3];d[e[1]]=f.add;k&&f.add(function(){c=
k},b[a^1][2].disable,b[2][2].lock);g[e[0]]=function(){g[e[0]+"With"](this===g?d:this,arguments);return this};g[e[0]+"With"]=f.fireWith});d.promise(g);a&&a.call(g,g);return g},when:function(a){var b=0,c=S.call(arguments),d=c.length,g=1!==d||a&&r.isFunction(a.promise)?d:0,e=1===g?a:r.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?S.call(arguments):d;c===k?e.notifyWith(b,c):--g||e.resolveWith(b,c)}},k,h,n;if(1<d)for(k=Array(d),h=Array(d),n=Array(d);b<d;b++)c[b]&&r.isFunction(c[b].promise)?
c[b].promise().done(f(b,n,c)).fail(e.reject).progress(f(b,h,k)):--g;g||e.resolveWith(n,c);return e.promise()}});var Na;r.fn.ready=function(a){r.ready.promise().done(a);return this};r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(!0===a?--r.readyWait:r.isReady)||(r.isReady=!0,!0!==a&&0<--r.readyWait||(Na.resolveWith(ba,[r]),r.fn.triggerHandler&&(r(ba).triggerHandler("ready"),r(ba).off("ready"))))}});r.ready.promise=function(b){Na||(Na=r.Deferred(),
"complete"===ba.readyState?setTimeout(r.ready):(ba.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)));return Na.promise(b)};r.ready.promise();var aa=r.access=function(a,b,c,d,g,e,f){var k=0,h=a.length,n=null==c;if("object"===r.type(c))for(k in g=!0,c)r.access(a,b,k,c[k],!0,e,f);else if(void 0!==d&&(g=!0,r.isFunction(d)||(f=!0),n&&(f?(b.call(a,d),b=null):(n=b,b=function(a,b,c){return n.call(r(a),c)})),b))for(;k<h;k++)b(a[k],c,f?d:d.call(a[k],k,b(a[k],c)));return g?a:n?b.call(a):
h?b(a[0],c):e};r.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1;h.accepts=r.acceptData;h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,r.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var d;a=this.key(a);var g=this.cache[a];if("string"===typeof b)g[b]=c;else if(r.isEmptyObject(g))r.extend(this.cache[a],
b);else for(d in b)g[d]=b[d];return g},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,r.camelCase(b));this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,d;c=this.key(a);var g=this.cache[c];if(void 0===b)this.cache[c]={};else for(r.isArray(b)?d=b.concat(b.map(r.camelCase)):(c=r.camelCase(b),b in g?d=[b,c]:(d=c,d=d in g?[d]:d.match(ua)||[])),
c=d.length;c--;)delete g[d[c]]},hasData:function(a){return!r.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var X=new h,pa=new h,Ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fb=/([A-Z])/g;r.extend({hasData:function(a){return pa.hasData(a)||X.hasData(a)},data:function(a,b,c){return pa.access(a,b,c)},removeData:function(a,b){pa.remove(a,b)},_data:function(a,b,c){return X.access(a,b,c)},_removeData:function(a,b){X.remove(a,b)}});r.fn.extend({data:function(a,
b){var c,d,g,e=this[0],f=e&&e.attributes;if(void 0===a){if(this.length&&(g=pa.get(e),1===e.nodeType&&!X.get(e,"hasDataAttrs"))){for(c=f.length;c--;)f[c]&&(d=f[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),k(e,d,g[d])));X.set(e,"hasDataAttrs",!0)}return g}return"object"===typeof a?this.each(function(){pa.set(this,a)}):aa(this,function(b){var c,d=r.camelCase(a);if(e&&void 0===b){c=pa.get(e,a);if(void 0!==c)return c;c=pa.get(e,d);if(void 0!==c)return c;c=k(e,d,void 0);if(void 0!==c)return c}else this.each(function(){var c=
pa.get(this,d);pa.set(this,d,b);-1!==a.indexOf("-")&&void 0!==c&&pa.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){pa.remove(this,a)})}});r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=X.get(a,b),c&&(!d||r.isArray(c)?d=X.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,g=c.shift(),e=r._queueHooks(a,b),f=function(){r.dequeue(a,b)};"inprogress"===g&&(g=c.shift(),
d--);g&&("fx"===b&&c.unshift("inprogress"),delete e.stop,g.call(a,f,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return X.get(a,c)||X.access(a,c,{empty:r.Callbacks("once memory").add(function(){X.remove(a,[b+"queue",c])})})}});r.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,g=r.Deferred(),e=this,f=this.length,k=function(){--d||g.resolveWith(e,[e])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)(c=X.get(e[f],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(k));k();return g.promise(b)}});var Ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,na=["Top","Right","Bottom","Left"],qa=function(a,b){a=b||a;return"none"===
r.css(a,"display")||!r.contains(a.ownerDocument,a)},Ga=/^(?:checkbox|radio)$/i;(function(){var a=ba.createDocumentFragment().appendChild(ba.createElement("div")),b=ba.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);ia.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";ia.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();ia.focusinBubbles="onfocusin"in a;var qb=
/^key/,Pb=/^(?:mouse|pointer|contextmenu)|click/,Ib=/^(?:focusinfocus|focusoutblur)$/,Qb=/^([^.]*)(?:\.(.+)|)$/;r.event={global:{},add:function(a,b,c,d,g){var e,f,k,h,n,q,l,p,u;if(n=X.get(a))for(c.handler&&(e=c,c=e.handler,g=e.selector),c.guid||(c.guid=r.guid++),(h=n.events)||(h=n.events={}),(f=n.handle)||(f=n.handle=function(b){return"undefined"!==typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ua)||[""],n=b.length;n--;)k=Qb.exec(b[n])||[],p=q=k[1],
u=(k[2]||"").split(".").sort(),p&&(k=r.event.special[p]||{},p=(g?k.delegateType:k.bindType)||p,k=r.event.special[p]||{},q=r.extend({type:p,origType:q,data:d,handler:c,guid:c.guid,selector:g,needsContext:g&&r.expr.match.needsContext.test(g),namespace:u.join(".")},e),(l=h[p])||(l=h[p]=[],l.delegateCount=0,k.setup&&!1!==k.setup.call(a,d,u,f)||a.addEventListener&&a.addEventListener(p,f,!1)),k.add&&(k.add.call(a,q),q.handler.guid||(q.handler.guid=c.guid)),g?l.splice(l.delegateCount++,0,q):l.push(q),r.event.global[p]=
!0)},remove:function(a,b,c,d,g){var e,f,k,h,n,q,l,p,u,s,Sa,v=X.hasData(a)&&X.get(a);if(v&&(h=v.events)){b=(b||"").match(ua)||[""];for(n=b.length;n--;)if(k=Qb.exec(b[n])||[],u=Sa=k[1],s=(k[2]||"").split(".").sort(),u){l=r.event.special[u]||{};u=(d?l.delegateType:l.bindType)||u;p=h[u]||[];k=k[2]&&new RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=e=p.length;e--;)q=p[e],!g&&Sa!==q.origType||c&&c.guid!==q.guid||k&&!k.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(p.splice(e,
1),q.selector&&p.delegateCount--,l.remove&&l.remove.call(a,q));f&&!p.length&&(l.teardown&&!1!==l.teardown.call(a,s,v.handle)||r.removeEvent(a,u,v.handle),delete h[u])}else for(u in h)r.event.remove(a,u+b[n],c,d,!0);r.isEmptyObject(h)&&(delete v.handle,X.remove(a,"events"))}},trigger:function(b,c,d,g){var e,f,k,h,n,q,l=[d||ba],p=ma.call(b,"type")?b.type:b;q=ma.call(b,"namespace")?b.namespace.split("."):[];f=e=d=d||ba;if(3!==d.nodeType&&8!==d.nodeType&&!Ib.test(p+r.event.triggered)&&(0<=p.indexOf(".")&&
(q=p.split("."),p=q.shift(),q.sort()),h=0>p.indexOf(":")&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"===typeof b&&b),b.isTrigger=g?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:r.makeArray(c,[b]),q=r.event.special[p]||{},g||!q.trigger||!1!==q.trigger.apply(d,c))){if(!g&&!q.noBubble&&!r.isWindow(d)){k=q.delegateType||p;Ib.test(k+p)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),
e=f;e===(d.ownerDocument||ba)&&l.push(e.defaultView||e.parentWindow||a)}for(e=0;(f=l[e++])&&!b.isPropagationStopped();)b.type=1<e?k:q.bindType||p,(n=(X.get(f,"events")||{})[b.type]&&X.get(f,"handle"))&&n.apply(f,c),(n=h&&f[h])&&n.apply&&r.acceptData(f)&&(b.result=n.apply(f,c),!1===b.result&&b.preventDefault());b.type=p;g||b.isDefaultPrevented()||q._default&&!1!==q._default.apply(l.pop(),c)||!r.acceptData(d)||!h||!r.isFunction(d[p])||r.isWindow(d)||((e=d[h])&&(d[h]=null),r.event.triggered=p,d[p](),
r.event.triggered=void 0,e&&(d[h]=e));return b.result}},dispatch:function(a){a=r.event.fix(a);var b,c,d,g,e=[],f=S.call(arguments);b=(X.get(this,"events")||{})[a.type]||[];var k=r.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!k.preDispatch||!1!==k.preDispatch.call(this,a)){e=r.event.handlers.call(this,a,b);for(b=0;(g=e[b++])&&!a.isPropagationStopped();)for(a.currentTarget=g.elem,c=0;(d=g.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=
d,a.data=d.data,d=((r.event.special[d.origType]||{}).handle||d.handler).apply(g.elem,f),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());k.postDispatch&&k.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,g,e,f=[],k=b.delegateCount,h=a.target;if(k&&h.nodeType&&(!a.button||"click"!==a.type))for(;h!==this;h=h.parentNode||this)if(!0!==h.disabled||"click"!==a.type){d=[];for(c=0;c<k;c++)e=b[c],g=e.selector+" ",void 0===d[g]&&(d[g]=e.needsContext?0<=r(g,this).index(h):
r.find(g,this,null,[h]).length),d[g]&&d.push(e);d.length&&f.push({elem:h,handlers:d})}k<b.length&&f.push({elem:this,handlers:b.slice(k)});return f},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){var c,d,g=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||ba,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));a.which||void 0===g||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[r.expando])return a;var b,c,d;b=a.type;var g=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Pb.test(b)?this.mouseHooks:
qb.test(b)?this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new r.Event(g);for(b=d.length;b--;)c=d[b],a[c]=g[c];a.target||(a.target=ba);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?e.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==l()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===l()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===
this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=r.extend(new r.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?r.event.trigger(a,null,b):r.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)};r.Event=function(a,b){if(!(this instanceof r.Event))return new r.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?n:q):this.type=a;b&&r.extend(this,b);this.timeStamp=a&&a.timeStamp||r.now();this[r.expando]=!0};r.Event.prototype={isDefaultPrevented:q,isPropagationStopped:q,isImmediatePropagationStopped:q,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n;a&&a.preventDefault&&
a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=n;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,g=a.handleObj;if(!d||d!==this&&!r.contains(this,d))a.type=g.origType,c=g.handler.apply(this,arguments),a.type=b;return c}}});ia.focusinBubbles||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a),!0)};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,g=X.access(d,b);g||d.addEventListener(a,c,!0);X.access(d,b,(g||0)+1)},teardown:function(){var d=this.ownerDocument||this,g=X.access(d,b)-1;g?X.access(d,
b,g):(d.removeEventListener(a,c,!0),X.remove(d,b))}}});r.fn.extend({on:function(a,b,c,d,g){var e,f;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],g);return this}null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=q;else if(!d)return this;1===g&&(e=d,d=function(a){r().off(a);return e.apply(this,arguments)},d.guid=e.guid||(e.guid=r.guid++));return this.each(function(){r.event.add(this,a,d,c,b)})},
one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=q);return this.each(function(){r.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,
b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}});var Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rb=/<([\w:]+)/,kb=/<|&#?\w+;/,dc=/<(?:script|style|link)/i,nc=/checked\s*(?:[^=]|=\s*.checked.)/i,ja=/^$|\/(?:java|ecma)script/i,ha=/^true\/(.*)/,cb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Aa.optgroup=Aa.option;Aa.tbody=Aa.tfoot=Aa.colgroup=Aa.caption=Aa.thead;Aa.th=Aa.td;r.extend({clone:function(a,b,c){var d,g,e,f,k=a.cloneNode(!0),h=r.contains(a.ownerDocument,a);if(!(ia.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(f=x(k),e=x(a),d=0,g=e.length;d<g;d++){var n=e[d],q=f[d],l=q.nodeName.toLowerCase();if("input"===l&&Ga.test(n.type))q.checked=n.checked;else if("input"===l||"textarea"===l)q.defaultValue=
n.defaultValue}if(b)if(c)for(e=e||x(a),f=f||x(k),d=0,g=e.length;d<g;d++)y(e[d],f[d]);else y(a,k);f=x(k,"script");0<f.length&&w(f,!h&&x(a,"script"));return k},buildFragment:function(a,b,c,d){for(var g,e,f,k=b.createDocumentFragment(),h=[],n=0,q=a.length;n<q;n++)if((g=a[n])||0===g)if("object"===r.type(g))r.merge(h,g.nodeType?[g]:g);else if(kb.test(g)){e=e||k.appendChild(b.createElement("div"));f=(rb.exec(g)||["",""])[1].toLowerCase();f=Aa[f]||Aa._default;e.innerHTML=f[1]+g.replace(Oa,"<$1></$2>")+f[2];
for(f=f[0];f--;)e=e.lastChild;r.merge(h,e.childNodes);e=k.firstChild;e.textContent=""}else h.push(b.createTextNode(g));k.textContent="";for(n=0;g=h[n++];)if(!d||-1===r.inArray(g,d))if(a=r.contains(g.ownerDocument,g),e=x(k.appendChild(g),"script"),a&&w(e),c)for(f=0;g=e[f++];)ja.test(g.type||"")&&c.push(g);return k},cleanData:function(a){for(var b,c,d,g,e=r.event.special,f=0;void 0!==(c=a[f]);f++){if(r.acceptData(c)&&(g=c[X.expando])&&(b=X.cache[g])){if(b.events)for(d in b.events)e[d]?r.event.remove(c,
d):r.removeEvent(c,d,b.handle);X.cache[g]&&delete X.cache[g]}delete pa.cache[c[pa.expando]]}}});r.fn.extend({text:function(a){return aa(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||s(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,
function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?r.filter(a,this):this,g=0;null!=(c=d[g]);g++)b||1!==c.nodeType||r.cleanData(x(c)),c.parentNode&&
(b&&r.contains(c.ownerDocument,c)&&w(x(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(x(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return r.clone(this,a,b)})},html:function(a){return aa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!dc.test(a)&&!Aa[(rb.exec(a)||
["",""])[1].toLowerCase()]){a=a.replace(Oa,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(x(b,!1)),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;r.cleanData(x(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=J.apply([],a);var c,d,g,e,
f=0,k=this.length,h=this,n=k-1,q=a[0],l=r.isFunction(q);if(l||1<k&&"string"===typeof q&&!ia.checkClone&&nc.test(q))return this.each(function(c){var d=h.eq(c);l&&(a[0]=q.call(this,c,d.html()));d.domManip(a,b)});if(k&&(c=r.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=r.map(x(c,"script"),v);for(g=d.length;f<k;f++)e=c,f!==n&&(e=r.clone(e,!0,!0),g&&r.merge(d,x(e,"script"))),b.call(this[f],e,f);if(g)for(c=d[d.length-1].ownerDocument,r.map(d,u),f=0;f<
g;f++)e=d[f],ja.test(e.type||"")&&!X.access(e,"globalEval")&&r.contains(c,e)&&(e.src?r._evalUrl&&r._evalUrl(e.src):r.globalEval(e.textContent.replace(cb,"")))}return this}});r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c=[],d=r(a),g=d.length-1,e=0;e<=g;e++)a=e===g?this:this.clone(!0),r(d[e])[b](a),va.apply(c,a.get());return this.pushStack(c)}});var p,vb={},wb=/^margin/,La=new RegExp("^("+
Ja+")(?!px)[a-z%]+$","i"),Va=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function b(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";f.innerHTML="";g.appendChild(e);var k=a.getComputedStyle(f,null);c="1%"!==k.top;d="4px"===k.width;g.removeChild(e)}var c,d,g=ba.documentElement,e=ba.createElement("div"),f=ba.createElement("div");
f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",ia.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&r.extend(ia,{pixelPosition:function(){b();return c},boxSizingReliable:function(){null==d&&b();return d},reliableMarginRight:function(){var b;b=f.appendChild(ba.createElement("div"));b.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
b.style.marginRight=b.style.width="0";f.style.width="1px";g.appendChild(e);b=!parseFloat(a.getComputedStyle(b,null).marginRight);g.removeChild(e);return b}}))})();r.swap=function(a,b,c,d){var g,e={};for(g in b)e[g]=a.style[g],a.style[g]=b[g];c=c.apply(a,d||[]);for(g in b)a.style[g]=e[g];return c};var Jb=/^(none|table(?!-c[ea]).+)/,Hb=new RegExp("^("+Ja+")(.*)$","i"),ec=new RegExp("^([+-])=("+Ja+")","i"),fc={position:"absolute",visibility:"hidden",display:"block"},Rb={letterSpacing:"0",fontWeight:"400"},
xb=["Webkit","O","Moz","ms"];r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,e,f,k=r.camelCase(b),h=a.style;b=r.cssProps[k]||(r.cssProps[k]=E(h,k));f=r.cssHooks[b]||r.cssHooks[k];if(void 0!==
c)e=typeof c,"string"===e&&(g=ec.exec(c))&&(c=(g[1]+1)*g[2]+parseFloat(r.css(a,b)),e="number"),null!=c&&c===c&&("number"!==e||r.cssNumber[k]||(c+="px"),ia.clearCloneStyle||""!==c||0!==b.indexOf("background")||(h[b]="inherit"),f&&"set"in f&&void 0===(c=f.set(a,c,d))||(h[b]=c));else return f&&"get"in f&&void 0!==(g=f.get(a,!1,d))?g:h[b]}},css:function(a,b,c,d){var g,e;e=r.camelCase(b);b=r.cssProps[e]||(r.cssProps[e]=E(a.style,e));(e=r.cssHooks[b]||r.cssHooks[e])&&"get"in e&&(g=e.get(a,!0,c));void 0===
g&&(g=A(a,b,d));"normal"===g&&b in Rb&&(g=Rb[b]);return""===c||c?(a=parseFloat(g),!0===c||r.isNumeric(a)?a||0:g):g}});r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return Jb.test(r.css(a,"display"))&&0===a.offsetWidth?r.swap(a,fc,function(){return F(a,b,d)}):F(a,b,d)},set:function(a,c,d){var g=d&&Va(a);return H(a,c,d?C(a,b,d,"border-box"===r.css(a,"boxSizing",!1,g),g):0)}}});r.cssHooks.marginRight=D(ia.reliableMarginRight,function(a,b){if(b)return r.swap(a,{display:"inline-block"},
A,[a,"marginRight"])});r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){var d=0,g={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)g[a+na[d]+b]=c[d]||c[d-2]||c[0];return g}};wb.test(a)||(r.cssHooks[a+b].set=H)});r.fn.extend({css:function(a,b){return aa(this,function(a,b,c){var d,g={},e=0;if(r.isArray(b)){c=Va(a);for(d=b.length;e<d;e++)g[b[e]]=r.css(a,b[e],!1,c);return g}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,1<arguments.length)},show:function(){return O(this,
!0)},hide:function(){return O(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){qa(this)?r(this).show():r(this).hide()})}});r.Tween=K;K.prototype={constructor:K,init:function(a,b,c,d,g,e){this.elem=a;this.prop=c;this.easing=g||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(r.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,
c=K.propHooks[this.prop];this.pos=this.options.duration?b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):K.propHooks._default.set(this);return this}};K.prototype.init.prototype=K.prototype;K.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=r.css(a.elem,a.prop,""))&&"auto"!==a?
a:0:a.elem[a.prop]},set:function(a){if(r.fx.step[a.prop])r.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[r.cssProps[a.prop]]||r.cssHooks[a.prop])?r.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};r.fx=K.prototype.init;r.fx.step={};var ab,Sb,gc=/^(?:toggle|show|hide)$/,
Kb=new RegExp("^(?:([+-])=|)("+Ja+")([a-z%]*)$","i"),oc=/queueHooks$/,ub=[function(a,b,c){var d,g,e,f,k,h,n=this,q={},l=a.style,p=a.nodeType&&qa(a),u=X.get(a,"fxshow");c.queue||(f=r._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,k=f.empty.fire,f.empty.fire=function(){f.unqueued||k()}),f.unqueued++,n.always(function(){n.always(function(){f.unqueued--;r.queue(a,"fx").length||f.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],h=r.css(a,
"display"),g="none"===h?X.get(a,"olddisplay")||B(a.nodeName):h,"inline"===g&&"none"===r.css(a,"float")&&(l.display="inline-block"));c.overflow&&(l.overflow="hidden",n.always(function(){l.overflow=c.overflow[0];l.overflowX=c.overflow[1];l.overflowY=c.overflow[2]}));for(d in b)if(g=b[d],gc.exec(g)){delete b[d];e=e||"toggle"===g;if(g===(p?"hide":"show"))if("show"===g&&u&&void 0!==u[d])p=!0;else continue;q[d]=u&&u[d]||r.style(a,d)}else h=void 0;if(r.isEmptyObject(q))"inline"===("none"===h?B(a.nodeName):
h)&&(l.display=h);else for(d in u?"hidden"in u&&(p=u.hidden):u=X.access(a,"fxshow",{}),e&&(u.hidden=!p),p?r(a).show():n.done(function(){r(a).hide()}),n.done(function(){var b;X.remove(a,"fxshow");for(b in q)r.style(a,b,q[b])}),q)b=Q(p?u[d]:0,d,n),d in u||(u[d]=b.start,p&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],Za={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),g=Kb.exec(b),e=g&&g[3]||(r.cssNumber[a]?"":"px"),f=(r.cssNumber[a]||"px"!==e&&+d)&&Kb.exec(r.css(c.elem,a)),k=1,
h=20;if(f&&f[3]!==e){e=e||f[3];g=g||[];f=+d||1;do k=k||".5",f/=k,r.style(c.elem,a,f+e);while(k!==(k=c.cur()/d)&&1!==k&&--h)}g&&(f=c.start=+f||+d||0,c.unit=e,c.end=g[1]?f+(g[1]+1)*g[2]:+g[2]);return c}]};r.Animation=r.extend(P,{tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,g=a.length;d<g;d++)c=a[d],Za[c]=Za[c]||[],Za[c].unshift(b)},prefilter:function(a,b){b?ub.unshift(a):ub.push(a)}});r.speed=function(a,b,c){var d=a&&"object"===typeof a?r.extend({},a):{complete:c||
!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};d.duration=r.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in r.fx.speeds?r.fx.speeds[d.duration]:r.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){r.isFunction(d.old)&&d.old.call(this);d.queue&&r.dequeue(this,d.queue)};return d};r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(qa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){var g=r.isEmptyObject(a),e=r.speed(b,c,d);b=function(){var b=P(this,r.extend({},a),e);(g||X.get(this,"finish"))&&b.stop(!0)};b.finish=b;return g||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",e=r.timers,f=X.get(this);if(g)f[g]&&f[g].stop&&d(f[g]);else for(g in f)f[g]&&f[g].stop&&oc.test(g)&&
d(f[g]);for(g=e.length;g--;)e[g].elem!==this||null!=a&&e[g].queue!==a||(e[g].anim.stop(c),b=!1,e.splice(g,1));!b&&c||r.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=X.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var g=r.timers,e=d?d.length:0;c.finish=!0;r.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=g.length;b--;)g[b].elem===this&&g[b].queue===a&&(g[b].anim.stop(!0),g.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});
r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,g){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(L(b,!0),a,d,g)}});r.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});r.timers=[];r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||
c.splice(b--,1);c.length||r.fx.stop();ab=void 0};r.fx.timer=function(a){r.timers.push(a);a()?r.fx.start():r.timers.pop()};r.fx.interval=13;r.fx.start=function(){Sb||(Sb=setInterval(r.fx.tick,r.fx.interval))};r.fx.stop=function(){clearInterval(Sb);Sb=null};r.fx.speeds={slow:600,fast:200,_default:400};r.fn.delay=function(a,b){a=r.fx?r.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=ba.createElement("input"),b=ba.createElement("select"),
c=b.appendChild(ba.createElement("option"));a.type="checkbox";ia.checkOn=""!==a.value;ia.optSelected=c.selected;b.disabled=!0;ia.optDisabled=!c.disabled;a=ba.createElement("input");a.value="t";a.type="radio";ia.radioValue="t"===a.value})();var Lb,hb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return aa(this,r.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}});r.extend({attr:function(a,b,c){var d,g,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if("undefined"===
typeof a.getAttribute)return r.prop(a,b,c);1===e&&r.isXMLDoc(a)||(b=b.toLowerCase(),d=r.attrHooks[b]||(r.expr.match.bool.test(b)?Lb:void 0));if(void 0!==c)if(null===c)r.removeAttr(a,b);else{if(d&&"set"in d&&void 0!==(g=d.set(a,c,b)))return g;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(g=d.get(a,b)))return g;g=r.find.attr(a,b);return null==g?void 0:g}}},removeAttr:function(a,b){var c,d,g=0,e=b&&b.match(ua);if(e&&1===a.nodeType)for(;c=e[g++];)d=r.propFix[c]||c,r.expr.match.bool.test(c)&&
(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!ia.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Lb={set:function(a,b,c){!1===b?r.removeAttr(a,c):a.setAttribute(c,c);return c}};r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=hb[b]||r.find.attr;hb[b]=function(a,b,d){var g,e;d||(e=hb[b],hb[b]=g,g=null!=c(a,b,d)?b.toLowerCase():null,hb[b]=e);return g}});var Yb=/^(?:input|select|textarea|button)$/i;
r.fn.extend({prop:function(a,b){return aa(this,r.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}});r.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,g,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!r.isXMLDoc(a))b=r.propFix[b]||b,g=r.propHooks[b];return void 0!==c?g&&"set"in g&&void 0!==(d=g.set(a,c,b))?d:a[b]=c:g&&"get"in g&&null!==(d=g.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||
Yb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});ia.optSelected||(r.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});r.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){r.propFix[this.toLowerCase()]=this});var Tb=/[\t\r\n\f]/g;r.fn.extend({addClass:function(a){var b,c,d,g,e;b="string"===typeof a&&a;var f=0,k=this.length;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(ua)||[];f<k;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Tb," "):" ")){for(e=0;g=b[e++];)0>d.indexOf(" "+g+" ")&&(d+=g+" ");d=r.trim(d);c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,g,e;b=0===arguments.length||"string"===typeof a&&a;var f=0,k=this.length;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];f<
k;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Tb," "):"")){for(e=0;g=b[e++];)for(;0<=d.indexOf(" "+g+" ");)d=d.replace(" "+g+" "," ");d=a?r.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,g=r(this),
e=a.match(ua)||[];b=e[d++];)g.hasClass(b)?g.removeClass(b):g.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&X.set(this,"__className__",this.className),this.className=this.className||!1===a?"":X.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Tb," ").indexOf(a))return!0;return!1}});var Mb=/\r/g;r.fn.extend({val:function(a){var b,c,d,g=this[0];if(arguments.length)return d=
r.isFunction(a),this.each(function(c){1===this.nodeType&&(c=d?a.call(this,c,r(this).val()):a,null==c?c="":"number"===typeof c?c+="":r.isArray(c)&&(c=r.map(c,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(g){if((b=r.valHooks[g.type]||r.valHooks[g.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(g,"value")))return c;c=g.value;return"string"===typeof c?c.replace(Mb,""):null==
c?"":c}}});r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:r.trim(r.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,g=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,f=0>d?e:a?d:0;f<e;f++)if(b=c[f],!(!b.selected&&f!==d||(ia.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&r.nodeName(b.parentNode,"optgroup"))){b=r(b).val();if(a)return b;g.push(b)}return g},set:function(a,b){for(var c,d,g=a.options,
e=r.makeArray(b),f=g.length;f--;)if(d=g[f],d.selected=0<=r.inArray(d.value,e))c=!0;c||(a.selectedIndex=-1);return e}}}});r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=0<=r.inArray(r(a).val(),b)}};ia.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});r.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){r.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Ub=r.now(),Vb=/\?/;r.parseJSON=function(a){return JSON.parse(a+"")};r.parseXML=
function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+a);return b};var Sa,Ka,ib=/#.*$/,Wa=/([?&])_=[^&]*/,Xa=/^(.*?):[ \t]*([^\r\n]*)$/mg,hc=/^(?:GET|HEAD)$/,Zb=/^\/\//,Pa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$b={},ob={},pc="*/".concat("*");try{Ka=location.href}catch(Jc){Ka=ba.createElement("a"),Ka.href="",Ka=Ka.href}Sa=Pa.exec(Ka.toLowerCase())||
[];r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ka,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Sa[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":r.parseJSON,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Y(Y(a,r.ajaxSettings),b):Y(r.ajaxSettings,a)},ajaxPrefilter:I($b),ajaxTransport:I(ob),ajax:function(a,b){function c(a,b,f,h){var q,Sa,x,z;z=b;if(2!==y){y=2;k&&clearTimeout(k);d=void 0;e=h||"";B.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(f){x=l;for(var A=B,Wa,Ka,ib,D,Xa=x.contents,E=x.dataTypes;"*"===E[0];)E.shift(),void 0===Wa&&(Wa=x.mimeType||A.getResponseHeader("Content-Type"));
if(Wa)for(Ka in Xa)if(Xa[Ka]&&Xa[Ka].test(Wa)){E.unshift(Ka);break}if(E[0]in f)ib=E[0];else{for(Ka in f){if(!E[0]||x.converters[Ka+" "+E[0]]){ib=Ka;break}D||(D=Ka)}ib=ib||D}ib?(ib!==E[0]&&E.unshift(ib),x=f[ib]):x=void 0}a:{f=l;Wa=x;Ka=B;ib=h;var C,H,Pa,A={},Xa=f.dataTypes.slice();if(Xa[1])for(H in f.converters)A[H.toLowerCase()]=f.converters[H];for(D=Xa.shift();D;)if(f.responseFields[D]&&(Ka[f.responseFields[D]]=Wa),!Pa&&ib&&f.dataFilter&&(Wa=f.dataFilter(Wa,f.dataType)),Pa=D,D=Xa.shift())if("*"===
D)D=Pa;else if("*"!==Pa&&Pa!==D){H=A[Pa+" "+D]||A["* "+D];if(!H)for(C in A)if(x=C.split(" "),x[1]===D&&(H=A[Pa+" "+x[0]]||A["* "+x[0]])){!0===H?H=A[C]:!0!==A[C]&&(D=x[0],Xa.unshift(x[1]));break}if(!0!==H)if(H&&f["throws"])Wa=H(Wa);else try{Wa=H(Wa)}catch(Q){x={state:"parsererror",error:H?Q:"No conversion from "+Pa+" to "+D};break a}}x={state:"success",data:Wa}}if(h)l.ifModified&&((z=B.getResponseHeader("Last-Modified"))&&(r.lastModified[g]=z),(z=B.getResponseHeader("etag"))&&(r.etag[g]=z)),204===
a||"HEAD"===l.type?z="nocontent":304===a?z="notmodified":(z=x.state,q=x.data,Sa=x.error,h=!Sa);else if(Sa=z,a||!z)z="error",0>a&&(a=0);B.status=a;B.statusText=(b||z)+"";h?s.resolveWith(p,[q,z,B]):s.rejectWith(p,[B,z,Sa]);B.statusCode(w);w=void 0;n&&u.trigger(h?"ajaxSuccess":"ajaxError",[B,l,h?q:Sa]);v.fireWith(p,[B,z]);n&&(u.trigger("ajaxComplete",[B,l]),--r.active||r.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var d,g,e,f,k,h,n,q,l=r.ajaxSetup({},b),p=l.context||l,u=l.context&&
(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),v=r.Callbacks("once memory"),w=l.statusCode||{},x={},z={},y=0,A="canceled",B={readyState:0,getResponseHeader:function(a){var b;if(2===y){if(!f)for(f={};b=Xa.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===y?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();y||(a=z[c]=z[c]||a,x[a]=b);return this},overrideMimeType:function(a){y||(l.mimeType=a);return this},statusCode:function(a){var b;
if(a)if(2>y)for(b in a)w[b]=[w[b],a[b]];else B.always(a[B.status]);return this},abort:function(a){a=a||A;d&&d.abort(a);c(0,a);return this}};s.promise(B).complete=v.add;B.success=B.done;B.error=B.fail;l.url=((a||l.url||Ka)+"").replace(ib,"").replace(Zb,Sa[1]+"//");l.type=b.method||b.type||l.method||l.type;l.dataTypes=r.trim(l.dataType||"*").toLowerCase().match(ua)||[""];null==l.crossDomain&&(h=Pa.exec(l.url.toLowerCase()),l.crossDomain=!(!h||h[1]===Sa[1]&&h[2]===Sa[2]&&(h[3]||("http:"===h[1]?"80":
"443"))===(Sa[3]||("http:"===Sa[1]?"80":"443"))));l.data&&l.processData&&"string"!==typeof l.data&&(l.data=r.param(l.data,l.traditional));G($b,l,b,B);if(2===y)return B;(n=l.global)&&0===r.active++&&r.event.trigger("ajaxStart");l.type=l.type.toUpperCase();l.hasContent=!hc.test(l.type);g=l.url;l.hasContent||(l.data&&(g=l.url+=(Vb.test(g)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=Wa.test(g)?g.replace(Wa,"$1_="+Ub++):g+(Vb.test(g)?"&":"?")+"_="+Ub++));l.ifModified&&(r.lastModified[g]&&B.setRequestHeader("If-Modified-Since",
r.lastModified[g]),r.etag[g]&&B.setRequestHeader("If-None-Match",r.etag[g]));(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&B.setRequestHeader("Content-Type",l.contentType);B.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+pc+"; q=0.01":""):l.accepts["*"]);for(q in l.headers)B.setRequestHeader(q,l.headers[q]);if(l.beforeSend&&(!1===l.beforeSend.call(p,B,l)||2===y))return B.abort();A="abort";for(q in{success:1,error:1,
complete:1})B[q](l[q]);if(d=G(ob,l,b,B)){B.readyState=1;n&&u.trigger("ajaxSend",[B,l]);l.async&&0<l.timeout&&(k=setTimeout(function(){B.abort("timeout")},l.timeout));try{y=1,d.send(x,c)}catch(D){if(2>y)c(-1,D);else throw D;}}else c(-1,"No Transport");return B},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}});r.each(["get","post"],function(a,b){r[b]=function(a,c,d,g){r.isFunction(c)&&(g=g||d,d=c,c=void 0);return r.ajax({url:a,type:b,dataType:g,
data:c,success:d})}});r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){r.fn[b]=function(a){return this.on(b,a)}});r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};r.fn.extend({wrapAll:function(a){var b;if(r.isFunction(a))return this.each(function(b){r(this).wrapAll(a.call(this,b))});this[0]&&(b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=
this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){r.nodeName(this,"body")||r(this).replaceWith(this.childNodes)}).end()}});
r.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};r.expr.filters.visible=function(a){return!r.expr.filters.hidden(a)};var Wc=/%20/g,Cc=/\[\]$/,vc=/\r?\n/g,Xc=/^(?:submit|button|image|reset|file)$/i,Yc=/^(?:input|select|textarea|keygen)/i;r.param=function(a,b){var c,d=[],g=function(a,b){b=r.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=r.ajaxSettings&&r.ajaxSettings.traditional);if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,
function(){g(this.name,this.value)});else for(c in a)W(c,a[c],b,g);return d.join("&").replace(Wc,"+")};r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&Yc.test(this.nodeName)&&!Xc.test(a)&&(this.checked||!Ga.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?
r.map(c,function(a){return{name:b.name,value:a.replace(vc,"\r\n")}}):{name:b.name,value:c.replace(vc,"\r\n")}}).get()}});r.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Zc=0,wc={},$c={0:200,1223:204},qc=r.ajaxSettings.xhr();if(a.ActiveXObject)r(a).on("unload",function(){for(var a in wc)wc[a]()});ia.cors=!!qc&&"withCredentials"in qc;ia.ajax=qc=!!qc;r.ajaxTransport(function(a){var b;if(ia.cors||qc&&!a.crossDomain)return{send:function(c,d){var g,e=a.xhr(),f=++Zc;e.open(a.type,
a.url,a.async,a.username,a.password);if(a.xhrFields)for(g in a.xhrFields)e[g]=a.xhrFields[g];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(g in c)e.setRequestHeader(g,c[g]);b=function(a){return function(){b&&(delete wc[f],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?d(e.status,e.statusText):d($c[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,
e.getAllResponseHeaders()))}};e.onload=b();e.onerror=b("error");b=wc[f]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(k){if(b)throw k;}},abort:function(){b&&b()}}});r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){r.globalEval(a);return a}}});r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});
r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,g){b=r("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&g("error"===a.type?404:200,a.type)});ba.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Kc=[],Dc=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kc.pop()||r.expando+"_"+Ub++;this[a]=!0;return a}});r.ajaxPrefilter("json jsonp",function(b,c,d){var g,e,f,
k=!1!==b.jsonp&&(Dc.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dc.test(b.data)&&"data");if(k||"jsonp"===b.dataTypes[0])return g=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,k?b[k]=b[k].replace(Dc,"$1"+g):!1!==b.jsonp&&(b.url+=(Vb.test(b.url)?"&":"?")+b.jsonp+"="+g),b.converters["script json"]=function(){f||r.error(g+" was not called");return f[0]},b.dataTypes[0]="json",e=a[g],a[g]=function(){f=arguments},
d.always(function(){a[g]=e;b[g]&&(b.jsonpCallback=c.jsonpCallback,Kc.push(g));f&&r.isFunction(e)&&e(f[0]);f=e=void 0}),"script"});r.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||ba;var d=$a.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=r.buildFragment([a],b,c);c&&c.length&&r(c).remove();return r.merge([],d.childNodes)};var rc=r.fn.load;r.fn.load=function(a,b,c){if("string"!==typeof a&&rc)return rc.apply(this,arguments);var d,g,e,f=this,
k=a.indexOf(" ");0<=k&&(d=r.trim(a.slice(k)),a=a.slice(0,k));r.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(g="POST");0<f.length&&r.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){e=arguments;f.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){f.each(c,e||[a.responseText,b,a])});return this};r.expr.filters.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};var Lc=a.document.documentElement;r.offset={setOffset:function(a,
b,c){var d,g,e,f=r.css(a,"position"),k=r(a),h={};"static"===f&&(a.style.position="relative");e=k.offset();g=r.css(a,"top");d=r.css(a,"left");("absolute"===f||"fixed"===f)&&-1<(g+d).indexOf("auto")?(d=k.position(),g=d.top,d=d.left):(g=parseFloat(g)||0,d=parseFloat(d)||0);r.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(h.top=b.top-e.top+g);null!=b.left&&(h.left=b.left-e.left+d);"using"in b?b.using.call(a,h):k.css(h)}};r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,
a,b)});var b,c;c=this[0];var d={top:0,left:0},g=c&&c.ownerDocument;if(g){b=g.documentElement;if(!r.contains(b,c))return d;"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=Z(g);return{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d.top+=
r.css(a[0],"borderTopWidth",!0),d.left+=r.css(a[0],"borderLeftWidth",!0));return{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Lc;a&&!r.nodeName(a,"html")&&"static"===r.css(a,"position");)a=a.offsetParent;return a||Lc})}});r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;r.fn[b]=function(g){return aa(this,function(b,g,e){var f=Z(b);
if(void 0===e)return f?f[c]:b[g];f?f.scrollTo(d?a.pageXOffset:e,d?e:a.pageYOffset):b[g]=e},b,g,arguments.length,null)}});r.each(["top","left"],function(a,b){r.cssHooks[b]=D(ia.pixelPosition,function(a,c){if(c)return c=A(a,b),La.test(c)?r(a).position()[b]+"px":c})});r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(d,g){var e=arguments.length&&(c||"boolean"!==typeof d),f=c||(!0===d||!0===g?"margin":"border");return aa(this,
function(b,c,d){return r.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?r.css(b,c,f):r.style(b,c,d,f)},b,e?d:void 0,e,null)}})});r.fn.size=function(){return this.length};r.fn.andSelf=r.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return r});var ad=a.jQuery,bd=a.$;r.noConflict=function(b){a.$===r&&(a.$=bd);b&&a.jQuery===r&&
(a.jQuery=ad);return r};"undefined"===typeof b&&(a.jQuery=a.$=r);return r});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(b,d){var e,f;e=b.nodeName.toLowerCase();if("area"===e){e=b.parentNode;f=e.name;if(!b.href||!f||"map"!==e.nodeName.toLowerCase())return!1;e=a("img[usemap='#"+f+"']")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,
"visibility")}).length}a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,
"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||0<=d)&&b(c,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,g,f){a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0;g&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);f&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),l={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?l["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})};a.fn["outer"+c]=function(b,g){return"number"!==typeof b?l["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,g)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?
b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"===typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&0!==c)return c;b=b.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c,
d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{(d=a._data(e,"events"))&&d.remove&&a(e).triggerHandler("remove")}catch(l){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var e,f,l,s,v={},u=b.split(".")[0];b=b.split(".")[1];e=u+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=
function(b){return!!a.data(b,e)};a[u]=a[u]||{};f=a[u][b];l=a[u][b]=function(a,b){if(!this._createWidget)return new l(a,b);arguments.length&&this._createWidget(a,b)};a.extend(l,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});s=new c;s.options=a.widget.extend({},s.options);a.each(d,function(b,d){a.isFunction(d)?v[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},g=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,
e;this._super=a;this._superApply=g;e=d.apply(this,arguments);this._super=b;this._superApply=c;return e}}():v[b]=d});l.prototype=a.widget.extend(s,{widgetEventPrefix:f?s.widgetEventPrefix||b:b},v,{constructor:l,namespace:u,widgetName:b,widgetFullName:e});f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,l,c._proto)}),delete f._childConstructors):c._childConstructors.push(l);a.widget.bridge(b,l);return l};a.widget.extend=function(b){for(var c=e.call(arguments,
1),d=0,f=c.length,q,l;d<f;d++)for(q in c[d])l=c[d][q],c[d].hasOwnProperty(q)&&void 0!==l&&(a.isPlainObject(l)?b[q]=a.isPlainObject(b[q])?a.widget.extend({},b[q],l):a.widget.extend({},l):b[q]=l);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var q="string"===typeof f,l=e.call(arguments,1),s=this;f=!q&&l.length?a.widget.extend.apply(null,[f].concat(l)):f;q?this.each(function(){var c,e=a.data(this,d);if("instance"===f)return s=e,!1;if(!e)return a.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+f+"'");if(!a.isFunction(e[f])||"_"===f.charAt(0))return a.error("no such method '"+f+"' for "+b+" widget instance");c=e[f].apply(e,l);if(c!==e&&void 0!==c)return s=c&&c.jquery?s.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))});return s}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||
this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d=b,e,f,l;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(d={},e=b.split("."),b=e.shift(),e.length){f=d[b]=a.widget.extend({},this.options[b]);for(l=0;l<e.length-1;l++)f[e[l]]=f[e[l]]||{},f=f[e[l]];b=e.pop();if(1===arguments.length)return void 0===f[b]?null:f[b];f[b]=c}else{if(1===arguments.length)return void 0===
this.options[b]?null:this.options[b];d[b]=c}this._setOptions(d);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_on:function(b,c,d){var e,f=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget());a.each(d,function(d,k){function v(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof k?f[k]:k).apply(f,arguments)}"string"!==typeof k&&(v.guid=k.guid=k.guid||v.guid||a.guid++);var u=d.match(/^([\w:-]*)\s*(.*)$/),w=u[1]+f.eventNamespace;(u=u[2])?e.delegate(u,w,v):c.bind(w,v)})},_off:function(a,b){b=(b||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,
{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(f)&&!1===f.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",
hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"===typeof e&&(e={effect:e});var l,s=e?!0===e||"number"===typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});l=!a.isEmptyObject(e);e.complete=f;e.delay&&d.delay(e.delay);if(l&&a.effects&&a.effects.effect[s])d[b](e);else if(s!==b&&d[s])d[s](e.duration,e.easing,f);else d.queue(function(c){a(this)[b]();f&&f.call(d[0]);c()})}});var f=!1;a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.1",
options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));
if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);
b.preventDefault();return f=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return f=!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(e){}if(this.helper||d.disabled||0<a(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=
this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b,!1);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);
this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b,!0);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(!1===
this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=this,d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&
this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);this.element.focus();return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?
a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo);b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in
b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&
(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0});return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?
0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var b,c,d;b=this.options;c=this.document[0];this.relativeContainer=null;if(b.containment)if("window"===b.containment)this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
else if("document"===b.containment)this.containment=[0,0,a(c).width()-this.helperProportions.width-this.margins.left,(a(c).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(b.containment.constructor===Array)this.containment=b.containment;else{if("parent"===b.containment&&(b.containment=this.helper[0].parentNode),c=a(b.containment),d=c[0])b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),
10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],
this.relativeContainer=c}else this.containment=null},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,
b){var c,d,e,f=this.options,s=this._isRootNode(this.scrollParent[0]);e=a.pageX;d=a.pageY;s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});b&&(this.containment&&(this.relativeContainer?(c=this.relativeContainer.offset(),c=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(e=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<
c[1]&&(d=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(e=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(d=c[3]+this.offset.click.top)),f.grid&&(d=f.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,d=c?d-this.offset.click.top>=c[1]||d-this.offset.click.top>c[3]?d:d-this.offset.click.top>=c[1]?d-f.grid[1]:d+f.grid[1]:d,e=f.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,
e=c?e-this.offset.click.left>=c[0]||e-this.offset.click.left>c[2]?e:e-this.offset.click.left>=c[0]?e-f.grid[0]:e+f.grid[0]:e),"y"===f.axis&&(e=this.originalPageX),"x"===f.axis&&(d=this.originalPageY));return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:
this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d,this],!0);"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,
position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,
function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var f=
!1,l=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!==l&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(l.instance.element[0],this.instance.element[0])&&
(f=!1);return f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,
this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),
this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",
{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,
c,d){c=d.options;var e=!1,f=d.scrollParentNotHidden[0],l=d.document[0];f!==l&&"HTML"!==f.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+f.offsetHeight-b.pageY<c.scrollSensitivity?f.scrollTop=e=f.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(f.scrollTop=e=f.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+f.offsetWidth-b.pageX<c.scrollSensitivity?f.scrollLeft=e=f.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(f.scrollLeft=
e=f.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(l).scrollTop()<c.scrollSensitivity?e=a(l).scrollTop(a(l).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(l).scrollTop())<c.scrollSensitivity&&(e=a(l).scrollTop(a(l).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(l).scrollLeft()<c.scrollSensitivity?e=a(l).scrollLeft(a(l).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(l).scrollLeft())<c.scrollSensitivity&&(e=a(l).scrollLeft(a(l).scrollLeft()+c.scrollSpeed))));
!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,l,s,v,u,w,y,x,z,B=d.options,A=B.snapTolerance,D=c.offset.left,E=
D+d.helperProportions.width,H=c.offset.top,C=H+d.helperProportions.height;for(x=d.snapElements.length-1;0<=x;x--)v=d.snapElements[x].left,u=v+d.snapElements[x].width,w=d.snapElements[x].top,y=w+d.snapElements[x].height,E<v-A||D>u+A||C<w-A||H>y+A||!a.contains(d.snapElements[x].item.ownerDocument,d.snapElements[x].item)?(d.snapElements[x].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[x].item})),d.snapElements[x].snapping=!1):
("inner"!==B.snapMode&&(e=Math.abs(w-C)<=A,f=Math.abs(y-H)<=A,l=Math.abs(v-E)<=A,s=Math.abs(u-D)<=A,e&&(c.position.top=d._convertPositionTo("relative",{top:w-d.helperProportions.height,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:y,left:0}).top-d.margins.top),l&&(c.position.left=d._convertPositionTo("relative",{top:0,left:v-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:u}).left-d.margins.left)),
z=e||f||l||s,"outer"!==B.snapMode&&(e=Math.abs(w-H)<=A,f=Math.abs(y-C)<=A,l=Math.abs(v-D)<=A,s=Math.abs(u-E)<=A,e&&(c.position.top=d._convertPositionTo("relative",{top:w,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:y-d.helperProportions.height,left:0}).top-d.margins.top),l&&(c.position.left=d._convertPositionTo("relative",{top:0,left:v}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:u-d.helperProportions.width}).left-d.margins.left)),
!d.snapElements[x].snapping&&(e||f||l||s||z)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[x].item})),d.snapElements[x].snapping=e||f||l||s||z)}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e;b=a.makeArray(a(d.options.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(e=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",e+
b)}),this.css("zIndex",e+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.effects={effect:{}};(function(a,b){function c(a,b,d){var e=w[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);return isNaN(a)?b.def:e.mod?(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a}function d(b){var c=
v(),e=c._rgba=[];b=b.toLowerCase();B(s,function(a,d){var g,f=d.re.exec(b);g=f&&d.parse(f);f=d.space||"rgba";if(g)return g=c[f](g),c[u[f].cache]=g[u[f].cache],e=c._rgba=g._rgba,!1});return e.length?("0,0,0,0"===e.join()&&a.extend(e,z.transparent),c):z[b]}function e(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],
a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],v=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},w={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},y=v.support={},x=a("<p>")[0],z,B=a.each;x.style.cssText="background-color:rgba(1,1,1,.5)";
y.rgba=-1<x.style.backgroundColor.indexOf("rgba");B(u,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});v.fn=a.extend(v.prototype,{parse:function(e,f,q,l){if(e===b)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=a(e).css(f),f=b;var s=this,w=a.type(e),x=this._rgba=[];f!==b&&(e=[e,f,q,l],w="array");if("string"===w)return this.parse(d(e)||z._default);if("array"===w)return B(u.rgba.props,function(a,b){x[b.idx]=c(e[b.idx],b)}),this;if("object"===w)return e instanceof
v?B(u,function(a,b){e[b.cache]&&(s[b.cache]=e[b.cache].slice())}):B(u,function(b,d){var f=d.cache;B(d.props,function(a,b){if(!s[f]&&d.to){if("alpha"===a||null==e[a])return;s[f]=d.to(s._rgba)}s[f][b.idx]=c(e[a],b,!0)});s[f]&&0>a.inArray(null,s[f].slice(0,3))&&(s[f][3]=1,d.from&&(s._rgba=d.from(s[f])))}),this},is:function(a){var b=v(a),c=!0,d=this;B(u,function(a,e){var g,f=b[e.cache];f&&(g=d[e.cache]||e.to&&e.to(d._rgba)||[],B(e.props,function(a,b){if(null!=f[b.idx])return c=f[b.idx]===g[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;B(u,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var d=v(a),e=d._space(),g=u[e],f=0===this.alpha()?v("transparent"):this,h=f[g.cache]||g.to(f._rgba),n=h.slice(),d=d[g.cache];B(g.props,function(a,e){var g=e.idx,f=h[g],q=d[g],l=w[e.type]||{};null!==q&&(null===f?n[g]=q:(l.mod&&(q-f>l.mod/2?f+=l.mod:f-q>l.mod/2&&(f-=l.mod)),n[g]=c((q-f)*b+f,e)))});return this[e](n)},blend:function(b){if(1===this._rgba[3])return this;
var c=this._rgba.slice(),d=c.pop(),e=v(b)._rgba;return v(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),b="rgb(");return b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),b="hsl(");return b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();
b&&c.push(~~(255*d));return"#"+a.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});v.fn.parse.prototype=v.fn;u.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),g=Math.min(b,c,d),f=e-g,k=e+g,h=.5*k,k=0===f?0:.5>=h?f/k:f/(2-k);return[Math.round(g===e?0:b===e?60*(c-d)/f+360:c===e?60*(d-b)/
f+120:60*(b-c)/f+240)%360,k,h,null==a?1:a]};u.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-1/3)),a]};B(u,function(d,e){var n=e.props,q=e.cache,u=e.to,s=e.from;v.fn[d]=function(d){u&&!this[q]&&(this[q]=u(this._rgba));if(d===b)return this[q].slice();var e,f=a.type(d),l="array"===f||"object"===f?d:arguments,
w=this[q].slice();B(n,function(a,b){var d=l["object"===f?a:b.idx];null==d&&(d=w[b.idx]);w[b.idx]=c(d,b)});return s?(e=v(s(w)),e[q]=w,e):v(w)};B(n,function(b,c){v.fn[b]||(v.fn[b]=function(e){var k=a.type(e),h="alpha"===b?this._hsla?"hsla":"rgba":d,n=this[h](),q=n[c.idx];if("undefined"===k)return q;"function"===k&&(e=e.call(this,q),k=a.type(e));if(null==e&&c.empty)return this;"string"===k&&(k=f.exec(e))&&(e=q+parseFloat(k[2])*("+"===k[1]?1:-1));n[c.idx]=e;return this[h](n)})})});v.hook=function(b){b=
b.split(" ");B(b,function(b,c){a.cssHooks[c]={set:function(b,e){var f,k="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){e=v(f||e);if(!y.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?b.parentNode:b;(""===k||"transparent"===k)&&f&&f.style;)try{k=a.css(f,"backgroundColor"),f=f.parentNode}catch(h){}e=e.blend(k&&"transparent"!==k?k:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(q){}}};a.fx.step[c]=function(b){b.colorInit||(b.start=v(b.elem,c),b.end=v(b.end),b.colorInit=!0);a.cssHooks[c].set(b.elem,
b.start.transition(b.end,b.pos))}})};v.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};B(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};z=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",
purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(a);(function(){function b(c){var d,e=c.ownerDocument.defaultView?c.ownerDocument.defaultView.getComputedStyle(c,null):c.currentStyle,g={};if(e&&e.length&&e[0]&&e[e[0]])for(c=e.length;c--;)d=e[c],"string"===typeof e[d]&&(g[a.camelCase(d)]=e[d]);else for(d in e)"string"===typeof e[d]&&(g[d]=e[d]);return g}var c=["add","remove","toggle"],d={border:1,borderBottom:1,
borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)a.style(b.elem,c,b.end),b.setAttr=!0}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(e,f,l,s){var v=a.speed(f,l,s);return this.queue(function(){var f=
a(this),q=f.attr("class")||"",l,s=v.children?f.find("*").addBack():f,s=s.map(function(){return{el:a(this),start:b(this)}});l=function(){a.each(c,function(a,b){if(e[b])f[b+"Class"](e[b])})};l();s=s.map(function(){this.end=b(this.el[0]);var c=this.start,e=this.end,f={},h,n;for(h in e)n=e[h],c[h]===n||d[h]||!a.fx.step[h]&&isNaN(parseFloat(n))||(f[h]=n);this.diff=f;return this});f.attr("class",q);s=s.map(function(){var b=this,c=a.Deferred(),d=a.extend({},v,{queue:!1,complete:function(){c.resolve(b)}});
this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,s.get()).done(function(){l();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});v.complete.call(f[0])})})};a.fn.extend({addClass:function(b){return function(c,d,e,g){return d?a.effects.animateClass.call(this,{add:c},d,e,g):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,g){return 1<arguments.length?a.effects.animateClass.call(this,{remove:c},d,e,g):b.apply(this,
arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,g,f){return"boolean"===typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,g,f):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,g){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,g)}})})();(function(){function b(c,d,e,g){a.isPlainObject(c)&&(d=c,c=c.effect);c={effect:c};null==d&&(d={});a.isFunction(d)&&(g=d,
e=null,d={});if("number"===typeof d||a.fx.speeds[d])g=e,e=d,d={};a.isFunction(e)&&(g=e,e=null);d&&a.extend(c,d);e=e||d.duration;c.duration=a.fx.off?0:"number"===typeof e?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default;c.complete=g||d.complete;return c}function c(b){return!b||"number"===typeof b||a.fx.speeds[b]||"string"===typeof b&&!a.effects.effect[b]||a.isFunction(b)||"object"===typeof b&&!b.effect?!0:!1}a.extend(a.effects,{version:"1.11.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==
b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;d<b.length;d++)null!==b[d]&&(c=a.data("ui-effects-"+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/
b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},g=document.activeElement;try{g.id}catch(f){g=document.body}b.wrap(d);(b[0]===g||a.contains(b[0],g))&&a(g).focus();d=b.parent();"static"===b.css("position")?
(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());
return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var g=b.cssUnit(c);0<g[0]&&(e[c]=g[0]*d+g[1])});return e}});a.fn.extend({effect:function(){function c(b){function e(){a.isFunction(f)&&f.call(g[0]);a.isFunction(b)&&b()}var g=a(this),f=d.complete,k=d.mode;(g.is(":hidden")?"hide"===k:"show"===k)?(g[k](),e()):h.call(g[0],d,e)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,h=a.effects.effect[d.effect];return a.fx.off||!h?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&
d.complete.call(this)}):!1===f?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="show";return this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"===typeof d)return a.apply(this,arguments);var e=b.apply(this,
arguments);e.mode="toggle";return this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*
(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})();a.effects.effect.blind=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,
b.mode||"hide"),l=b.direction||"up",s=/up|down|vertical/.test(l),v=s?"height":"width",u=s?"top":"left",l=/up|left|vertical|horizontal/.test(l),w={},y="show"===f,x,z,B;d.parent().is(".ui-effects-wrapper")?a.effects.save(d.parent(),e):a.effects.save(d,e);d.show();x=a.effects.createWrapper(d).css({overflow:"hidden"});z=x[v]();B=parseFloat(x.css(u))||0;w[v]=y?z:0;l||(d.css(s?"bottom":"right",0).css(s?"top":"left","auto").css({position:"absolute"}),w[u]=y?B:z+B);y&&(x.css(v,0),l||x.css(u,B+z));x.animate(w,
{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.bounce=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"effect"),l="hide"===f,s="show"===f,v=b.direction||"up",f=b.distance,u=b.times||5,w=2*u+(s||l?1:0),y=b.duration/w,x=b.easing,z="up"===v||"down"===v?"top":"left",v="up"===v||"left"===v,B,A,D=d.queue(),E=D.length;(s||
l)&&e.push("opacity");a.effects.save(d,e);d.show();a.effects.createWrapper(d);f||(f=d["top"===z?"outerHeight":"outerWidth"]()/3);s&&(A={opacity:1},A[z]=0,d.css("opacity",0).css(z,v?2*-f:2*f).animate(A,y,x));l&&(f/=Math.pow(2,u-1));A={};for(s=A[z]=0;s<u;s++)B={},B[z]=(v?"-=":"+=")+f,d.animate(B,y,x).animate(A,y,x),f=l?2*f:f/2;l&&(B={opacity:0},B[z]=(v?"-=":"+=")+f,d.animate(B,y,x));d.queue(function(){l&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<E&&D.splice.apply(D,[1,0].concat(D.splice(E,
w+1)));d.dequeue()};a.effects.effect.clip=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f="show"===a.effects.setMode(d,b.mode||"hide"),l="vertical"===(b.direction||"vertical"),s=l?"height":"width",l=l?"top":"left",v={},u,w;a.effects.save(d,e);d.show();u=a.effects.createWrapper(d).css({overflow:"hidden"});u="IMG"===d[0].tagName?u:d;w=u[s]();f&&(u.css(s,0),u.css(l,w/2));v[s]=f?w:0;v[l]=f?0:w/2;u.animate(v,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){f||
d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.drop=function(b,c){var d=a(this),e="position top bottom left right opacity height width".split(" "),f=a.effects.setMode(d,b.mode||"hide"),l="show"===f,s=b.direction||"left",v="up"===s||"down"===s?"top":"left",s="up"===s||"left"===s?"pos":"neg",u={opacity:l?1:0},w;a.effects.save(d,e);d.show();a.effects.createWrapper(d);w=b.distance||d["top"===v?"outerHeight":"outerWidth"](!0)/2;l&&d.css("opacity",0).css(v,"pos"===s?
-w:w);u[v]=(l?"pos"===s?"+=":"-=":"pos"===s?"-=":"+=")+w;d.animate(u,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.explode=function(b,c){function d(){y.push(this);y.length===e*f&&(l.css({visibility:"visible"}),a(y).remove(),s||l.hide(),c())}var e=b.pieces?Math.round(Math.sqrt(b.pieces)):3,f=e,l=a(this),s="show"===a.effects.setMode(l,b.mode||"hide"),v=l.show().css("visibility","hidden").offset(),
u=Math.ceil(l.outerWidth()/f),w=Math.ceil(l.outerHeight()/e),y=[],x,z,B,A,D,E;for(x=0;x<e;x++)for(A=v.top+x*w,E=x-(e-1)/2,z=0;z<f;z++)B=v.left+z*u,D=z-(f-1)/2,l.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-z*u,top:-x*w}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:u,height:w,left:B+(s?D*u:0),top:A+(s?E*w:0),opacity:s?0:1}).animate({left:B+(s?0:D*u),top:A+(s?0:E*w),opacity:s?1:0},b.duration||500,b.easing,
d)};a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})};a.effects.effect.fold=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"hide"),l="show"===f,s="hide"===f,f=b.size||15,v=/([0-9]+)%/.exec(f),u=!!b.horizFirst,w=l!==u,y=w?["width","height"]:["height","width"],x=b.duration/2,z,B={},A={};a.effects.save(d,e);d.show();
z=a.effects.createWrapper(d).css({overflow:"hidden"});w=w?[z.width(),z.height()]:[z.height(),z.width()];v&&(f=parseInt(v[1],10)/100*w[s?0:1]);l&&z.css(u?{height:0,width:f}:{height:f,width:0});B[y[0]]=l?w[0]:f;A[y[1]]=l?w[1]:0;z.animate(B,x,b.easing).animate(A,x,b.easing,function(){s&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()})};a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),l={backgroundColor:d.css("backgroundColor")};
"hide"===f&&(l.opacity=0);a.effects.save(d,e);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);c()}})};a.effects.effect.size=function(b,c){var d,e,f,l,s,v,u=a(this),w="position top bottom left right width height overflow opacity".split(" ");s="position top bottom left right overflow opacity".split(" ");var y=["width","height","overflow"],x=["fontSize"],z=
["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],B=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],A=a.effects.setMode(u,b.mode||"effect"),D=b.restore||"effect"!==A,E=b.scale||"both";v=b.origin||["middle","center"];var H=u.css("position"),C=D?w:s,F={height:0,width:0,outerHeight:0,outerWidth:0};"show"===A&&u.show();s={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()};"toggle"===b.mode&&"show"===A?(u.from=b.to||F,u.to=b.from||
s):(u.from=b.from||("show"===A?F:s),u.to=b.to||("hide"===A?F:s));f=u.from.height/s.height;l=u.from.width/s.width;d=u.to.height/s.height;e=u.to.width/s.width;if("box"===E||"both"===E)f!==d&&(C=C.concat(z),u.from=a.effects.setTransition(u,z,f,u.from),u.to=a.effects.setTransition(u,z,d,u.to)),l!==e&&(C=C.concat(B),u.from=a.effects.setTransition(u,B,l,u.from),u.to=a.effects.setTransition(u,B,e,u.to));"content"!==E&&"both"!==E||f===d||(C=C.concat(x).concat(y),u.from=a.effects.setTransition(u,x,f,u.from),
u.to=a.effects.setTransition(u,x,d,u.to));a.effects.save(u,C);u.show();a.effects.createWrapper(u);u.css("overflow","hidden").css(u.from);v&&(v=a.effects.getBaseline(v,s),u.from.top=(s.outerHeight-u.outerHeight())*v.y,u.from.left=(s.outerWidth-u.outerWidth())*v.x,u.to.top=(s.outerHeight-u.to.outerHeight)*v.y,u.to.left=(s.outerWidth-u.to.outerWidth)*v.x);u.css(u.from);if("content"===E||"both"===E)z=z.concat(["marginTop","marginBottom"]).concat(x),B=B.concat(["marginLeft","marginRight"]),y=w.concat(z).concat(B),
u.find("*[width]").each(function(){var c=a(this),h=c.height(),u=c.width(),s=c.outerHeight(),v=c.outerWidth();D&&a.effects.save(c,y);c.from={height:h*f,width:u*l,outerHeight:s*f,outerWidth:v*l};c.to={height:h*d,width:u*e,outerHeight:h*d,outerWidth:u*e};f!==d&&(c.from=a.effects.setTransition(c,z,f,c.from),c.to=a.effects.setTransition(c,z,d,c.to));l!==e&&(c.from=a.effects.setTransition(c,B,l,c.from),c.to=a.effects.setTransition(c,B,e,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){D&&
a.effects.restore(c,y)})});u.animate(u.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===u.to.opacity&&u.css("opacity",u.from.opacity);"hide"===A&&u.hide();a.effects.restore(u,C);D||("static"===H?u.css({position:"relative",top:u.to.top,left:u.to.left}):a.each(["top","left"],function(a,b){u.css(b,function(b,c){var d=parseInt(c,10),e=a?u.to.left:u.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(u);c()}})};a.effects.effect.scale=function(b,c){var d=a(this),
e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),l=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),s=b.direction||"both",v=b.origin,u={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},w="horizontal"!==s?l/100:1,l="vertical"!==s?l/100:1;e.effect="size";e.queue=!1;e.complete=c;"effect"!==f&&(e.origin=v||["middle","center"],e.restore=!0);e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:u);e.to={height:u.height*
w,width:u.width*l,outerHeight:u.outerHeight*w,outerWidth:u.outerWidth*l};e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0));d.effect(e)};a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,l=parseInt(b.percent,10)||150,s=l/100,v={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?l:100,from:f?
v:{height:v.height*s,width:v.width*s,outerHeight:v.outerHeight*s,outerWidth:v.outerWidth*s}});d.effect(b)};a.effects.effect.pulsate=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"show"),f="show"===e,l="hide"===e,e=2*(b.times||5)+(f||"hide"===e?1:0),s=b.duration/e,v=0,u=d.queue(),w=u.length;if(f||!d.is(":visible"))d.css("opacity",0).show(),v=1;for(f=1;f<e;f++)d.animate({opacity:v},s,b.easing),v=1-v;d.animate({opacity:v},s,b.easing);d.queue(function(){l&&d.hide();c()});1<w&&u.splice.apply(u,
[1,0].concat(u.splice(w,e+1)));d.dequeue()};a.effects.effect.shake=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"effect"),l=b.direction||"left",s=b.distance||20,v=b.times||3,u=2*v+1,w=Math.round(b.duration/u),y="up"===l||"down"===l?"top":"left",x="up"===l||"left"===l,l={},z={},B={},A=d.queue(),D=A.length;a.effects.save(d,e);d.show();a.effects.createWrapper(d);l[y]=(x?"-=":"+=")+s;z[y]=(x?"+=":"-=")+2*s;B[y]=(x?"-=":"+=")+2*s;
d.animate(l,w,b.easing);for(s=1;s<v;s++)d.animate(z,w,b.easing).animate(B,w,b.easing);d.animate(z,w,b.easing).animate(l,w/2,b.easing).queue(function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<D&&A.splice.apply(A,[1,0].concat(A.splice(D,u+1)));d.dequeue()};a.effects.effect.slide=function(b,c){var d=a(this),e="position top bottom left right width height".split(" "),f=a.effects.setMode(d,b.mode||"show"),l="show"===f,s=b.direction||"left",v="up"===s||"down"===s?"top":
"left",s="up"===s||"left"===s,u,w={};a.effects.save(d,e);d.show();u=b.distance||d["top"===v?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(d).css({overflow:"hidden"});l&&d.css(v,s?isNaN(u)?"-"+u:-u:u);w[v]=(l?s?"+=":"-=":s?"-=":"+=")+u;d.animate(w,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),l=a("body"),
s=f?l.scrollTop():0,l=f?l.scrollLeft():0,v=e.offset(),e={top:v.top-s,left:v.left-l,height:e.innerHeight(),width:e.innerWidth()},v=d.offset(),u=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:v.top-s,left:v.left-l,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(e,b.duration,b.easing,function(){u.remove();c()})}});Flory.Renderable=function(){this.mesh={};this.geometry={};this.material={};this.updateGeometry=!1};
Flory.Renderable.prototype={};Flory.Entity=function(){Flory.Renderable.call(this);this.id=Flory.Entity.entityIDCount++;this.name="";this.data={}};Flory.Entity.prototype=Object.create(Flory.Renderable.prototype);Flory.Entity.entityIDCount=0;Flory.Environment=function(){this.entities=[];this.renderer={};this.data={};this.data.rendererType=Flory.Environment.RendererType.Default;this.visualization=!1};
Flory.Environment.prototype={constuctor:Flory.Environment,add:function(a){if(this.id==a.id)console.log("Flory: Can't add an entity to itself.");else{for(var b=0,c=this.entities.length;b<c;b++)if(this.entities[b].id===a.id){console.log("Flory : Can't add an entity twice to the same enviroment.");return}this.addedEntity(this.entities[this.entities.push(a)-1])}return this},remove:function(a){for(var b=0,c=this.entities.length;b<c;b++)this.entities[b].id===a.id&&(this.entities.splice(b),this.removedEntity(a,
a.id,b));return this},removedEntity:function(a,b,c){},addedEntity:function(){},update:function(a){},enableVisualization:function(a){this.data.rendererType==Flory.Environment.RendererType.Default||""==this.data.rendererType?this.renderer=new Flory.Renderer:this.data.rendererType==Flory.Environment.RendererType.PointCloud&&(this.renderer=new Flory.PointCloudRenderer);this.visualization=!0;this.setUpVisualization(a);return this},disableVisualization:function(){this.renderer={};var a=this.renderer.renderer.domElement;
a.parentElement.removeChild(a);this.visualization=!1;this.disabledVisualization();return this},setUpVisualization:function(){},disabledVisualization:function(){},resetEnvironment:function(){}};Flory.Environment.RendererType={Default:"default",PointCloud:"pointCloud"};
Flory.Field=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector(a[b][0]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector(a[b].position):void 0!=a[b].position.components&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector(a[b][1]):a[b].vector instanceof Array?this.data[b].vector=new Flory.Vector(a[b].vector):void 0!=a[b].vector.components&&
(this.data[b].vector=a[b].vector.clone())};Flory.Field.prototype=Object.create(Flory.Entity.prototype);Flory.Field.prototype.constructor=Flory.Field;Flory.Field.prototype.getForce=function(a,b){for(var c=Infinity,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field.prototype.combine=function(a){};Flory.Field.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};
Flory.Field.prototype.clone=function(){return new Flory.Field(this.data)};
Flory.Field2D=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector2(a[b][0][0],a[b][0][1]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector2(a[b].position[0],a[b].position[1]):void 0!=a[b].position.x&&void 0!=a[b].position.y&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector2(a[b][1][0],a[b][1][1]):a[b].vector instanceof Array?
this.data[b].vector=new Flory.Vector2(a[b].vector[0],a[b].vector[1]):void 0!=a[b].vector.x&&void 0!=a[b].vector.y&&(this.data[b].vector=a[b].vector.clone())};Flory.Field2D.prototype=Object.create(Flory.Entity.prototype);Flory.Field2D.prototype.constructor=Flory.Field2D;Flory.Field2D.prototype.getForce=function(a,b){for(var c=0,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field2D.prototype.combine=function(a){};
Flory.Field2D.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};Flory.Field2D.prototype.clone=function(){return new Flory.Field2D(this.data)};
Flory.Field3D=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector3(a[b][0][0],a[b][0][1],a[b][0][2]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector3(a[b].position[0],a[b].position[1],a[b].position[2]):void 0!=a[b].position.x&&void 0!=a[b].position.y&&void 0!=a[b].position.z&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector3(a[b][1][0],
a[b][1][1],a[b][1][2]):a[b].vector instanceof Array?this.data[b].vector=new Flory.Vector3(a[b].vector[0],a[b].vector[1],a[b].vector[2]):void 0!=a[b].vector.x&&void 0!=a[b].vector.y&&void 0!=a[b].postiion.z&&(this.data[b].vector=a[b].vector.clone())};Flory.Field3D.prototype=Object.create(Flory.Entity.prototype);Flory.Field3D.prototype.constructor=Flory.Field3D;
Flory.Field3D.prototype.getForce=function(a,b){for(var c=0,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field3D.prototype.combine=function(a){};Flory.Field3D.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};Flory.Field3D.prototype.clone=function(){return new Flory.Field3D(this.data)};Flory.DataProcessor=function(){};
Flory.DataProcessor.prototype={constructor:Flory.DataProcessor,mean:function(a){for(var b=0,c=0,d=a.length,c=0;c<d;c++)b+=a[c];return b/d},meanSquare:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c]*a[c];return b/d},meanSquareMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].position.length(),b+=e*e;return b/d},meanSquareMonomerVelocity:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].velocity.length(),b+=e*e;return b/d},meanSquareMonomerAcceleration:function(a){for(var b=
0,c=0,d=a.length,e=0;c<d;c++)e=a[c].acceleration.length(),b+=e*e;return b/d},meanMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].position.length();return b/d},meanMonomerPosition:function(a){for(var b=0,c=a.length,d=new Flory.Vector;b<c;b++)d.add(a[b].position);return d.mult(1/c)},meanMonomerSpeed:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].velocity.length();return b/d},meanMonomerVelocity:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].velocity);
return b.mult(1/d)},meanMonomerAcceleration:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].acceleration);return b.mult(1/d)}};var THREE={REVISION:"68"};"object"===typeof module&&(module.exports=THREE);THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;
THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;
THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;
THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;
THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a};b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;
this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=
c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===a.order&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],n=c+f+b;0<n?(c=.5/Math.sqrt(n+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,k=b._z,n=b._w;this._x=c*n+f*g+d*k-e*h;this._y=d*n+f*h+e*g-c*k;this._z=e*n+f*k+c*h-d*g;this._w=f*n-c*g-d*h-e*k;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(g),k=Math.sqrt(1-g*g);if(.001>Math.abs(k))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;g=Math.sin((1-b)*h)/k;h=Math.sin(b*h)/k;this._w=f*g+this._w*h;this._x=c*g+
this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,
this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},
subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,
b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=
a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,
c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=
(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,n=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-n*-f;this.y=k*a+b*-f+n*-e-h*-g;this.z=n*a+b*-g+h*-f-k*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;
this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=
b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=
e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;this.z=c*g-d*f;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===
a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=
a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=
this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},
setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var n=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>Math.abs(k-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(k+b)&&.1>Math.abs(e+h+n-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;n=(n+1)/2;d=(d+g)/4;f=(f+c)/4;k=(k+b)/4;e>h&&e>n?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>n?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),
b=d/c,d=k/c):.01>n?(c=b=.707106781,d=0):(d=Math.sqrt(n),b=f/d,c=k/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-k)*(b-k)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-k)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+n-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);
return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);
return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,
this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},copy:function(a){this._x=
a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b){var c=THREE.Math.clamp,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[1],k=d[5],n=d[9],q=d[2],l=d[6],d=d[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-n,d),this._z=Math.atan2(-f,e)):(this._x=Math.atan2(l,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(g,d),this._z=Math.atan2(h,k)):(this._y=
Math.atan2(-q,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(-q,d),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,e))):"ZYX"===b?(this._y=Math.asin(-c(q,-1,1)),.99999>Math.abs(q)?(this._x=Math.atan2(l,d),this._z=Math.atan2(h,e)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===b?(this._z=Math.asin(c(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-n,k),this._y=Math.atan2(-q,e)):(this._x=0,this._y=Math.atan2(g,d))):"XZY"===b?(this._z=Math.asin(-c(f,
-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(l,k),this._y=Math.atan2(g,e)):(this._x=Math.atan2(-n,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;this.onChangeCallback();return this},setFromQuaternion:function(a,b,c){var d=THREE.Math.clamp,e=a.x*a.x,f=a.y*a.y,g=a.z*a.z,h=a.w*a.w;b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),h-e-f+g),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w),-1,1)),this._z=Math.atan2(2*(a.z*a.w-a.x*
a.y),h+e-f-g)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h-e-f+g),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h-e+f-g)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),h-e-f+g),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h-e+f-g)):"ZYX"===b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),h-e-f+g),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z),-1,1)),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h+e-f-g)):"YZX"===b?(this._x=Math.atan2(2*
(a.x*a.w-a.z*a.y),h-e+f-g),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),h+e-f-g),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w),-1,1))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),h-e+f-g),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h+e-f-g),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);
this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};
THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,g=e.length;f<g;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},
center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<
this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<
this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);
this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);
a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};
THREE.Matrix3=function(a,b,c,d,e,f,g,h,k){var n=this.elements=new Float32Array(9);n[0]=void 0!==a?a:1;n[3]=b||0;n[6]=c||0;n[1]=d||0;n[4]=void 0!==e?e:1;n[7]=f||0;n[2]=g||0;n[5]=h||0;n[8]=void 0!==k?k:1};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,h,k){var n=this.elements;n[0]=a;n[3]=b;n[6]=c;n[1]=d;n[4]=e;n[7]=f;n[2]=g;n[5]=h;n[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=
a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];
c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],
a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,g,h,k,n,q,l,s,v,u,w){var y=this.elements=new Float32Array(16);y[0]=void 0!==a?a:1;y[4]=b||0;y[8]=c||0;y[12]=d||0;y[1]=e||0;y[5]=void 0!==f?f:1;y[9]=g||0;y[13]=h||0;y[2]=k||0;y[6]=n||0;y[10]=void 0!==q?q:1;y[14]=l||0;y[3]=s||0;y[7]=v||0;y[11]=u||0;y[15]=void 0!==w?w:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,k,n,q,l,s,v,u,w){var y=this.elements;y[0]=a;y[4]=b;y[8]=c;y[12]=d;y[1]=e;y[5]=f;y[9]=g;y[13]=h;y[2]=k;y[6]=n;y[10]=q;y[14]=l;y[3]=s;y[7]=v;y[11]=u;y[15]=w;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&
console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*h;var k=f*e,n=c*h,q=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=k+n*d;b[5]=a-q*d;b[9]=-c*g;b[2]=q-a*d;b[6]=n+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,n=d*h,q=d*e,b[0]=a+q*c,b[4]=n*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-n,b[6]=q+a*c,
b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,n=d*h,q=d*e,b[0]=a-q*c,b[4]=-f*e,b[8]=n+k*c,b[1]=k+n*c,b[5]=f*h,b[9]=q-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,n=c*h,q=c*e,b[0]=g*h,b[4]=n*d-k,b[8]=a*d+q,b[1]=g*e,b[5]=q*d+a,b[9]=k*d-n,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*d,n=c*g,q=c*d,b[0]=g*h,b[4]=q-a*e,b[8]=n*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+n,b[10]=a-q*e):"XZY"===a.order&&(a=f*g,k=f*d,n=c*g,q=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+q,b[5]=f*h,b[9]=k*
e-n,b[2]=n*e-k,b[6]=c*h,b[10]=q*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,k=e+e;a=c*g;var n=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=n-f;b[8]=c+h;b[1]=n+f;b[5]=1-
(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var g=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],k=c[12],n=c[1],q=c[5],l=c[9],s=c[13],v=c[2],u=c[6],w=c[10],y=c[14],x=c[3],z=c[7],B=c[11],c=c[15],A=d[0],D=d[4],E=d[8],H=d[12],C=d[1],F=d[5],O=d[9],K=d[13],da=d[2],L=d[6],Q=d[10],V=d[14],P=d[3],
I=d[7],G=d[11],d=d[15];e[0]=f*A+g*C+h*da+k*P;e[4]=f*D+g*F+h*L+k*I;e[8]=f*E+g*O+h*Q+k*G;e[12]=f*H+g*K+h*V+k*d;e[1]=n*A+q*C+l*da+s*P;e[5]=n*D+q*F+l*L+s*I;e[9]=n*E+q*O+l*Q+s*G;e[13]=n*H+q*K+l*V+s*d;e[2]=v*A+u*C+w*da+y*P;e[6]=v*D+u*F+w*L+y*I;e[10]=v*E+u*O+w*Q+y*G;e[14]=v*H+u*K+w*V+y*d;e[3]=x*A+z*C+B*da+c*P;e[7]=x*D+z*F+B*L+c*I;e[11]=x*E+z*O+B*Q+c*G;e[15]=x*H+z*K+B*V+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];
c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=
b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=
a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],n=a[2],q=a[6],l=a[10],s=a[14];return a[3]*(+e*h*q-d*k*q-e*g*l+c*k*l+d*g*s-c*h*s)+a[7]*(+b*h*s-b*k*l+e*f*l-d*f*s+d*k*n-e*h*n)+a[11]*(+b*k*q-b*g*s-e*f*q+c*f*s+e*g*n-c*k*n)+a[15]*(-d*g*n-b*h*q+b*g*l+d*f*q-c*f*l+c*h*n)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,
b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=
this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],k=d[1],n=d[5],q=d[9],l=d[13],s=d[2],v=d[6],u=d[10],w=d[14],y=d[3],x=d[7],z=d[11],d=d[15];c[0]=q*w*x-l*u*x+l*v*z-n*w*z-q*v*d+n*u*d;c[4]=h*u*x-g*w*x-h*v*z+f*w*z+g*v*d-f*u*d;c[8]=g*l*x-h*q*x+h*n*z-f*l*z-g*n*d+f*q*d;c[12]=h*q*v-g*l*v-h*n*u+f*l*u+g*n*w-f*q*w;c[1]=l*u*y-q*w*y-l*s*z+k*w*z+q*s*d-k*u*d;c[5]=g*w*y-h*u*y+h*s*z-e*w*z-g*s*d+e*u*d;c[9]=h*q*y-g*l*y-h*k*
z+e*l*z+g*k*d-e*q*d;c[13]=g*l*s-h*q*s+h*k*u-e*l*u-g*k*w+e*q*w;c[2]=n*w*y-l*v*y+l*s*x-k*w*x-n*s*d+k*v*d;c[6]=h*v*y-f*w*y-h*s*x+e*w*x+f*s*d-e*v*d;c[10]=f*l*y-h*n*y+h*k*x-e*l*x-f*k*d+e*n*d;c[14]=h*n*s-f*l*s-h*k*v+e*l*v+f*k*w-e*n*w;c[3]=q*v*y-n*u*y-q*s*x+k*u*x+n*s*z-k*v*z;c[7]=f*u*y-g*v*y+g*s*x-e*u*x-f*s*z+e*v*z;c[11]=g*n*y-f*q*y-g*k*x+e*q*x+f*k*z-e*n*z;c[15]=f*q*s-g*n*s+g*k*v-e*q*v-f*k*u+e*n*u;c=e*c[0]+k*c[4]+s*c[8]+y*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,k=e*f,n=e*g;this.set(k*f+c,k*g-d*h,k*h+d*g,0,k*g+d*h,n*g+c,n*h-d*f,0,k*h-d*g,n*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,n=1/k;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=n;b.elements[9]*=n;b.elements[10]*=n;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));
var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=b-a,k=c-d,n=f-e;g[0]=2/h;g[4]=0;g[8]=0;g[12]=-((b+a)/h);g[1]=0;g[5]=2/k;g[9]=0;g[13]=-((c+d)/k);g[2]=0;g[6]=0;g[10]=-2/n;g[14]=-((f+e)/n);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=
this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(.5),f=b.clone().sub(a).normalize(),g=.5*a.distanceTo(b),h=
this.origin.clone().sub(e);a=-this.direction.dot(f);b=h.dot(this.direction);var k=-h.dot(f),n=h.lengthSq(),q=Math.abs(1-a*a),l,s;0<=q?(h=a*k-b,l=a*b-k,s=g*q,0<=h?l>=-s?l<=s?(g=1/q,h*=g,l*=g,a=h*(h+a*l+2*b)+l*(a*h+l+2*k)+n):(l=g,h=Math.max(0,-(a*l+b)),a=-h*h+l*(l+2*k)+n):(l=-g,h=Math.max(0,-(a*l+b)),a=-h*h+l*(l+2*k)+n):l<=-s?(h=Math.max(0,-(-a*g+b)),l=0<h?-g:Math.min(Math.max(-g,-k),g),a=-h*h+l*(l+2*k)+n):l<=s?(h=0,l=Math.min(Math.max(-g,-k),g),a=l*(l+2*k)+n):(h=Math.max(0,-(a*g+b)),l=0<h?g:Math.min(Math.max(-g,
-k),g),a=-h*h+l*(l+2*k)+n)):(l=0<a?-g:g,h=Math.max(0,-(a*l+b)),a=-h*h+l*(l+2*k)+n);c&&c.copy(this.direction.clone().multiplyScalar(h).add(this.origin));d&&d.copy(f.clone().multiplyScalar(l).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;
d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;
return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==
c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;
e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],n=c[7],q=c[8],l=c[9],s=c[10],v=c[11],u=c[12],w=c[13],y=c[14],c=c[15];b[0].setComponents(f-a,n-g,v-q,c-u).normalize();b[1].setComponents(f+
a,n+g,v+q,c+u).normalize();b[2].setComponents(f+d,n+h,v+l,c+w).normalize();b[3].setComponents(f-d,n-h,v-l,c-w).normalize();b[4].setComponents(f-e,n-k,v-s,c-y).normalize();b[5].setComponents(f+e,n+k,v+s,c+y).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),g=this.coplanarPoint(b);g.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,g);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*
a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,g,h,k,n,q,l,s;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:f+
2;n=this.points[c[0]];q=this.points[c[1]];l=this.points[c[2]];s=this.points[c[3]];h=g*g;k=g*h;d.x=b(n.x,q.x,l.x,s.x,g,h,k);d.y=b(n.y,q.y,l.y,s.y,g,h,k);d.z=b(n.z,q.z,l.z,s.z,g,h,k);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),g.copy(d),k+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(h[b]=k,e=b);h[h.length]=k;return{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];g=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),h.push(k.copy(d).clone());
h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var n=d*k-e*e;h=h||new THREE.Vector3;if(0==n)return h.set(-2,-1,-1);n=1/n;k=(k*f-e*g)*n;d=(d*g-e*f)*n;return h.set(1-k-d,d,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;e<d;e++)c[e]=b[e];for(e=0;e<d;e++)c[e].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,f,g){this.ray=new a.Ray(b,c);this.near=f||0;this.far=g||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,f,g){a.raycast(b,f);if(!0===g){a=a.children;g=0;for(var h=a.length;g<h;g++)c(a[g],b,f,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,precision:1E-4,linePrecision:1,set:function(a,b){this.ray.set(a,b)},intersectObject:function(a,e){var f=[];c(a,this,f,e);
f.sort(b);return f},intersectObjects:function(a,e){for(var f=[],g=0,h=a.length;g<h;g++)c(a[g],this,f,e);f.sort(b);return f}}})(THREE);
THREE.Object3D=function(){this.id=Flory.Entity.entityIDCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,
value:c},scale:{enumerable:!0,value:d}});this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,
c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));
return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,
b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add:",
a,"can't be added as a child of itself."),this;if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}else console.error("THREE.Object3D.add:",a,"is not an instance of THREE.Object3D.");return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);
if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},raycast:function(){},traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverseVisible(a)}},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<
d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,b)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);
this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);
a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===
b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(l===v){var a=new THREE.RenderableVertex;s.push(a);v++;l++;return a}return s[l++]}function b(){if(w===x){var a=new THREE.RenderableFace;y.push(a);x++;w++;return a}return y[w++]}function c(){if(B===D){var a=new THREE.RenderableLine;A.push(a);D++;B++;return a}return A[B++]}function d(){if(H===F){var a=new THREE.RenderableSprite;C.push(a);F++;H++;return a}return C[H++]}function e(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function f(a,b){var c=0,d=
1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=h)return!0;if(0>e&&0>f||0>g&&0>h)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var g,h,k=[],n=0,q,l,s=[],v=0,u,w,y=[],x=0,z,B,A=[],D=0,E,H,C=[],F=0,O={objects:[],lights:[],elements:[]},K=new THREE.Vector3,da=new THREE.Vector3,L=new THREE.Vector3,Q=new THREE.Vector3,V=new THREE.Vector4,P=new THREE.Box3(new THREE.Vector3(-1,
-1,-1),new THREE.Vector3(1,1,1)),I=new THREE.Box3,G=Array(3),Y=new THREE.Matrix4,W=new THREE.Matrix4,Z,ga=new THREE.Matrix4,S=new THREE.Matrix3,J=new THREE.Frustum,va=new THREE.Vector4,U=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);W.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(W)};this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,c){a.getInverse(c.projectionMatrix);W.multiplyMatrices(c.matrixWorld,
a);return b.applyProjection(W)}}();this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var T=new function(){var d=[],e=[],f=null,g=null,h=new THREE.Matrix3,k=function(a){var b=a.positionWorld,c=a.positionScreen;b.copy(a.position).applyMatrix4(Z);c.copy(b).applyMatrix4(W);b=1/c.w;c.x*=b;c.y*=b;c.z*=b;a.visible=-1<=c.x&&1>=c.x&&-1<=c.y&&1>=c.y&&-1<=c.z&&1>=c.z},l=function(a,
b,c){if(!0===a.visible||!0===b.visible||!0===c.visible)return!0;G[0]=a.positionScreen;G[1]=b.positionScreen;G[2]=c.positionScreen;return P.isIntersectionBox(I.setFromPoints(G))},n=function(a,b,c){return 0>(c.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){f=a;g=f.material;h.getNormalMatrix(f.matrixWorld);d.length=0;e.length=0},projectVertex:k,checkTriangleVisibility:l,
checkBackfaceCulling:n,pushVertex:function(b,c,d){q=a();q.position.set(b,c,d);k(q)},pushNormal:function(a,b,c){d.push(a,b,c)},pushUv:function(a,b){e.push(a,b)},pushLine:function(a,b){var d=s[a],e=s[b];z=c();z.id=f.id;z.v1.copy(d);z.v2.copy(e);z.z=(d.positionScreen.z+e.positionScreen.z)/2;z.material=f.material;O.elements.push(z)},pushTriangle:function(a,c,k){var q=s[a],v=s[c],w=s[k];if(!1!==l(q,v,w)&&(g.side===THREE.DoubleSide||!0===n(q,v,w))){u=b();u.id=f.id;u.v1.copy(q);u.v2.copy(v);u.v3.copy(w);
u.z=(q.positionScreen.z+v.positionScreen.z+w.positionScreen.z)/3;for(q=0;3>q;q++)v=3*arguments[q],w=u.vertexNormalsModel[q],w.set(d[v],d[v+1],d[v+2]),w.applyMatrix3(h).normalize(),v=2*arguments[q],u.uvs[q].set(e[v],e[v+1]);u.vertexNormalsLength=3;u.material=f.material;O.elements.push(u)}}}};this.projectScene=function(q,v,x,y){H=B=w=0;O.elements.length=0;!0===q.autoUpdate&&q.updateMatrixWorld();void 0===v.parent&&v.updateMatrixWorld();Y.copy(v.matrixWorldInverse.getInverse(v.matrixWorld));W.multiplyMatrices(v.projectionMatrix,
Y);J.setFromMatrix(W);h=0;O.objects.length=0;O.lights.length=0;q.traverseVisible(function(a){if(a instanceof THREE.Light)O.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Sprite)if(!1===a.frustumCulled||!0===J.intersectsObject(a)){if(h===n){var b=new THREE.RenderableObject;k.push(b);n++;h++;g=b}else g=k[h++];g.id=a.id;g.object=a;null!==a.renderDepth?g.z=a.renderDepth:(Q.setFromMatrixPosition(a.matrixWorld),Q.applyProjection(W),g.z=Q.z);O.objects.push(g)}});
!0===x&&O.objects.sort(e);q=0;for(x=O.objects.length;q<x;q++){var r=O.objects[q].object,A=r.geometry;T.setObject(r);Z=r.matrixWorld;l=0;if(r instanceof THREE.Mesh)if(A instanceof THREE.BufferGeometry){var D=A.attributes,r=A.offsets;if(void 0!==D.position){for(var C=D.position.array,A=0,F=C.length;A<F;A+=3)T.pushVertex(C[A],C[A+1],C[A+2]);if(void 0!==D.normal)for(var G=D.normal.array,A=0,F=G.length;A<F;A+=3)T.pushNormal(G[A],G[A+1],G[A+2]);if(void 0!==D.uv)for(G=D.uv.array,A=0,F=G.length;A<F;A+=2)T.pushUv(G[A],
G[A+1]);if(void 0!==D.index)if(D=D.index.array,0<r.length)for(q=0;q<r.length;q++)for(F=r[q],C=F.index,A=F.start,F=F.start+F.count;A<F;A+=3)T.pushTriangle(D[A]+C,D[A+1]+C,D[A+2]+C);else for(A=0,F=D.length;A<F;A+=3)T.pushTriangle(D[A],D[A+1],D[A+2]);else for(A=0,F=C.length/3;A<F;A+=3)T.pushTriangle(A,A+1,A+2)}}else{if(A instanceof THREE.Geometry){var I=A.vertices,F=A.faces,D=A.faceVertexUvs[0];S.getNormalMatrix(Z);for(var C=r.material instanceof THREE.MeshFaceMaterial,G=!0===C?r.material:null,P=0,la=
I.length;P<la;P++){var sa=I[P];T.pushVertex(sa.x,sa.y,sa.z)}I=0;for(P=F.length;I<P;I++){var la=F[I],ya=!0===C?G.materials[la.materialIndex]:r.material;if(void 0!==ya){var Ia=ya.side,sa=s[la.a],Fa=s[la.b],ua=s[la.c];if(!0===ya.morphTargets){var za=A.morphTargets,Na=r.morphTargetInfluences,aa=sa.position,X=Fa.position,pa=ua.position;K.set(0,0,0);da.set(0,0,0);L.set(0,0,0);for(var Ya=0,fb=za.length;Ya<fb;Ya++){var Ja=Na[Ya];if(0!==Ja){var na=za[Ya].vertices;K.x+=(na[la.a].x-aa.x)*Ja;K.y+=(na[la.a].y-
aa.y)*Ja;K.z+=(na[la.a].z-aa.z)*Ja;da.x+=(na[la.b].x-X.x)*Ja;da.y+=(na[la.b].y-X.y)*Ja;da.z+=(na[la.b].z-X.z)*Ja;L.x+=(na[la.c].x-pa.x)*Ja;L.y+=(na[la.c].y-pa.y)*Ja;L.z+=(na[la.c].z-pa.z)*Ja}}sa.position.add(K);Fa.position.add(da);ua.position.add(L);T.projectVertex(sa);T.projectVertex(Fa);T.projectVertex(ua)}if(!1!==T.checkTriangleVisibility(sa,Fa,ua)){za=T.checkBackfaceCulling(sa,Fa,ua);if(Ia!==THREE.DoubleSide){if(Ia===THREE.FrontSide&&!1===za)continue;if(Ia===THREE.BackSide&&!0===za)continue}u=
b();u.id=r.id;u.v1.copy(sa);u.v2.copy(Fa);u.v3.copy(ua);u.normalModel.copy(la.normal);!1!==za||Ia!==THREE.BackSide&&Ia!==THREE.DoubleSide||u.normalModel.negate();u.normalModel.applyMatrix3(S).normalize();Na=la.vertexNormals;aa=0;for(X=Math.min(Na.length,3);aa<X;aa++)pa=u.vertexNormalsModel[aa],pa.copy(Na[aa]),!1!==za||Ia!==THREE.BackSide&&Ia!==THREE.DoubleSide||pa.negate(),pa.applyMatrix3(S).normalize();u.vertexNormalsLength=Na.length;Ia=D[I];if(void 0!==Ia)for(za=0;3>za;za++)u.uvs[za].copy(Ia[za]);
u.color=la.color;u.material=ya;u.z=(sa.positionScreen.z+Fa.positionScreen.z+ua.positionScreen.z)/3;O.elements.push(u)}}}}}else if(r instanceof THREE.Line)if(A instanceof THREE.BufferGeometry){if(D=A.attributes,void 0!==D.position){C=D.position.array;A=0;for(F=C.length;A<F;A+=3)T.pushVertex(C[A],C[A+1],C[A+2]);if(void 0!==D.index)for(D=D.index.array,A=0,F=D.length;A<F;A+=2)T.pushLine(D[A],D[A+1]);else for(D=r.type===THREE.LinePieces?2:1,A=0,F=C.length/3-1;A<F;A+=D)T.pushLine(A,A+1)}}else{if(A instanceof
THREE.Geometry&&(ga.multiplyMatrices(W,Z),I=r.geometry.vertices,0!==I.length))for(sa=a(),sa.positionScreen.copy(I[0]).applyMatrix4(ga),D=r.type===THREE.LinePieces?2:1,P=1,la=I.length;P<la;P++)sa=a(),sa.positionScreen.copy(I[P]).applyMatrix4(ga),0<(P+1)%D||(Fa=s[l-2],va.copy(sa.positionScreen),U.copy(Fa.positionScreen),!0===f(va,U)&&(va.multiplyScalar(1/va.w),U.multiplyScalar(1/U.w),z=c(),z.id=r.id,z.v1.positionScreen.copy(va),z.v2.positionScreen.copy(U),z.z=Math.max(va.z,U.z),z.material=r.material,
r.material.vertexColors===THREE.VertexColors&&(z.vertexColors[0].copy(r.geometry.colors[P]),z.vertexColors[1].copy(r.geometry.colors[P-1])),O.elements.push(z)))}else r instanceof THREE.Sprite&&(V.set(Z.elements[12],Z.elements[13],Z.elements[14],1),V.applyMatrix4(W),A=1/V.w,V.z*=A,-1<=V.z&&1>=V.z&&(E=d(),E.id=r.id,E.x=V.x*A,E.y=V.y*A,E.z=V.z,E.object=r,E.rotation=r.rotation,E.scale.x=r.scale.x*Math.abs(E.x-(V.x+v.projectionMatrix.elements[0])/(V.w+v.projectionMatrix.elements[12])),E.scale.y=r.scale.y*
Math.abs(E.y-(V.y+v.projectionMatrix.elements[5])/(V.w+v.projectionMatrix.elements[13])),E.material=r.material,O.elements.push(E)))}!0===y&&O.elements.sort(e);return O}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.materialIndex=this.materialIndex;for(var b=0,c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}};
THREE.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,g)};THREE.BufferAttribute=function(a,b){this.array=a;this.itemSize=b};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(a){this.array.set(a);return this},setX:function(a,b){this.array[a*this.itemSize]=b;return this},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a]=b;this.array[a+1]=
c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this}};THREE.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.offsets=this.drawcalls=[];this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:c}):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),
b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0)},fromGeometry:function(a,b){b=b||{vertexColors:THREE.NoColors};var c=a.vertices,d=a.faces,e=a.faceVertexUvs,f=b.vertexColors,g=0<e[0].length,h=3==d[0].vertexNormals.length,k=new Float32Array(9*d.length);this.addAttribute("position",new THREE.BufferAttribute(k,3));var n=new Float32Array(9*d.length);this.addAttribute("normal",new THREE.BufferAttribute(n,3));if(f!==
THREE.NoColors){var q=new Float32Array(9*d.length);this.addAttribute("color",new THREE.BufferAttribute(q,3))}if(!0===g){var l=new Float32Array(6*d.length);this.addAttribute("uvs",new THREE.BufferAttribute(l,2))}for(var s=0,v=0,u=0;s<d.length;s++,v+=6,u+=9){var w=d[s],y=c[w.a],x=c[w.b],z=c[w.c];k[u]=y.x;k[u+1]=y.y;k[u+2]=y.z;k[u+3]=x.x;k[u+4]=x.y;k[u+5]=x.z;k[u+6]=z.x;k[u+7]=z.y;k[u+8]=z.z;!0===h?(y=w.vertexNormals[0],x=w.vertexNormals[1],z=w.vertexNormals[2],n[u]=y.x,n[u+1]=y.y,n[u+2]=y.z,n[u+3]=
x.x,n[u+4]=x.y,n[u+5]=x.z,n[u+6]=z.x,n[u+7]=z.y,n[u+8]=z.z):(y=w.normal,n[u]=y.x,n[u+1]=y.y,n[u+2]=y.z,n[u+3]=y.x,n[u+4]=y.y,n[u+5]=y.z,n[u+6]=y.x,n[u+7]=y.y,n[u+8]=y.z);f===THREE.FaceColors?(w=w.color,q[u]=w.r,q[u+1]=w.g,q[u+2]=w.b,q[u+3]=w.r,q[u+4]=w.g,q[u+5]=w.b,q[u+6]=w.r,q[u+7]=w.g,q[u+8]=w.b):f===THREE.VertexColors&&(y=w.vertexColors[0],x=w.vertexColors[1],w=w.vertexColors[2],q[u]=y.r,q[u+1]=y.g,q[u+2]=y.b,q[u+3]=x.r,q[u+4]=x.g,q[u+5]=x.b,q[u+6]=w.r,q[u+7]=w.g,q[u+8]=w.b);!0===g&&(w=e[0][s][0],
y=e[0][s][1],x=e[0][s][2],l[v]=w.x,l[v+1]=w.y,l[v+2]=y.x,l[v+3]=y.y,l[v+4]=x.x,l[v+5]=x.y)}this.computeBoundingSphere();return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,d=a.length;c<d;c+=3){var e=a[c],f=a[c+1],g=a[c+2];e<b.min.x?b.min.x=e:e>b.max.x&&(b.max.x=e);f<b.min.y?b.min.y=f:f>b.max.y&&
(b.max.y=f);g<b.min.z?b.min.z=g:g>b.max.z&&(b.max.z=g)}}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&
(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.expandByPoint(b);a.center(d);for(var g=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),g=Math.max(g,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),
computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var e=this.attributes.position.array,f=this.attributes.normal.array,g,h,k,n,q,l,s=new THREE.Vector3,v=new THREE.Vector3,u=new THREE.Vector3,w=new THREE.Vector3,y=new THREE.Vector3;
if(this.attributes.index){var x=this.attributes.index.array,z=0<this.offsets.length?this.offsets:[{start:0,count:x.length,index:0}];c=0;for(d=z.length;c<d;++c){b=z[c].start;g=z[c].count;var B=z[c].index;a=b;for(b+=g;a<b;a+=3)g=B+x[a],h=B+x[a+1],k=B+x[a+2],n=e[3*g],q=e[3*g+1],l=e[3*g+2],s.set(n,q,l),n=e[3*h],q=e[3*h+1],l=e[3*h+2],v.set(n,q,l),n=e[3*k],q=e[3*k+1],l=e[3*k+2],u.set(n,q,l),w.subVectors(u,v),y.subVectors(s,v),w.cross(y),f[3*g]+=w.x,f[3*g+1]+=w.y,f[3*g+2]+=w.z,f[3*h]+=w.x,f[3*h+1]+=w.y,
f[3*h+2]+=w.z,f[3*k]+=w.x,f[3*k+1]+=w.y,f[3*k+2]+=w.z}}else for(a=0,b=e.length;a<b;a+=9)n=e[a],q=e[a+1],l=e[a+2],s.set(n,q,l),n=e[a+3],q=e[a+4],l=e[a+5],v.set(n,q,l),n=e[a+6],q=e[a+7],l=e[a+8],u.set(n,q,l),w.subVectors(u,v),y.subVectors(s,v),w.cross(y),f[a]=w.x,f[a+1]=w.y,f[a+2]=w.z,f[a+3]=w.x,f[a+4]=w.y,f[a+5]=w.z,f[a+6]=w.x,f[a+7]=w.y,f[a+8]=w.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},computeTangents:function(){function a(a,b,c){l=d[3*a];s=d[3*a+1];v=d[3*a+2];u=d[3*b];w=d[3*b+1];y=d[3*
b+2];x=d[3*c];z=d[3*c+1];B=d[3*c+2];A=f[2*a];D=f[2*a+1];E=f[2*b];H=f[2*b+1];C=f[2*c];F=f[2*c+1];O=u-l;K=x-l;da=w-s;L=z-s;Q=y-v;V=B-v;P=E-A;I=C-A;G=H-D;Y=F-D;W=1/(P*Y-I*G);Z.set((Y*O-G*K)*W,(Y*da-G*L)*W,(Y*Q-G*V)*W);ga.set((P*K-I*O)*W,(P*L-I*da)*W,(P*V-I*Q)*W);k[a].add(Z);k[b].add(Z);k[c].add(Z);n[a].add(ga);n[b].add(ga);n[c].add(ga)}function b(a){r.x=e[3*a];r.y=e[3*a+1];r.z=e[3*a+2];Qa.copy(r);M=k[a];ia.copy(M);ia.sub(r.multiplyScalar(r.dot(M))).normalize();ba.crossVectors(Qa,M);wa=ba.dot(n[a]);Ua=
0>wa?-1:1;h[4*a]=ia.x;h[4*a+1]=ia.y;h[4*a+2]=ia.z;h[4*a+3]=Ua}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,d=this.attributes.position.array,e=this.attributes.normal.array,f=this.attributes.uv.array,g=d.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent=
{itemSize:4,array:new Float32Array(4*g)});for(var h=this.attributes.tangent.array,k=[],n=[],q=0;q<g;q++)k[q]=new THREE.Vector3,n[q]=new THREE.Vector3;var l,s,v,u,w,y,x,z,B,A,D,E,H,C,F,O,K,da,L,Q,V,P,I,G,Y,W,Z=new THREE.Vector3,ga=new THREE.Vector3,S,J,va,U,T,ra=this.offsets,q=0;for(J=ra.length;q<J;++q){S=ra[q].start;va=ra[q].count;var ma=ra[q].index,g=S;for(S+=va;g<S;g+=3)va=ma+c[g],U=ma+c[g+1],T=ma+c[g+2],a(va,U,T)}var ia=new THREE.Vector3,ba=new THREE.Vector3,r=new THREE.Vector3,Qa=new THREE.Vector3,
Ua,M,wa,q=0;for(J=ra.length;q<J;++q)for(S=ra[q].start,va=ra[q].count,ma=ra[q].index,g=S,S+=va;g<S;g+=3)va=ma+c[g],U=ma+c[g+1],T=ma+c[g+2],b(va),b(U),b(T)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);Date.now();a=this.attributes.index.array;for(var c=this.attributes.position.array,d=a.length/3,e=new Uint16Array(a.length),f=0,g=0,h=[{start:0,count:0,index:0}],k=h[0],n=0,q=0,l=new Int32Array(6),s=new Int32Array(c.length),v=new Int32Array(c.length),u=0;u<c.length;u++)s[u]=-1,v[u]=-1;for(c=
0;c<d;c++){for(var w=q=0;3>w;w++)u=a[3*c+w],-1==s[u]?(l[2*w]=u,l[2*w+1]=-1,q++):s[u]<k.index?(l[2*w]=u,l[2*w+1]=-1,n++):(l[2*w]=u,l[2*w+1]=s[u]);if(g+q>k.index+b)for(k={start:f,count:0,index:g},h.push(k),q=0;6>q;q+=2)w=l[q+1],-1<w&&w<k.index&&(l[q+1]=-1);for(q=0;6>q;q+=2)u=l[q],w=l[q+1],-1===w&&(w=g++),s[u]=w,v[w]=u,e[f++]=w-k.index,k.count++}this.reorderBuffers(e,v,g);return this.offsets=h},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var a=this.attributes.normal.array,
b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},reorderBuffers:function(a,b,c){var d={},e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f;for(f in this.attributes)if("index"!=f)for(var g=this.attributes[f].array,h=0,k=e.length;h<k;h++){var n=e[h];if(g instanceof n){d[f]=new n(this.attributes[f].itemSize*c);break}}for(e=0;e<c;e++)for(f in g=b[e],this.attributes)if("index"!=
f)for(var h=this.attributes[f].array,k=this.attributes[f].itemSize,n=d[f],q=0;q<k;q++)n[e*k+q]=h[g*k+q];this.attributes.index.array=a;for(f in this.attributes)"index"!=f&&(this.attributes[f].array=d[f],this.attributes[f].numItems=this.attributes[f].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,
array:null},d=0,g=b.length;d<g;d++){var h=b[d];if(e instanceof h){f.array=new h(e);break}}a.attributes[c]=f}d=0;for(g=this.offsets.length;d<g;d++)b=this.offsets[d],a.offsets.push({start:b.start,index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.groupsNeedUpdate=this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=
this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},
center:function(){this.computeBoundingBox();var a=new THREE.Vector3;a.addVectors(this.boundingBox.min,this.boundingBox.max);a.multiplyScalar(-.5);this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x,a.y,a.z));this.computeBoundingBox();return a},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},
computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new THREE.Vector3;if(a){var e,f,g,h=new THREE.Vector3,k=new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),k.subVectors(e,f),h.cross(k),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],
d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.vertexNormals[0]=d[c.a].clone(),c.vertexNormals[1]=d[c.b].clone(),c.vertexNormals[2]=d[c.c].clone()},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||
(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,h,k;c=
0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),g.push(k)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=
e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,g,h,k,n,q,l,s,v,u,w,y,x=[],z=[];c=new THREE.Vector3;var B=new THREE.Vector3,A=new THREE.Vector3,D=new THREE.Vector3,E=new THREE.Vector3;a=0;for(b=this.vertices.length;a<b;a++)x[a]=new THREE.Vector3,z[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,y=e.b,e=e.c,g=this.vertices[d],h=this.vertices[y],k=this.vertices[e],n=f[0],q=f[1],l=f[2],
f=h.x-g.x,s=k.x-g.x,v=h.y-g.y,u=k.y-g.y,h=h.z-g.z,g=k.z-g.z,k=q.x-n.x,w=l.x-n.x,q=q.y-n.y,n=l.y-n.y,l=1/(k*n-w*q),c.set((n*f-q*s)*l,(n*v-q*u)*l,(n*h-q*g)*l),B.set((k*s-w*f)*l,(k*u-w*v)*l,(k*g-w*h)*l),x[d].add(c),x[y].add(c),x[e].add(c),z[d].add(B),z[y].add(B),z[e].add(B);B=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(e=this.faces[a],c=0;c<Math.min(e.vertexNormals.length,3);c++)E.copy(e.vertexNormals[c]),d=e[B[c]],y=x[d],A.copy(y),A.sub(E.multiplyScalar(E.dot(y))).normalize(),D.crossVectors(e.vertexNormals[c],
y),d=D.dot(z[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(A.x,A.y,A.z,d);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},
merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,n=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var q=0,l=g.length;q<l;q++){var s=g[q].clone();void 0!==b&&s.applyMatrix4(b);f.push(s)}q=0;for(l=k.length;q<l;q++){var g=k[q],v,u=g.vertexNormals,w=
g.vertexColors,s=new THREE.Face3(g.a+e,g.b+e,g.c+e);s.normal.copy(g.normal);void 0!==d&&s.normal.applyMatrix3(d).normalize();b=0;for(f=u.length;b<f;b++)v=u[b].clone(),void 0!==d&&v.applyMatrix3(d).normalize(),s.vertexNormals.push(v);s.color.copy(g.color);b=0;for(f=w.length;b<f;b++)v=w[b],s.vertexColors.push(v.clone());s.materialIndex=g.materialIndex+c;h.push(s)}q=0;for(l=a.length;q<l;q++)if(c=a[q],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(new THREE.Vector2(c[b].x,c[b].y));n.push(d)}}},mergeVertices:function(){var a=
{},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,
1);f=this.vertices.length-b.length;this.vertices=b;return f},makeGroups:function(){var a=0;return function(b,c){var d,e,f,g,h={},k,n=this.morphTargets.length,q=this.morphNormals.length;this.geometryGroups={};this.geometryGroupsList=[];d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],f=b?f.materialIndex:0,f in h||(h[f]={hash:f,counter:0}),g=h[f].hash+"_"+h[f].counter,g in this.geometryGroups||(k={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:n,numMorphNormals:q},this.geometryGroups[g]=
k,this.geometryGroupsList.push(k)),this.geometryGroups[g].vertices+3>c&&(h[f].counter+=1,g=h[f].hash+"_"+h[f].counter,g in this.geometryGroups||(k={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:n,numMorphNormals:q},this.geometryGroups[g]=k,this.geometryGroupsList.push(k))),this.geometryGroups[g].faces3.push(d),this.geometryGroups[g].vertices+=3}}(),clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=
b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,h=e.length;g<h;g++)f.push(new THREE.Vector2(e[g].x,e[g].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);return a};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new THREE.Vector3(0,-1,0));this.add(g);var h=new THREE.PerspectiveCamera(90,
1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,s=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.generateMipmaps=s;c.activeCubeFace=5;a.render(b,k,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};
THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,.99,.998];this.shadowCascadeFarZ=[.99,.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=
this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;a.shadowCascade=this.shadowCascade;a.shadowCascadeOffset.copy(this.shadowCascadeOffset);a.shadowCascadeCount=this.shadowCascadeCount;a.shadowCascadeBias=this.shadowCascadeBias.slice(0);a.shadowCascadeWidth=this.shadowCascadeWidth.slice(0);a.shadowCascadeHeight=this.shadowCascadeHeight.slice(0);a.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0);
a.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0);return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};
THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);
THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraFov=this.shadowCameraFov;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=
this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.Cache=function(){this.files={}};THREE.Cache.prototype={constructor:THREE.Cache,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.imageLoader=new THREE.ImageLoader;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+
"%"):b+((a.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=this.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function d(a,
d,e,g,h,k,w){var y=b+e,x,z=THREE.Loader.Handlers.get(y);null!==z?x=z.load(y):(x=new THREE.Texture,z=f.imageLoader,z.crossOrigin=f.crossOrigin,z.load(y,function(a){if(!1===THREE.Math.isPowerOfTwo(a.width)||!1===THREE.Math.isPowerOfTwo(a.height)){var b=c(a.width),d=c(a.height),e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(a,0,0,b,d);x.image=e}else x.image=a;x.needsUpdate=!0}));x.sourceFile=e;g&&(x.repeat.set(g[0],g[1]),1!==g[0]&&(x.wrapS=THREE.RepeatWrapping),
1!==g[1]&&(x.wrapT=THREE.RepeatWrapping));h&&x.offset.set(h[0],h[1]);k&&(e={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==e[k[0]]&&(x.wrapS=e[k[0]]),void 0!==e[k[1]]&&(x.wrapT=e[k[1]]));w&&(x.anisotropy=w);a[d]=x}function e(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var f=this,g="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var k=a.shading.toLowerCase();"phong"===k?g="MeshPhongMaterial":
"basic"===k&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(h.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)h.transparent=a.transparent;void 0!==a.depthTest&&(h.depthTest=a.depthTest);void 0!==a.depthWrite&&(h.depthWrite=a.depthWrite);void 0!==a.visible&&(h.visible=a.visible);void 0!==a.flipSided&&(h.side=THREE.BackSide);void 0!==a.doubleSided&&(h.side=THREE.DoubleSide);void 0!==a.wireframe&&(h.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===
a.vertexColors?h.vertexColors=THREE.FaceColors:a.vertexColors&&(h.vertexColors=THREE.VertexColors));a.colorDiffuse?h.color=e(a.colorDiffuse):a.DbgColor&&(h.color=a.DbgColor);a.colorSpecular&&(h.specular=e(a.colorSpecular));a.colorAmbient&&(h.ambient=e(a.colorAmbient));a.colorEmissive&&(h.emissive=e(a.colorEmissive));a.transparency&&(h.opacity=a.transparency);a.specularCoef&&(h.shininess=a.specularCoef);a.mapDiffuse&&b&&d(h,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,
a.mapDiffuseAnisotropy);a.mapLight&&b&&d(h,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&d(h,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&d(h,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&d(h,"specularMap",a.mapSpecular,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapAlpha&&
b&&d(h,"alphaMap",a.mapAlpha,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);a.mapBumpScale&&(h.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,k=THREE.UniformsUtils.clone(g.uniforms),k.tNormal.value=h.normalMap,a.mapNormalFactor&&k.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),h.map&&(k.tDiffuse.value=h.map,k.enableDiffuse.value=!0),h.specularMap&&(k.tSpecular.value=h.specularMap,k.enableSpecular.value=!0),h.lightMap&&(k.tAO.value=h.lightMap,
k.enableAO.value=!0),k.diffuse.value.setHex(h.color),k.specular.value.setHex(h.specular),k.ambient.value.setHex(h.ambient),k.shininess.value=h.shininess,void 0!==h.opacity&&(k.opacity.value=h.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:k,lights:!0,fog:!0}),h.transparent&&(g.transparent=!0)):g=new THREE[g](h);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};
THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=0,c=this.handlers.length;b<c;b+=2){var d=this.handlers[b+1];if(this.handlers[b].test(a))return d}return null}};THREE.XHRLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);void 0!==f?b&&b(f):(f=new XMLHttpRequest,f.open("GET",a,!0),f.addEventListener("load",function(c){e.cache.add(a,this.response);b&&b(this.response);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(f.responseType=
this.responseType),f.send(null),e.manager.itemStart(a))},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);if(void 0!==f)b(f);else return f=document.createElement("img"),void 0!==b&&f.addEventListener("load",function(c){e.cache.add(a,this);b(this);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),f.src=a,e.manager.itemStart(a),f},setCrossOrigin:function(a){this.crossOrigin=
a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var h=JSON.parse(f.responseText);if(void 0!==h.metadata&&"scene"===h.metadata.type){console.error('THREE.JSONLoader: "'+b+'" seems to be a Scene. Use THREE.SceneLoader instead.');return}h=a.parse(h,d);c(h.geometry,h.materials)}else console.error('THREE.JSONLoader: "'+b+'" seems to be unreachable or the file is empty.');
a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+b+'" ('+f.status+")");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,h,k,n,q,l,s,v,u,w,y,x,z=a.faces;q=a.vertices;var B=a.normals,A=a.colors,D=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&D++;for(d=0;d<D;d++)c.faceVertexUvs[d]=[]}k=0;for(n=q.length;k<n;)d=new THREE.Vector3,d.x=q[k++]*b,d.y=q[k++]*b,d.z=q[k++]*b,c.vertices.push(d);k=0;for(n=z.length;k<n;)if(b=z[k++],v=b&1,h=b&2,d=b&8,l=b&16,u=b&32,q=b&64,b&=128,v){v=new THREE.Face3;
v.a=z[k];v.b=z[k+1];v.c=z[k+3];w=new THREE.Face3;w.a=z[k+1];w.b=z[k+2];w.c=z[k+3];k+=4;h&&(h=z[k++],v.materialIndex=h,w.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<D;d++)for(y=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4>g;g++)s=z[k++],x=y[2*s],s=y[2*s+1],x=new THREE.Vector2(x,s),2!==g&&c.faceVertexUvs[d][h].push(x),0!==g&&c.faceVertexUvs[d][h+1].push(x);l&&(l=3*z[k++],v.normal.set(B[l++],B[l++],B[l]),w.normal.copy(v.normal));if(u)for(d=0;4>d;d++)l=3*z[k++],u=new THREE.Vector3(B[l++],
B[l++],B[l]),2!==d&&v.vertexNormals.push(u),0!==d&&w.vertexNormals.push(u);q&&(q=z[k++],q=A[q],v.color.setHex(q),w.color.setHex(q));if(b)for(d=0;4>d;d++)q=z[k++],q=A[q],2!==d&&v.vertexColors.push(new THREE.Color(q)),0!==d&&w.vertexColors.push(new THREE.Color(q));c.faces.push(v);c.faces.push(w)}else{v=new THREE.Face3;v.a=z[k++];v.b=z[k++];v.c=z[k++];h&&(h=z[k++],v.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<D;d++)for(y=a.uvs[d],c.faceVertexUvs[d][h]=[],g=0;3>g;g++)s=z[k++],x=y[2*s],s=y[2*s+1],
x=new THREE.Vector2(x,s),c.faceVertexUvs[d][h].push(x);l&&(l=3*z[k++],v.normal.set(B[l++],B[l++],B[l]));if(u)for(d=0;3>d;d++)l=3*z[k++],u=new THREE.Vector3(B[l++],B[l++],B[l]),v.vertexNormals.push(u);q&&(q=z[k++],v.color.setHex(A[q]));if(b)for(d=0;3>d;d++)q=z[k++],v.vertexColors.push(new THREE.Color(A[q]));c.faces.push(v)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],
1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+
"), and skinWeights ("+c.skinWeights.length+") should match.");c.animation=a.animation;c.animations=a.animations})();(function(b){if(void 0!==a.morphTargets){var d,g,h,k,n,q;d=0;for(g=a.morphTargets.length;d<g;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=a.morphTargets[d].name,c.morphTargets[d].vertices=[],n=c.morphTargets[d].vertices,q=a.morphTargets[d].vertices,h=0,k=q.length;h<k;h+=3){var l=new THREE.Vector3;l.x=q[h]*b;l.y=q[h+1]*b;l.z=q[h+2]*b;n.push(l)}}if(void 0!==a.morphColors)for(d=
0,g=a.morphColors.length;d<g;d++)for(c.morphColors[d]={},c.morphColors[d].name=a.morphColors[d].name,c.morphColors[d].colors=[],k=c.morphColors[d].colors,n=a.morphColors[d].colors,b=0,h=n.length;b<h;b+=3)q=new THREE.Color(16755200),q.setRGB(n[b],n[b+1],n[b+2]),k.push(q)})(d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};
THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d;for(d in c){var e=c[d];b.attributes[d]={itemSize:e.itemSize,array:new self[e.type](e.array)}}c=a.offsets;void 0!==c&&(b.offsets=JSON.parse(JSON.stringify(c)));a=a.boundingSphere;
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=
0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(e.manager);f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var g,h=a[e];switch(h.type){case "PlaneGeometry":g=new THREE.PlaneGeometry(h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "CubeGeometry":g=new THREE.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":g=new THREE.CircleGeometry(h.radius,h.segments);break;case "CylinderGeometry":g=new THREE.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded);
break;case "SphereGeometry":g=new THREE.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "IcosahedronGeometry":g=new THREE.IcosahedronGeometry(h.radius,h.detail);break;case "TorusGeometry":g=new THREE.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":g=new THREE.TorusKnotGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale);break;case "BufferGeometry":g=
d.parse(h.data);break;case "Geometry":g=c.parse(h.data).geometry}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);b[h.uuid]=g}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],g=c.parse(f);g.uuid=f.uuid;void 0!==f.name&&(g.name=f.name);b[f.uuid]=g}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,
b.aspect,b.near,b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,
b.groundColor,b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?
(a.fromArray(b.matrix),a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var g in b.children)e.add(this.parseObject(b.children[g],c,d));return e}}()};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.ImageLoader(this.manager);e.setCrossOrigin(this.crossOrigin);e.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)},c,d)},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;
a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.wrapAround=this.metal=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=
1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.PointCloudMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.PointCloudMaterial.prototype.clone=function(){var a=new THREE.PointCloudMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.defines={};this.uniforms={};this.attributes=null;this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=
!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a)};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;THREE.ShaderMaterial.prototype.clone.call(this,a);return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};
THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(a,c){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;
THREE.Texture=function(a,b,c,d,e,f,g,h,k){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==k?k:1;this.format=void 0!==
g?g:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this._needsUpdate=!1;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=
this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CubeTexture=function(a,b,c,d,e,f,g,h,k){THREE.Texture.call(this,a,b,c,d,e,f,g,h,k);this.images=a};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.clone=function(a){void 0===a&&(a=new THREE.CubeTexture);THREE.Texture.prototype.clone.call(this,a);a.images=this.images;return a};THREE.CompressedTexture=function(a,b,c,d,e,f,g,h,k,n,q){THREE.Texture.call(this,null,f,g,h,k,n,d,e,q);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,g,h,k,n,q){THREE.Texture.call(this,null,f,g,h,k,n,d,e,q);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};
THREE.PointCloud=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointCloudMaterial({color:16777215*Math.random()});this.sortParticles=!1};THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype);
THREE.PointCloud.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){var e=this,f=e.geometry,g=c.params.PointCloud.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===f.boundingBox||!1!==b.isIntersectionBox(f.boundingBox)){var h=g/((this.scale.x+this.scale.y+this.scale.z)/3),k=new THREE.Vector3,g=function(a,f){var g=b.distanceToPoint(a);if(g<h){var k=b.closestPointToPoint(a);k.applyMatrix4(e.matrixWorld);var l=c.ray.origin.distanceTo(k);
d.push({distance:l,distanceToRay:g,point:k.clone(),index:f,face:null,object:e})}};if(f instanceof THREE.BufferGeometry){var n=f.attributes,q=n.position.array;if(void 0!==n.index){var n=n.index.array,l=f.offsets;0===l.length&&(l=[{start:0,count:n.length,index:0}]);for(var s=0,v=l.length;s<v;++s)for(var u=l[s].start,w=l[s].index,f=u,u=u+l[s].count;f<u;f++){var y=w+n[f];k.set(q[3*y],q[3*y+1],q[3*y+2]);g(k,y)}}else for(n=q.length/3,f=0;f<n;f++)k.set(q[3*f],q[3*f+1],q[3*f+2]),g(k,f)}else for(k=this.geometry.vertices,
f=0;f<k.length;f++)g(k[f],f)}}}();THREE.PointCloud.prototype.clone=function(a){void 0===a&&(a=new THREE.PointCloud(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new THREE.PointCloud(a,b)};
THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(d.ray).applyMatrix4(a),g instanceof THREE.Geometry))for(var g=g.vertices,h=g.length,k=new THREE.Vector3,n=new THREE.Vector3,q=this.type===THREE.LineStrip?
1:2,l=0;l<h-1;l+=q)if(!(b.distanceSqToSegment(g[l],g[l+1],n,k)>f)){var s=b.origin.distanceTo(n);s<d.near||s>d.far||e.push({distance:s,point:k.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}();THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3;return function(g,h){var k=this.geometry;null===k.boundingSphere&&k.computeBoundingSphere();c.copy(k.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==g.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(g.ray).applyMatrix4(a),null===k.boundingBox||!1!==b.isIntersectionBox(k.boundingBox)))if(k instanceof THREE.BufferGeometry){var n=
this.material;if(void 0!==n){var q=k.attributes,l,s,v=g.precision;if(void 0!==q.index){var u=q.index.array,w=q.position.array,y=k.offsets;0===y.length&&(y=[{start:0,count:u.length,index:0}]);for(var x=0,z=y.length;x<z;++x)for(var q=y[x].start,B=y[x].index,k=q,A=q+y[x].count;k<A;k+=3){q=B+u[k];l=B+u[k+1];s=B+u[k+2];d.set(w[3*q],w[3*q+1],w[3*q+2]);e.set(w[3*l],w[3*l+1],w[3*l+2]);f.set(w[3*s],w[3*s+1],w[3*s+2]);var D=n.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,n.side!==
THREE.DoubleSide);if(null!==D){D.applyMatrix4(this.matrixWorld);var E=g.ray.origin.distanceTo(D);E<v||E<g.near||E>g.far||h.push({distance:E,point:D,indices:[q,l,s],face:null,faceIndex:null,object:this})}}}else for(w=q.position.array,u=k=0,A=w.length;k<A;k+=3,u+=9)q=k,l=k+1,s=k+2,d.set(w[u],w[u+1],w[u+2]),e.set(w[u+3],w[u+4],w[u+5]),f.set(w[u+6],w[u+7],w[u+8]),D=n.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,n.side!==THREE.DoubleSide),null!==D&&(D.applyMatrix4(this.matrixWorld),
E=g.ray.origin.distanceTo(D),E<v||E<g.near||E>g.far||h.push({distance:E,point:D,indices:[q,l,s],face:null,faceIndex:null,object:this}))}}else if(k instanceof THREE.Geometry)for(u=this.material instanceof THREE.MeshFaceMaterial,w=!0===u?this.material.materials:null,v=g.precision,y=k.vertices,x=0,z=k.faces.length;x<z;x++)if(B=k.faces[x],n=!0===u?w[B.materialIndex]:this.material,void 0!==n){q=y[B.a];l=y[B.b];s=y[B.c];if(!0===n.morphTargets){D=k.morphTargets;E=this.morphTargetInfluences;d.set(0,0,0);
e.set(0,0,0);f.set(0,0,0);for(var A=0,H=D.length;A<H;A++){var C=E[A];if(0!==C){var F=D[A].vertices;d.x+=(F[B.a].x-q.x)*C;d.y+=(F[B.a].y-q.y)*C;d.z+=(F[B.a].z-q.z)*C;e.x+=(F[B.b].x-l.x)*C;e.y+=(F[B.b].y-l.y)*C;e.z+=(F[B.b].z-l.z)*C;f.x+=(F[B.c].x-s.x)*C;f.y+=(F[B.c].y-s.y)*C;f.z+=(F[B.c].z-s.z)*C}}d.add(q);e.add(l);f.add(s);q=d;l=e;s=f}D=n.side===THREE.BackSide?b.intersectTriangle(s,l,q,!0):b.intersectTriangle(q,l,s,n.side!==THREE.DoubleSide);null!==D&&(D.applyMatrix4(this.matrixWorld),E=g.ray.origin.distanceTo(D),
E<v||E<g.near||E>g.far||h.push({distance:E,point:D,face:B,faceIndex:x,object:this}))}}}();THREE.Mesh.prototype.clone=function(a,b){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a,b);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.updateMatrixWorld=function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a);this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),
this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};
THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};
THREE.Skeleton.prototype.update=function(){for(var a=new THREE.Matrix4,b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e,f,g,h=0,k=this.geometry.bones.length;h<k;++h)d=this.geometry.bones[h],e=d.pos,f=d.rotq,g=d.scl,b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.set(e[0],e[1],e[2]),b.quaternion.set(f[0],f[1],f[2],f[3]),void 0!==g?b.scale.set(g[0],g[1],g[2]):b.scale.set(1,1,1);h=0;for(k=
this.geometry.bones.length;h<k;++h)d=this.geometry.bones[h],-1!==d.parent?a[d.parent].add(a[h]):this.add(a[h])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c))};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)};
THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)_?(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var g=a.morphTargets[e].name.match(d);if(g&&1<g.length){g=g[1];c[g]||(c[g]={start:Infinity,end:-Infinity});var h=c[g];e<h.start&&(h.start=e);e>h.end&&(h.end=e);b||(b=g)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=(c.end-c.start)/b*1E3,this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.interpolateTargets=function(a,b,c){for(var d=this.morphTargetInfluences,e=0,f=d.length;e<f;e++)d[e]=0;-1<a&&(d[a]=1-c);-1<b&&(d[b]=c)};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();
THREE.LOD.prototype.clone=function(a){void 0===a&&(a=new THREE.LOD);THREE.Object3D.prototype.clone.call(this,a);for(var b=0,c=this.objects.length;b<c;b++){var d=this.objects[b].object.clone();d.visible=0===b;a.addLevel(d,this.objects[b].distance)}return a};
THREE.Sprite=function(){var a=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(a,3));return function(a){THREE.Object3D.call(this);this.geometry=b;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);
THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceToPoint(a);d>this.scale.x||c.push({distance:d,point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};
THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a});a.dispatchEvent({type:"addedToScene",scene:this});for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));this.dispatchEvent({type:"objectRemoved",object:a});a.dispatchEvent({type:"removedFromScene",scene:this});for(b=
0;b<a.children.length;b++)this.__removeObject(a.children[b])};THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};
THREE.CanvasRenderer=function(a){function b(a,b,c,d){n(b);q(c);l(d);s(a.getStyle());Q.stroke();X.expandByScalar(2*b)}function c(a){v(a.getStyle());Q.fill()}function d(a){e(a.target)}function e(a){if(!(a instanceof THREE.CompressedTexture)){var b=a.wrapS===THREE.RepeatWrapping,c=a.wrapT===THREE.RepeatWrapping,d=a.image,e=document.createElement("canvas");e.width=d.width;e.height=d.height;var f=e.getContext("2d");f.setTransform(1,0,0,-1,0,d.height);f.drawImage(d,0,0);$a[a.id]=Q.createPattern(e,!0===
b&&!0===c?"repeat":!0===b&&!1===c?"repeat-x":!1===b&&!0===c?"repeat-y":"no-repeat")}}function f(a,b,c,f,g,h,k,l,n,q,r,u,s){if(!(s instanceof THREE.DataTexture)){!1===s.hasEventListener("update",d)&&(void 0!==s.image&&0<s.image.width&&e(s),s.addEventListener("update",d));var p=$a[s.id];if(void 0!==p){v(p);var p=s.offset.x/s.repeat.x,w=s.offset.y/s.repeat.y,x=s.image.width*s.repeat.x;s=s.image.height*s.repeat.y;k=(k+p)*x;l=(l+w)*s;c-=a;f-=b;g-=a;h-=b;n=(n+p)*x-k;q=(q+w)*s-l;r=(r+p)*x-k;u=(u+w)*s-l;
s=n*u-r*q;0!==s&&(p=1/s,s=(u*c-q*g)*p,q=(u*f-q*h)*p,c=(n*g-r*c)*p,f=(n*h-r*f)*p,a=a-s*k-c*l,b=b-q*k-f*l,Q.save(),Q.transform(s,q,c,f,a,b),Q.fill(),Q.restore())}else v("rgba(0,0,0,1)"),Q.fill()}}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function h(a){I!==a&&(I=Q.globalAlpha=a)}function k(a){G!==a&&(a===THREE.NormalBlending?Q.globalCompositeOperation="source-over":a===THREE.AdditiveBlending?Q.globalCompositeOperation="lighter":
a===THREE.SubtractiveBlending&&(Q.globalCompositeOperation="darker"),G=a)}function n(a){Z!==a&&(Z=Q.lineWidth=a)}function q(a){ga!==a&&(ga=Q.lineCap=a)}function l(a){S!==a&&(S=Q.lineJoin=a)}function s(a){Y!==a&&(Y=Q.strokeStyle=a)}function v(a){W!==a&&(W=Q.fillStyle=a)}function u(a){J.length!==a.length&&(Q.setLineDash(a),J=a)}console.log("THREE.CanvasRenderer",THREE.REVISION);var w=THREE.Math.smoothstep;a=a||{};var y=this,x,z,B,A=new THREE.Projector,D=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
E=D.width,H=D.height,C=Math.floor(E/2),F=Math.floor(H/2),O=0,K=0,da=E,L=H,Q=D.getContext("2d",{alpha:!0===a.alpha}),V=new THREE.Color(0),P=0,I=1,G=0,Y=null,W=null,Z=null,ga=null,S=null,J=[],va,U,T,ra;new THREE.RenderableVertex;new THREE.RenderableVertex;var ma,ia,ba,r,Qa,Ua,M=new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;var wa=new THREE.Color,Ha=new THREE.Color,Ma=new THREE.Color,$a={},la,sa,ya,Ia,Fa,ua,za,Na=new THREE.Box2,aa=new THREE.Box2,X=new THREE.Box2,pa=
new THREE.Color,Ya=new THREE.Color,fb=new THREE.Color,Ja=new THREE.Vector3,na=new THREE.Vector3,qa=new THREE.Vector3,Ga=new THREE.Matrix3;void 0===Q.setLineDash&&(Q.setLineDash=function(){});this.domElement=D;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=
function(a,b,c){E=a*this.devicePixelRatio;H=b*this.devicePixelRatio;D.width=E;D.height=H;C=Math.floor(E/2);F=Math.floor(H/2);!1!==c&&(D.style.width=a+"px",D.style.height=b+"px");Na.min.set(-C,-F);Na.max.set(C,F);aa.min.set(-C,-F);aa.max.set(C,F);I=1;G=0;S=ga=Z=W=Y=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){O=a*this.devicePixelRatio;K=b*this.devicePixelRatio;da=c*this.devicePixelRatio;L=d*this.devicePixelRatio};this.setScissor=function(){};this.enableScissorTest=function(){};
this.setClearColor=function(a,b){V.set(a);P=void 0!==b?b:1;aa.min.set(-C,-F);aa.max.set(C,F)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return V};this.getClearAlpha=function(){return P};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===aa.empty()&&(aa.intersect(Na),aa.expandByScalar(2),aa.min.x+=C,aa.min.y=-aa.min.y+F,aa.max.x+=
C,aa.max.y=-aa.max.y+F,1>P&&Q.clearRect(aa.min.x|0,aa.min.y|0,aa.max.x-aa.min.x|0,aa.max.y-aa.min.y|0),0<P&&(k(THREE.NormalBlending),h(1),v("rgba("+Math.floor(255*V.r)+","+Math.floor(255*V.g)+","+Math.floor(255*V.b)+","+P+")"),Q.fillRect(aa.min.x|0,aa.min.y|0,aa.max.x-aa.min.x|0,aa.max.y-aa.min.y|0)),aa.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,D){if(!1===D instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
else{!0===this.autoClear&&this.clear();y.info.render.vertices=0;y.info.render.faces=0;Q.setTransform(da/E,0,0,-L/H,O,H-K);Q.translate(C,F);x=A.projectScene(a,D,this.sortObjects,this.sortElements);z=x.elements;B=x.lights;va=D;Ga.getNormalMatrix(D.matrixWorldInverse);pa.setRGB(0,0,0);Ya.setRGB(0,0,0);fb.setRGB(0,0,0);for(var V=0,G=B.length;V<G;V++){var I=B[V],P=I.color;I instanceof THREE.AmbientLight?pa.add(P):I instanceof THREE.DirectionalLight?Ya.add(P):I instanceof THREE.PointLight&&fb.add(P)}V=
0;for(G=z.length;V<G;V++){var J=z[V],W=J.material;if(void 0!==W&&0!==W.opacity){X.makeEmpty();if(J instanceof THREE.RenderableSprite){U=J;U.x*=C;U.y*=F;var I=U,Y=J,P=W;h(P.opacity);k(P.blending);var ja=Y.scale.x*C,Y=Y.scale.y*F,J=.5*Math.sqrt(ja*ja+Y*Y);X.min.set(I.x-J,I.y-J);X.max.set(I.x+J,I.y+J);if(P instanceof THREE.SpriteMaterial){var ha=P.map;if(null!==ha&&void 0!==ha.image){!1===ha.hasEventListener("update",d)&&(0<ha.image.width&&e(ha),ha.addEventListener("update",d));J=$a[ha.id];void 0!==
J?v(J):v("rgba( 0, 0, 0, 1 )");var Z=ha.image,J=Z.width*ha.offset.x,W=Z.height*ha.offset.y,S=Z.width*ha.repeat.x,ha=Z.height*ha.repeat.y,Z=ja/S,p=Y/ha;Q.save();Q.translate(I.x,I.y);0!==P.rotation&&Q.rotate(P.rotation);Q.translate(-ja/2,-Y/2);Q.scale(Z,p);Q.translate(-J,-W);Q.fillRect(J,W,S,ha)}else v(P.color.getStyle()),Q.save(),Q.translate(I.x,I.y),0!==P.rotation&&Q.rotate(P.rotation),Q.scale(ja,-Y),Q.fillRect(-.5,-.5,1,1);Q.restore()}else P instanceof THREE.SpriteCanvasMaterial&&(s(P.color.getStyle()),
v(P.color.getStyle()),Q.save(),Q.translate(I.x,I.y),0!==P.rotation&&Q.rotate(P.rotation),Q.scale(ja,Y),P.program(Q),Q.restore())}else if(J instanceof THREE.RenderableLine){if(U=J.v1,T=J.v2,U.positionScreen.x*=C,U.positionScreen.y*=F,T.positionScreen.x*=C,T.positionScreen.y*=F,X.setFromPoints([U.positionScreen,T.positionScreen]),!0===Na.isIntersectionBox(X))if(I=U,P=T,ja=J,Y=W,h(Y.opacity),k(Y.blending),Q.beginPath(),Q.moveTo(I.positionScreen.x,I.positionScreen.y),Q.lineTo(P.positionScreen.x,P.positionScreen.y),
Y instanceof THREE.LineBasicMaterial){n(Y.linewidth);q(Y.linecap);l(Y.linejoin);if(Y.vertexColors!==THREE.VertexColors)s(Y.color.getStyle());else if(J=ja.vertexColors[0].getStyle(),ja=ja.vertexColors[1].getStyle(),J===ja)s(J);else{try{var ga=Q.createLinearGradient(I.positionScreen.x,I.positionScreen.y,P.positionScreen.x,P.positionScreen.y);ga.addColorStop(0,J);ga.addColorStop(1,ja)}catch(wb){ga=J}s(ga)}Q.stroke();X.expandByScalar(2*Y.linewidth)}else Y instanceof THREE.LineDashedMaterial&&(n(Y.linewidth),
q(Y.linecap),l(Y.linejoin),s(Y.color.getStyle()),u([Y.dashSize,Y.gapSize]),Q.stroke(),X.expandByScalar(2*Y.linewidth),u([]))}else if(J instanceof THREE.RenderableFace){U=J.v1;T=J.v2;ra=J.v3;if(-1>U.positionScreen.z||1<U.positionScreen.z)continue;if(-1>T.positionScreen.z||1<T.positionScreen.z)continue;if(-1>ra.positionScreen.z||1<ra.positionScreen.z)continue;U.positionScreen.x*=C;U.positionScreen.y*=F;T.positionScreen.x*=C;T.positionScreen.y*=F;ra.positionScreen.x*=C;ra.positionScreen.y*=F;0<W.overdraw&&
(g(U.positionScreen,T.positionScreen,W.overdraw),g(T.positionScreen,ra.positionScreen,W.overdraw),g(ra.positionScreen,U.positionScreen,W.overdraw));X.setFromPoints([U.positionScreen,T.positionScreen,ra.positionScreen]);if(!0===Na.isIntersectionBox(X)){P=U;ja=T;Y=ra;I=W;y.info.render.vertices+=3;y.info.render.faces++;h(I.opacity);k(I.blending);ma=P.positionScreen.x;ia=P.positionScreen.y;ba=ja.positionScreen.x;r=ja.positionScreen.y;Qa=Y.positionScreen.x;Ua=Y.positionScreen.y;var W=ma,S=ia,ha=ba,Z=r,
p=Qa,La=Ua;Q.beginPath();Q.moveTo(W,S);Q.lineTo(ha,Z);Q.lineTo(p,La);Q.closePath();if((I instanceof THREE.MeshLambertMaterial||I instanceof THREE.MeshPhongMaterial)&&null===I.map){wa.copy(I.color);Ha.copy(I.emissive);I.vertexColors===THREE.FaceColors&&wa.multiply(J.color);M.copy(pa);na.copy(P.positionWorld).add(ja.positionWorld).add(Y.positionWorld).divideScalar(3);P=na;ja=J.normalModel;Y=M;J=0;for(W=B.length;J<W;J++)S=B[J],Ma.copy(S.color),S instanceof THREE.DirectionalLight?(ha=Ja.setFromMatrixPosition(S.matrixWorld).normalize(),
Z=ja.dot(ha),0>=Z||(Z*=S.intensity,Y.add(Ma.multiplyScalar(Z)))):S instanceof THREE.PointLight&&(ha=Ja.setFromMatrixPosition(S.matrixWorld),Z=ja.dot(Ja.subVectors(ha,P).normalize()),0>=Z||(Z*=0==S.distance?1:1-Math.min(P.distanceTo(ha)/S.distance,1),0!=Z&&(Z*=S.intensity,Y.add(Ma.multiplyScalar(Z)))));M.multiply(wa).add(Ha);!0===I.wireframe?b(M,I.wireframeLinewidth,I.wireframeLinecap,I.wireframeLinejoin):c(M)}else I instanceof THREE.MeshBasicMaterial||I instanceof THREE.MeshLambertMaterial||I instanceof
THREE.MeshPhongMaterial?null!==I.map?I.map.mapping instanceof THREE.UVMapping&&(la=J.uvs,f(ma,ia,ba,r,Qa,Ua,la[0].x,la[0].y,la[1].x,la[1].y,la[2].x,la[2].y,I.map)):null!==I.envMap?I.envMap.mapping instanceof THREE.SphericalReflectionMapping?(qa.copy(J.vertexNormalsModel[0]).applyMatrix3(Ga),sa=.5*qa.x+.5,ya=.5*qa.y+.5,qa.copy(J.vertexNormalsModel[1]).applyMatrix3(Ga),Ia=.5*qa.x+.5,Fa=.5*qa.y+.5,qa.copy(J.vertexNormalsModel[2]).applyMatrix3(Ga),ua=.5*qa.x+.5,za=.5*qa.y+.5,f(ma,ia,ba,r,Qa,Ua,sa,ya,
Ia,Fa,ua,za,I.envMap)):I.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(qa.copy(J.vertexNormalsModel[0]).applyMatrix3(Ga),sa=-.5*qa.x+.5,ya=-.5*qa.y+.5,qa.copy(J.vertexNormalsModel[1]).applyMatrix3(Ga),Ia=-.5*qa.x+.5,Fa=-.5*qa.y+.5,qa.copy(J.vertexNormalsModel[2]).applyMatrix3(Ga),ua=-.5*qa.x+.5,za=-.5*qa.y+.5,f(ma,ia,ba,r,Qa,Ua,sa,ya,Ia,Fa,ua,za,I.envMap)):(M.copy(I.color),I.vertexColors===THREE.FaceColors&&M.multiply(J.color),!0===I.wireframe?b(M,I.wireframeLinewidth,I.wireframeLinecap,
I.wireframeLinejoin):c(M)):(I instanceof THREE.MeshDepthMaterial?M.r=M.g=M.b=1-w(P.positionScreen.z*P.positionScreen.w,va.near,va.far):I instanceof THREE.MeshNormalMaterial?(qa.copy(J.normalModel).applyMatrix3(Ga),M.setRGB(qa.x,qa.y,qa.z).multiplyScalar(.5).addScalar(.5)):M.setRGB(1,1,1),!0===I.wireframe?b(M,I.wireframeLinewidth,I.wireframeLinecap,I.wireframeLinejoin):c(M))}}aa.union(X)}}Q.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={};THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";
THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";
THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif";THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif";
THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n";
THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif";
THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif";
THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",
value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},
hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},
opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,
THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,
THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,
{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,
THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},
specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,
THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,
THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",
THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,
"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,
"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,
"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",
value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},
specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",
THREE.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",
THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3);f.size=g;f.array=new Float32Array(c*g);f.buffer=p.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,g=a.faces3,h=3*g.length,k=1*g.length,l=3*g.length,g=d(b,a),n=f(g),q=e(g),r=g.vertexColors?g.vertexColors:!1;a.__vertexArray=new Float32Array(3*h);q&&(a.__normalArray=new Float32Array(3*h));c.hasTangents&&(a.__tangentArray=new Float32Array(4*h));r&&(a.__colorArray=new Float32Array(3*h));n&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*h)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*h)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*h),a.__skinWeightArray=new Float32Array(4*h));c=null!==Jb&&21845<k?Uint32Array:Uint16Array;a.__typeArray=c;a.__faceArray=new c(3*k);a.__lineArray=new c(2*l);if(a.numMorphTargets)for(a.__morphTargetsArrays=[],c=0,n=a.numMorphTargets;c<n;c++)a.__morphTargetsArrays.push(new Float32Array(3*h));if(a.numMorphNormals)for(a.__morphNormalsArrays=[],c=0,n=a.numMorphNormals;c<n;c++)a.__morphNormalsArrays.push(new Float32Array(3*h));a.__webglFaceCount=3*k;a.__webglLineCount=
2*l;if(g.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var s in g.attributes){var k=g.attributes[s],l={},u;for(u in k)l[u]=k[u];if(!l.__webglInitialized||l.createUniqueBuffers)l.__webglInitialized=!0,c=1,"v2"===l.type?c=2:"v3"===l.type?c=3:"v4"===l.type?c=4:"c"===l.type&&(c=3),l.size=c,l.array=new Float32Array(h*c),l.buffer=p.createBuffer(),l.buffer.belongsToAttribute=s,k.needsUpdate=!0,l.__original=k;a.__webglCustomAttributesList.push(l)}}a.__inittedArrays=
!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a instanceof THREE.ShaderMaterial?!0:!1}function g(a){for(var b in a.attributes){var c=
"index"===b?p.ELEMENT_ARRAY_BUFFER:p.ARRAY_BUFFER,d=a.attributes[b];d.buffer=p.createBuffer();p.bindBuffer(c,d.buffer);p.bufferData(c,d.array,p.STATIC_DRAW)}}function h(a,b,c,d){for(var e in b){var f=b[e],g=c[e];if(0<=f)if(g){var h=g.itemSize;p.bindBuffer(p.ARRAY_BUFFER,g.buffer);n(f);p.vertexAttribPointer(f,h,p.FLOAT,!1,0,d*h*4)}else a.defaultAttributeValues&&(2===a.defaultAttributeValues[e].length?p.vertexAttrib2fv(f,a.defaultAttributeValues[e]):3===a.defaultAttributeValues[e].length&&p.vertexAttrib3fv(f,
a.defaultAttributeValues[e]))}q()}function k(){for(var a=0,b=Oa.length;a<b;a++)Oa[a]=0}function n(a){Oa[a]=1;0===rb[a]&&(p.enableVertexAttribArray(a),rb[a]=1)}function q(){for(var a=0,b=rb.length;a<b;a++)rb[a]!==Oa[a]&&(p.disableVertexAttribArray(a),rb[a]=0)}function l(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function s(a,b){return a.z!==b.z?a.z-b.z:a.id-b.id}function v(a,b){return b[0]-a[0]}function u(a,b,h){if(!1!==b.visible){var k=a.__webglObjects[b.id];if(k&&(!1===b.frustumCulled||!0===kb.intersectsObject(b))){var l=
b.geometry,n,q,r;if(l instanceof THREE.BufferGeometry){var s=p.DYNAMIC_DRAW,w=l.attributes,x,z;for(x in w)z=w[x],z.needsUpdate&&("index"===x?(p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,z.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,z.array,s)):(p.bindBuffer(p.ARRAY_BUFFER,z.buffer),p.bufferData(p.ARRAY_BUFFER,z.array,s)),z.needsUpdate=!1)}else if(b instanceof THREE.Mesh){if(l.buffersNeedUpdate||l.groupsNeedUpdate)l instanceof THREE.BufferGeometry?g(l):b instanceof THREE.Mesh&&B(a,b,l);for(var y=0,A=l.geometryGroupsList.length;y<
A;y++)if(n=l.geometryGroupsList[y],r=d(b,n),(l.buffersNeedUpdate||l.groupsNeedUpdate)&&c(n,b),q=r.attributes&&D(r),l.verticesNeedUpdate||l.morphTargetsNeedUpdate||l.elementsNeedUpdate||l.uvsNeedUpdate||l.normalsNeedUpdate||l.colorsNeedUpdate||l.tangentsNeedUpdate||q){var C=n,Q=b,H=p.DYNAMIC_DRAW,F=!l.dynamic,I=r;if(C.__inittedArrays){var P=e(I),V=I.vertexColors?I.vertexColors:!1,J=f(I),O=P===THREE.SmoothShading,G=void 0,K=void 0,W=void 0,L=void 0,da=void 0,Y=void 0,ra=void 0,X=void 0,ia=void 0,ba=
void 0,Z=void 0,S=void 0,U=void 0,T=void 0,aa=void 0,ma=void 0,wa=void 0,ga=void 0,ca=void 0,ha=void 0,la=void 0,pa=void 0,sa=void 0,qa=void 0,ua=void 0,va=void 0,Ha=void 0,za=void 0,Aa=void 0,na=void 0,Ia=void 0,Fa=void 0,Ja=void 0,Na=void 0,ya=void 0,$a=void 0,Ga=void 0,Ma=void 0,Va=void 0,Ya=void 0,La=0,Oa=0,ab=0,fb=0,hb=0,zb=0,jb=0,Za=0,pb=0,Ea=0,Ra=0,R=0,gb=void 0,Ab=C.__vertexArray,qb=C.__uvArray,rb=C.__uv2Array,cb=C.__normalArray,mb=C.__tangentArray,Bb=C.__colorArray,nb=C.__skinIndexArray,
lb=C.__skinWeightArray,vb=C.__morphTargetsArrays,wb=C.__morphNormalsArrays,xb=C.__webglCustomAttributesList,N=void 0,ub=C.__faceArray,Xb=C.__lineArray,bb=Q.geometry,Pb=bb.elementsNeedUpdate,Jb=bb.uvsNeedUpdate,Sb=bb.normalsNeedUpdate,Tb=bb.tangentsNeedUpdate,Ub=bb.colorsNeedUpdate,Vb=bb.morphTargetsNeedUpdate,Ib=bb.vertices,ta=C.faces3,yb=bb.faces,Qb=bb.faceVertexUvs[0],Rb=bb.faceVertexUvs[1],Lb=bb.skinIndices,Hb=bb.skinWeights,Kb=bb.morphTargets,Yb=bb.morphNormals;if(bb.verticesNeedUpdate){G=0;for(K=
ta.length;G<K;G++)L=yb[ta[G]],S=Ib[L.a],U=Ib[L.b],T=Ib[L.c],Ab[Oa]=S.x,Ab[Oa+1]=S.y,Ab[Oa+2]=S.z,Ab[Oa+3]=U.x,Ab[Oa+4]=U.y,Ab[Oa+5]=U.z,Ab[Oa+6]=T.x,Ab[Oa+7]=T.y,Ab[Oa+8]=T.z,Oa+=9;p.bindBuffer(p.ARRAY_BUFFER,C.__webglVertexBuffer);p.bufferData(p.ARRAY_BUFFER,Ab,H)}if(Vb)for(ya=0,$a=Kb.length;ya<$a;ya++){G=Ra=0;for(K=ta.length;G<K;G++)Va=ta[G],L=yb[Va],S=Kb[ya].vertices[L.a],U=Kb[ya].vertices[L.b],T=Kb[ya].vertices[L.c],Ga=vb[ya],Ga[Ra]=S.x,Ga[Ra+1]=S.y,Ga[Ra+2]=S.z,Ga[Ra+3]=U.x,Ga[Ra+4]=U.y,Ga[Ra+
5]=U.z,Ga[Ra+6]=T.x,Ga[Ra+7]=T.y,Ga[Ra+8]=T.z,I.morphNormals&&(O?(Ya=Yb[ya].vertexNormals[Va],ga=Ya.a,ca=Ya.b,ha=Ya.c):ha=ca=ga=Yb[ya].faceNormals[Va],Ma=wb[ya],Ma[Ra]=ga.x,Ma[Ra+1]=ga.y,Ma[Ra+2]=ga.z,Ma[Ra+3]=ca.x,Ma[Ra+4]=ca.y,Ma[Ra+5]=ca.z,Ma[Ra+6]=ha.x,Ma[Ra+7]=ha.y,Ma[Ra+8]=ha.z),Ra+=9;p.bindBuffer(p.ARRAY_BUFFER,C.__webglMorphTargetsBuffers[ya]);p.bufferData(p.ARRAY_BUFFER,vb[ya],H);I.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,C.__webglMorphNormalsBuffers[ya]),p.bufferData(p.ARRAY_BUFFER,wb[ya],
H))}if(Hb.length){G=0;for(K=ta.length;G<K;G++)L=yb[ta[G]],qa=Hb[L.a],ua=Hb[L.b],va=Hb[L.c],lb[Ea]=qa.x,lb[Ea+1]=qa.y,lb[Ea+2]=qa.z,lb[Ea+3]=qa.w,lb[Ea+4]=ua.x,lb[Ea+5]=ua.y,lb[Ea+6]=ua.z,lb[Ea+7]=ua.w,lb[Ea+8]=va.x,lb[Ea+9]=va.y,lb[Ea+10]=va.z,lb[Ea+11]=va.w,Ha=Lb[L.a],za=Lb[L.b],Aa=Lb[L.c],nb[Ea]=Ha.x,nb[Ea+1]=Ha.y,nb[Ea+2]=Ha.z,nb[Ea+3]=Ha.w,nb[Ea+4]=za.x,nb[Ea+5]=za.y,nb[Ea+6]=za.z,nb[Ea+7]=za.w,nb[Ea+8]=Aa.x,nb[Ea+9]=Aa.y,nb[Ea+10]=Aa.z,nb[Ea+11]=Aa.w,Ea+=12;0<Ea&&(p.bindBuffer(p.ARRAY_BUFFER,
C.__webglSkinIndicesBuffer),p.bufferData(p.ARRAY_BUFFER,nb,H),p.bindBuffer(p.ARRAY_BUFFER,C.__webglSkinWeightsBuffer),p.bufferData(p.ARRAY_BUFFER,lb,H))}if(Ub&&V){G=0;for(K=ta.length;G<K;G++)L=yb[ta[G]],ra=L.vertexColors,X=L.color,3===ra.length&&V===THREE.VertexColors?(la=ra[0],pa=ra[1],sa=ra[2]):sa=pa=la=X,Bb[pb]=la.r,Bb[pb+1]=la.g,Bb[pb+2]=la.b,Bb[pb+3]=pa.r,Bb[pb+4]=pa.g,Bb[pb+5]=pa.b,Bb[pb+6]=sa.r,Bb[pb+7]=sa.g,Bb[pb+8]=sa.b,pb+=9;0<pb&&(p.bindBuffer(p.ARRAY_BUFFER,C.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,
Bb,H))}if(Tb&&bb.hasTangents){G=0;for(K=ta.length;G<K;G++)L=yb[ta[G]],ia=L.vertexTangents,aa=ia[0],ma=ia[1],wa=ia[2],mb[jb]=aa.x,mb[jb+1]=aa.y,mb[jb+2]=aa.z,mb[jb+3]=aa.w,mb[jb+4]=ma.x,mb[jb+5]=ma.y,mb[jb+6]=ma.z,mb[jb+7]=ma.w,mb[jb+8]=wa.x,mb[jb+9]=wa.y,mb[jb+10]=wa.z,mb[jb+11]=wa.w,jb+=12;p.bindBuffer(p.ARRAY_BUFFER,C.__webglTangentBuffer);p.bufferData(p.ARRAY_BUFFER,mb,H)}if(Sb&&P){G=0;for(K=ta.length;G<K;G++)if(L=yb[ta[G]],da=L.vertexNormals,Y=L.normal,3===da.length&&O)for(na=0;3>na;na++)Fa=da[na],
cb[zb]=Fa.x,cb[zb+1]=Fa.y,cb[zb+2]=Fa.z,zb+=3;else for(na=0;3>na;na++)cb[zb]=Y.x,cb[zb+1]=Y.y,cb[zb+2]=Y.z,zb+=3;p.bindBuffer(p.ARRAY_BUFFER,C.__webglNormalBuffer);p.bufferData(p.ARRAY_BUFFER,cb,H)}if(Jb&&Qb&&J){G=0;for(K=ta.length;G<K;G++)if(W=ta[G],ba=Qb[W],void 0!==ba)for(na=0;3>na;na++)Ja=ba[na],qb[ab]=Ja.x,qb[ab+1]=Ja.y,ab+=2;0<ab&&(p.bindBuffer(p.ARRAY_BUFFER,C.__webglUVBuffer),p.bufferData(p.ARRAY_BUFFER,qb,H))}if(Jb&&Rb&&J){G=0;for(K=ta.length;G<K;G++)if(W=ta[G],Z=Rb[W],void 0!==Z)for(na=
0;3>na;na++)Na=Z[na],rb[fb]=Na.x,rb[fb+1]=Na.y,fb+=2;0<fb&&(p.bindBuffer(p.ARRAY_BUFFER,C.__webglUV2Buffer),p.bufferData(p.ARRAY_BUFFER,rb,H))}if(Pb){G=0;for(K=ta.length;G<K;G++)ub[hb]=La,ub[hb+1]=La+1,ub[hb+2]=La+2,hb+=3,Xb[Za]=La,Xb[Za+1]=La+1,Xb[Za+2]=La,Xb[Za+3]=La+2,Xb[Za+4]=La+1,Xb[Za+5]=La+2,Za+=6,La+=3;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,C.__webglFaceBuffer);p.bufferData(p.ELEMENT_ARRAY_BUFFER,ub,H);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,C.__webglLineBuffer);p.bufferData(p.ELEMENT_ARRAY_BUFFER,
Xb,H)}if(xb)for(na=0,Ia=xb.length;na<Ia;na++)if(N=xb[na],N.__original.needsUpdate){R=0;if(1===N.size)if(void 0===N.boundTo||"vertices"===N.boundTo)for(G=0,K=ta.length;G<K;G++)L=yb[ta[G]],N.array[R]=N.value[L.a],N.array[R+1]=N.value[L.b],N.array[R+2]=N.value[L.c],R+=3;else{if("faces"===N.boundTo)for(G=0,K=ta.length;G<K;G++)gb=N.value[ta[G]],N.array[R]=gb,N.array[R+1]=gb,N.array[R+2]=gb,R+=3}else if(2===N.size)if(void 0===N.boundTo||"vertices"===N.boundTo)for(G=0,K=ta.length;G<K;G++)L=yb[ta[G]],S=N.value[L.a],
U=N.value[L.b],T=N.value[L.c],N.array[R]=S.x,N.array[R+1]=S.y,N.array[R+2]=U.x,N.array[R+3]=U.y,N.array[R+4]=T.x,N.array[R+5]=T.y,R+=6;else{if("faces"===N.boundTo)for(G=0,K=ta.length;G<K;G++)T=U=S=gb=N.value[ta[G]],N.array[R]=S.x,N.array[R+1]=S.y,N.array[R+2]=U.x,N.array[R+3]=U.y,N.array[R+4]=T.x,N.array[R+5]=T.y,R+=6}else if(3===N.size){var Da;Da="c"===N.type?["r","g","b"]:["x","y","z"];if(void 0===N.boundTo||"vertices"===N.boundTo)for(G=0,K=ta.length;G<K;G++)L=yb[ta[G]],S=N.value[L.a],U=N.value[L.b],
T=N.value[L.c],N.array[R]=S[Da[0]],N.array[R+1]=S[Da[1]],N.array[R+2]=S[Da[2]],N.array[R+3]=U[Da[0]],N.array[R+4]=U[Da[1]],N.array[R+5]=U[Da[2]],N.array[R+6]=T[Da[0]],N.array[R+7]=T[Da[1]],N.array[R+8]=T[Da[2]],R+=9;else if("faces"===N.boundTo)for(G=0,K=ta.length;G<K;G++)T=U=S=gb=N.value[ta[G]],N.array[R]=S[Da[0]],N.array[R+1]=S[Da[1]],N.array[R+2]=S[Da[2]],N.array[R+3]=U[Da[0]],N.array[R+4]=U[Da[1]],N.array[R+5]=U[Da[2]],N.array[R+6]=T[Da[0]],N.array[R+7]=T[Da[1]],N.array[R+8]=T[Da[2]],R+=9;else if("faceVertices"===
N.boundTo)for(G=0,K=ta.length;G<K;G++)gb=N.value[ta[G]],S=gb[0],U=gb[1],T=gb[2],N.array[R]=S[Da[0]],N.array[R+1]=S[Da[1]],N.array[R+2]=S[Da[2]],N.array[R+3]=U[Da[0]],N.array[R+4]=U[Da[1]],N.array[R+5]=U[Da[2]],N.array[R+6]=T[Da[0]],N.array[R+7]=T[Da[1]],N.array[R+8]=T[Da[2]],R+=9}else if(4===N.size)if(void 0===N.boundTo||"vertices"===N.boundTo)for(G=0,K=ta.length;G<K;G++)L=yb[ta[G]],S=N.value[L.a],U=N.value[L.b],T=N.value[L.c],N.array[R]=S.x,N.array[R+1]=S.y,N.array[R+2]=S.z,N.array[R+3]=S.w,N.array[R+
4]=U.x,N.array[R+5]=U.y,N.array[R+6]=U.z,N.array[R+7]=U.w,N.array[R+8]=T.x,N.array[R+9]=T.y,N.array[R+10]=T.z,N.array[R+11]=T.w,R+=12;else if("faces"===N.boundTo)for(G=0,K=ta.length;G<K;G++)T=U=S=gb=N.value[ta[G]],N.array[R]=S.x,N.array[R+1]=S.y,N.array[R+2]=S.z,N.array[R+3]=S.w,N.array[R+4]=U.x,N.array[R+5]=U.y,N.array[R+6]=U.z,N.array[R+7]=U.w,N.array[R+8]=T.x,N.array[R+9]=T.y,N.array[R+10]=T.z,N.array[R+11]=T.w,R+=12;else if("faceVertices"===N.boundTo)for(G=0,K=ta.length;G<K;G++)gb=N.value[ta[G]],
S=gb[0],U=gb[1],T=gb[2],N.array[R]=S.x,N.array[R+1]=S.y,N.array[R+2]=S.z,N.array[R+3]=S.w,N.array[R+4]=U.x,N.array[R+5]=U.y,N.array[R+6]=U.z,N.array[R+7]=U.w,N.array[R+8]=T.x,N.array[R+9]=T.y,N.array[R+10]=T.z,N.array[R+11]=T.w,R+=12;p.bindBuffer(p.ARRAY_BUFFER,N.buffer);p.bufferData(p.ARRAY_BUFFER,N.array,H)}F&&(delete C.__inittedArrays,delete C.__colorArray,delete C.__normalArray,delete C.__tangentArray,delete C.__uvArray,delete C.__uv2Array,delete C.__faceArray,delete C.__vertexArray,delete C.__lineArray,
delete C.__skinIndexArray,delete C.__skinWeightArray)}}l.verticesNeedUpdate=!1;l.morphTargetsNeedUpdate=!1;l.elementsNeedUpdate=!1;l.uvsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.tangentsNeedUpdate=!1;l.buffersNeedUpdate=!1;r.attributes&&E(r)}else if(b instanceof THREE.Line){r=d(b,l);q=r.attributes&&D(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||l.lineDistancesNeedUpdate||q){var Mb=p.DYNAMIC_DRAW,kc,lc,mc,tc,Ca,uc,ec=l.vertices,fc=l.colors,gc=l.lineDistances,oc=ec.length,Uc=fc.length,
Vc=gc.length,xc=l.__vertexArray,yc=l.__colorArray,Mc=l.__lineDistanceArray,cd=l.colorsNeedUpdate,dd=l.lineDistancesNeedUpdate,Ec=l.__webglCustomAttributesList,zc,Nc,Ta,ic,db,Ba;if(l.verticesNeedUpdate){for(kc=0;kc<oc;kc++)tc=ec[kc],Ca=3*kc,xc[Ca]=tc.x,xc[Ca+1]=tc.y,xc[Ca+2]=tc.z;p.bindBuffer(p.ARRAY_BUFFER,l.__webglVertexBuffer);p.bufferData(p.ARRAY_BUFFER,xc,Mb)}if(cd){for(lc=0;lc<Uc;lc++)uc=fc[lc],Ca=3*lc,yc[Ca]=uc.r,yc[Ca+1]=uc.g,yc[Ca+2]=uc.b;p.bindBuffer(p.ARRAY_BUFFER,l.__webglColorBuffer);
p.bufferData(p.ARRAY_BUFFER,yc,Mb)}if(dd){for(mc=0;mc<Vc;mc++)Mc[mc]=gc[mc];p.bindBuffer(p.ARRAY_BUFFER,l.__webglLineDistanceBuffer);p.bufferData(p.ARRAY_BUFFER,Mc,Mb)}if(Ec)for(zc=0,Nc=Ec.length;zc<Nc;zc++)if(Ba=Ec[zc],Ba.needsUpdate&&(void 0===Ba.boundTo||"vertices"===Ba.boundTo)){Ca=0;ic=Ba.value.length;if(1===Ba.size)for(Ta=0;Ta<ic;Ta++)Ba.array[Ta]=Ba.value[Ta];else if(2===Ba.size)for(Ta=0;Ta<ic;Ta++)db=Ba.value[Ta],Ba.array[Ca]=db.x,Ba.array[Ca+1]=db.y,Ca+=2;else if(3===Ba.size)if("c"===Ba.type)for(Ta=
0;Ta<ic;Ta++)db=Ba.value[Ta],Ba.array[Ca]=db.r,Ba.array[Ca+1]=db.g,Ba.array[Ca+2]=db.b,Ca+=3;else for(Ta=0;Ta<ic;Ta++)db=Ba.value[Ta],Ba.array[Ca]=db.x,Ba.array[Ca+1]=db.y,Ba.array[Ca+2]=db.z,Ca+=3;else if(4===Ba.size)for(Ta=0;Ta<ic;Ta++)db=Ba.value[Ta],Ba.array[Ca]=db.x,Ba.array[Ca+1]=db.y,Ba.array[Ca+2]=db.z,Ba.array[Ca+3]=db.w,Ca+=4;p.bindBuffer(p.ARRAY_BUFFER,Ba.buffer);p.bufferData(p.ARRAY_BUFFER,Ba.array,Mb)}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;l.lineDistancesNeedUpdate=!1;r.attributes&&
E(r)}else if(b instanceof THREE.PointCloud){r=d(b,l);q=r.attributes&&D(r);if(l.verticesNeedUpdate||l.colorsNeedUpdate||b.sortParticles||q){var Fc=p.DYNAMIC_DRAW,eb,Cb,Db,fa,Eb,Wb,Ac=l.vertices,Gc=Ac.length,Hc=l.colors,Oc=Hc.length,ac=l.__vertexArray,bc=l.__colorArray,Nb=l.__sortArray,Pc=l.verticesNeedUpdate,Qc=l.colorsNeedUpdate,Ob=l.__webglCustomAttributesList,sb,jc,oa,tb,xa,ea;if(b.sortParticles){nc.copy(dc);nc.multiply(b.matrixWorld);for(eb=0;eb<Gc;eb++)Db=Ac[eb],ja.copy(Db),ja.applyProjection(nc),
Nb[eb]=[ja.z,eb];Nb.sort(v);for(eb=0;eb<Gc;eb++)Db=Ac[Nb[eb][1]],fa=3*eb,ac[fa]=Db.x,ac[fa+1]=Db.y,ac[fa+2]=Db.z;for(Cb=0;Cb<Oc;Cb++)fa=3*Cb,Wb=Hc[Nb[Cb][1]],bc[fa]=Wb.r,bc[fa+1]=Wb.g,bc[fa+2]=Wb.b;if(Ob)for(sb=0,jc=Ob.length;sb<jc;sb++)if(ea=Ob[sb],void 0===ea.boundTo||"vertices"===ea.boundTo)if(fa=0,tb=ea.value.length,1===ea.size)for(oa=0;oa<tb;oa++)Eb=Nb[oa][1],ea.array[oa]=ea.value[Eb];else if(2===ea.size)for(oa=0;oa<tb;oa++)Eb=Nb[oa][1],xa=ea.value[Eb],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,fa+=
2;else if(3===ea.size)if("c"===ea.type)for(oa=0;oa<tb;oa++)Eb=Nb[oa][1],xa=ea.value[Eb],ea.array[fa]=xa.r,ea.array[fa+1]=xa.g,ea.array[fa+2]=xa.b,fa+=3;else for(oa=0;oa<tb;oa++)Eb=Nb[oa][1],xa=ea.value[Eb],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,ea.array[fa+2]=xa.z,fa+=3;else if(4===ea.size)for(oa=0;oa<tb;oa++)Eb=Nb[oa][1],xa=ea.value[Eb],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,ea.array[fa+2]=xa.z,ea.array[fa+3]=xa.w,fa+=4}else{if(Pc)for(eb=0;eb<Gc;eb++)Db=Ac[eb],fa=3*eb,ac[fa]=Db.x,ac[fa+1]=Db.y,ac[fa+
2]=Db.z;if(Qc)for(Cb=0;Cb<Oc;Cb++)Wb=Hc[Cb],fa=3*Cb,bc[fa]=Wb.r,bc[fa+1]=Wb.g,bc[fa+2]=Wb.b;if(Ob)for(sb=0,jc=Ob.length;sb<jc;sb++)if(ea=Ob[sb],ea.needsUpdate&&(void 0===ea.boundTo||"vertices"===ea.boundTo))if(tb=ea.value.length,fa=0,1===ea.size)for(oa=0;oa<tb;oa++)ea.array[oa]=ea.value[oa];else if(2===ea.size)for(oa=0;oa<tb;oa++)xa=ea.value[oa],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,fa+=2;else if(3===ea.size)if("c"===ea.type)for(oa=0;oa<tb;oa++)xa=ea.value[oa],ea.array[fa]=xa.r,ea.array[fa+1]=xa.g,
ea.array[fa+2]=xa.b,fa+=3;else for(oa=0;oa<tb;oa++)xa=ea.value[oa],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,ea.array[fa+2]=xa.z,fa+=3;else if(4===ea.size)for(oa=0;oa<tb;oa++)xa=ea.value[oa],ea.array[fa]=xa.x,ea.array[fa+1]=xa.y,ea.array[fa+2]=xa.z,ea.array[fa+3]=xa.w,fa+=4}if(Pc||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,l.__webglVertexBuffer),p.bufferData(p.ARRAY_BUFFER,ac,Fc);if(Qc||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,l.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,bc,Fc);if(Ob)for(sb=
0,jc=Ob.length;sb<jc;sb++)if(ea=Ob[sb],ea.needsUpdate||b.sortParticles)p.bindBuffer(p.ARRAY_BUFFER,ea.buffer),p.bufferData(p.ARRAY_BUFFER,ea.array,Fc)}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;r.attributes&&E(r)}for(var cc=0,Ic=k.length;cc<Ic;cc++){var Bc=k[cc],Fb=Bc,Rc=Fb.object,ed=Fb.buffer,fd=Rc.geometry,Gb=Rc.material;Gb instanceof THREE.MeshFaceMaterial?(Gb=Gb.materials[fd instanceof THREE.BufferGeometry?0:ed.materialIndex],Gb.transparent?(Fb.material=Gb,Ua.push(Fb)):(Fb.material=Gb,Qa.push(Fb))):
Gb&&(Gb.transparent?(Fb.material=Gb,Ua.push(Fb)):(Fb.material=Gb,Qa.push(Fb)));Bc.render=!0;!0===M.sortObjects&&(null!==b.renderDepth?Bc.z=b.renderDepth:(ja.setFromMatrixPosition(b.matrixWorld),ja.applyProjection(dc),Bc.z=ja.z))}}cc=0;for(Ic=b.children.length;cc<Ic;cc++)u(a,b.children[cc],h)}}function w(a,b,c){if(0!==a.length)for(var d=0,e=a.length;d<e;d++)sa=Ha=null,$a=la=Fa=Ia=pa=X=ua=-1,cb=!0,a[d].render(b,c,Ib,Qb),sa=Ha=null,$a=la=Fa=Ia=pa=X=ua=-1,cb=!0}function y(a,b,c,d,e,f){for(var g,h,k,l=
a.length-1;-1!==l;l--){g=a[l];h=g.object;k=g.buffer;K(h,b);if(f)g=f;else{g=g.material;if(!g)continue;e&&M.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);M.setDepthTest(g.depthTest);M.setDepthWrite(g.depthWrite);V(g.polygonOffset,g.polygonOffsetFactor,g.polygonOffsetUnits)}M.setMaterialFaces(g);k instanceof THREE.BufferGeometry?M.renderBufferDirect(b,c,d,g,k,h):M.renderBuffer(b,c,d,g,k,h)}}function x(a,b,c,d,e,f,g){for(var h,k,l=0,p=a.length;l<p;l++)if(h=a[l],k=h.object,k.visible){if(g)h=
g;else{h=h[b];if(!h)continue;f&&M.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst);M.setDepthTest(h.depthTest);M.setDepthWrite(h.depthWrite);V(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}M.renderImmediateObject(c,d,e,h,k)}}function z(a){var b=a.object.material;b.transparent?(a.transparent=b,a.opaque=null):(a.opaque=b,a.transparent=null)}function B(a,b,d){var e,f=!1;e=b.material;if(void 0===d.geometryGroups||d.groupsNeedUpdate)delete a.__webglObjects[b.id],d.makeGroups(e instanceof
THREE.MeshFaceMaterial,Jb?4294967296:65535),d.groupsNeedUpdate=!1;for(var g=0,h=d.geometryGroupsList.length;g<h;g++){e=d.geometryGroupsList[g];if(e.__webglVertexBuffer)f=!1;else{f=e;f.__webglVertexBuffer=p.createBuffer();f.__webglNormalBuffer=p.createBuffer();f.__webglTangentBuffer=p.createBuffer();f.__webglColorBuffer=p.createBuffer();f.__webglUVBuffer=p.createBuffer();f.__webglUV2Buffer=p.createBuffer();f.__webglSkinIndicesBuffer=p.createBuffer();f.__webglSkinWeightsBuffer=p.createBuffer();f.__webglFaceBuffer=
p.createBuffer();f.__webglLineBuffer=p.createBuffer();var k=void 0,l=void 0;if(f.numMorphTargets)for(f.__webglMorphTargetsBuffers=[],k=0,l=f.numMorphTargets;k<l;k++)f.__webglMorphTargetsBuffers.push(p.createBuffer());if(f.numMorphNormals)for(f.__webglMorphNormalsBuffers=[],k=0,l=f.numMorphNormals;k<l;k++)f.__webglMorphNormalsBuffers.push(p.createBuffer());M.info.memory.geometries++;c(e,b);d.verticesNeedUpdate=!0;d.morphTargetsNeedUpdate=!0;d.elementsNeedUpdate=!0;d.uvsNeedUpdate=!0;d.normalsNeedUpdate=
!0;d.tangentsNeedUpdate=!0;f=d.colorsNeedUpdate=!0}(f||void 0===b.__webglActive)&&A(a.__webglObjects,e,b)}b.__webglActive=!0}function A(a,b,c){var d=c.id;a[d]=a[d]||[];a[d].push({id:d,buffer:b,object:c,material:null,z:0})}function D(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function E(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function H(a,b){if(a instanceof THREE.Mesh||a instanceof THREE.PointCloud||a instanceof THREE.Line)delete b.__webglObjects[a.id];
else if(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)for(var c=b.__webglObjectsImmediate,d=c.length-1;0<=d;d--)c[d].object===a&&c.splice(d,1);delete a.__webglActive}function C(a,b,c,d,e){ya=0;d.needsUpdate&&(d.program&&Ub(d),M.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(M.maxMorphTargets));var f=!1,g=!1,h=!1,k=d.program,l=k.uniforms,n=d.__webglShader.uniforms;k.id!==Ha&&(p.useProgram(k.program),
Ha=k.id,h=g=f=!0);d.id!==$a&&(-1===$a&&(h=!0),$a=d.id,g=!0);if(f||a!==sa)p.uniformMatrix4fv(l.projectionMatrix,!1,a.projectionMatrix.elements),ia&&p.uniform1f(l.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==sa&&(sa=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==l.cameraPosition&&(ja.setFromMatrixPosition(a.matrixWorld),p.uniform3f(l.cameraPosition,ja.x,ja.y,ja.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof
THREE.ShaderMaterial||d.skinning)&&null!==l.viewMatrix&&p.uniformMatrix4fv(l.viewMatrix,!1,a.matrixWorldInverse.elements);d.skinning&&(e.bindMatrix&&null!==l.bindMatrix&&p.uniformMatrix4fv(l.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&null!==l.bindMatrixInverse&&p.uniformMatrix4fv(l.bindMatrixInverse,!1,e.bindMatrixInverse.elements),ab&&e.skeleton&&e.skeleton.useVertexTexture?(null!==l.boneTexture&&(f=O(),p.uniform1i(l.boneTexture,f),M.setTexture(e.skeleton.boneTexture,f)),null!==l.boneTextureWidth&&
p.uniform1i(l.boneTextureWidth,e.skeleton.boneTextureWidth),null!==l.boneTextureHeight&&p.uniform1i(l.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&null!==l.boneGlobalMatrices&&p.uniformMatrix4fv(l.boneGlobalMatrices,!1,e.skeleton.boneMatrices));if(g){c&&d.fog&&(n.fogColor.value=c.color,c instanceof THREE.Fog?(n.fogNear.value=c.near,n.fogFar.value=c.far):c instanceof THREE.FogExp2&&(n.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof
THREE.MeshLambertMaterial||d.lights){if(cb){var h=!0,q,r=f=0,s=0,u,v,w,x=Aa,z=x.directional.colors,y=x.directional.positions,A=x.point.colors,B=x.point.positions,C=x.point.distances,D=x.spot.colors,Q=x.spot.positions,E=x.spot.distances,H=x.spot.directions,G=x.spot.anglesCos,I=x.spot.exponents,K=x.hemi.skyColors,V=x.hemi.groundColors,J=x.hemi.positions,S=0,U=0,T=0,ra=0,Y=0,X=0,ba=0,aa=0,ma=q=0;c=w=ma=0;for(g=b.length;c<g;c++)q=b[c],q.onlyShadow||(u=q.color,v=q.intensity,w=q.distance,q instanceof THREE.AmbientLight?
q.visible&&(M.gammaInput?(f+=u.r*u.r,r+=u.g*u.g,s+=u.b*u.b):(f+=u.r,r+=u.g,s+=u.b)):q instanceof THREE.DirectionalLight?(Y+=1,q.visible&&(ha.setFromMatrixPosition(q.matrixWorld),ja.setFromMatrixPosition(q.target.matrixWorld),ha.sub(ja),ha.normalize(),q=3*S,y[q]=ha.x,y[q+1]=ha.y,y[q+2]=ha.z,M.gammaInput?da(z,q,u,v*v):L(z,q,u,v),S+=1)):q instanceof THREE.PointLight?(X+=1,q.visible&&(ma=3*U,M.gammaInput?da(A,ma,u,v*v):L(A,ma,u,v),ja.setFromMatrixPosition(q.matrixWorld),B[ma]=ja.x,B[ma+1]=ja.y,B[ma+2]=
ja.z,C[U]=w,U+=1)):q instanceof THREE.SpotLight?(ba+=1,q.visible&&(ma=3*T,M.gammaInput?da(D,ma,u,v*v):L(D,ma,u,v),ja.setFromMatrixPosition(q.matrixWorld),Q[ma]=ja.x,Q[ma+1]=ja.y,Q[ma+2]=ja.z,E[T]=w,ha.copy(ja),ja.setFromMatrixPosition(q.target.matrixWorld),ha.sub(ja),ha.normalize(),H[ma]=ha.x,H[ma+1]=ha.y,H[ma+2]=ha.z,G[T]=Math.cos(q.angle),I[T]=q.exponent,T+=1)):q instanceof THREE.HemisphereLight&&(aa+=1,q.visible&&(ha.setFromMatrixPosition(q.matrixWorld),ha.normalize(),w=3*ra,J[w]=ha.x,J[w+1]=ha.y,
J[w+2]=ha.z,u=q.color,q=q.groundColor,M.gammaInput?(v*=v,da(K,w,u,v),da(V,w,q,v)):(L(K,w,u,v),L(V,w,q,v)),ra+=1)));c=3*S;for(g=Math.max(z.length,3*Y);c<g;c++)z[c]=0;c=3*U;for(g=Math.max(A.length,3*X);c<g;c++)A[c]=0;c=3*T;for(g=Math.max(D.length,3*ba);c<g;c++)D[c]=0;c=3*ra;for(g=Math.max(K.length,3*aa);c<g;c++)K[c]=0;c=3*ra;for(g=Math.max(V.length,3*aa);c<g;c++)V[c]=0;x.directional.length=S;x.point.length=U;x.spot.length=T;x.hemi.length=ra;x.ambient[0]=f;x.ambient[1]=r;x.ambient[2]=s;cb=!1}h?(h=Aa,
n.ambientLightColor.value=h.ambient,n.directionalLightColor.value=h.directional.colors,n.directionalLightDirection.value=h.directional.positions,n.pointLightColor.value=h.point.colors,n.pointLightPosition.value=h.point.positions,n.pointLightDistance.value=h.point.distances,n.spotLightColor.value=h.spot.colors,n.spotLightPosition.value=h.spot.positions,n.spotLightDistance.value=h.spot.distances,n.spotLightDirection.value=h.spot.directions,n.spotLightAngleCos.value=h.spot.anglesCos,n.spotLightExponent.value=
h.spot.exponents,n.hemisphereLightSkyColor.value=h.hemi.skyColors,n.hemisphereLightGroundColor.value=h.hemi.groundColors,n.hemisphereLightDirection.value=h.hemi.positions,F(n,!0)):F(n,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){n.opacity.value=d.opacity;M.gammaInput?n.diffuse.value.copyGammaToLinear(d.color):n.diffuse.value=d.color;n.map.value=d.map;n.lightMap.value=d.lightMap;n.specularMap.value=d.specularMap;n.alphaMap.value=
d.alphaMap;d.bumpMap&&(n.bumpMap.value=d.bumpMap,n.bumpScale.value=d.bumpScale);d.normalMap&&(n.normalMap.value=d.normalMap,n.normalScale.value.copy(d.normalScale));var ca;d.map?ca=d.map:d.specularMap?ca=d.specularMap:d.normalMap?ca=d.normalMap:d.bumpMap?ca=d.bumpMap:d.alphaMap&&(ca=d.alphaMap);void 0!==ca&&(h=ca.offset,ca=ca.repeat,n.offsetRepeat.value.set(h.x,h.y,ca.x,ca.y));n.envMap.value=d.envMap;n.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;n.reflectivity.value=d.reflectivity;
n.refractionRatio.value=d.refractionRatio;n.combine.value=d.combine;n.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(n.diffuse.value=d.color,n.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(n.diffuse.value=d.color,n.opacity.value=d.opacity,n.dashSize.value=d.dashSize,n.totalSize.value=d.dashSize+d.gapSize,n.scale.value=d.scale):d instanceof THREE.PointCloudMaterial?(n.psColor.value=d.color,n.opacity.value=d.opacity,
n.size.value=d.size,n.scale.value=Z.height/2,n.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(n.shininess.value=d.shininess,M.gammaInput?(n.ambient.value.copyGammaToLinear(d.ambient),n.emissive.value.copyGammaToLinear(d.emissive),n.specular.value.copyGammaToLinear(d.specular)):(n.ambient.value=d.ambient,n.emissive.value=d.emissive,n.specular.value=d.specular),d.wrapAround&&n.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?(M.gammaInput?(n.ambient.value.copyGammaToLinear(d.ambient),
n.emissive.value.copyGammaToLinear(d.emissive)):(n.ambient.value=d.ambient,n.emissive.value=d.emissive),d.wrapAround&&n.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(n.mNear.value=a.near,n.mFar.value=a.far,n.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(n.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&n.shadowMatrix)for(ca=a=0,h=b.length;ca<h;ca++)c=b[ca],c.castShadow&&(c instanceof THREE.SpotLight||c instanceof THREE.DirectionalLight&&!c.shadowCascade)&&
(n.shadowMap.value[a]=c.shadowMap,n.shadowMapSize.value[a]=c.shadowMapSize,n.shadowMatrix.value[a]=c.shadowMatrix,n.shadowDarkness.value[a]=c.shadowDarkness,n.shadowBias.value[a]=c.shadowBias,a++);b=d.uniformsList;d=0;for(n=b.length;d<n;d++)if(a=b[d][0],!1!==a.needsUpdate)switch(c=a.type,h=a.value,ca=b[d][1],c){case "1i":p.uniform1i(ca,h);break;case "1f":p.uniform1f(ca,h);break;case "2f":p.uniform2f(ca,h[0],h[1]);break;case "3f":p.uniform3f(ca,h[0],h[1],h[2]);break;case "4f":p.uniform4f(ca,h[0],h[1],
h[2],h[3]);break;case "1iv":p.uniform1iv(ca,h);break;case "3iv":p.uniform3iv(ca,h);break;case "1fv":p.uniform1fv(ca,h);break;case "2fv":p.uniform2fv(ca,h);break;case "3fv":p.uniform3fv(ca,h);break;case "4fv":p.uniform4fv(ca,h);break;case "Matrix3fv":p.uniformMatrix3fv(ca,!1,h);break;case "Matrix4fv":p.uniformMatrix4fv(ca,!1,h);break;case "i":p.uniform1i(ca,h);break;case "f":p.uniform1f(ca,h);break;case "v2":p.uniform2f(ca,h.x,h.y);break;case "v3":p.uniform3f(ca,h.x,h.y,h.z);break;case "v4":p.uniform4f(ca,
h.x,h.y,h.z,h.w);break;case "c":p.uniform3f(ca,h.r,h.g,h.b);break;case "iv1":p.uniform1iv(ca,h);break;case "iv":p.uniform3iv(ca,h);break;case "fv1":p.uniform1fv(ca,h);break;case "fv":p.uniform3fv(ca,h);break;case "v2v":void 0===a._array&&(a._array=new Float32Array(2*h.length));c=0;for(g=h.length;c<g;c++)f=2*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y;p.uniform2fv(ca,a._array);break;case "v3v":void 0===a._array&&(a._array=new Float32Array(3*h.length));c=0;for(g=h.length;c<g;c++)f=3*c,a._array[f]=h[c].x,
a._array[f+1]=h[c].y,a._array[f+2]=h[c].z;p.uniform3fv(ca,a._array);break;case "v4v":void 0===a._array&&(a._array=new Float32Array(4*h.length));c=0;for(g=h.length;c<g;c++)f=4*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y,a._array[f+2]=h[c].z,a._array[f+3]=h[c].w;p.uniform4fv(ca,a._array);break;case "m3":p.uniformMatrix3fv(ca,!1,h.elements);break;case "m3v":void 0===a._array&&(a._array=new Float32Array(9*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,9*c);p.uniformMatrix3fv(ca,
!1,a._array);break;case "m4":p.uniformMatrix4fv(ca,!1,h.elements);break;case "m4v":void 0===a._array&&(a._array=new Float32Array(16*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,16*c);p.uniformMatrix4fv(ca,!1,a._array);break;case "t":f=h;h=O();p.uniform1i(ca,h);if(!f)continue;if(f instanceof THREE.CubeTexture||f.image instanceof Array&&6===f.image.length){if(a=f,ca=h,6===a.image.length)if(a.needsUpdate){a.image.__webglTextureCube||(a.addEventListener("dispose",hb),a.image.__webglTextureCube=
p.createTexture(),M.info.memory.textures++);p.activeTexture(p.TEXTURE0+ca);p.bindTexture(p.TEXTURE_CUBE_MAP,a.image.__webglTextureCube);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,a.flipY);ca=a instanceof THREE.CompressedTexture;h=[];for(c=0;6>c;c++)M.autoScaleCubemaps&&!ca?(g=c,f=a.image[c],s=fc,f.width<=s&&f.height<=s||(x=Math.max(f.width,f.height),r=Math.floor(f.width*s/x),s=Math.floor(f.height*s/x),x=document.createElement("canvas"),x.width=r,x.height=s,x.getContext("2d").drawImage(f,0,0,f.width,f.height,
0,0,r,s),f=x),h[g]=f):h[c]=a.image[c];c=h[0];g=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height);f=W(a.format);r=W(a.type);P(p.TEXTURE_CUBE_MAP,a,g);for(c=0;6>c;c++)if(ca)for(x=h[c].mipmaps,z=0,y=x.length;z<y;z++)s=x[z],a.format!==THREE.RGBAFormat?p.compressedTexImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+c,z,f,s.width,s.height,0,s.data):p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+c,z,f,s.width,s.height,0,f,r,s.data);else p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,f,f,r,h[c]);a.generateMipmaps&&
g&&p.generateMipmap(p.TEXTURE_CUBE_MAP);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else p.activeTexture(p.TEXTURE0+ca),p.bindTexture(p.TEXTURE_CUBE_MAP,a.image.__webglTextureCube)}else f instanceof THREE.WebGLRenderTargetCube?(a=f,p.activeTexture(p.TEXTURE0+h),p.bindTexture(p.TEXTURE_CUBE_MAP,a.__webglTexture)):M.setTexture(f,h);break;case "tv":void 0===a._array&&(a._array=[]);c=0;for(g=a.value.length;c<g;c++)a._array[c]=O();p.uniform1iv(ca,a._array);c=0;for(g=a.value.length;c<g;c++)f=a.value[c],
h=a._array[c],f&&M.setTexture(f,h);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+c)}}p.uniformMatrix4fv(l.modelViewMatrix,!1,e._modelViewMatrix.elements);l.normalMatrix&&p.uniformMatrix3fv(l.normalMatrix,!1,e._normalMatrix.elements);null!==l.modelMatrix&&p.uniformMatrix4fv(l.modelMatrix,!1,e.matrixWorld.elements);return k}function F(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=
b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function O(){var a=ya;a>=Hb&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+
Hb);ya+=1;return a}function K(a,b){a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld);a._normalMatrix.getNormalMatrix(a._modelViewMatrix)}function da(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function L(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function Q(a){a!==na&&(p.lineWidth(a),na=a)}function V(a,b,c){Ya!==a&&(a?p.enable(p.POLYGON_OFFSET_FILL):p.disable(p.POLYGON_OFFSET_FILL),Ya=a);!a||fb===b&&Ja===c||(p.polygonOffset(b,c),fb=b,Ja=c)}function P(a,b,c){c?
(p.texParameteri(a,p.TEXTURE_WRAP_S,W(b.wrapS)),p.texParameteri(a,p.TEXTURE_WRAP_T,W(b.wrapT)),p.texParameteri(a,p.TEXTURE_MAG_FILTER,W(b.magFilter)),p.texParameteri(a,p.TEXTURE_MIN_FILTER,W(b.minFilter))):(p.texParameteri(a,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(a,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(a,p.TEXTURE_MAG_FILTER,Y(b.magFilter)),p.texParameteri(a,p.TEXTURE_MIN_FILTER,Y(b.minFilter)));La&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(p.texParameterf(a,
La.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Rb)),b.__oldAnisotropy=b.anisotropy)}function I(a,b){p.bindRenderbuffer(p.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_COMPONENT16,b.width,b.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,b.width,b.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,
a)):p.renderbufferStorage(p.RENDERBUFFER,p.RGBA4,b.width,b.height)}function G(a){a instanceof THREE.WebGLRenderTargetCube?(p.bindTexture(p.TEXTURE_CUBE_MAP,a.__webglTexture),p.generateMipmap(p.TEXTURE_CUBE_MAP),p.bindTexture(p.TEXTURE_CUBE_MAP,null)):(p.bindTexture(p.TEXTURE_2D,a.__webglTexture),p.generateMipmap(p.TEXTURE_2D),p.bindTexture(p.TEXTURE_2D,null))}function Y(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?p.NEAREST:p.LINEAR}
function W(a){if(a===THREE.RepeatWrapping)return p.REPEAT;if(a===THREE.ClampToEdgeWrapping)return p.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return p.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return p.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return p.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return p.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return p.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return p.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return p.LINEAR_MIPMAP_LINEAR;
if(a===THREE.UnsignedByteType)return p.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return p.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return p.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return p.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return p.BYTE;if(a===THREE.ShortType)return p.SHORT;if(a===THREE.UnsignedShortType)return p.UNSIGNED_SHORT;if(a===THREE.IntType)return p.INT;if(a===THREE.UnsignedIntType)return p.UNSIGNED_INT;if(a===THREE.FloatType)return p.FLOAT;
if(a===THREE.AlphaFormat)return p.ALPHA;if(a===THREE.RGBFormat)return p.RGB;if(a===THREE.RGBAFormat)return p.RGBA;if(a===THREE.LuminanceFormat)return p.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return p.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return p.FUNC_ADD;if(a===THREE.SubtractEquation)return p.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return p.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return p.ZERO;if(a===THREE.OneFactor)return p.ONE;if(a===THREE.SrcColorFactor)return p.SRC_COLOR;
if(a===THREE.OneMinusSrcColorFactor)return p.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return p.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return p.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return p.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return p.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return p.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return p.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return p.SRC_ALPHA_SATURATE;if(void 0!==Va){if(a===THREE.RGB_S3TC_DXT1_Format)return Va.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT1_Format)return Va.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Va.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Va.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var Z=void 0!==a.canvas?a.canvas:document.createElement("canvas"),ga=void 0!==a.context?a.context:null,S=void 0!==a.precision?a.precision:"highp",J=void 0!==a.alpha?a.alpha:!1,va=void 0!==a.depth?a.depth:!0,U=
void 0!==a.stencil?a.stencil:!0,T=void 0!==a.antialias?a.antialias:!1,ra=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,ma=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,ia=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,ba=new THREE.Color(0),r=0,Qa=[],Ua=[];this.domElement=Z;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortObjects=this.autoClearStencil=this.autoClearDepth=
this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var M=this,wa=[],Ha=null,Ma=
null,$a=-1,la=null,sa=null,ya=0,Ia=-1,Fa=-1,ua=-1,za=-1,Na=-1,aa=-1,X=-1,pa=-1,Ya=null,fb=null,Ja=null,na=null,qa=0,Ga=0,qb=Z.width,Pb=Z.height,Ib=0,Qb=0,Oa=new Uint8Array(16),rb=new Uint8Array(16),kb=new THREE.Frustum,dc=new THREE.Matrix4,nc=new THREE.Matrix4,ja=new THREE.Vector3,ha=new THREE.Vector3,cb=!0,Aa={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],
exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},p,vb,wb,La,Va,Jb;(function(){try{var a={alpha:J,depth:va,stencil:U,antialias:T,premultipliedAlpha:ra,preserveDrawingBuffer:ma};p=ga||Z.getContext("webgl",a)||Z.getContext("experimental-webgl",a);if(null===p)throw"Error creating WebGL context.";}catch(b){console.error(b)}vb=p.getExtension("OES_texture_float");p.getExtension("OES_texture_float_linear");wb=p.getExtension("OES_standard_derivatives");La=p.getExtension("EXT_texture_filter_anisotropic")||
p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Va=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Jb=p.getExtension("OES_element_index_uint");null===vb&&console.log("THREE.WebGLRenderer: Float textures not supported.");null===wb&&console.log("THREE.WebGLRenderer: Standard derivatives not supported.");null===La&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
null===Va&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");null===Jb&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});ia&&p.getExtension("EXT_frag_depth")})();p.clearColor(0,0,0,1);p.clearDepth(1);p.clearStencil(0);p.enable(p.DEPTH_TEST);p.depthFunc(p.LEQUAL);p.frontFace(p.CCW);p.cullFace(p.BACK);p.enable(p.CULL_FACE);
p.enable(p.BLEND);p.blendEquation(p.FUNC_ADD);p.blendFunc(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA);p.viewport(qa,Ga,qb,Pb);p.clearColor(ba.r,ba.g,ba.b,r);this.context=p;var Hb=p.getParameter(p.MAX_TEXTURE_IMAGE_UNITS),ec=p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS);p.getParameter(p.MAX_TEXTURE_SIZE);var fc=p.getParameter(p.MAX_CUBE_MAP_TEXTURE_SIZE),Rb=La?p.getParameter(La.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,xb=0<ec,ab=xb&&vb;Va&&p.getParameter(p.COMPRESSED_TEXTURE_FORMATS);var Sb=p.getShaderPrecisionFormat(p.VERTEX_SHADER,
p.HIGH_FLOAT),gc=p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT);p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_FLOAT);var Kb=p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT),oc=p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT);p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_FLOAT);var ub=0<Sb.precision&&0<Kb.precision,Za=0<gc.precision&&0<oc.precision;"highp"!==S||ub||(Za?(S="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(S=
"lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")));"mediump"!==S||Za||(S="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));this.getContext=function(){return p};this.supportsVertexTextures=function(){return xb};this.supportsFloatTextures=function(){return vb};this.supportsStandardDerivatives=function(){return wb};this.supportsCompressedTextureS3TC=function(){return Va};this.getMaxAnisotropy=function(){return Rb};this.getPrecision=
function(){return S};this.setSize=function(a,b,c){Z.width=a*this.devicePixelRatio;Z.height=b*this.devicePixelRatio;!1!==c&&(Z.style.width=a+"px",Z.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){qa=a*this.devicePixelRatio;Ga=b*this.devicePixelRatio;qb=c*this.devicePixelRatio;Pb=d*this.devicePixelRatio;p.viewport(qa,Ga,qb,Pb)};this.setScissor=function(a,b,c,d){p.scissor(a*this.devicePixelRatio,b*this.devicePixelRatio,c*this.devicePixelRatio,d*this.devicePixelRatio)};
this.enableScissorTest=function(a){a?p.enable(p.SCISSOR_TEST):p.disable(p.SCISSOR_TEST)};this.setClearColor=function(a,b){ba.set(a);r=void 0!==b?b:1;p.clearColor(ba.r,ba.g,ba.b,r)};this.setClearColorHex=function(a,b){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return ba};this.getClearAlpha=function(){return r};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=p.COLOR_BUFFER_BIT;
if(void 0===b||b)d|=p.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=p.STENCIL_BUFFER_BIT;p.clear(d)};this.clearColor=function(){p.clear(p.COLOR_BUFFER_BIT)};this.clearDepth=function(){p.clear(p.DEPTH_BUFFER_BIT)};this.clearStencil=function(){p.clear(p.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=
function(a,b){Ha=null;$a=la=pa=X=ua=-1;cb=!0;Fa=Ia=-1;Vb(a);this.shadowMapPlugin.update(a,b)};var Lb=function(a){a=a.target;a.removeEventListener("dispose",Lb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){a=a.attributes;for(var b in a)void 0!==a[b].buffer&&p.deleteBuffer(a[b].buffer);M.info.memory.geometries--}else if(void 0!==a.geometryGroups){b=0;for(var c=a.geometryGroupsList.length;b<c;b++){var d=a.geometryGroupsList[b];if(void 0!==d.numMorphTargets)for(var e=0,f=d.numMorphTargets;e<
f;e++)p.deleteBuffer(d.__webglMorphTargetsBuffers[e]);if(void 0!==d.numMorphNormals)for(e=0,f=d.numMorphNormals;e<f;e++)p.deleteBuffer(d.__webglMorphNormalsBuffers[e]);Mb(d)}}else Mb(a)},hb=function(a){a=a.target;a.removeEventListener("dispose",hb);a.image&&a.image.__webglTextureCube?p.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,p.deleteTexture(a.__webglTexture));M.info.memory.textures--},Yb=function(a){a=a.target;a.removeEventListener("dispose",Yb);if(a&&a.__webglTexture)if(p.deleteTexture(a.__webglTexture),
a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)p.deleteFramebuffer(a.__webglFramebuffer[b]),p.deleteRenderbuffer(a.__webglRenderbuffer[b]);else p.deleteFramebuffer(a.__webglFramebuffer),p.deleteRenderbuffer(a.__webglRenderbuffer);M.info.memory.textures--},Tb=function(a){a=a.target;a.removeEventListener("dispose",Tb);Ub(a)},Mb=function(a){void 0!==a.__webglVertexBuffer&&p.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&p.deleteBuffer(a.__webglNormalBuffer);void 0!==
a.__webglTangentBuffer&&p.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&p.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&p.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&p.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&p.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&p.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&p.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&
p.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&p.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)p.deleteBuffer(a.__webglCustomAttributesList[b].buffer);M.info.memory.geometries--},Ub=function(a){var b=a.program.program;if(void 0!==b){a.program=void 0;var c,d,e=!1;a=0;for(c=wa.length;a<c;a++)if(d=wa[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=[];a=0;for(c=wa.length;a<
c;a++)d=wa[a],d.program!==b&&e.push(d);wa=e;p.deleteProgram(b);M.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){k();a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=p.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=p.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=p.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=p.createBuffer());a.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglVertexBuffer),
p.bufferData(p.ARRAY_BUFFER,a.positionArray,p.DYNAMIC_DRAW),n(b.attributes.position),p.vertexAttribPointer(b.attributes.position,3,p.FLOAT,!1,0,0));if(a.hasNormals){p.bindBuffer(p.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,g,h,l,r,s,u,v,w,x=3*a.count;for(w=0;w<x;w+=9)v=a.normalArray,d=v[w],e=v[w+1],f=v[w+2],g=v[w+3],l=v[w+4],s=v[w+5],h=v[w+6],r=v[w+7],u=v[w+8],d=(d+g+h)/3,e=(e+l+r)/3,f=(f+s+u)/3,v[w]=d,v[w+1]=e,v[w+2]=f,v[w+3]=d,v[w+4]=e,v[w+5]=f,v[w+6]=d,v[w+
7]=e,v[w+8]=f}p.bufferData(p.ARRAY_BUFFER,a.normalArray,p.DYNAMIC_DRAW);n(b.attributes.normal);p.vertexAttribPointer(b.attributes.normal,3,p.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglUvBuffer),p.bufferData(p.ARRAY_BUFFER,a.uvArray,p.DYNAMIC_DRAW),n(b.attributes.uv),p.vertexAttribPointer(b.attributes.uv,2,p.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(p.bindBuffer(p.ARRAY_BUFFER,a.__webglColorBuffer),p.bufferData(p.ARRAY_BUFFER,a.colorArray,p.DYNAMIC_DRAW),
n(b.attributes.color),p.vertexAttribPointer(b.attributes.color,3,p.FLOAT,!1,0,0));q();p.drawArrays(p.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var g=C(a,b,c,d,f);a=g.attributes;b=e.attributes;c=!1;g=16777215*e.id+2*g.id+(d.wireframe?1:0);g!==la&&(la=g,c=!0);c&&k();if(f instanceof THREE.Mesh)if(g=b.index){var l,n;g.array instanceof Uint32Array?(l=p.UNSIGNED_INT,n=4):(l=p.UNSIGNED_SHORT,n=2);e=e.offsets;if(0===e.length)c&&(h(d,a,b,0),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,
g.buffer)),p.drawElements(p.TRIANGLES,g.array.length,l,0),M.info.render.calls++,M.info.render.vertices+=g.array.length,M.info.render.faces+=g.array.length/3;else{c=!0;for(var q=0,r=e.length;q<r;q++){var s=e[q].index;c&&(h(d,a,b,s),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,g.buffer));p.drawElements(p.TRIANGLES,e[q].count,l,e[q].start*n);M.info.render.calls++;M.info.render.vertices+=e[q].count;M.info.render.faces+=e[q].count/3}}}else c&&h(d,a,b,0),d=e.attributes.position,p.drawArrays(p.TRIANGLES,0,d.array.length/
3),M.info.render.calls++,M.info.render.vertices+=d.array.length/3,M.info.render.faces+=d.array.length/9;else if(f instanceof THREE.PointCloud)c&&h(d,a,b,0),d=b.position,p.drawArrays(p.POINTS,0,d.array.length/3),M.info.render.calls++,M.info.render.points+=d.array.length/3;else if(f instanceof THREE.Line)if(f=f.type===THREE.LineStrip?p.LINE_STRIP:p.LINES,Q(d.linewidth),g=b.index)if(g.array instanceof Uint32Array?(l=p.UNSIGNED_INT,n=4):(l=p.UNSIGNED_SHORT,n=2),e=e.offsets,0===e.length)c&&(h(d,a,b,0),
p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,g.buffer)),p.drawElements(f,g.array.length,l,0),M.info.render.calls++,M.info.render.vertices+=g.array.length;else for(1<e.length&&(c=!0),q=0,r=e.length;q<r;q++)s=e[q].index,c&&(h(d,a,b,s),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,g.buffer)),p.drawElements(f,e[q].count,l,e[q].start*n),M.info.render.calls++,M.info.render.vertices+=e[q].count;else c&&h(d,a,b,0),d=b.position,p.drawArrays(f,0,d.array.length/3),M.info.render.calls++,M.info.render.points+=d.array.length/3}};
this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var g,h;c=C(a,b,c,d,f);b=c.attributes;a=!1;c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==la&&(la=c,a=!0);a&&k();if(!d.morphTargets&&0<=b.position)a&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglVertexBuffer),n(b.position),p.vertexAttribPointer(b.position,3,p.FLOAT,!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),n(c.position),
p.vertexAttribPointer(c.position,3,p.FLOAT,!1,0,0)):0<=c.position&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglVertexBuffer),n(c.position),p.vertexAttribPointer(c.position,3,p.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var l=0;h=f.morphTargetForcedOrder;for(g=f.morphTargetInfluences;l<d.numSupportedMorphTargets&&l<h.length;)0<=c["morphTarget"+l]&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[h[l]]),n(c["morphTarget"+l]),p.vertexAttribPointer(c["morphTarget"+l],3,p.FLOAT,!1,0,0)),0<=
c["morphNormal"+l]&&d.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[h[l]]),n(c["morphNormal"+l]),p.vertexAttribPointer(c["morphNormal"+l],3,p.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[l]=g[h[l]],l++}else{h=[];g=f.morphTargetInfluences;var r,s=g.length;for(r=0;r<s;r++)l=g[r],0<l&&h.push([l,r]);h.length>d.numSupportedMorphTargets?(h.sort(v),h.length=d.numSupportedMorphTargets):h.length>d.numSupportedMorphNormals?h.sort(v):0===h.length&&h.push([0,0]);for(l=0;l<d.numSupportedMorphTargets;)h[l]?
(r=h[l][1],0<=c["morphTarget"+l]&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[r]),n(c["morphTarget"+l]),p.vertexAttribPointer(c["morphTarget"+l],3,p.FLOAT,!1,0,0)),0<=c["morphNormal"+l]&&d.morphNormals&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[r]),n(c["morphNormal"+l]),p.vertexAttribPointer(c["morphNormal"+l],3,p.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[l]=g[r]):f.__webglMorphTargetInfluences[l]=0,l++}null!==d.program.uniforms.morphTargetInfluences&&p.uniform1fv(d.program.uniforms.morphTargetInfluences,
f.__webglMorphTargetInfluences)}if(a){if(e.__webglCustomAttributesList)for(g=0,h=e.__webglCustomAttributesList.length;g<h;g++)c=e.__webglCustomAttributesList[g],0<=b[c.buffer.belongsToAttribute]&&(p.bindBuffer(p.ARRAY_BUFFER,c.buffer),n(b[c.buffer.belongsToAttribute]),p.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,p.FLOAT,!1,0,0));0<=b.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglColorBuffer),n(b.color),p.vertexAttribPointer(b.color,
3,p.FLOAT,!1,0,0)):d.defaultAttributeValues&&p.vertexAttrib3fv(b.color,d.defaultAttributeValues.color));0<=b.normal&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglNormalBuffer),n(b.normal),p.vertexAttribPointer(b.normal,3,p.FLOAT,!1,0,0));0<=b.tangent&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglTangentBuffer),n(b.tangent),p.vertexAttribPointer(b.tangent,4,p.FLOAT,!1,0,0));0<=b.uv&&(f.geometry.faceVertexUvs[0]?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglUVBuffer),n(b.uv),p.vertexAttribPointer(b.uv,2,p.FLOAT,!1,0,0)):
d.defaultAttributeValues&&p.vertexAttrib2fv(b.uv,d.defaultAttributeValues.uv));0<=b.uv2&&(f.geometry.faceVertexUvs[1]?(p.bindBuffer(p.ARRAY_BUFFER,e.__webglUV2Buffer),n(b.uv2),p.vertexAttribPointer(b.uv2,2,p.FLOAT,!1,0,0)):d.defaultAttributeValues&&p.vertexAttrib2fv(b.uv2,d.defaultAttributeValues.uv2));d.skinning&&0<=b.skinIndex&&0<=b.skinWeight&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),n(b.skinIndex),p.vertexAttribPointer(b.skinIndex,4,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,
e.__webglSkinWeightsBuffer),n(b.skinWeight),p.vertexAttribPointer(b.skinWeight,4,p.FLOAT,!1,0,0));0<=b.lineDistance&&(p.bindBuffer(p.ARRAY_BUFFER,e.__webglLineDistanceBuffer),n(b.lineDistance),p.vertexAttribPointer(b.lineDistance,1,p.FLOAT,!1,0,0))}q();f instanceof THREE.Mesh?(f=e.__typeArray===Uint32Array?p.UNSIGNED_INT:p.UNSIGNED_SHORT,d.wireframe?(Q(d.wireframeLinewidth),a&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),p.drawElements(p.LINES,e.__webglLineCount,f,0)):(a&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,
e.__webglFaceBuffer),p.drawElements(p.TRIANGLES,e.__webglFaceCount,f,0)),M.info.render.calls++,M.info.render.vertices+=e.__webglFaceCount,M.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?p.LINE_STRIP:p.LINES,Q(d.linewidth),p.drawArrays(f,0,e.__webglLineCount),M.info.render.calls++):f instanceof THREE.PointCloud&&(p.drawArrays(p.POINTS,0,e.__webglParticleCount),M.info.render.calls++,M.info.render.points+=e.__webglParticleCount)}};this.render=function(a,
b,c,d){function e(a){a instanceof THREE.SkinnedMesh&&a.skeleton.update();for(var b=0,c=a.children.length;b<c;b++)e(a.children[b])}if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f,g,h,k,n=a.__lights,p=a.fog;$a=-1;sa=null;cb=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();e(a);b.matrixWorldInverse.getInverse(b.matrixWorld);dc.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);
kb.setFromMatrix(dc);Vb(a);Qa.length=0;Ua.length=0;u(a,a,b);!0===M.sortObjects&&(Qa.sort(l),Ua.sort(s));w(this.renderPluginsPre,a,b);M.info.render.calls=0;M.info.render.vertices=0;M.info.render.faces=0;M.info.render.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);k=a.__webglObjectsImmediate;d=0;for(f=k.length;d<f;d++)g=k[d],h=g.object,h.visible&&(K(h,b),z(g));a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,
d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),V(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),y(Qa,b,n,p,!0,d),y(Ua,b,n,p,!0,d),x(a.__webglObjectsImmediate,"",b,n,p,!1,d)):(d=null,this.setBlending(THREE.NoBlending),y(Qa,b,n,p,!1,d),x(a.__webglObjectsImmediate,"opaque",b,n,p,!1,d),y(Ua,b,n,p,!0,d),x(a.__webglObjectsImmediate,"transparent",b,n,p,!0,d));w(this.renderPluginsPost,a,b);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&
c.minFilter!==THREE.LinearFilter&&G(c);this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,b,c,d,e){var f=C(a,b,c,d,e);la=-1;M.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,p,kb):e.render(function(a){M.renderBufferImmediate(a,f,d)})};var Vb=function(a){a.__webglObjects||(a.__webglObjects={},a.__webglObjectsImmediate=[]);for(;a.__objectsAdded.length;){var c=a.__objectsAdded[0],d=a,e=void 0,f=void 0;void 0===c.__webglInit&&(c.__webglInit=
!0,c._modelViewMatrix=new THREE.Matrix4,c._normalMatrix=new THREE.Matrix3);e=c.geometry;if(void 0!==e&&void 0===e.__webglInit)if(e.__webglInit=!0,e.addEventListener("dispose",Lb),e instanceof THREE.BufferGeometry)g(e);else if(c instanceof THREE.Mesh)void 0!==c.__webglActive&&H(c,d),B(d,c,e);else if(c instanceof THREE.Line){if(!e.__webglVertexBuffer){f=e;f.__webglVertexBuffer=p.createBuffer();f.__webglColorBuffer=p.createBuffer();f.__webglLineDistanceBuffer=p.createBuffer();M.info.memory.geometries++;
var f=e,h=c,k=f.vertices.length;f.__vertexArray=new Float32Array(3*k);f.__colorArray=new Float32Array(3*k);f.__lineDistanceArray=new Float32Array(1*k);f.__webglLineCount=k;b(f,h);e.verticesNeedUpdate=!0;e.colorsNeedUpdate=!0;e.lineDistancesNeedUpdate=!0}}else c instanceof THREE.PointCloud&&!e.__webglVertexBuffer&&(f=e,f.__webglVertexBuffer=p.createBuffer(),f.__webglColorBuffer=p.createBuffer(),M.info.memory.geometries++,f=e,h=c,k=f.vertices.length,f.__vertexArray=new Float32Array(3*k),f.__colorArray=
new Float32Array(3*k),f.__sortArray=[],f.__webglParticleCount=k,b(f,h),e.verticesNeedUpdate=!0,e.colorsNeedUpdate=!0);if(void 0===c.__webglActive){if(c instanceof THREE.Mesh)if(e=c.geometry,e instanceof THREE.BufferGeometry)A(d.__webglObjects,e,c);else{if(e instanceof THREE.Geometry)for(h=0,k=e.geometryGroupsList.length;h<k;h++)f=e.geometryGroupsList[h],A(d.__webglObjects,f,c)}else c instanceof THREE.Line||c instanceof THREE.PointCloud?(e=c.geometry,A(d.__webglObjects,e,c)):(c instanceof THREE.ImmediateRenderObject||
c.immediateRenderCallback)&&d.__webglObjectsImmediate.push({id:null,object:c,opaque:null,transparent:null,z:0});c.__webglActive=!0}a.__objectsAdded.splice(0,1)}for(;a.__objectsRemoved.length;)H(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1)};this.initMaterial=function(a,b,c,d){var e,f,g,h;a.addEventListener("dispose",Tb);var k,l,n,q;a instanceof THREE.MeshDepthMaterial?q="depth":a instanceof THREE.MeshNormalMaterial?q="normal":a instanceof THREE.MeshBasicMaterial?q="basic":a instanceof THREE.MeshLambertMaterial?
q="lambert":a instanceof THREE.MeshPhongMaterial?q="phong":a instanceof THREE.LineBasicMaterial?q="basic":a instanceof THREE.LineDashedMaterial?q="dashed":a instanceof THREE.PointCloudMaterial&&(q="particle_basic");q?(e=THREE.ShaderLib[q],a.__webglShader={uniforms:THREE.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}):a.__webglShader={uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};n=h=g=f=e=0;for(var r=b.length;n<r;n++){var s=
b[n];s.onlyShadow||!1===s.visible||(s instanceof THREE.DirectionalLight&&e++,s instanceof THREE.PointLight&&f++,s instanceof THREE.SpotLight&&g++,s instanceof THREE.HemisphereLight&&h++)}r=n=0;for(s=b.length;r<s;r++){var u=b[r];u.castShadow&&(u instanceof THREE.SpotLight&&n++,u instanceof THREE.DirectionalLight&&!u.shadowCascade&&n++)}b=n;ab&&d&&d.skeleton&&d.skeleton.useVertexTexture?n=1024:(n=p.getParameter(p.MAX_VERTEX_UNIFORM_VECTORS),n=Math.floor((n-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&
(n=Math.min(d.skeleton.bones.length,n),n<d.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")));c={precision:S,supportsVertexTextures:xb,map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,
logarithmicDepthBuffer:ia,skinning:a.skinning,maxBones:n,useVertexTexture:ab&&d&&d.skeleton&&d.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,maxPointLights:f,maxSpotLights:g,maxHemiLights:h,maxShadows:b,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow&&0<b,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,
metal:a.metal,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide};d=[];q?d.push(q):(d.push(a.fragmentShader),d.push(a.vertexShader));for(var v in a.defines)d.push(v),d.push(a.defines[v]);for(l in c)d.push(l),d.push(c[l]);q=d.join();var w;l=0;for(v=wa.length;l<v;l++)if(d=wa[l],d.code===q){w=d;w.usedTimes++;break}void 0===w&&(w=new THREE.WebGLProgram(this,q,a,c),wa.push(w),M.info.memory.programs=wa.length);a.program=w;w=a.program.attributes;if(a.morphTargets)for(a.numSupportedMorphTargets=
0,v="morphTarget",l=0;l<this.maxMorphTargets;l++)q=v+l,0<=w[q]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(a.numSupportedMorphNormals=0,v="morphNormal",l=0;l<this.maxMorphNormals;l++)q=v+l,0<=w[q]&&a.numSupportedMorphNormals++;a.uniformsList=[];for(k in a.__webglShader.uniforms)(l=a.program.uniforms[k])&&a.uniformsList.push([a.__webglShader.uniforms[k],l])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?p.disable(p.CULL_FACE):(b===THREE.FrontFaceDirectionCW?p.frontFace(p.CW):p.frontFace(p.CCW),
a===THREE.CullFaceBack?p.cullFace(p.BACK):a===THREE.CullFaceFront?p.cullFace(p.FRONT):p.cullFace(p.FRONT_AND_BACK),p.enable(p.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;Ia!==b&&(b?p.disable(p.CULL_FACE):p.enable(p.CULL_FACE),Ia=b);Fa!==a&&(a?p.frontFace(p.CW):p.frontFace(p.CCW),Fa=a)};this.setDepthTest=function(a){X!==a&&(a?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),X=a)};this.setDepthWrite=function(a){pa!==a&&(p.depthMask(a),pa=a)};
this.setBlending=function(a,b,c,d){a!==ua&&(a===THREE.NoBlending?p.disable(p.BLEND):a===THREE.AdditiveBlending?(p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.SRC_ALPHA,p.ONE)):a===THREE.SubtractiveBlending?(p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.SRC_COLOR)):a===THREE.CustomBlending?p.enable(p.BLEND):(p.enable(p.BLEND),p.blendEquationSeparate(p.FUNC_ADD,
p.FUNC_ADD),p.blendFuncSeparate(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA)),ua=a);if(a===THREE.CustomBlending){if(b!==za&&(p.blendEquation(W(b)),za=b),c!==Na||d!==aa)p.blendFunc(W(c),W(d)),Na=c,aa=d}else aa=Na=za=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",hb),a.__webglTexture=p.createTexture(),M.info.memory.textures++);p.activeTexture(p.TEXTURE0+b);p.bindTexture(p.TEXTURE_2D,a.__webglTexture);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,
a.flipY);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);p.pixelStorei(p.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height),e=W(a.format),f=W(a.type);P(p.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var h=0,k=g.length;h<k;h++)c=g[h],p.texImage2D(p.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else p.texImage2D(p.TEXTURE_2D,0,e,c.width,c.height,0,e,
f,c.data);else if(a instanceof THREE.CompressedTexture)for(h=0,k=g.length;h<k;h++)c=g[h],a.format!==THREE.RGBAFormat?p.compressedTexImage2D(p.TEXTURE_2D,h,e,c.width,c.height,0,c.data):p.texImage2D(p.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);else if(0<g.length&&d){h=0;for(k=g.length;h<k;h++)c=g[h],p.texImage2D(p.TEXTURE_2D,h,e,e,f,c);a.generateMipmaps=!1}else p.texImage2D(p.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&p.generateMipmap(p.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else p.activeTexture(p.TEXTURE0+
b),p.bindTexture(p.TEXTURE_2D,a.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",Yb);a.__webglTexture=p.createTexture();M.info.memory.textures++;var c=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),d=W(a.format),e=W(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];p.bindTexture(p.TEXTURE_CUBE_MAP,
a.__webglTexture);P(p.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=p.createFramebuffer();a.__webglRenderbuffer[f]=p.createRenderbuffer();p.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=p.TEXTURE_CUBE_MAP_POSITIVE_X+f;p.bindFramebuffer(p.FRAMEBUFFER,a.__webglFramebuffer[f]);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,h,g.__webglTexture,0);I(a.__webglRenderbuffer[f],a)}c&&p.generateMipmap(p.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=
p.createFramebuffer(),a.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:p.createRenderbuffer(),p.bindTexture(p.TEXTURE_2D,a.__webglTexture),P(p.TEXTURE_2D,a,c),p.texImage2D(p.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=p.TEXTURE_2D,p.bindFramebuffer(p.FRAMEBUFFER,a.__webglFramebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,
p.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,a.__webglRenderbuffer):I(a.__webglRenderbuffer,a),c&&p.generateMipmap(p.TEXTURE_2D);b?p.bindTexture(p.TEXTURE_CUBE_MAP,null):p.bindTexture(p.TEXTURE_2D,null);p.bindRenderbuffer(p.RENDERBUFFER,null);p.bindFramebuffer(p.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=qb,a=Pb,
d=qa,e=Ga);b!==Ma&&(p.bindFramebuffer(p.FRAMEBUFFER,b),p.viewport(d,e,c,a),Ma=b);Ib=c;Qb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){this.width=a;this.height=b},clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;
a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLProgram=function(){var a=0;return function(b,c,d,e){var f=b.context,g=d.defines,h=d.__webglShader.uniforms,k=d.attributes,n=d.__webglShader.vertexShader,q=d.__webglShader.fragmentShader,l=d.index0AttributeName;void 0===l&&!0===e.morphTargets&&(l="position");var s="SHADOWMAP_TYPE_BASIC";e.shadowMapType===THREE.PCFShadowMap?s="SHADOWMAP_TYPE_PCF":e.shadowMapType===THREE.PCFSoftShadowMap&&(s="SHADOWMAP_TYPE_PCF_SOFT");var v,u;v=[];for(var w in g)u=g[w],!1!==u&&(u="#define "+w+" "+u,v.push(u));
v=v.join("\n");g=f.createProgram();d instanceof THREE.RawShaderMaterial?b=d="":(d=["precision "+e.precision+" float;","precision "+e.precision+" int;",v,e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,"#define MAX_BONES "+
e.maxBones,e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals?"#define USE_MORPHNORMALS":"",e.wrapAround?"#define WRAP_AROUND":
"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+s:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),
b=["precision "+e.precision+" float;","precision "+e.precision+" int;",e.bumpMap||e.normalMap?"#extension GL_OES_standard_derivatives : enable":"",v,"#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,e.alphaTest?"#define ALPHATEST "+e.alphaTest:"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",e.useFog&&e.fog?"#define USE_FOG":
"",e.useFog&&e.fogExp?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.metal?"#define METAL":"",e.wrapAround?"#define WRAP_AROUND":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":
"",e.shadowMapEnabled?"#define "+s:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"));n=new THREE.WebGLShader(f,f.VERTEX_SHADER,d+n);q=new THREE.WebGLShader(f,f.FRAGMENT_SHADER,b+q);f.attachShader(g,n);f.attachShader(g,q);void 0!==l&&f.bindAttribLocation(g,0,l);f.linkProgram(g);!1===f.getProgramParameter(g,f.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),
console.error("gl.VALIDATE_STATUS",f.getProgramParameter(g,f.VALIDATE_STATUS)),console.error("gl.getError()",f.getError()));""!==f.getProgramInfoLog(g)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f.getProgramInfoLog(g));f.deleteShader(n);f.deleteShader(q);l="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" ");e.useVertexTexture?(l.push("boneTexture"),l.push("boneTextureWidth"),l.push("boneTextureHeight")):
l.push("boneGlobalMatrices");e.logarithmicDepthBuffer&&l.push("logDepthBufFC");for(var y in h)l.push(y);h=l;y={};l=0;for(b=h.length;l<b;l++)s=h[l],y[s]=f.getUniformLocation(g,s);this.uniforms=y;l="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(h=0;h<e.maxMorphTargets;h++)l.push("morphTarget"+h);for(h=0;h<e.maxMorphNormals;h++)l.push("morphNormal"+h);for(var x in k)l.push(x);e=l;k={};x=0;for(h=e.length;x<h;x++)y=e[x],k[y]=f.getAttribLocation(g,y);this.attributes=
k;this.id=a++;this.code=c;this.usedTimes=1;this.program=g;this.vertexShader=n;this.fragmentShader=q;return this}}();
THREE.WebGLShader=function(){var a=function(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")};return function(b,c,d){c=b.createShader(c);b.shaderSource(c,d);b.compileShader(c);!1===b.getShaderParameter(c,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(c)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b.getShaderInfoLog(c)),console.warn(a(d)));return c}}();
THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};
THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.Texture(void 0,b);e.load(a,function(a){f.image=a;f.needsUpdate=!0;c&&c(f)},void 0,function(a){d&&d(a)});f.sourceFile=a;return f},loadTextureCube:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.CubeTexture([],b);f.flipY=!1;var g=0;b=function(b){e.load(a[b],function(a){f.images[b]=a;g+=1;6===g&&(f.needsUpdate=!0,c&&
c(f))})};d=0;for(var h=a.length;d<h;++d)b(d);return f},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var d=a.width,e=a.height,f=document.createElement("canvas");
f.width=d;f.height=e;var g=f.getContext("2d");g.drawImage(a,0,0);for(var h=g.getImageData(0,0,d,e).data,k=g.createImageData(d,e),n=k.data,q=0;q<d;q++)for(var l=0;l<e;l++){var s=0>l-1?0:l-1,v=l+1>e-1?e-1:l+1,u=0>q-1?0:q-1,w=q+1>d-1?d-1:q+1,y=[],x=[0,0,h[4*(l*d+q)]/255*b];y.push([-1,0,h[4*(l*d+u)]/255*b]);y.push([-1,-1,h[4*(s*d+u)]/255*b]);y.push([0,-1,h[4*(s*d+q)]/255*b]);y.push([1,-1,h[4*(s*d+w)]/255*b]);y.push([1,0,h[4*(l*d+w)]/255*b]);y.push([1,1,h[4*(v*d+w)]/255*b]);y.push([0,1,h[4*(v*d+q)]/255*
b]);y.push([-1,1,h[4*(v*d+u)]/255*b]);s=[];u=y.length;for(v=0;v<u;v++){var w=y[v],z=y[(v+1)%u],w=[w[0]-x[0],w[1]-x[1],w[2]-x[2]],z=[z[0]-x[0],z[1]-x[1],z[2]-x[2]];s.push(c([w[1]*z[2]-w[2]*z[1],w[2]*z[0]-w[0]*z[2],w[0]*z[1]-w[1]*z[0]]))}y=[0,0,0];for(v=0;v<s.length;v++)y[0]+=s[v][0],y[1]+=s[v][1],y[2]+=s[v][2];y[0]/=s.length;y[1]/=s.length;y[2]/=s.length;x=4*(l*d+q);n[x]=(y[0]+1)/2*255|0;n[x+1]=(y[1]+1)/2*255|0;n[x+2]=255*y[2]|0;n[x+3]=255}g.putImageData(k,0,0);return f},generateDataTexture:function(a,
b,c){var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),g=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var h=0;h<d;h++)e[3*h]=f,e[3*h+1]=g,e[3*h+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=
a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,d=0,e=String(a).split(""),f=e.length,g=[];for(a=0;a<f;a++){var h=new THREE.Path,h=this.extractGlyphPoints(e[a],b,c,d,h),d=d+h.offset;g.push(h.path)}return{paths:g,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],g,h,k,n,q,l,s,v,u,w,y,x=b.glyphs[a]||b.glyphs["?"];if(x){if(x.o)for(b=x._cachedOutline||(x._cachedOutline=x.o.split(" ")),n=b.length,a=0;a<n;)switch(k=b[a++],k){case "m":k=b[a++]*c+d;q=b[a++]*c;e.moveTo(k,q);
break;case "l":k=b[a++]*c+d;q=b[a++]*c;e.lineTo(k,q);break;case "q":k=b[a++]*c+d;q=b[a++]*c;v=b[a++]*c+d;u=b[a++]*c;e.quadraticCurveTo(v,u,k,q);if(g=f[f.length-1])for(l=g.x,s=g.y,g=1,h=this.divisions;g<=h;g++){var z=g/h;THREE.Shape.Utils.b2(z,l,v,k);THREE.Shape.Utils.b2(z,s,u,q)}break;case "b":if(k=b[a++]*c+d,q=b[a++]*c,v=b[a++]*c+d,u=b[a++]*c,w=b[a++]*c+d,y=b[a++]*c,e.bezierCurveTo(v,u,w,y,k,q),g=f[f.length-1])for(l=g.x,s=g.y,g=1,h=this.divisions;g<=h;g++)z=g/h,THREE.Shape.Utils.b3(z,l,v,w,k),THREE.Shape.Utils.b3(z,
s,u,y,q)}return{offset:x.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,g=0;g<b;f=g++)e+=a[f].x*a[g].y-a[g].x*a[f].y;return.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],g=[],h=[],k,n,q;if(0<b(a))for(n=0;n<e;n++)g[n]=n;else for(n=0;n<e;n++)g[n]=e-1-n;var l=2*e;for(n=e-1;2<e;){if(0>=l--){console.log("Warning, unable to triangulate polygon!");break}k=n;e<=k&&(k=0);n=k+1;e<=n&&(n=0);q=n+1;e<=q&&(q=0);var s;a:{var v=s=void 0,u=void 0,w=void 0,y=void 0,x=void 0,z=void 0,B=void 0,A=void 0,
v=a[g[k]].x,u=a[g[k]].y,w=a[g[n]].x,y=a[g[n]].y,x=a[g[q]].x,z=a[g[q]].y;if(1E-10>(w-v)*(z-u)-(y-u)*(x-v))s=!1;else{var D=void 0,E=void 0,H=void 0,C=void 0,F=void 0,O=void 0,K=void 0,da=void 0,L=void 0,Q=void 0,L=da=K=A=B=void 0,D=x-w,E=z-y,H=v-x,C=u-z,F=w-v,O=y-u;for(s=0;s<e;s++)if(B=a[g[s]].x,A=a[g[s]].y,!(B===v&&A===u||B===w&&A===y||B===x&&A===z)&&(K=B-v,da=A-u,L=B-w,Q=A-y,B-=x,A-=z,L=D*Q-E*L,K=F*da-O*K,da=H*A-C*B,-1E-10<=L&&-1E-10<=da&&-1E-10<=K)){s=!1;break a}s=!0}}if(s){f.push([a[g[k]],a[g[n]],
a[g[q]]]);h.push([g[k],g[n],g[q]]);k=n;for(q=n+1;q<e;k++,q++)g[k]=g[q];e--;l=2*e}}return d?h:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(a){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};
THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};
THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};
THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,h=e-1,k;g<=h;)if(d=Math.floor(g+(h-g)/2),k=c[d]-f,0>k)g=d+1;else if(0<k)h=d-1;else{h=d;break}d=h;if(c[d]==f)return d/(e-1);g=c[d];return c=(d+(f-g)/(c[d+1]-g))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};
THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,g;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var h,k,n,q,l=a[0]instanceof THREE.Vector3;q=l?new THREE.Vector3:new THREE.Vector2;k=0;for(n=a.length;k<n;k++)h=a[k],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<f&&(f=h.y),l&&(h.z>d?d=h.z:h.z<g&&(g=h.z)),q.add(h);a={minX:e,minY:f,maxX:b,maxY:c};l&&(a.maxZ=d,a.minZ=g);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,g,h,k;d=0;for(e=a.length;d<e;d++)f=a[d],g=f.x,h=f.y,k=g/c.maxX,k=b.getUtoTmapping(k,g),g=b.getPoint(k),k=b.getTangent(k),k.set(-k.y,k.x).multiplyScalar(h),f.x=g.x+k.x,f.y=g.y+k.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;
THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,h=new THREE.CubicBezierCurve(new THREE.Vector2(h[h.length-2],h[h.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(h);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:g})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var g=this.actions[this.actions.length-1].args;this.absarc(a+g[g.length-2],b+g[g.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,g){var h=this.actions[this.actions.length-1].args;this.absellipse(a+h[h.length-2],b+h[h.length-1],c,d,e,f,g)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments),k=new THREE.EllipseCurve(a,b,c,d,e,f,g);this.curves.push(k);k=k.getPoint(1);h.push(k.x);h.push(k.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:h})};
THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;d<a;d++)c.push(this.getPoint(d/a));return c};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);a=a||12;var c=[],d,e,f,g,h,k,n,q,l,s,v,u,w;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],g=f.action,f=f.args,g){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:h=f[2];k=f[3];l=f[0];s=f[1];0<c.length?(g=c[c.length-1],v=g.x,
u=g.y):(g=this.actions[d-1].args,v=g[g.length-2],u=g[g.length-1]);for(f=1;f<=a;f++)w=f/a,g=THREE.Shape.Utils.b2(w,v,l,h),w=THREE.Shape.Utils.b2(w,u,s,k),c.push(new THREE.Vector2(g,w));break;case THREE.PathActions.BEZIER_CURVE_TO:h=f[4];k=f[5];l=f[0];s=f[1];n=f[2];q=f[3];0<c.length?(g=c[c.length-1],v=g.x,u=g.y):(g=this.actions[d-1].args,v=g[g.length-2],u=g[g.length-1]);for(f=1;f<=a;f++)w=f/a,g=THREE.Shape.Utils.b3(w,v,l,n,h),w=THREE.Shape.Utils.b3(w,u,s,q,k),c.push(new THREE.Vector2(g,w));break;case THREE.PathActions.CSPLINE_THRU:g=
this.actions[d-1].args;w=[new THREE.Vector2(g[g.length-2],g[g.length-1])];g=a*f[0].length;w=w.concat(f[0]);w=new THREE.SplineCurve(w);for(f=1;f<=g;f++)c.push(w.getPointAt(f/g));break;case THREE.PathActions.ARC:h=f[0];k=f[1];s=f[2];n=f[3];g=f[4];l=!!f[5];v=g-n;u=2*a;for(f=1;f<=u;f++)w=f/u,l||(w=1-w),w=n+w*v,g=h+s*Math.cos(w),w=k+s*Math.sin(w),c.push(new THREE.Vector2(g,w));break;case THREE.PathActions.ELLIPSE:for(h=f[0],k=f[1],s=f[2],q=f[3],n=f[4],g=f[5],l=!!f[6],v=g-n,u=2*a,f=1;f<=u;f++)w=f/u,l||
(w=1-w),w=n+w*v,g=h+s*Math.cos(w),w=k+q*Math.sin(w),c.push(new THREE.Vector2(g,w))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(1E-10<Math.abs(l)){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y==g.y){if(a.x==g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0==e)return!0;0>e||(d=!d)}}else if(a.y==g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=
h.x))return!0}return d}var e=function(a){var b,c,d,e,f=[],g=new THREE.Path;b=0;for(c=a.length;b<c;b++)d=a[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=g.actions.length&&(f.push(g),g=new THREE.Path),g[d].apply(g,e);0!=g.actions.length&&f.push(g);return f}(this.actions);if(0==e.length)return[];if(!0===b)return c(e);var f,g,h,k=[];if(1==e.length)return g=e[0],h=new THREE.Shape,h.actions=g.actions,h.curves=g.curves,k.push(h),k;var n=!THREE.Shape.Utils.isClockWise(e[0].getPoints()),n=a?!n:n;
h=[];var q=[],l=[],s=0,v;q[s]=void 0;l[s]=[];var u,w;u=0;for(w=e.length;u<w;u++)g=e[u],v=g.getPoints(),f=THREE.Shape.Utils.isClockWise(v),(f=a?!f:f)?(!n&&q[s]&&s++,q[s]={s:new THREE.Shape,p:v},q[s].s.actions=g.actions,q[s].s.curves=g.curves,n&&s++,l[s]=[]):l[s].push({h:g,p:v[0]});if(!q[0])return c(e);if(1<q.length){u=!1;w=[];g=0;for(e=q.length;g<e;g++)h[g]=[];g=0;for(e=q.length;g<e;g++)for(f=l[g],n=0;n<f.length;n++){s=f[n];v=!0;for(var y=0;y<q.length;y++)d(s.p,q[y].p)&&(g!=y&&w.push({froms:g,tos:y,
hole:n}),v?(v=!1,h[y].push(s)):u=!0);v&&h[g].push(s)}0<w.length&&(u||(l=h))}u=0;for(w=q.length;u<w;u++)for(h=q[u].s,k.push(h),g=l[u],e=0,f=g.length;e<f;e++)h.holes.push(g[e].h);return k};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};
THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};
THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={triangulateShape:function(a,b){function c(a,b,c){return a.x!=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-d.x,l=e.y-d.y,n=a.x-d.x,q=a.y-d.y,H=h*k-g*l,C=h*n-g*q;if(1E-10<Math.abs(H)){if(0<H){if(0>C||C>H)return[];k=l*n-k*q;if(0>k||k>H)return[]}else{if(0<C||C<H)return[];k=l*n-k*q;if(0<k||k<H)return[]}if(0==k)return!f||0!=C&&C!=H?[a]:[];if(k==H)return!f||0!=C&&C!=H?[b]:[];if(0==C)return[d];
if(C==H)return[e];f=k/H;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!=C||l*n!=k*q)return[];h=0==g&&0==h;k=0==k&&0==l;if(h&&k)return a.x!=d.x||a.y!=d.y?[]:[a];if(h)return c(d,e,a)?[a]:[];if(k)return c(a,b,d)?[d]:[];0!=g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,H=d.x,l=e,d=e.x):(b=e,H=e.x,l=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,H=d.y,l=e,d=e.y):(b=e,H=e.y,l=d,d=d.y));return k<=H?a<H?[]:a==H?f?[]:[b]:a<=d?[b,h]:[b,l]:k>d?[]:k==d?f?[]:[g]:a<=d?[g,h]:
[g,l]}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return 1E-10<Math.abs(a)?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var f,g,h,k,n,q={};h=a.concat();f=0;for(g=b.length;f<g;f++)Array.prototype.push.apply(h,b[f]);f=0;for(g=h.length;f<g;f++)n=h[f].x+":"+h[f].y,void 0!==q[n]&&console.log("Duplicate point",n),q[n]=f;f=function(a,b){function c(a,b){var d=h.length-1,f=a-1;0>f&&(f=d);var g=a+1;g>d&&(g=0);d=e(h[a],h[f],h[g],k[b]);if(!d)return!1;
d=k.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return(d=e(k[b],k[f],k[g],h[a]))?!0:!1}function f(a,b){var c,e;for(c=0;c<h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function g(a,c){var e,f,h,k;for(e=0;e<l.length;e++)for(f=b[l[e]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,l=[],n,q,E,H,C,F=[],O,K,da,L=0;for(n=b.length;L<n;L++)l.push(L);O=0;for(var Q=2*l.length;0<l.length;){Q--;if(0>Q){console.log("Infinite Loop! Holes left:"+
l.length+", Probably Hole outside Shape!");break}for(q=O;q<h.length;q++){E=h[q];n=-1;for(L=0;L<l.length;L++)if(H=l[L],C=E.x+":"+E.y+":"+H,void 0===F[C]){k=b[H];for(K=0;K<k.length;K++)if(H=k[K],c(q,K)&&!f(E,H)&&!g(E,H)){n=K;l.splice(L,1);O=h.slice(0,q+1);H=h.slice(q);K=k.slice(n);da=k.slice(0,n+1);h=O.concat(K).concat(da).concat(H);O=q;break}if(0<=n)break;F[C]=!0}if(0<=n)break}}return h}(a,b);var l=THREE.FontUtils.Triangulate(f,!1);f=0;for(g=l.length;f<g;f++)for(k=l[f],h=0;3>h;h++)n=k[h].x+":"+k[h].y,
n=q[n],void 0!==n&&(k[h]=n);return l.concat()},isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,
b)+this.b3p1(a,c)+this.b3p2(a,d)+this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};
THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};
THREE.EllipseCurve=function(a,b,c,d,e,f,g){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);
THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});
THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;a*=d.length-1;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],g=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,g.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,g.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,g.z,c.z,a);return b});
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(a){if(!0!==a.initialized){for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=
0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var d=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(d)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){d={};for(c=0;c<a.hierarchy[b].keys.length;c++)for(var e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++){var f=a.hierarchy[b].keys[c].morphTargets[e];d[f]=-1}a.hierarchy[b].usedMorphTargets=d;for(c=0;c<a.hierarchy[b].keys.length;c++){var g=
{};for(f in d){for(e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++)if(a.hierarchy[b].keys[c].morphTargets[e]===f){g[f]=a.hierarchy[b].keys[c].morphTargetsInfluences[e];break}e===a.hierarchy[b].keys[c].morphTargets.length&&(g[f]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=g}}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=
!0;return a}},parse:function(a){var b=function(a,c){c.push(a);for(var d=0;d<a.children.length;d++)b(a.children[d],c)},c=[];if(a instanceof THREE.SkinnedMesh)for(var d=0;d<a.skeleton.bones.length;d++)c.push(a.skeleton.bones[d]);else b(a,c);return c},play:function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)},stop:function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)},update:function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)}};
THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.keyTypes=["pos","rot","scl"];THREE.Animation.prototype.play=function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)};
THREE.Animation.prototype.stop=function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)};
THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0;void 0===c.animationCache&&(c.animationCache={});void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].originalMatrix=c.matrix);for(var c=c.animationCache[this.data.name],d=0;3>d;d++){for(var e=
this.keyTypes[d],f=this.data.hierarchy[a].keys[0],g=this.getNextKeyWith(e,a,1);g.time<this.currentTime&&g.index>f.index;)f=g,g=this.getNextKeyWith(e,a,g.index+1);c.prevKey[e]=f;c.nextKey[e]=g}}};
THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Quaternion,e=function(a,b){var c=[],d=[],e,l,s,v,u,w;e=(a.length-1)*b;l=Math.floor(e);e-=l;c[0]=0===l?l:l-1;c[1]=l;c[2]=l>a.length-2?l:l+1;c[3]=l>a.length-3?l:l+2;l=a[c[0]];v=a[c[1]];u=a[c[2]];w=a[c[3]];c=e*e;s=e*c;d[0]=f(l[0],v[0],u[0],w[0],e,c,s);d[1]=f(l[1],v[1],u[1],w[1],e,c,s);d[2]=f(l[2],v[2],u[2],w[2],e,c,s);return d},f=function(a,b,c,d,e,f,s){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*s+
(-3*(b-c)-2*a-d)*f+a*e+b};return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,0!==this.weight)){f=this.data.length;if(!0===this.loop&&this.currentTime>f)this.currentTime%=f,this.reset();else if(!1===this.loop&&this.currentTime>f){this.stop();return}f=0;for(var h=this.hierarchy.length;f<h;f++)for(var k=this.hierarchy[f],n=k.animationCache[this.data.name],q=0;3>q;q++){var l=this.keyTypes[q],s=n.prevKey[l],v=n.nextKey[l];if(v.time<=this.currentTime){s=this.data.hierarchy[f].keys[0];
for(v=this.getNextKeyWith(l,f,1);v.time<this.currentTime&&v.index>s.index;)s=v,v=this.getNextKeyWith(l,f,v.index+1);n.prevKey[l]=s;n.nextKey[l]=v}k.matrixAutoUpdate=!0;k.matrixWorldNeedsUpdate=!0;var u=(this.currentTime-s.time)/(v.time-s.time),w=s[l],y=v[l];0>u&&(u=0);1<u&&(u=1);if("pos"===l)if(this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=w[0]+(y[0]-w[0])*u,c.y=w[1]+(y[1]-w[1])*u,c.z=w[2]+(y[2]-w[2])*u,k instanceof THREE.Bone?(s=this.weight/(this.weight+k.accumulatedPosWeight),k.position.lerp(c,
s),k.accumulatedPosWeight+=this.weight):k.position.copy(c);else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",f,s.index-1).pos,a[1]=w,a[2]=y,a[3]=this.getNextKeyWith("pos",f,v.index+1).pos,u=.33*u+.33,v=e(a,u),s=1,k instanceof THREE.Bone&&(s=this.weight/(this.weight+k.accumulatedPosWeight),k.accumulatedPosWeight+=this.weight),l=k.position,l.x+=(v[0]-l.x)*s,l.y+=(v[1]-l.y)*s,l.z+=(v[2]-
l.z)*s,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(u=e(a,1.01*u),b.set(u[0],u[1],u[2]),b.sub(l),b.y=0,b.normalize(),u=Math.atan2(b.x,b.z),k.rotation.set(0,u,0))}else"rot"===l?(THREE.Quaternion.slerp(w,y,d,u),k instanceof THREE.Bone?0===k.accumulatedRotWeight?(k.quaternion.copy(d),k.accumulatedRotWeight=this.weight):(s=this.weight/(this.weight+k.accumulatedRotWeight),THREE.Quaternion.slerp(k.quaternion,d,k.quaternion,s),k.accumulatedRotWeight+=this.weight):k.quaternion.copy(d)):
"scl"===l&&(c.x=w[0]+(y[0]-w[0])*u,c.y=w[1]+(y[1]-w[1])*u,c.z=w[2]+(y[2]-w[2])*u,k instanceof THREE.Bone?(s=this.weight/(this.weight+k.accumulatedSclWeight),k.scale.lerp(c,s),k.accumulatedSclWeight+=this.weight):k.scale.copy(c))}return!0}}}();
THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};
THREE.KeyFrameAnimation=function(a){this.root=a.node;this.data=THREE.AnimationHandler.init(a);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=!1;this.loop=this.isPaused=!0;a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],g=this.getNextKeyWith(f,a,0);g&&g.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,d;for(a=0;a<b;a++)c=this.hierarchy[a],d=this.data.hierarchy[a],void 0===d.animationCache&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=c.matrix),c=this.data.hierarchy[a].keys,c.length&&(d.animationCache.prevKey=c[0],d.animationCache.nextKey=c[1],this.startTime=Math.min(c[0].time,
this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;d.copy(b.matrix);b.matrix=d;delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(!1!==this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],d=this.data.hierarchy[a],e=d.keys,d=d.animationCache;if(e.length){var f=d.prevKey,g=d.nextKey;if(g.time<=this.currentTime){for(;g.time<this.currentTime&&g.index>f.index;)f=g,g=e[f.index+1];d.prevKey=
f;d.nextKey=g}g.time>=this.currentTime?f.interpolate(g,this.currentTime):f.interpolate(g,g.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};
THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.MorphAnimation=function(a){this.mesh=a;this.frames=a.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var a=0,b=0;return function(c){if(!1!==this.isPlaying){this.currentTime+=c;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);c=this.duration/this.frames;var d=Math.floor(this.currentTime/c);d!=b&&(this.mesh.morphTargetInfluences[a]=0,this.mesh.morphTargetInfluences[b]=1,this.mesh.morphTargetInfluences[d]=
0,a=b,b=d);this.mesh.morphTargetInfluences[d]=this.currentTime%c/c;this.mesh.morphTargetInfluences[a]=1-this.mesh.morphTargetInfluences[d]}}}()};
THREE.BoxGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,w){var y,x=h.widthSegments,z=h.heightSegments,B=e/2,A=f/2,D=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)y="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)y="y",z=h.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)y="x",x=h.depthSegments;var E=x+1,H=z+1,C=e/x,F=f/z,O=new THREE.Vector3;O[y]=0<g?1:-1;for(e=0;e<H;e++)for(f=0;f<E;f++){var K=new THREE.Vector3;K[a]=(f*C-B)*c;K[b]=(e*F-A)*d;K[y]=g;h.vertices.push(K)}for(e=
0;e<z;e++)for(f=0;f<x;f++)A=f+E*e,a=f+E*(e+1),b=f+1+E*(e+1),c=f+1+E*e,d=new THREE.Vector2(f/x,1-e/z),g=new THREE.Vector2(f/x,1-(e+1)/z),y=new THREE.Vector2((f+1)/x,1-(e+1)/z),B=new THREE.Vector2((f+1)/x,1-e/z),A=new THREE.Face3(A+D,a+D,c+D),A.normal.copy(O),A.vertexNormals.push(O.clone(),O.clone(),O.clone()),A.materialIndex=w,h.faces.push(A),h.faceVertexUvs[0].push([d,g,B]),A=new THREE.Face3(a+D,b+D,c+D),A.normal.copy(O),A.vertexNormals.push(O.clone(),O.clone(),O.clone()),A.materialIndex=w,h.faces.push(A),
h.faceVertexUvs[0].push([g.clone(),y,B.clone()])}THREE.Geometry.call(this);this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;var h=this;d=a/2;e=b/2;f=c/2;g("z","y",-1,-1,c,b,d,0);g("z","y",1,-1,c,b,-d,1);g("x","z",1,1,a,c,e,2);g("x","z",1,-1,a,c,-e,3);g("x","y",1,-1,a,b,f,4);g("x","y",-1,-1,a,b,-f,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var g=new THREE.Vector2(.5,.5);this.vertices.push(e);f.push(g);for(e=0;e<=b;e++){var h=new THREE.Vector3,k=c+e/b*d;h.x=a*Math.cos(k);h.y=a*Math.sin(k);this.vertices.push(h);f.push(new THREE.Vector2((h.x/a+1)/2,(h.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=
b;e++)this.faces.push(new THREE.Face3(e,e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),g.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new THREE.BoxGeometry(a,b,c,d,e,f)};
THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;f=void 0!==f?f:!1;var g=c/2,h,k,n=[],q=[];for(k=0;k<=e;k++){var l=[],s=[],v=k/e,u=v*(b-a)+a;for(h=0;h<=d;h++){var w=h/d,y=new THREE.Vector3;y.x=u*Math.sin(w*Math.PI*2);y.y=-v*c+g;y.z=u*Math.cos(w*Math.PI*2);this.vertices.push(y);l.push(this.vertices.length-1);s.push(new THREE.Vector2(w,
1-v))}n.push(l);q.push(s)}c=(b-a)/c;for(h=0;h<d;h++)for(0!==a?(l=this.vertices[n[0][h]].clone(),s=this.vertices[n[0][h+1]].clone()):(l=this.vertices[n[1][h]].clone(),s=this.vertices[n[1][h+1]].clone()),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize(),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*c).normalize(),k=0;k<e;k++){var v=n[k][h],u=n[k+1][h],w=n[k+1][h+1],y=n[k][h+1],x=l.clone(),z=l.clone(),B=s.clone(),A=s.clone(),D=q[k][h].clone(),E=q[k+1][h].clone(),H=q[k+1][h+1].clone(),C=q[k][h+1].clone();this.faces.push(new THREE.Face3(v,
u,y,[x,z,A]));this.faceVertexUvs[0].push([D,E,C]);this.faces.push(new THREE.Face3(u,w,y,[z.clone(),B,A.clone()]));this.faceVertexUvs[0].push([E.clone(),H,C.clone()])}if(!1===f&&0<a)for(this.vertices.push(new THREE.Vector3(0,g,0)),h=0;h<d;h++)v=n[0][h],u=n[0][h+1],w=this.vertices.length-1,x=new THREE.Vector3(0,1,0),z=new THREE.Vector3(0,1,0),B=new THREE.Vector3(0,1,0),D=q[0][h].clone(),E=q[0][h+1].clone(),H=new THREE.Vector2(E.x,0),this.faces.push(new THREE.Face3(v,u,w,[x,z,B])),this.faceVertexUvs[0].push([D,
E,H]);if(!1===f&&0<b)for(this.vertices.push(new THREE.Vector3(0,-g,0)),h=0;h<d;h++)v=n[k][h+1],u=n[k][h],w=this.vertices.length-1,x=new THREE.Vector3(0,-1,0),z=new THREE.Vector3(0,-1,0),B=new THREE.Vector3(0,-1,0),D=q[k][h+1].clone(),E=q[k][h].clone(),H=new THREE.Vector2(E.x,1),this.faces.push(new THREE.Face3(v,u,w,[x,z,B])),this.faceVertexUvs[0].push([D,E,H]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.Math.sign,e=1,e=a.x-b.x,f=a.y-b.y,g=c.x-a.x,h=c.y-a.y,k=e*e+f*f;if(1E-10<Math.abs(e*h-f*g)){var l=Math.sqrt(k),d=Math.sqrt(g*g+h*h),k=b.x-f/l;b=b.y+e/l;g=((c.x-h/d-k)*h-(c.y+g/d-b)*g)/(e*h-f*g);c=k+e*g-a.x;a=b+f*g-a.y;e=c*c+a*a;if(2>=e)return new THREE.Vector2(c,a);e=Math.sqrt(e/2)}else a=!1,1E-10<e?1E-10<g&&(a=!0):-1E-10>e?-1E-10>g&&
(a=!0):d(f)==d(h)&&(a=!0),a?(c=-f,a=e,e=Math.sqrt(k)):(c=e,a=f,e=Math.sqrt(k/2));return new THREE.Vector2(c/e,a/e)}function e(c,d){var e,f;for(J=c.length;0<=--J;){e=J;f=J-1;0>f&&(f=c.length-1);for(var g=0,h=v+2*q,g=0;g<h;g++){var k=Z*g,l=Z*(g+1),n=d+e+k,k=d+f+k,u=d+f+l,l=d+e+l,s=c,w=g,x=h,y=e,A=f,n=n+da,k=k+da,u=u+da,l=l+da;K.faces.push(new THREE.Face3(n,k,l,null,null,z));K.faces.push(new THREE.Face3(k,u,l,null,null,z));n=B.generateSideWallUV(K,a,s,b,n,k,u,l,w,x,y,A);K.faceVertexUvs[0].push([n[0],
n[1],n[3]]);K.faceVertexUvs[0].push([n[1],n[2],n[3]])}}}function f(a,b,c){K.vertices.push(new THREE.Vector3(a,b,c))}function g(c,d,e,f){c+=da;d+=da;e+=da;K.faces.push(new THREE.Face3(c,d,e,null,null,x));c=f?B.generateBottomUV(K,a,b,c,d,e):B.generateTopUV(K,a,b,c,d,e);K.faceVertexUvs[0].push(c)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,n=void 0!==b.bevelSize?b.bevelSize:k-2,q=void 0!==b.bevelSegments?b.bevelSegments:3,l=void 0!==b.bevelEnabled?b.bevelEnabled:
!0,s=void 0!==b.curveSegments?b.curveSegments:12,v=void 0!==b.steps?b.steps:1,u=b.extrudePath,w,y=!1,x=b.material,z=b.extrudeMaterial,B=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,A,D,E,H;u&&(w=u.getSpacedPoints(v),y=!0,l=!1,A=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(u,v,!1),D=new THREE.Vector3,E=new THREE.Vector3,H=new THREE.Vector3);l||(n=k=q=0);var C,F,O,K=this,da=this.vertices.length,u=a.extractPoints(s),s=u.shape,L=u.holes;if(u=!THREE.Shape.Utils.isClockWise(s)){s=
s.reverse();F=0;for(O=L.length;F<O;F++)C=L[F],THREE.Shape.Utils.isClockWise(C)&&(L[F]=C.reverse());u=!1}var Q=THREE.Shape.Utils.triangulateShape(s,L),V=s;F=0;for(O=L.length;F<O;F++)C=L[F],s=s.concat(C);var P,I,G,Y,W,Z=s.length,ga,S=Q.length,u=[],J=0;G=V.length;P=G-1;for(I=J+1;J<G;J++,P++,I++)P===G&&(P=0),I===G&&(I=0),u[J]=d(V[J],V[P],V[I]);var va=[],U,T=u.concat();F=0;for(O=L.length;F<O;F++){C=L[F];U=[];J=0;G=C.length;P=G-1;for(I=J+1;J<G;J++,P++,I++)P===G&&(P=0),I===G&&(I=0),U[J]=d(C[J],C[P],C[I]);
va.push(U);T=T.concat(U)}for(P=0;P<q;P++){G=P/q;Y=k*(1-G);I=n*Math.sin(G*Math.PI/2);J=0;for(G=V.length;J<G;J++)W=c(V[J],u[J],I),f(W.x,W.y,-Y);F=0;for(O=L.length;F<O;F++)for(C=L[F],U=va[F],J=0,G=C.length;J<G;J++)W=c(C[J],U[J],I),f(W.x,W.y,-Y)}I=n;for(J=0;J<Z;J++)W=l?c(s[J],T[J],I):s[J],y?(E.copy(A.normals[0]).multiplyScalar(W.x),D.copy(A.binormals[0]).multiplyScalar(W.y),H.copy(w[0]).add(E).add(D),f(H.x,H.y,H.z)):f(W.x,W.y,0);for(G=1;G<=v;G++)for(J=0;J<Z;J++)W=l?c(s[J],T[J],I):s[J],y?(E.copy(A.normals[G]).multiplyScalar(W.x),
D.copy(A.binormals[G]).multiplyScalar(W.y),H.copy(w[G]).add(E).add(D),f(H.x,H.y,H.z)):f(W.x,W.y,h/v*G);for(P=q-1;0<=P;P--){G=P/q;Y=k*(1-G);I=n*Math.sin(G*Math.PI/2);J=0;for(G=V.length;J<G;J++)W=c(V[J],u[J],I),f(W.x,W.y,h+Y);F=0;for(O=L.length;F<O;F++)for(C=L[F],U=va[F],J=0,G=C.length;J<G;J++)W=c(C[J],U[J],I),y?f(W.x,W.y+w[v-1].y,w[v-1].x+Y):f(W.x,W.y,h+Y)}(function(){if(l){var a;a=0*Z;for(J=0;J<S;J++)ga=Q[J],g(ga[2]+a,ga[1]+a,ga[0]+a,!0);a=v+2*q;a*=Z;for(J=0;J<S;J++)ga=Q[J],g(ga[0]+a,ga[1]+a,ga[2]+
a,!1)}else{for(J=0;J<S;J++)ga=Q[J],g(ga[2],ga[1],ga[0],!0);for(J=0;J<S;J++)ga=Q[J],g(ga[0]+Z*v,ga[1]+Z*v,ga[2]+Z*v,!1)}})();(function(){var a=0;e(V,a);a+=V.length;F=0;for(O=L.length;F<O;F++)C=L[F],e(C,a),a+=C.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,g,h,k,n,q,l){b=a.vertices[e].x;c=a.vertices[e].y;e=a.vertices[e].z;d=a.vertices[f].x;k=a.vertices[f].y;f=a.vertices[f].z;n=a.vertices[g].x;
q=a.vertices[g].y;g=a.vertices[g].z;l=a.vertices[h].x;var s=a.vertices[h].y;a=a.vertices[h].z;return.01>Math.abs(c-k)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(n,1-g),new THREE.Vector2(l,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(k,1-f),new THREE.Vector2(q,1-g),new THREE.Vector2(s,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,g,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=e.shape,n=e.holes;if(!THREE.Shape.Utils.isClockWise(k))for(k=k.reverse(),e=0,f=n.length;e<f;e++)g=n[e],THREE.Shape.Utils.isClockWise(g)&&(n[e]=g.reverse());var q=THREE.Shape.Utils.triangulateShape(k,n);e=0;for(f=n.length;e<f;e++)g=n[e],
k=k.concat(g);n=k.length;f=q.length;for(e=0;e<n;e++)g=k[e],this.vertices.push(new THREE.Vector3(g.x,g.y,0));for(e=0;e<f;e++)n=q[e],k=n[0]+h,g=n[1]+h,n=n[2]+h,this.faces.push(new THREE.Face3(k,g,n,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,k,g,n))};
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),f=1/b,g=0,h=b;g<=h;g++)for(var k=c+g*f*d,n=Math.cos(k),q=Math.sin(k),k=0,l=a.length;k<l;k++){var s=a[k],v=new THREE.Vector3;v.x=n*s.x-q*s.y;v.y=q*s.x+n*s.y;v.z=s.z;this.vertices.push(v)}c=a.length;g=0;for(h=b;g<h;g++)for(k=0,l=a.length-1;k<l;k++){b=q=k+c*g;d=q+c;var n=q+1+c,q=q+1,s=g*f,v=k*e,u=s+f,w=v+e;this.faces.push(new THREE.Face3(b,d,q));this.faceVertexUvs[0].push([new THREE.Vector2(s,
v),new THREE.Vector2(u,v),new THREE.Vector2(s,w)]);this.faces.push(new THREE.Face3(d,n,q));this.faceVertexUvs[0].push([new THREE.Vector2(u,v),new THREE.Vector2(u,w),new THREE.Vector2(s,w)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=c||1;d=d||1;var g=c+1,h=d+1,k=a/c,n=b/d,q=new THREE.Vector3(0,0,1);for(a=0;a<h;a++){var l=a*n-f;for(b=0;b<g;b++)this.vertices.push(new THREE.Vector3(b*k-e,-l,0))}for(a=0;a<d;a++)for(b=0;b<c;b++){var s=b+g*a,e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,k=new THREE.Vector2(b/c,1-a/d),n=new THREE.Vector2(b/c,1-(a+1)/d),l=new THREE.Vector2((b+1)/c,1-(a+1)/d),v=new THREE.Vector2((b+
1)/c,1-a/d),s=new THREE.Face3(s,e,h);s.normal.copy(q);s.vertexNormals.push(q.clone(),q.clone(),q.clone());this.faces.push(s);this.faceVertexUvs[0].push([k,n,v]);s=new THREE.Face3(e,f,h);s.normal.copy(q);s.vertexNormals.push(q.clone(),q.clone(),q.clone());this.faces.push(s);this.faceVertexUvs[0].push([n.clone(),l,v.clone()])}};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);a=a||0;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var g,h=[],k=a,n=(b-a)/d;for(a=0;a<d+1;a++){for(g=0;g<c+1;g++){var q=new THREE.Vector3,l=e+g/c*f;q.x=k*Math.cos(l);q.y=k*Math.sin(l);this.vertices.push(q);h.push(new THREE.Vector2((q.x/b+1)/2,(q.y/b+1)/2))}k+=n}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++)for(e=a*(c+1),g=0;g<c;g++)f=l=g+e,n=l+c+1,q=l+c+2,this.faces.push(new THREE.Face3(f,
n,q,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[f].clone(),h[n].clone(),h[q].clone()]),f=l,n=l+c+2,q=l+1,this.faces.push(new THREE.Face3(f,n,q,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[f].clone(),h[n].clone(),h[q].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,k)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h,k,n=[],q=[];for(k=0;k<=c;k++){var l=[],s=[];for(h=0;h<=b;h++){var v=h/b,u=k/c,w=new THREE.Vector3;w.x=-a*Math.cos(d+v*e)*Math.sin(f+u*g);w.y=a*Math.cos(f+u*g);w.z=
a*Math.sin(d+v*e)*Math.sin(f+u*g);this.vertices.push(w);l.push(this.vertices.length-1);s.push(new THREE.Vector2(v,1-u))}n.push(l);q.push(s)}for(k=0;k<c;k++)for(h=0;h<b;h++){d=n[k][h+1];e=n[k][h];f=n[k+1][h];g=n[k+1][h+1];var l=this.vertices[d].clone().normalize(),s=this.vertices[e].clone().normalize(),v=this.vertices[f].clone().normalize(),u=this.vertices[g].clone().normalize(),w=q[k][h+1].clone(),y=q[k][h].clone(),x=q[k+1][h].clone(),z=q[k+1][h+1].clone();Math.abs(this.vertices[d].y)===a?(w.x=(w.x+
y.x)/2,this.faces.push(new THREE.Face3(d,f,g,[l,v,u])),this.faceVertexUvs[0].push([w,x,z])):Math.abs(this.vertices[f].y)===a?(x.x=(x.x+z.x)/2,this.faces.push(new THREE.Face3(d,e,f,[l,s,v])),this.faceVertexUvs[0].push([w,y,x])):(this.faces.push(new THREE.Face3(d,e,g,[l,s,u])),this.faceVertexUvs[0].push([w,y,z]),this.faces.push(new THREE.Face3(e,f,g,[s.clone(),v,u.clone()])),this.faceVertexUvs[0].push([y.clone(),x,z.clone()]))}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,
a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var f=new THREE.Vector3,g=[],h=[],k=0;k<=c;k++)for(var n=0;n<=d;n++){var q=n/d*e,l=k/c*Math.PI*2;f.x=a*Math.cos(q);f.y=a*Math.sin(q);var s=new THREE.Vector3;s.x=(a+b*Math.cos(l))*Math.cos(q);s.y=(a+b*Math.cos(l))*Math.sin(q);s.z=b*Math.sin(l);this.vertices.push(s);g.push(new THREE.Vector2(n/d,k/c));h.push(s.clone().sub(f).normalize())}for(k=
1;k<=c;k++)for(n=1;n<=d;n++)a=(d+1)*k+n-1,b=(d+1)*(k-1)+n-1,e=(d+1)*(k-1)+n,f=(d+1)*k+n,q=new THREE.Face3(a,b,f,[h[a].clone(),h[b].clone(),h[f].clone()]),this.faces.push(q),this.faceVertexUvs[0].push([g[a].clone(),g[b].clone(),g[f].clone()]),q=new THREE.Face3(b,e,f,[h[b].clone(),h[e].clone(),h[f].clone()]),this.faces.push(q),this.faceVertexUvs[0].push([g[b].clone(),g[e].clone(),g[f].clone()]);this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=b/c;b=Math.cos(a);f*=d*(2+b)*.5;g=d*(2+b)*g*.5;d=e*d*Math.sin(a)*.5;return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:f,heightScale:g};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;f=f||3;g=g||1;for(var k=Array(c),n=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector3,s=0;s<c;++s){k[s]=Array(d);var v=s/c*2*e*Math.PI,
u=h(v,f,e,a,g),v=h(v+.01,f,e,a,g);n.subVectors(v,u);q.addVectors(v,u);l.crossVectors(n,q);q.crossVectors(l,n);l.normalize();q.normalize();for(v=0;v<d;++v){var w=v/d*2*Math.PI,y=-b*Math.cos(w),w=b*Math.sin(w),x=new THREE.Vector3;x.x=u.x+y*q.x+w*l.x;x.y=u.y+y*q.y+w*l.y;x.z=u.z+y*q.z+w*l.z;k[s][v]=this.vertices.push(x)-1}}for(s=0;s<c;++s)for(v=0;v<d;++v)e=(s+1)%c,f=(v+1)%d,a=k[s][v],b=k[e][v],e=k[e][f],f=k[s][f],g=new THREE.Vector2(s/c,v/d),n=new THREE.Vector2((s+1)/c,v/d),q=new THREE.Vector2((s+1)/
c,(v+1)/d),l=new THREE.Vector2(s/c,(v+1)/d),this.faces.push(new THREE.Face3(a,b,f)),this.faceVertexUvs[0].push([g,n,l]),this.faces.push(new THREE.Face3(b,e,f)),this.faceVertexUvs[0].push([n.clone(),q,l.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var f=[],g,h,k=b+1,n,q,l,s,v=new THREE.Vector3,u,w,y;u=new THREE.TubeGeometry.FrenetFrames(a,b,e);w=u.normals;y=u.binormals;this.tangents=u.tangents;this.normals=w;this.binormals=y;for(u=0;u<k;u++)for(f[u]=[],n=u/(k-1),s=a.getPointAt(n),g=w[u],h=y[u],n=0;n<d;n++)q=n/d*2*Math.PI,l=-c*Math.cos(q),q=c*Math.sin(q),v.copy(s),v.x+=l*g.x+q*
h.x,v.y+=l*g.y+q*h.y,v.z+=l*g.z+q*h.z,f[u][n]=this.vertices.push(new THREE.Vector3(v.x,v.y,v.z))-1;for(u=0;u<b;u++)for(n=0;n<d;n++)k=e?(u+1)%b:u+1,v=(n+1)%d,a=f[u][n],c=f[k][n],k=f[k][v],v=f[u][v],w=new THREE.Vector2(u/b,n/d),y=new THREE.Vector2((u+1)/b,n/d),g=new THREE.Vector2((u+1)/b,(n+1)/d),h=new THREE.Vector2(u/b,(n+1)/d),this.faces.push(new THREE.Face3(a,c,v)),this.faceVertexUvs[0].push([w,y,h]),this.faces.push(new THREE.Face3(c,k,v)),this.faceVertexUvs[0].push([y.clone(),g,h.clone()]);this.computeFaceNormals();
this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],g=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var n,q,l;this.tangents=e;this.normals=f;this.binormals=g;for(n=0;n<b;n++)q=n/(b-1),e[n]=a.getTangentAt(q),e[n].normalize();f[0]=new THREE.Vector3;g[0]=new THREE.Vector3;a=Number.MAX_VALUE;n=Math.abs(e[0].x);q=Math.abs(e[0].y);l=Math.abs(e[0].z);n<=a&&(a=n,d.set(1,0,0));q<=a&&(a=q,d.set(0,1,0));l<=a&&d.set(0,0,1);h.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],h);g[0].crossVectors(e[0],f[0]);for(n=1;n<b;n++)f[n]=f[n-1].clone(),g[n]=g[n-1].clone(),h.crossVectors(e[n-1],e[n]),1E-4<h.length()&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[n-1].dot(e[n]),-1,1)),f[n].applyMatrix4(k.makeRotationAxis(h,d))),g[n].crossVectors(e[n],f[n]);if(c)for(d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(f[0],f[b-1]))&&(d=-d),n=1;n<b;n++)f[n].applyMatrix4(k.makeRotationAxis(e[n],d*n)),g[n].crossVectors(e[n],
f[n])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);k.faces.push(d);y.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(y.z,-y.x);k.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function g(a,b){var c=
Math.pow(2,b);Math.pow(4,b);for(var d=e(k.vertices[a.a]),g=e(k.vertices[a.b]),h=e(k.vertices[a.c]),l=[],n=0;n<=c;n++){l[n]=[];for(var q=e(d.clone().lerp(h,n/c)),u=e(g.clone().lerp(h,n/c)),s=c-n,v=0;v<=s;v++)l[n][v]=0==v&&n==c?q:e(q.clone().lerp(u,v/s))}for(n=0;n<c;n++)for(v=0;v<2*(c-n)-1;v++)d=Math.floor(v/2),0==v%2?f(l[n][d+1],l[n+1][d],l[n][d]):f(l[n][d+1],l[n+1][d+1],l[n+1][d])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,
a.y));return a.clone()}THREE.Geometry.call(this);c=c||1;d=d||0;for(var k=this,n=0,q=a.length;n<q;n+=3)e(new THREE.Vector3(a[n],a[n+1],a[n+2]));a=this.vertices;for(var l=[],s=n=0,q=b.length;n<q;n+=3,s++){var v=a[b[n]],u=a[b[n+1]],w=a[b[n+2]];l[s]=new THREE.Face3(v.index,u.index,w.index,[v.clone(),u.clone(),w.clone()])}for(var y=new THREE.Vector3,n=0,q=l.length;n<q;n++)g(l[n],d);n=0;for(q=this.faceVertexUvs[0].length;n<q;n++)b=this.faceVertexUvs[0][n],d=b[0].x,a=b[1].x,l=b[2].x,s=Math.max(d,Math.max(a,
l)),v=Math.min(d,Math.min(a,l)),.9<s&&.1>v&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>l&&(b[2].x+=1));n=0;for(q=this.vertices.length;n<q;n++)this.vertices[n].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.IcosahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.OctahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],g,h,k,n,q=b+1;for(g=0;g<=c;g++)for(n=g/c,h=0;h<=b;h++)k=h/b,k=a(k,n),d.push(k);var l,s,v,u;for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*q+h,d=g*q+h+1,n=(g+1)*q+h+1,k=(g+1)*q+h,l=new THREE.Vector2(h/b,g/c),s=new THREE.Vector2((h+1)/b,g/c),v=new THREE.Vector2((h+1)/b,(g+1)/c),u=new THREE.Vector2(h/b,(g+1)/c),e.push(new THREE.Face3(a,d,k)),f.push([l,s,u]),e.push(new THREE.Face3(d,n,k)),
f.push([s.clone(),v,u.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,a,b,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));return function(c,d,e,f,g,h){THREE.Object3D.call(this);void 0===f&&(f=16776960);void 0===e&&(e=1);void 0===g&&(g=.2*e);void 0===h&&(h=.2*g);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:f}));this.line.matrixAutoUpdate=!1;this.add(this.line);
this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:f}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,g,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};
THREE.BoxHelper=function(a){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.geometry.attributes.position.array;d[0]=b.x;d[1]=b.y;d[2]=b.z;d[3]=c.x;d[4]=b.y;d[5]=b.z;d[6]=c.x;d[7]=b.y;d[8]=b.z;d[9]=c.x;d[10]=c.y;d[11]=b.z;d[12]=c.x;d[13]=c.y;d[14]=b.z;d[15]=b.x;d[16]=c.y;d[17]=b.z;d[18]=b.x;d[19]=c.y;d[20]=b.z;d[21]=b.x;d[22]=b.y;d[23]=b.z;d[24]=b.x;d[25]=b.y;d[26]=c.z;d[27]=c.x;d[28]=b.y;d[29]=c.z;d[30]=c.x;d[31]=b.y;
d[32]=c.z;d[33]=c.x;d[34]=c.y;d[35]=c.z;d[36]=c.x;d[37]=c.y;d[38]=c.z;d[39]=b.x;d[40]=c.y;d[41]=c.z;d[42]=b.x;d[43]=c.y;d[44]=c.z;d[45]=b.x;d[46]=b.y;d[47]=c.z;d[48]=b.x;d[49]=b.y;d[50]=b.z;d[51]=b.x;d[52]=b.y;d[53]=c.z;d[54]=c.x;d[55]=b.y;d[56]=b.z;d[57]=c.x;d[58]=b.y;d[59]=c.z;d[60]=c.x;d[61]=c.y;d[62]=b.z;d[63]=c.x;d[64]=c.y;d[65]=c.z;d[66]=b.x;d[67]=c.y;d[68]=b.z;d[69]=b.x;d[70]=c.y;d[71]=c.z;this.geometry.attributes.position.needsUpdate=!0;this.geometry.computeBoundingSphere();this.matrixAutoUpdate=
!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,g,h,k){a.set(g,h,k);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d)for(g=0,h=d.length;g<h;g++)e.geometry.vertices[d[g]].copy(a)}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",.7,
1.1,-1);d("u2",-.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry,k=a.geometry.clone();k.mergeVertices();k.computeFaceNormals();for(var n=k.vertices,k=k.faces,q=0,l=0,s=k.length;l<s;l++)for(var v=k[l],u=0;3>u;u++){d[0]=v[g[u]];d[1]=v[g[(u+1)%3]];d.sort(f);var w=d.toString();void 0===e[w]?(e[w]={vert1:d[0],vert2:d[1],face1:l,face2:void 0},q++):e[w].face2=l}h.addAttribute("position",new THREE.Float32Attribute(6*q,3));d=h.attributes.position.array;
f=0;for(w in e)if(g=e[w],void 0===g.face2||.9999>k[g.face1].normal.dot(k[g.face2].normal))q=n[g.vert1],d[f++]=q.x,d[f++]=q.y,d[f++]=q.z,q=n[g.vert2],d[f++]=q.x,d[f++]=q.y,d[f++]=q.z;THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=new THREE.Geometry;c=0;for(var e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=this.geometry.vertices,b=this.object,c=b.geometry.vertices,d=b.geometry.faces,e=b.matrixWorld;b.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(e);for(var f=b=0,g=d.length;b<g;b++,f+=2){var h=d[b];a[f].copy(c[h.a]).add(c[h.b]).add(c[h.c]).divideScalar(3).applyMatrix4(e);a[f+1].copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[f])}this.geometry.verticesNeedUpdate=!0;return this};
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b,c,d){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];a=new THREE.SphereGeometry(b,4,2);a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(a,b);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,b,c,THREE.LinePieces);this.root=a;this.matrixWorld=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype);THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var f=this.bones[e];f.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,f.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,f.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:16711680;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,h=a[e].vertexNormals.length;g<h;g++)c.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,k=0,n=f.length;k<n;k++)for(var q=f[k],l=0,s=q.vertexNormals.length;l<s;l++){var v=q.vertexNormals[l];d[h].copy(e[q[a[l]]]).applyMatrix4(g);b.copy(v).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
b.add(d[h]);h+=1;d[h].copy(b);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:255;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,h=a[e].vertexTangents.length;g<h;g++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,k=0,n=f.length;k<n;k++)for(var q=f[k],l=0,s=q.vertexTangents.length;l<s;l++){var v=q.vertexTangents[l];d[h].copy(e[q[a[l]]]).applyMatrix4(g);b.copy(v).transformDirection(g).multiplyScalar(this.size);b.add(d[h]);h+=1;d[h].copy(b);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var k=a.geometry.vertices,n=a.geometry.faces,q=0,l=new Uint32Array(6*n.length),s=0,v=n.length;s<v;s++)for(var u=n[s],w=0;3>w;w++){d[0]=u[g[w]];d[1]=u[g[(w+1)%3]];d.sort(f);var y=d.toString();void 0===e[y]&&(l[2*q]=d[0],l[2*q+1]=d[1],e[y]=!0,q++)}d=new Float32Array(6*q);s=0;for(v=q;s<v;s++)for(w=0;2>w;w++)q=
k[l[2*s+w]],g=6*s+3*w,d[g+0]=q.x,d[g+1]=q.y,d[g+2]=q.z;h.addAttribute("position",new THREE.BufferAttribute(d,3))}else if(a.geometry instanceof THREE.BufferGeometry){if(void 0!==a.geometry.attributes.index){for(var k=a.geometry.attributes.position.array,v=a.geometry.attributes.index.array,n=a.geometry.offsets,q=0,l=new Uint32Array(2*v.length),u=0,x=n.length;u<x;++u)for(var w=n[u].start,y=n[u].count,g=n[u].index,s=w,z=w+y;s<z;s+=3)for(w=0;3>w;w++)d[0]=g+v[s+w],d[1]=g+v[s+(w+1)%3],d.sort(f),y=d.toString(),
void 0===e[y]&&(l[2*q]=d[0],l[2*q+1]=d[1],e[y]=!0,q++);d=new Float32Array(6*q);s=0;for(v=q;s<v;s++)for(w=0;2>w;w++)g=6*s+3*w,q=3*l[2*s+w],d[g+0]=k[q],d[g+1]=k[q+1],d[g+2]=k[q+2]}else for(k=a.geometry.attributes.position.array,q=k.length/3,l=q/3,d=new Float32Array(6*q),s=0,v=l;s<v;s++)for(w=0;3>w;w++)g=18*s+6*w,l=9*s+3*w,d[g+0]=k[l],d[g+1]=k[l+1],d[g+2]=k[l+2],q=9*s+(w+1)%3*3,d[g+3]=k[q],d[g+4]=k[q+1],d[g+5]=k[q+2];h.addAttribute("position",new THREE.BufferAttribute(d,3))}THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),
THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};
THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<g;f++){var h=e.morphTargets[f].name.match(b);if(h&&1<h.length){var k=h[1];d[k]||(d[k]={start:Infinity,end:-Infinity});h=d[k];f<h.start&&(h.start=f);f>h.end&&(h.end=f);c||(c=k)}}for(k in d)h=d[k],this.createAnimation(k,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*g;this.morphTargetInfluences[d.lastFrame]=(1-e)*g}}};
THREE.LensFlarePlugin=function(){function a(a,b){var d=c.createProgram(),e=c.createShader(c.FRAGMENT_SHADER),f=c.createShader(c.VERTEX_SHADER),g="precision "+b+" float;\n";c.shaderSource(e,g+a.fragmentShader);c.shaderSource(f,g+a.vertexShader);c.compileShader(e);c.compileShader(f);c.attachShader(d,e);c.attachShader(d,f);c.linkProgram(d);return d}var b=[],c,d,e,f,g,h,k,n,q,l,s,v,u;this.init=function(b){c=b.context;d=b;e=b.getPrecision();f=new Float32Array(16);g=new Uint16Array(6);b=0;f[b++]=-1;f[b++]=
-1;f[b++]=0;f[b++]=0;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;b=0;g[b++]=0;g[b++]=1;g[b++]=2;g[b++]=0;g[b++]=2;g[b++]=3;h=c.createBuffer();k=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h);c.bufferData(c.ARRAY_BUFFER,f,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,k);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW);n=c.createTexture();q=c.createTexture();c.bindTexture(c.TEXTURE_2D,n);c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,
16,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.bindTexture(c.TEXTURE_2D,q);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);0>=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(l=!1,s=a(THREE.ShaderFlares.lensFlare,e)):(l=!0,s=a(THREE.ShaderFlares.lensFlareVertexTexture,e));v={};u={};v.vertex=c.getAttribLocation(s,"position");v.uv=c.getAttribLocation(s,"uv");u.renderType=c.getUniformLocation(s,"renderType");u.map=c.getUniformLocation(s,"map");u.occlusionMap=c.getUniformLocation(s,"occlusionMap");u.opacity=
c.getUniformLocation(s,"opacity");u.color=c.getUniformLocation(s,"color");u.scale=c.getUniformLocation(s,"scale");u.rotation=c.getUniformLocation(s,"rotation");u.screenPosition=c.getUniformLocation(s,"screenPosition")};this.render=function(a,e,f,g){b.length=0;a.traverseVisible(function(a){a instanceof THREE.LensFlare&&b.push(a)});if(0!==b.length){a=new THREE.Vector3;var B=g/f,A=.5*f,D=.5*g,E=16/g,H=new THREE.Vector2(E*B,E),C=new THREE.Vector3(1,1,0),F=new THREE.Vector2(1,1),O=u,E=v;c.useProgram(s);
c.enableVertexAttribArray(v.vertex);c.enableVertexAttribArray(v.uv);c.uniform1i(O.occlusionMap,0);c.uniform1i(O.map,1);c.bindBuffer(c.ARRAY_BUFFER,h);c.vertexAttribPointer(E.vertex,2,c.FLOAT,!1,16,0);c.vertexAttribPointer(E.uv,2,c.FLOAT,!1,16,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,k);c.disable(c.CULL_FACE);c.depthMask(!1);for(var K=0,da=b.length;K<da;K++){E=16/g;H.set(E*B,E);var L=b[K];a.set(L.matrixWorld.elements[12],L.matrixWorld.elements[13],L.matrixWorld.elements[14]);a.applyMatrix4(e.matrixWorldInverse);
a.applyProjection(e.projectionMatrix);C.copy(a);F.x=C.x*A+A;F.y=C.y*D+D;if(l||0<F.x&&F.x<f&&0<F.y&&F.y<g){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,n);c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,F.x-8,F.y-8,16,16,0);c.uniform1i(O.renderType,0);c.uniform2f(O.scale,H.x,H.y);c.uniform3f(O.screenPosition,C.x,C.y,C.z);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,q);c.copyTexImage2D(c.TEXTURE_2D,
0,c.RGBA,F.x-8,F.y-8,16,16,0);c.uniform1i(O.renderType,1);c.disable(c.DEPTH_TEST);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,n);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);L.positionScreen.copy(C);L.customUpdateCallback?L.customUpdateCallback(L):L.updateLensFlares();c.uniform1i(O.renderType,2);c.enable(c.BLEND);for(var Q=0,V=L.lensFlares.length;Q<V;Q++){var P=L.lensFlares[Q];.001<P.opacity&&.001<P.scale&&(C.x=P.x,C.y=P.y,C.z=P.z,E=P.size*P.scale/g,H.x=E*B,H.y=E,c.uniform3f(O.screenPosition,
C.x,C.y,C.z),c.uniform2f(O.scale,H.x,H.y),c.uniform1f(O.rotation,P.rotation),c.uniform1f(O.opacity,P.opacity),c.uniform3f(O.color,P.color.r,P.color.g,P.color.b),d.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),d.setTexture(P.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}c.enable(c.CULL_FACE);c.enable(c.DEPTH_TEST);c.depthMask(!0)}}};
THREE.ShadowMapPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&c.castShadow&&(!1===c.frustumCulled||!0===h.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var k=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);s.push(k)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}var b,c,d,e,f,g,h=new THREE.Frustum,k=new THREE.Matrix4,n=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector3,s=[];this.init=function(a){b=a.context;
c=a;a=THREE.ShaderLib.depthRGBA;var h=THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,
morphTargets:!0,skinning:!0});d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){c.shadowMapEnabled&&c.shadowMapAutoUpdate&&this.update(a,b)};this.update=function(v,u){var w,y,x,z,B,A,D,E,H=[];z=0;b.clearColor(1,1,1,1);b.disable(b.BLEND);b.enable(b.CULL_FACE);b.frontFace(b.CCW);c.shadowMapCullFace===THREE.CullFaceFront?b.cullFace(b.FRONT):b.cullFace(b.BACK);c.setDepthTest(!0);w=0;for(y=v.__lights.length;w<y;w++)if(x=v.__lights[w],x.castShadow)if(x instanceof
THREE.DirectionalLight&&x.shadowCascade)for(B=0;B<x.shadowCascadeCount;B++){var C;if(x.shadowCascadeArray[B])C=x.shadowCascadeArray[B];else{D=x;var F=B;C=new THREE.DirectionalLight;C.isVirtual=!0;C.onlyShadow=!0;C.castShadow=!0;C.shadowCameraNear=D.shadowCameraNear;C.shadowCameraFar=D.shadowCameraFar;C.shadowCameraLeft=D.shadowCameraLeft;C.shadowCameraRight=D.shadowCameraRight;C.shadowCameraBottom=D.shadowCameraBottom;C.shadowCameraTop=D.shadowCameraTop;C.shadowCameraVisible=D.shadowCameraVisible;
C.shadowDarkness=D.shadowDarkness;C.shadowBias=D.shadowCascadeBias[F];C.shadowMapWidth=D.shadowCascadeWidth[F];C.shadowMapHeight=D.shadowCascadeHeight[F];C.pointsWorld=[];C.pointsFrustum=[];E=C.pointsWorld;A=C.pointsFrustum;for(var O=0;8>O;O++)E[O]=new THREE.Vector3,A[O]=new THREE.Vector3;E=D.shadowCascadeNearZ[F];D=D.shadowCascadeFarZ[F];A[0].set(-1,-1,E);A[1].set(1,-1,E);A[2].set(-1,1,E);A[3].set(1,1,E);A[4].set(-1,-1,D);A[5].set(1,-1,D);A[6].set(-1,1,D);A[7].set(1,1,D);C.originalCamera=u;A=new THREE.Gyroscope;
A.position.copy(x.shadowCascadeOffset);A.add(C);A.add(C.target);u.add(A);x.shadowCascadeArray[B]=C;console.log("Created virtualLight",C)}F=x;E=B;D=F.shadowCascadeArray[E];D.position.copy(F.position);D.target.position.copy(F.target.position);D.lookAt(D.target);D.shadowCameraVisible=F.shadowCameraVisible;D.shadowDarkness=F.shadowDarkness;D.shadowBias=F.shadowCascadeBias[E];A=F.shadowCascadeNearZ[E];F=F.shadowCascadeFarZ[E];D=D.pointsFrustum;D[0].z=A;D[1].z=A;D[2].z=A;D[3].z=A;D[4].z=F;D[5].z=F;D[6].z=
F;D[7].z=F;H[z]=C;z++}else H[z]=x,z++;w=0;for(y=H.length;w<y;w++){x=H[w];x.shadowMap||(B=THREE.LinearFilter,c.shadowMapType===THREE.PCFSoftShadowMap&&(B=THREE.NearestFilter),x.shadowMap=new THREE.WebGLRenderTarget(x.shadowMapWidth,x.shadowMapHeight,{minFilter:B,magFilter:B,format:THREE.RGBAFormat}),x.shadowMapSize=new THREE.Vector2(x.shadowMapWidth,x.shadowMapHeight),x.shadowMatrix=new THREE.Matrix4);if(!x.shadowCamera){if(x instanceof THREE.SpotLight)x.shadowCamera=new THREE.PerspectiveCamera(x.shadowCameraFov,
x.shadowMapWidth/x.shadowMapHeight,x.shadowCameraNear,x.shadowCameraFar);else if(x instanceof THREE.DirectionalLight)x.shadowCamera=new THREE.OrthographicCamera(x.shadowCameraLeft,x.shadowCameraRight,x.shadowCameraTop,x.shadowCameraBottom,x.shadowCameraNear,x.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}v.add(x.shadowCamera);!0===v.autoUpdate&&v.updateMatrixWorld()}x.shadowCameraVisible&&!x.cameraHelper&&(x.cameraHelper=new THREE.CameraHelper(x.shadowCamera),x.shadowCamera.add(x.cameraHelper));
if(x.isVirtual&&C.originalCamera==u){B=u;z=x.shadowCamera;A=x.pointsFrustum;D=x.pointsWorld;n.set(Infinity,Infinity,Infinity);q.set(-Infinity,-Infinity,-Infinity);for(F=0;8>F;F++)E=D[F],E.copy(A[F]),THREE.ShadowMapPlugin.__projector.unprojectVector(E,B),E.applyMatrix4(z.matrixWorldInverse),E.x<n.x&&(n.x=E.x),E.x>q.x&&(q.x=E.x),E.y<n.y&&(n.y=E.y),E.y>q.y&&(q.y=E.y),E.z<n.z&&(n.z=E.z),E.z>q.z&&(q.z=E.z);z.left=n.x;z.right=q.x;z.top=q.y;z.bottom=n.y;z.updateProjectionMatrix()}z=x.shadowMap;A=x.shadowMatrix;
B=x.shadowCamera;B.position.setFromMatrixPosition(x.matrixWorld);l.setFromMatrixPosition(x.target.matrixWorld);B.lookAt(l);B.updateMatrixWorld();B.matrixWorldInverse.getInverse(B.matrixWorld);x.cameraHelper&&(x.cameraHelper.visible=x.shadowCameraVisible);x.shadowCameraVisible&&x.cameraHelper.update();A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);A.multiply(B.projectionMatrix);A.multiply(B.matrixWorldInverse);k.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse);h.setFromMatrix(k);c.setRenderTarget(z);
c.clear();s.length=0;a(v,v,B);x=0;for(z=s.length;x<z;x++)D=s[x],A=D.object,D=D.buffer,F=A.material instanceof THREE.MeshFaceMaterial?A.material.materials[0]:A.material,E=void 0!==A.geometry.morphTargets&&0<A.geometry.morphTargets.length&&F.morphTargets,O=A instanceof THREE.SkinnedMesh&&F.skinning,E=A.customDepthMaterial?A.customDepthMaterial:O?E?g:f:E?e:d,c.setMaterialFaces(F),D instanceof THREE.BufferGeometry?c.renderBufferDirect(B,v.__lights,null,E,D,A):c.renderBuffer(B,v.__lights,null,E,D,A);F=
v.__webglObjectsImmediate;x=0;for(z=F.length;x<z;x++)D=F[x],A=D.object,A.visible&&A.castShadow&&(A._modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,A.matrixWorld),c.renderImmediateObject(B,v.__lights,null,d,A))}w=c.getClearColor();y=c.getClearAlpha();b.clearColor(w.r,w.g,w.b,y);b.enable(b.BLEND);c.shadowMapCullFace===THREE.CullFaceFront&&b.cullFace(b.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;
THREE.SpritePlugin=function(){var a,b,c,d,e,f,g,h,k,n,q,l,s,v,u,w,y;function x(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var z,B,A,D=[],E,H,C,F,O;this.init=function(x){z=x.context;B=x;E=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);H=new Uint16Array([0,1,2,0,2,3]);C=z.createBuffer();F=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,C);z.bufferData(z.ARRAY_BUFFER,E,z.STATIC_DRAW);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,F);z.bufferData(z.ELEMENT_ARRAY_BUFFER,H,z.STATIC_DRAW);x=z.createProgram();
var D=z.createShader(z.VERTEX_SHADER),L=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(D,["precision "+B.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
z.shaderSource(L,["precision "+B.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
z.compileShader(D);z.compileShader(L);z.attachShader(x,D);z.attachShader(x,L);z.linkProgram(x);O=x;w=z.getAttribLocation(O,"position");y=z.getAttribLocation(O,"uv");a=z.getUniformLocation(O,"uvOffset");b=z.getUniformLocation(O,"uvScale");c=z.getUniformLocation(O,"rotation");d=z.getUniformLocation(O,"scale");e=z.getUniformLocation(O,"color");f=z.getUniformLocation(O,"map");g=z.getUniformLocation(O,"opacity");h=z.getUniformLocation(O,"modelViewMatrix");k=z.getUniformLocation(O,"projectionMatrix");n=
z.getUniformLocation(O,"fogType");q=z.getUniformLocation(O,"fogDensity");l=z.getUniformLocation(O,"fogNear");s=z.getUniformLocation(O,"fogFar");v=z.getUniformLocation(O,"fogColor");u=z.getUniformLocation(O,"alphaTest");x=document.createElement("canvas");x.width=8;x.height=8;D=x.getContext("2d");D.fillStyle="white";D.fillRect(0,0,8,8);A=new THREE.Texture(x);A.needsUpdate=!0};this.render=function(E,H,L,Q){D.length=0;E.traverseVisible(function(a){a instanceof THREE.Sprite&&D.push(a)});if(0!==D.length){z.useProgram(O);
z.enableVertexAttribArray(w);z.enableVertexAttribArray(y);z.disable(z.CULL_FACE);z.enable(z.BLEND);z.bindBuffer(z.ARRAY_BUFFER,C);z.vertexAttribPointer(w,2,z.FLOAT,!1,16,0);z.vertexAttribPointer(y,2,z.FLOAT,!1,16,8);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,F);z.uniformMatrix4fv(k,!1,H.projectionMatrix.elements);z.activeTexture(z.TEXTURE0);z.uniform1i(f,0);Q=L=0;var V=E.fog;V?(z.uniform3f(v,V.color.r,V.color.g,V.color.b),V instanceof THREE.Fog?(z.uniform1f(l,V.near),z.uniform1f(s,V.far),z.uniform1i(n,1),
Q=L=1):V instanceof THREE.FogExp2&&(z.uniform1f(q,V.density),z.uniform1i(n,2),Q=L=2)):(z.uniform1i(n,0),Q=L=0);for(var V=0,P=D.length;V<P;V++){var I=D[V],G=I.material;I._modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,I.matrixWorld);I.z=-I._modelViewMatrix.elements[14]}D.sort(x);H=[];V=0;for(P=D.length;V<P;V++)I=D[V],G=I.material,z.uniform1f(u,G.alphaTest),z.uniformMatrix4fv(h,!1,I._modelViewMatrix.elements),H[0]=I.scale.x,H[1]=I.scale.y,I=0,E.fog&&G.fog&&(I=Q),L!==I&&(z.uniform1i(n,I),L=I),
null!==G.map?(z.uniform2f(a,G.map.offset.x,G.map.offset.y),z.uniform2f(b,G.map.repeat.x,G.map.repeat.y)):(z.uniform2f(a,0,0),z.uniform2f(b,1,1)),z.uniform1f(g,G.opacity),z.uniform3f(e,G.color.r,G.color.g,G.color.b),z.uniform1f(c,G.rotation),z.uniform2fv(d,H),B.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst),B.setDepthTest(G.depthTest),B.setDepthWrite(G.depthWrite),G.map&&G.map.image&&G.map.image.width?B.setTexture(G.map,0):B.setTexture(A,0),z.drawElements(z.TRIANGLES,6,z.UNSIGNED_SHORT,
0);z.enable(z.CULL_FACE)}}};
THREE.DepthPassPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&(!1===c.frustumCulled||!0===h.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var k=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);n.push(k)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}this.enabled=!1;this.renderTarget=null;var b,c,d,e,f,g,h=new THREE.Frustum,k=new THREE.Matrix4,n=[];this.init=function(a){b=a.context;c=a;a=THREE.ShaderLib.depthRGBA;var h=
THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});d._shadowPass=
!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(q,l){var s,v,u,w,y;b.clearColor(1,1,1,1);b.disable(b.BLEND);c.setDepthTest(!0);!0===q.autoUpdate&&q.updateMatrixWorld();l.matrixWorldInverse.getInverse(l.matrixWorld);k.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse);h.setFromMatrix(k);c.setRenderTarget(this.renderTarget);c.clear();n.length=0;a(q,q,l);var x;s=0;for(v=n.length;s<v;s++)u=n[s],y=u.object,u=u.buffer,
y instanceof THREE.PointCloud&&!y.customDepthMaterial||((x=y.material instanceof THREE.MeshFaceMaterial?y.material.materials[0]:y.material)&&c.setMaterialFaces(y.material),w=void 0!==y.geometry.morphTargets&&0<y.geometry.morphTargets.length&&x.morphTargets,x=y instanceof THREE.SkinnedMesh&&x.skinning,w=y.customDepthMaterial?y.customDepthMaterial:x?w?g:f:w?e:d,u instanceof THREE.BufferGeometry?c.renderBufferDirect(l,q.__lights,null,w,u,y):c.renderBuffer(l,q.__lights,null,w,u,y));w=q.__webglObjectsImmediate;
s=0;for(v=w.length;s<v;s++)u=w[s],y=u.object,y.visible&&(y._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,y.matrixWorld),c.renderImmediateObject(l,q.__lights,null,d,y));s=c.getClearColor();v=c.getClearAlpha();b.clearColor(s.r,s.g,s.b,v);b.enable(b.BLEND)}};
THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};
THREE.OrbitControls=function(a,b){function c(a){if(!1!==f.enabled){a.preventDefault();var b=f.domElement===document?f.domElement.body:f.domElement;if(C===H.ROTATE){if(!0===f.noRotate)return;h.set(a.clientX,a.clientY);k.subVectors(h,g);f.rotateLeft(2*Math.PI*k.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*k.y/b.clientHeight*f.rotateSpeed);g.copy(h)}else if(C===H.DOLLY){if(!0===f.noZoom)return;w.set(a.clientX,a.clientY);y.subVectors(w,u);0<y.y?f.dollyIn():f.dollyOut();u.copy(w)}else if(C===H.PAN){if(!0===
f.noPan)return;q.set(a.clientX,a.clientY);l.subVectors(q,n);f.pan(l.x,l.y);n.copy(q)}f.update()}}function d(){!1!==f.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),f.dispatchEvent(L),C=H.NONE)}function e(a){if(!1!==f.enabled&&!0!==f.noZoom){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?f.dollyOut():f.dollyIn();f.update();f.dispatchEvent(da);f.dispatchEvent(L)}}this.object=
a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var f=this,g=new THREE.Vector2,h=new THREE.Vector2,k=new THREE.Vector2,n=new THREE.Vector2,q=new THREE.Vector2,
l=new THREE.Vector2,s=new THREE.Vector3,v=new THREE.Vector3,u=new THREE.Vector2,w=new THREE.Vector2,y=new THREE.Vector2,x=0,z=0,B=1,A=new THREE.Vector3,D=new THREE.Vector3,E=new THREE.Quaternion,H={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},C=H.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();var F=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),O=F.clone().inverse(),K={type:"change"},da={type:"start"},L={type:"end"};
this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);z-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);x-=a};this.panLeft=function(a){var b=this.object.matrix.elements;s.set(b[0],b[1],b[2]);s.multiplyScalar(-a);A.add(s)};this.panUp=function(a){var b=this.object.matrix.elements;s.set(b[4],b[5],b[6]);s.multiplyScalar(a);A.add(s)};this.pan=function(a,b){var c=f.domElement===document?f.domElement.body:f.domElement;if(void 0!==f.object.fov){var d=
f.object.position.clone().sub(f.target).length(),d=d*Math.tan(f.object.fov/2*Math.PI/180);f.panLeft(2*a*d/c.clientHeight);f.panUp(2*b*d/c.clientHeight)}else void 0!==f.object.top?(f.panLeft(a*(f.object.right-f.object.left)/c.clientWidth),f.panUp(b*(f.object.top-f.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));B/=a};this.dollyOut=function(a){void 0===a&&
(a=Math.pow(.95,f.zoomSpeed));B*=a};this.update=function(){var a=this.object.position;v.copy(a).sub(this.target);v.applyQuaternion(F);var b=Math.atan2(v.x,v.z),c=Math.atan2(Math.sqrt(v.x*v.x+v.z*v.z),v.y);this.autoRotate&&this.rotateLeft(2*Math.PI/60/60*f.autoRotateSpeed);var b=b+z,c=c+x,c=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,c)),c=Math.max(1E-6,Math.min(Math.PI-1E-6,c)),d=v.length()*B,d=Math.max(this.minDistance,Math.min(this.maxDistance,d));this.target.add(A);v.x=d*Math.sin(c)*
Math.sin(b);v.y=d*Math.cos(c);v.z=d*Math.sin(c)*Math.cos(b);v.applyQuaternion(O);a.copy(this.target).add(v);this.object.lookAt(this.target);x=z=0;B=1;A.set(0,0,0);if(1E-6<D.distanceToSquared(this.object.position)||1E-6<8*(1-E.dot(this.object.quaternion)))this.dispatchEvent(K),D.copy(this.object.position),E.copy(this.object.quaternion)};this.reset=function(){C=H.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.domElement.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){if(!1!==f.enabled){a.preventDefault();if(0===a.button){if(!0===f.noRotate)return;C=H.ROTATE;g.set(a.clientX,a.clientY)}else if(1===a.button){if(!0===f.noZoom)return;C=H.DOLLY;u.set(a.clientX,a.clientY)}else if(2===a.button){if(!0===f.noPan)return;C=H.PAN;n.set(a.clientX,a.clientY)}document.addEventListener("mousemove",c,!1);document.addEventListener("mouseup",d,!1);f.dispatchEvent(da)}},!1);this.domElement.addEventListener("mousewheel",
e,!1);this.domElement.addEventListener("DOMMouseScroll",e,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==f.enabled){switch(a.touches.length){case 1:if(!0===f.noRotate)return;C=H.TOUCH_ROTATE;g.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===f.noZoom)return;C=H.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;b=Math.sqrt(b*b+a*a);u.set(0,b);break;case 3:if(!0===f.noPan)return;C=H.TOUCH_PAN;n.set(a.touches[0].pageX,
a.touches[0].pageY);break;default:C=H.NONE}f.dispatchEvent(da)}},!1);this.domElement.addEventListener("touchend",function(){!1!==f.enabled&&(f.dispatchEvent(L),C=H.NONE)},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==f.enabled){a.preventDefault();a.stopPropagation();var b=f.domElement===document?f.domElement.body:f.domElement;switch(a.touches.length){case 1:if(!0===f.noRotate)break;if(C!==H.TOUCH_ROTATE)break;h.set(a.touches[0].pageX,a.touches[0].pageY);k.subVectors(h,g);f.rotateLeft(2*
Math.PI*k.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*k.y/b.clientHeight*f.rotateSpeed);g.copy(h);f.update();break;case 2:if(!0===f.noZoom)break;if(C!==H.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;a=Math.sqrt(b*b+a*a);w.set(0,a);y.subVectors(w,u);0<y.y?f.dollyOut():f.dollyIn();u.copy(w);f.update();break;case 3:if(!0===f.noPan)break;if(C!==H.TOUCH_PAN)break;q.set(a.touches[0].pageX,a.touches[0].pageY);l.subVectors(q,n);f.pan(l.x,l.y);n.copy(q);
f.update();break;default:C=H.NONE}}},!1);window.addEventListener("keydown",function(a){if(!1!==f.enabled&&!0!==f.noKeys&&!0!==f.noPan)switch(a.keyCode){case f.keys.UP:f.pan(0,f.keyPanSpeed);f.update();break;case f.keys.BOTTOM:f.pan(0,-f.keyPanSpeed);f.update();break;case f.keys.LEFT:f.pan(f.keyPanSpeed,0);f.update();break;case f.keys.RIGHT:f.pan(-f.keyPanSpeed,0),f.update()}},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);
Flory.Renderer=function(a,b,c){this.data={};null!==this.canvas?(this.renderer=new THREE.WebGLRenderer,void 0==this.renderer&&console.log("Flory : WebGL is not supported in your browser."),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement)):console.log("Flory : A canvas_id must be specified.");this.scene=void 0===a?new THREE.Scene:a;this.camera=void 0===b?new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1E4):b;this.camera.position.set(0,
0,100);this.camera.up=new THREE.Vector3(0,0,1);this.camera.lookAt(this.scene.position);this.scene.add(this.camera);this.renderables=void 0===c?{}:c;(new THREE.OrbitControls(this.camera,this.renderer.domElement)).addEventListener("change",function(){this.render})};
Flory.Renderer.prototype={constructor:Flory.Renderer,addRenderable:function(a){if(a instanceof Flory.Renderable)this.renderables[a.id]=a,this.scene.add(this.renderables[a.id].mesh);else return console.log("Flory : Attempted to add an object to Flory.Renderer.renderables that did not inherit from Flory.Renderable."),this},updateRenderablePosition:function(a){var b=a.id;a=a.position;if(a instanceof Flory.Vector){var c=a.dimension();3==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=
a.components[1],this.renderables[b].mesh.position.z=a.components[2]):2==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1]):1==c?this.renderables[b].mesh.position.x=a.components[0]:3<c&&(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1],this.renderables[b].mesh.position.z=a.components[2])}else a instanceof Flory.Vector2?(this.renderables[b].mesh.position.x=a.x,this.renderables[b].mesh.position.y=
a.y):a instanceof Flory.Vector3&&(this.renderables[b].mesh.position.x=a.x,this.renderables[b].mesh.position.y=a.y,this.renderables[b].mesh.position.z=a.z);return this},removeRenderable:function(a){for(var b in this.renderables)if(this.renderables[b].id==a){this.scene.remove(this.renderables[b]);this.renderables=this.renderables.splice(b,1);break}return this},removeAllRenderables:function(){for(var a in this.renderables)this.scene.remove(this.renderables[a]);this.renderables=[];return this},setDimension:function(a,
b){this.renderer.setSize(a,b);return this},render:function(){this.renderer.render(this.scene,this.camera);return this}};Flory.Renderer.ShaderTypes={};Flory.PointCloudRenderer=function(){Flory.Renderer.call(this);this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial)};Flory.PointCloudRenderer.prototype=Object.create(Flory.Renderer.prototype);
Flory.PointCloudRenderer.prototype.updatePointPositions=function(a){if(void 0!=a){for(var b=0,c=a.length;b<c;b++)this.data.particles.vertices[b]=new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]);this.data.particle_system.geometry.verticesNeedUpdate=!0}return this};
Flory.PointCloudRenderer.prototype.updatePointList=function(a){if(void 0==a)return this;this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});for(var b=0,c=a.length;b<c;b++)a[b]instanceof Flory.Monomer&&this.data.particles.vertices.push(new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]));this.scene.remove(this.data.particle_system);for(b in this.renderables)if(this.renderables[b].id==this.data.particle_system.id){this.renderables[b]=
void 0;delete this.renderables[b];break}this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial);this.scene.add(this.data.particle_system);this.renderables[this.data.particle_system.id]=this.data.particle_system;return this};Flory.Options=function(a,b){this.data={};this.json=a;this.html_handle=$("#"+b);this.option_list=[];this.generateAndPlace(a,this.html_handle)};
Flory.Options.prototype={constructor:Flory.Options,generateAndPlace:function(a,b){var c=[],d;d="<div id='option-menu'>";for(var e=0,f=a.options.length;e<f;e++){var g=a.options[e];if("float"==g.type||"integer"==g.type||"number"==g.type){if(g.slider){var h=this.generateRangeSlider(g.value,g.min,g.max,g.name,g.label,g.step,g.has_text_box,g.text_box_is_editable),k=h.input_id,n=h.text_box_id;g.has_text_box&&c.push(function(){$("#"+k).on("input",function(){$("#"+n).val(this.value)});$("#"+n).on("change",
function(){$("#"+k).val(this.value)})})}else h=this.generateTextBox(g.value,g.name,g.label);d+=h.html}else if("string"==g.type)h=this.generateTextBox(g.value,g.name,"text",g.label),d+=h.html;else if("checkbox"==g.type)h=this.generateCheckBox(g.value,g.name,g.label),d+=h.html;else if("button"==g.type){var h=this.generateButton(g.value,g.name,g.label),q=g.callback,l=h.button_id;q&&c.push(function(){$("#"+l).on("click",function(){q(l)})});d+=h.html}}b.html(d+"</div>");for(e=0;e<c.length;e++)c[e]()},
generateButton:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<button class='button' id='"+e+"'>"+a+"</button>"),d=d+"</div>";return{html:d,button_id:e}},generateTextBox:function(a,b,c,d){var e="";void 0==d&&(d=b);var f=Flory.generateGUID(),e=e+"<div class='option'>"+("<label for='"+b+"'>"+d+"</label>"),e=e+("<input class='text-box' type='"+(void 0!=c?c:"")+"' data-key='"+b+"' id='"+f+"' name='"+b+"' value='"+
a+"'> "),e=e+"</div>";return{html:e,text_box_id:f}},generateRangeSlider:function(a,b,c,d,e,f,g,h){h="";void 0==e&&(e=d);var k=Flory.generateGUID(),n=Flory.generateGUID();h=h+"<div class='option'>"+("<label for='"+d+"'>"+e+"</label>");g?(h+="<input class='text-box-above-slider' id='"+n+"' type='number' name='"+d+"' min='"+b+"' max='"+c+"' value='"+a+"'>",h+="<input class='range-slider-with-text-box' id='"+k+"' type='range' data-key='"+d+"' value='"+a+"'' name='"+d+"' min='"+b+"' max='"+c+"' step='"+
f+"'>"):h+="<input class='range-slider' id='"+k+"' type='range' value='"+a+"'' data-key='"+d+"' name='"+d+"' min='"+b+"' max='"+c+"' step='"+f+"'>";h+="</div>";return{html:h,input_id:k,text_box_id:n}},generateCheckBox:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<input class='checkbox' name='"+b+"' data-key='"+b+"' id='"+e+"' type='checkbox' value='i-am-a-check-box-causing-errors' ");a&&(d+="checked");d+=
">";d+="</div>";return{html:d,check_box_id:e}},update:function(){},updateValue:function(a,b){$("[name='"+a+"']").val(b).change()},getValue:function(a){var b=$("[name='"+a+"'").val();return"i-am-a-check-box-causing-errors"==b?$("[name='"+a+"']").is(":checked"):b},getValues:function(){}};Flory.Display=function(a,b){this.data={};this.json=a;this.value_functions=[];this.html_handle=$("#"+b);this.generateAndPlace(this.json,this.html_handle)};
Flory.Display.prototype={constructor:Flory.Display,generateAndPlace:function(a,b){var c;c="<div id='display-menu'>";for(var d=0,e=this.json.display.length;d<e;d++){var f=this.json.display[d];void 0==f.label&&(f.label=f.name);var g=Flory.generateGUID(),h=f.value();c+="<div class='display-value'>";c+="<label for='"+f.name+"'>"+f.label+"</label>";c+="<input type='text' class='display-value-text-box' data-key='"+f.name+"' id='"+g+"' name = '"+f.name+"' value='"+h+"'>";c+="</div>";this.value_functions[f.name]=
f.value}b.html(c+"</div>");return this},updateValues:function(){for(var a in this.value_functions){var b=this.value_functions[a](),c=$("[data-key='"+a+"'");if("number"==typeof b||"string"==typeof b)c.val(b);else if(b instanceof Flory.Vector){var d=b.dimension(),e="";for(a=0;a<d;a++)e+=b.components[a]+",";e=e.substring(0,e.length-1);c.val(e)}else b instanceof Flory.Vector3?c.val(b.x+","+b.y+","+b.z):b instanceof Flory.Vector2&&c.val(b.x+","+b.y)}return this},updateValue:function(a){$("[data-key='"+
a+"'").val(this.value_functions[a]())}};Flory.Particle=function(){Flory.Entity.call(this);this.position={};this.velocity={};this.acceleration={};this.radius={};this.charge={};this.mass={}};Flory.Particle.prototype=Object.create(Flory.Entity.prototype);
Flory.Monomer2D=function(a,b,c,d){Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!=a?a:Flory.Monomer2D.defaultRadius;this.charge=void 0!=b?b:0;this.mass=void 0!=c?c:0;void 0==e?this.position=new Flory.Vector2(0,0):e instanceof Array?this.position=new Flory.Vector2(e[0],e[1]):void 0!=e.x&&void 0!=e.y&&(this.position=new Flory.Vector2(e.x,e.y));void 0==f?this.velocity=new Flory.Vector2(0,0):f instanceof
Array?this.velocity=new Flory.Vector2(f[0],f[1]):void 0!=f.x&&void 0!=f.y&&(this.velocity=new Flory.Vector2(f.x,f.y));void 0==g?this.acceleration=new Flory.Vector2(0,0):g instanceof Array?this.acceleration=new Flory.Vector2(g[0],g[1]):void 0!=g.x&&void 0!=g.y&&(this.acceleration=new Flory.Vector2(g.x,g.y));void 0==h?this.force=new Flory.Vector2(0,0):h instanceof Array?this.force=new Flory.Vector2(h[0],h[1]):void 0!=h.x&&void 0!=h.y&&(this.force=new Flory.Vector2(h.x,h.y))};
Flory.Monomer2D.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer2D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer2D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer2D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer2D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer2D.prototype.clone=function(){return new Flory.Monomer2D(this.radius,this.position)};Flory.Monomer2D.defaultRadius=1;
Flory.Monomer3D=function(a,b,c,d){Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!==a?a:Flory.Monomer3D.defaultRadius;this.charge=void 0!==b?b:0;this.mass=void 0!=c?c:0;void 0==e?this.position=new Flory.Vector3(0,0):e instanceof Array?this.position=new Flory.Vector3(e[0],e[1]):void 0!=e.x&&void 0!=e.y&&void 0!=e.z&&(this.position=new Flory.Vector3(e.x,e.y));void 0==f?this.velocity=new Flory.Vector3(0,
0):f instanceof Array?this.velocity=new Flory.Vector3(f[0],f[1]):void 0!=f.x&&void 0!=f.y&&void 0!=f.z&&(this.velocity=new Flory.Vector3(f.x,f.y));void 0==g?this.acceleration=new Flory.Vector3(0,0):g instanceof Array?this.acceleration=new Flory.Vector3(g[0],g[1]):void 0!=g.x&&void 0!=g.y&&void 0!=g.z&&(this.acceleration=new Flory.Vector3(g.x,g.y));void 0==h?this.force=new Flory.Vector3(0,0):h instanceof Array?this.force=new Flory.Vector3(h[0],h[1]):void 0!=h.x&&void 0!=h.y&&void 0!=h.z&&(this.force=
new Flory.Vector3(h.x,h.y))};Flory.Monomer3D.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer3D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer3D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer3D.prototype.incrementZ=function(a){this.position.z+=a;return this};Flory.Monomer3D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer3D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer3D.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer3D.defaultRadius=1;
Flory.Monomer=function(a,b,c,d){if(void 0==d)console.log("Flory: Flory.Monomer needs at least the kinematics.position to know what the dimension of the monomer is.");else if(void 0==d.position)console.log("Flory: Flory.Monomer needs at least the kinematics.position to know what the dimension of the monomer is.");else{Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!=a?a:Flory.Monomer.defaultRadius;
this.charge=void 0!=b?b:0;this.mass=void 0!=c?c:0;this.position=void 0==e.components&&e instanceof Array?new Flory.Vector(e):e.clone();this.velocity=void 0==f?new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==f.components&&f instanceof Array?new Flory.Vector(f):f.clone();this.acceleration=void 0==g?new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==g.components&&g instanceof Array?new Flory.Vector(g):g.clone();this.force=void 0==h?
new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==h.components&&h instanceof Array?new Flory.Vector(h):h.clone()}};Flory.Monomer.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer.prototype.incrementDimension=function(a,b){this.position.components[a]+=b;return this};Flory.Monomer.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer.defaultRadius=1;Flory.Box2D=function(a,b,c,d,e){Flory.Entity.call(this);this.name=void 0==e?"Box2D":e;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.width=void 0==c?0:c;this.height=void 0==d?0:d};Flory.Box2D.prototype=Object.create(Flory.Entity);Flory.Box2D.prototype.contructor=Flory.Box2D;
Flory.Box3D=function(a,b,c,d,e,f,g){Flory.Entity.call(this);this.name=void 0==g?"Box3D":g;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.z=void 0==b?0:c;this.width=void 0==d?0:d;this.height=void 0==e?0:e;this.length=void 0==f?0:f};Flory.Box3D.prototype=Object.create(Flory.Entity);Flory.Box3D.prototype.contructor=Flory.Box3D;Flory.Newtonian=function(){Flory.Environment.call(this);this.meshes=[]};Flory.Newtonian.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian.constructor=Flory.Newtonian;
Flory.Newtonian.prototype.addedEntity=function(a){this.visualization&&(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D)&&(this.meshes.push(this.generateMonomerMesh(a)),this.addRenderable(a));return this};
Flory.Newtonian.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.Newtonian.prototype.removedEntity=function(a,b,c){0!=this.meshes.length&&(this.visualization&&this.renderer.scene.remove(this.meshes[c]),this.meshes.splice(c))};Flory.Newtonian.prototype.disabledVisualization=function(){for(var a=0,b=this.meshes.length;a<b;a++)this.renderer.scene.remove(this.meshes[a]);this.meshes=[]};
Flory.Newtonian.prototype.setUpVisualization=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a];if(c instanceof Flory.Monomer||c instanceof Flory.Monomer2D||c instanceof Flory.Monomer3D)c=this.generateMonomerMesh(this.entities[a]),this.meshes.push(c),this.entities[a].mesh=c,this.renderer.addRenderable(this.entities[a])}};
Flory.Newtonian.prototype.update=function(a){a=this.entities.length;for(var b=0;b<a;b++){var c=this.entities[b],d=new Flory.Vector;if(c instanceof Flory.Monomer){for(var e=0;e<a;e++){var f=this.entities[e];f instanceof Flory.Field&&d.add(f.getForce(c.position))}c.force=d.clone()}}b=0;for(a=this.entities.length;b<a;b++)c=this.entities[b],c instanceof Flory.Monomer&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*Flory.timestep)),
this.visualization&&this.renderer.updateRenderablePosition(c));this.visualization&&this.renderer.render();return this};Flory.RandomWalk=function(a,b){Flory.Environment.call(this);this.randomGen=new Flory.RandomGen(a);this.step_size=void 0!=b?b:1};Flory.RandomWalk.prototype=Object.create(Flory.Environment.prototype);Flory.RandomWalk.prototype.constructor=Flory.RandomWalk;Flory.RandomWalk.prototype.removedEntity=function(a,b,c){this.visualization&&this.renderer.removeRenderable(b)};
Flory.RandomWalk.prototype.addedEntity=function(a){this.visualization&&(a.mesh=this.generateMonomerMesh(a,this.data.visualization_data),this.renderer.addRenderable(a));return this};
Flory.RandomWalk.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.RandomWalk.prototype.setUpVisualization=function(a){this.data.visualization_data=a;for(var b=0;b<this.entities.length;b++)this.entities[b].mesh=this.generateMonomerMesh(this.entities[b],a),this.renderer.addRenderable(this.entities[b])};
Flory.RandomWalk.prototype.disabledVisualization=function(){for(var a=0;a<this.entities.length;a++)this.renderer.removeRenderable(this.entity[a]);this.data.visualization_data=void 0;delete this.data.visualization_data};
Flory.RandomWalk.prototype.update=function(a){var b=this.entities.length,c,d,e,f=1;void 0!=a.number_of_steps&&(f=a.number_of_steps);for(var g=0;g<f;g++)for(var h=0;h<b;h++)if(a=this.entities[h],a instanceof Flory.Monomer){prob_right=.5;c=a.position.dimension();c=1/c;d=0;e=this.randomGen.random();for(e-=c;0<e;)e-=c,d++;e=this.randomGen.random();e<prob_right?a.position.components[d]++:a.position.components[d]--;this.visualization&&this.renderer.updateRenderablePosition(this.entities[h])}this.visualization&&
this.renderer.render();return this};Flory.RandomWalk.prototype.resetEnvironment=function(){this.entities=[]};Flory.LennardJones=function(a,b){Flory.Environment.call(this);this.epsilon=void 0!=a?a:Flory.LennardJones.default_epsilon;this.sigma=void 0!=b?b:Flory.LennardJones.default_sigma;this.data.rendererType=Flory.Environment.RendererType.PointCloud};Flory.LennardJones.prototype=Object.create(Flory.Environment.prototype);Flory.LennardJones.prototype.constructor=Flory.LennardJones;
Flory.LennardJones.prototype.addedEntity=function(a){a instanceof Flory.Monomer&&(a.data.last_position=a.position.clone(),this.visualization&&this.renderer.updatePointList(this.entities))};Flory.LennardJones.prototype.setUpVisualization=function(){this.renderer.updatePointList(this.entities)};
Flory.LennardJones.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a];c.force.zero();if(c instanceof Flory.Monomer)for(var d=0,b=this.entities.length;d<a;d++){var e=this.entities[d];if(e instanceof Flory.Monomer){var f=e.position.clone().sub(c.position),g=f.length();if(!(g>Flory.LennardJones.far_cutoff_distance)){var h=this.sigma/g,f=f.scale(-24*this.epsilon/(g*g)*(2*Math.pow(h,12)-Math.pow(h,6)));c.force.add(f);e.force.add(f.negate())}}}}a=0;for(b=this.entities.length;a<
b;a++)c=this.entities[a],c instanceof Flory.Monomer&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*Flory.timestep)));this.visualization&&(this.renderer.updatePointPositions(this.entities),this.renderer.render());return this};Flory.LennardJones.far_cutoff_distance=100;Flory.LennardJones.default_sigma=1;Flory.LennardJones.default_epsilon=1;Flory.Newtonian2D=function(){Flory.Environment.call(this)};
Flory.Newtonian2D.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian2D.constructor=Flory.Newtonian2D;
Flory.Newtonian2D.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a],d=new Flory.Vector2;if(c instanceof Flory.Monomer2D){for(var e=0,b=this.entities.length;e<b;e++){var f=this.entities[e];f instanceof Flory.Field2D&&d.add(f.getForce(c.position))}c.force=d.clone()}}a=0;for(b=this.entities.length;a<b;a++)c=this.entities[a],c instanceof Flory.Monomer2D&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*
Flory.timestep)),this.visualization&&this.renderer.updateRenderablePosition(this.entities[a]));this.visualization&&this.renderer.render();return this};
