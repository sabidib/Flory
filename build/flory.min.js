'use strict';var Flory={VERSION:"0.2",timestep:.01,RandomGen:function(a){void 0==a&&(a=(new Date).getTime());this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=Array(this.N);this.mti=this.N+1;this.init_genrand(a)}};
Flory.RandomGen.prototype.init_genrand=function(a){this.mt[0]=a>>>0;for(this.mti=1;this.mti<this.N;this.mti++)a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((a&4294901760)>>>16)<<16)+1812433253*(a&65535)+this.mti,this.mt[this.mti]>>>=0};
Flory.RandomGen.prototype.init_by_array=function(a,b){var c,d,e;this.init_genrand(19650218);c=1;d=0;for(e=this.N>b?this.N:b;e;e--){var g=this.mt[c-1]^this.mt[c-1]>>>30;this.mt[c]=(this.mt[c]^(1664525*((g&4294901760)>>>16)<<16)+1664525*(g&65535))+a[d]+d;this.mt[c]>>>=0;c++;d++;c>=this.N&&(this.mt[0]=this.mt[this.N-1],c=1);d>=b&&(d=0)}for(e=this.N-1;e;e--)g=this.mt[c-1]^this.mt[c-1]>>>30,this.mt[c]=(this.mt[c]^(1566083941*((g&4294901760)>>>16)<<16)+1566083941*(g&65535))-c,this.mt[c]>>>=0,c++,c>=this.N&&
(this.mt[0]=this.mt[this.N-1],c=1);this.mt[0]=2147483648};
Flory.RandomGen.prototype.genrand_int32=function(){var a,b=[0,this.MATRIX_A];if(this.mti>=this.N){var c;this.mti==this.N+1&&this.init_genrand(5489);for(c=0;c<this.N-this.M;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+this.M]^a>>>1^b[a&1];for(;c<this.N-1;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+(this.M-this.N)]^a>>>1^b[a&1];a=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-
1]^a>>>1^b[a&1];this.mti=0}a=this.mt[this.mti++];a^=a>>>11;a^=a<<7&2636928640;a^=a<<15&4022730752;return(a^a>>>18)>>>0};Flory.RandomGen.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};Flory.RandomGen.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};Flory.RandomGen.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};Flory.RandomGen.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)};
Flory.RandomGen.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return 1.1102230246251565E-16*(67108864*a+b)};Flory._random=new Flory.RandomGen;Flory.rand=Flory._random.random;
Flory.getRandomVector=function(a,b,c){a=Flory._random.random()*a*(.5-random.random());b=Flory._random.random()*b*(.5-random.random());c=Flory._random.random()*c*(.5-random.random());return isNaN(a)?new Flory.Vector([]):isNaN(b)?new Flory.Vector([a]):isNaN(c)?new Flory.Vector([a,b]):new Flory.Vector([a,b,c])};
Flory.getNonOverlappingMonomer=function(a,b,c,d,e,g,f,h){for(var k={},n=0;1E6>n;){for(var r=!1,k=Flory.getRandomVector(g,f,h),q=0;q<a.length;q++){var l=(b+a[q].radius+e)*(b+a[q].radius+e);if(a[q].position.distanceToSq(k)<=l){r=!0;break}}if(!r)break;n++}if(999995<n)console.log("Flory: can't place a monomer that does not overlap with another. Tried 1 million times...");else return new Flory.Monomer({radius:b,charge:d,mass:c,position:k})};
Flory.generateGUID=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};Flory.isWebGlAvailable=function(){try{var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){return!1}};Flory.baseVector=function(){this.components=[]};Flory.baseVector.prototype.constructor=Flory.baseVector;Flory.baseVector.prototype={dimension:function(){return this.components.length}};
Flory.Vector3=function(a,b,c){Flory.baseVector.call(this);a instanceof Array&&void 0==b&&void 0==c?(b=a[1],c=a[2],a=a[0]):a instanceof Object&&void 0==b&&void 0==c&&(b=a.y,c=a.z,a=a.x);this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c;this.components=[this.x,this.y,this.z]};Flory.Vector3.prototype=Object.create(Flory.baseVector.prototype);Flory.Vector3.prototype.constructor=Flory.Vector3;Flory.Vector3.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
Flory.Vector3.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};Flory.Vector3.prototype.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};Flory.Vector3.prototype.mult=function(a){return new Flory.Vector3(this.x*a,this.y*a,this.z*a)};Flory.Vector3.prototype.cross=function(a){return new Flory.Vector3([this.y*a.components[2]-this.z*a.components[1],this.z*a.components[0]-this.x*a.components[2],this.x*a.components[1]-this.y*a.components[0]])};
Flory.Vector3.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};Flory.Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Flory.Vector3.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z};Flory.Vector3.prototype.distanceTo=function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z))};
Flory.Vector3.prototype.distanceToSq=function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z)};Flory.Vector3.prototype.zero=function(){this.z=this.y=this.x=0;return this};Flory.Vector3.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};Flory.Vector3.prototype.normalize=function(){var a=this.length();this.x/=a;this.y/=a;this.z/=a;return this};Flory.Vector3.prototype.clone=function(){return new Flory.Vector3(this.x,this.y,this.z)};
Flory.Vector2=function(a,b){Flory.baseVector.call(this);a instanceof Array&&void 0==b&&(b=a[1],a=a[0]);a instanceof Object&&void 0==b&&(b=a.y,a=a.x);this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.components=[this.x,this.y,0]};Flory.Vector2.prototype=Object.create(Flory.baseVector.prototype);Flory.Vector2.prototype.constructor=Flory.Vector2;Flory.Vector2.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};Flory.Vector2.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};
Flory.Vector2.prototype.scale=function(a){this.x*=a;this.y*=a;return this};Flory.Vector2.prototype.cross=function(a){return new Flory.Vector2([this.y*a.components[2],-this.x*a.components[2]])};Flory.Vector2.prototype.mult=function(a){return new Flory.Vector2(this.x*a,this.y*a)};Flory.Vector2.prototype.dot=function(a){return this.x*a.x+this.y*a.y};Flory.Vector2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
Flory.Vector2.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y};Flory.Vector2.prototype.distanceTo=function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y))};Flory.Vector2.prototype.distanceToSq=function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)};Flory.Vector2.prototype.zero=function(){this.y=this.x=0;return this};Flory.Vector2.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};
Flory.Vector2.prototype.normalize=function(){var a=this.length();this.x/=a;this.y/=a;return this};Flory.Vector2.prototype.clone=function(){return new Flory.Vector2(this.x,this.y)};Flory.Vector=function(a){Flory.baseVector.call(this);this.components=void 0==a?[]:"number"==typeof a?[].slice.apply(new Uint8Array(a)):a};Flory.Vector.prototype=Object.create(Flory.baseVector.prototype);Flory.Vector.prototype.constructor=Flory.Vector;
Flory.Vector.prototype.add=function(a){if(a.components.length>this.components.length){for(var b=0,c=this.components.length;b<c;b++)this.components[b]+=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]+=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]+=a.components[b];return this};
Flory.Vector.prototype.sub=function(a){if(a.components.length>this.components.length){for(var b=0,c=this.components.length;b<c;b++)this.components[b]-=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]-=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]-=a.components[b];return this};Flory.Vector.prototype.scale=function(a){for(var b=0,c=this.components.length;b<c;b++)this.components[b]*=a;return this};
Flory.Vector.prototype.mult=function(a){for(var b=[],c=0,d=this.components.length;c<d;c++)b[c]=a*this.components[c];return new Flory.Vector(b)};Flory.Vector.prototype.dot=function(a){if(a.components.length!=this.components.length)console.log("Flory.vector.dot(a) can only accept a vector of the same dimension as the object.");else{for(var b=0,c=0,d=a.components.length;c<d;c++)b+=this.components[c]*a.components[c];return b}};
Flory.Vector.prototype.length=function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return Math.sqrt(a)};Flory.Vector.prototype.lengthSq=function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return a};
Flory.Vector.prototype.cross=function(a){return void 0==a.components[2]?new Flory.Vector([-this.components[2]*a.components[1],this.components[2]*a.components[0],this.components[0]*a.components[1]-this.components[1]*a.components[0]]):new Flory.Vector([this.components[1]*a.components[2]-this.components[2]*a.components[1],this.components[2]*a.components[0]-this.components[0]*a.components[2],this.components[0]*a.components[1]-this.components[1]*a.components[0]])};
Flory.Vector.prototype.distanceTo=function(a){var b=0,c=0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=
(this.components[c]-0)*(this.components[c]-0)}else for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return Math.sqrt(b)};
Flory.Vector.prototype.distanceToSq=function(a){var b=0,c=0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=
(this.components[c]-0)*(this.components[c]-0)}else for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return b};Flory.Vector.prototype.zero=function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=0;return this};Flory.Vector.prototype.negate=function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=-this.components[a];return this};
Flory.Vector.prototype.normalize=function(){for(var a=this.length(),b=0,c=this.components.length;b<c;b++)this.components[b]/=a;return this};Flory.Vector.prototype.clone=function(){return new Flory.Vector(this.components.slice(0))};Flory.Matrix4=function(a){this.matrix=[];for(var b=0;16>b;b++)this.matrix[b]=a[b]};
Flory.Matrix4.prototype={contructor:Flory.Matrix4,setElement:function(a,b,c){this.matrix[4*a+b]=c;return this},setMatrix:function(a){this.matrix=a;return this},add:function(a){for(var b=0;16>b;b++)this.matrix[b]+=a.matrix[b];return this},multiply:function(a){m=this.matrix;t=a.matrix;m[0]=m[0]*t[0]+m[1]*t[4]+m[2]*t[8]+m[3]*t[12];m[1]=m[0]*t[1]+m[1]*t[5]+m[2]*t[9]+m[3]*t[13];m[2]=m[0]*t[2]+m[1]*t[6]+m[2]*t[10]+m[3]*t[14];m[3]=m[0]*t[3]+m[1]*t[7]+m[2]*t[11]+m[3]*t[15];m[0]=m[4]*t[0]+m[5]*t[4]+m[6]*t[8]+
m[7]*t[12];m[1]=m[4]*t[1]+m[5]*t[5]+m[6]*t[9]+m[7]*t[13];m[2]=m[4]*t[2]+m[5]*t[6]+m[6]*t[10]+m[7]*t[14];m[3]=m[4]*t[3]+m[5]*t[7]+m[6]*t[11]+m[7]*t[15];m[0]=m[8]*t[0]+m[9]*t[4]+m[10]*t[8]+m[11]*t[12];m[1]=m[8]*t[1]+m[9]*t[5]+m[10]*t[9]+m[11]*t[13];m[2]=m[8]*t[2]+m[9]*t[6]+m[10]*t[10]+m[11]*t[14];m[3]=m[8]*t[3]+m[9]*t[7]+m[10]*t[11]+m[11]*t[15];m[0]=m[12]*t[0]+m[13]*t[4]+m[14]*t[8]+m[15]*t[12];m[1]=m[12]*t[1]+m[13]*t[5]+m[14]*t[9]+m[15]*t[13];m[2]=m[12]*t[2]+m[13]*t[6]+m[14]*t[10]+m[15]*t[14];m[3]=
m[12]*t[3]+m[13]*t[7]+m[14]*t[11]+m[15]*t[15];return this},transpose:function(){for(var a=0;4>a;a++)for(var b=0;4>b;b++)this.matrix[a*b+b]=this.matrix[a*b+a]}};Flory.Matrix4.Identity=new Flory.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);
(function(a,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b=a.length,c=p.type(a);return"function"===c||p.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){if(p.isFunction(b))return p.grep(a,function(a,d){return!!b.call(a,
d,a)!==c});if(b.nodeType)return p.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Ra.test(b))return p.filter(b,a,c);b=p.filter(b,a)}return p.grep(a,function(a){return 0<=ea.call(b,a)!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b=Va[a]={};p.each(a.match(ua)||[],function(a,c){b[c]=!0});return b}function f(){Y.removeEventListener("DOMContentLoaded",f,!1);a.removeEventListener("load",f,!1);p.ready()}function h(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=p.expando+Math.random()}function k(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(bb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Sa.test(c)?p.parseJSON(c):c}catch(d){}aa.set(a,b,c)}else c=void 0;return c}function n(){return!0}function r(){return!1}function q(){try{return Y.activeElement}catch(a){}}function l(a,b){return p.nodeName(a,"table")&&p.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function s(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function u(a){var b=gb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function w(a,b){for(var c=0,d=a.length;c<d;c++)P.set(a[c],"globalEval",!b||P.get(b[c],"globalEval"))}function y(a,b){var c,d,f,e;if(1===b.nodeType){if(P.hasData(a)&&(e=P.access(a),c=P.set(b,e),e=e.events))for(f in delete c.handle,
c.events={},e)for(c=0,d=e[f].length;c<d;c++)p.event.add(b,f,e[f][c]);aa.hasData(a)&&(f=aa.access(a),f=p.extend({},f),aa.set(b,f))}}function x(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&p.nodeName(a,b)?p.merge([a],c):c}function z(b,c){var d,f=p(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(f[0]))?d.display:p.css(f[0],"display");f.detach();return e}function C(a){var b=
Y,c=ia[a];c||(c=z(a,b),"none"!==c&&c||(ma=(ma||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=ma[0].contentDocument,b.write(),b.close(),c=z(a,b),ma.detach()),ia[a]=c);return c}function A(a,b,c){var d,f,e=a.style;(c=c||Ka(a))&&(f=c.getPropertyValue(b)||c[b]);c&&(""!==f||p.contains(a.ownerDocument,a)||(f=p.style(a,b)),wa.test(f)&&Wa.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=f,f=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0!==
f?f+"":f}function F(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function E(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,f=Xa.length;f--;)if(b=Xa[f]+c,b in a)return b;return d}function D(a,b,c){return(a=hb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function B(a,b,c,d,f){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=p.css(a,c+sa[b],!0,f)),d?("content"===c&&(e-=p.css(a,"padding"+
sa[b],!0,f)),"margin"!==c&&(e-=p.css(a,"border"+sa[b]+"Width",!0,f))):(e+=p.css(a,"padding"+sa[b],!0,f),"padding"!==c&&(e+=p.css(a,"border"+sa[b]+"Width",!0,f)));return e}function H(a,b,c){var d=!0,f="width"===b?a.offsetWidth:a.offsetHeight,e=Ka(a),h="border-box"===p.css(a,"boxSizing",!1,e);if(0>=f||null==f){f=A(a,b,e);if(0>f||null==f)f=a.style[b];if(wa.test(f))return f;d=h&&(ca.boxSizingReliable()||f===a.style[b]);f=parseFloat(f)||0}return f+B(a,b,c||(h?"border":"content"),d,e)+"px"}function I(a,
b){for(var c,f,d,e=[],h=0,g=a.length;h<g;h++)f=a[h],f.style&&(e[h]=P.get(f,"olddisplay"),c=f.style.display,b?(e[h]||"none"!==c||(f.style.display=""),""===f.style.display&&v(f)&&(e[h]=P.access(f,"olddisplay",C(f.nodeName)))):(d=v(f),"none"===c&&d||P.set(f,"olddisplay",d?c:p.css(f,"display"))));for(h=0;h<g;h++)f=a[h],!f.style||b&&"none"!==f.style.display&&""!==f.style.display||(f.style.display=b?e[h]||"":"none");return a}function G(a,b,c,f,d){return new G.prototype.init(a,b,c,f,d)}function M(){setTimeout(function(){ta=
void 0});return ta=p.now()}function N(a,b){var c,f=0,d={height:a};for(b=b?1:0;4>f;f+=2-b)c=sa[f],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function K(a,b,c){for(var f,d=(Ya[b]||[]).concat(Ya["*"]),e=0,h=d.length;e<h;e++)if(f=d[e].call(c,b,a))return f}function Q(a,b){var c,f,d,e,h;for(c in a)if(f=p.camelCase(c),d=b[f],e=a[c],p.isArray(e)&&(d=e[1],e=a[c]=e[0]),c!==f&&(a[f]=e,delete a[c]),(h=p.cssHooks[f])&&"expand"in h)for(c in e=h.expand(e),delete a[f],e)c in a||(a[c]=e[c],b[c]=
d);else b[f]=d}function O(a,b,c){var f,d=0,e=Ba.length,h=p.Deferred().always(function(){delete g.elem}),g=function(){if(f)return!1;for(var b=ta||M(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),d=0,e=k.tweens.length;d<e;d++)k.tweens[d].run(c);h.notifyWith(a,[k,c,b]);if(1>c&&e)return b;h.resolveWith(a,[k]);return!1},k=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ta||M(),duration:c.duration,tweens:[],createTween:function(b,
c){var f=p.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(f);return f},stop:function(b){var c=0,d=b?k.tweens.length:0;if(f)return this;for(f=!0;c<d;c++)k.tweens[c].run(1);b?h.resolveWith(a,[k,b]):h.rejectWith(a,[k,b]);return this}});c=k.props;for(Q(c,k.opts.specialEasing);d<e;d++)if(b=Ba[d].call(k,a,c,k.opts))return b;p.map(c,K,k);p.isFunction(k.opts.start)&&k.opts.start.call(a,k);p.fx.timer(p.extend(g,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,
k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function L(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var f,d=0,e=b.toLowerCase().match(ua)||[];if(p.isFunction(c))for(;f=e[d++];)"+"===f[0]?(f=f.slice(1)||"*",(a[f]=a[f]||[]).unshift(c)):(a[f]=a[f]||[]).push(c)}}function T(a,b,c,f){function d(g){var k;e[g]=!0;p.each(a[g]||[],function(a,g){var V=g(b,c,f);if("string"===typeof V&&!h&&!e[V])return b.dataTypes.unshift(V),d(V),!1;if(h)return!(k=V)});return k}var e={},h=a===ib;return d(b.dataTypes[0])||
!e["*"]&&d("*")}function X(a,b){var c,f,d=p.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((d[c]?a:f||(f={}))[c]=b[c]);f&&p.extend(!0,a,f);return a}function W(a,b,c,f){var d;if(p.isArray(b))p.each(b,function(b,d){c||Ab.test(a)?f(a,d):W(a+"["+("object"===typeof d?b:"")+"]",d,c,f)});else if(c||"object"!==p.type(b))f(a,b);else for(d in b)W(a+"["+d+"]",b[d],c,f)}function U(a){return p.isWindow(a)?a:9===a.nodeType&&a.defaultView}var J=[],ka=J.slice,ba=J.concat,ja=J.push,ea=J.indexOf,la={},na=
la.toString,ha=la.hasOwnProperty,ca={},Y=a.document,p=function(a,b){return new p.fn.init(a,b)},Ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^-ms-/,Za=/-([\da-z])/gi,Ta=function(a,b){return b.toUpperCase()};p.fn=p.prototype={jquery:"2.1.1",constructor:p,selector:"",length:0,toArray:function(){return ka.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ka.call(this)},pushStack:function(a){a=p.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a,
b){return p.each(this,a,b)},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ka.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ja,sort:J.sort,splice:J.splice};p.extend=p.fn.extend=function(){var a,b,c,f,d,e=arguments[0]||
{},h=1,g=arguments.length,k=!1;"boolean"===typeof e&&(k=e,e=arguments[h]||{},h++);"object"===typeof e||p.isFunction(e)||(e={});h===g&&(e=this,h--);for(;h<g;h++)if(null!=(a=arguments[h]))for(b in a)c=e[b],f=a[b],e!==f&&(k&&f&&(p.isPlainObject(f)||(d=p.isArray(f)))?(d?(d=!1,c=c&&p.isArray(c)?c:[]):c=c&&p.isPlainObject(c)?c:{},e[b]=p.extend(k,c,f)):void 0!==f&&(e[b]=f));return e};p.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},
isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!p.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==p.type(a)||a.nodeType||p.isWindow(a)||a.constructor&&!ha.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?la[na.call(a)]||"object":
typeof a},globalEval:function(a){var b;b=eval;if(a=p.trim(a))1===a.indexOf("use strict")?(b=Y.createElement("script"),b.text=a,Y.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(oa,"ms-").replace(Za,Ta)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,f){var d,e=0,h=a.length;d=c(a);if(f)if(d)for(;e<h&&(d=b.apply(a[e],f),!1!==d);e++);else for(e in a){if(d=b.apply(a[e],f),!1===d)break}else if(d)for(;e<
h&&(d=b.call(a[e],e,a[e]),!1!==d);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),!1===d)break;return a},trim:function(a){return null==a?"":(a+"").replace(Ca,"")},makeArray:function(a,b){var f=b||[];null!=a&&(c(Object(a))?p.merge(f,"string"===typeof a?[a]:a):ja.call(f,a));return f},inArray:function(a,b,c){return null==b?-1:ea.call(b,a,c)},merge:function(a,b){for(var c=+b.length,f=0,d=a.length;f<c;f++)a[d++]=b[f];a.length=d;return a},grep:function(a,b,c){for(var f=[],d=0,e=a.length,h=!c;d<e;d++)c=!b(a[d],
d),c!==h&&f.push(a[d]);return f},map:function(a,b,f){var d,e=0,h=a.length,g=[];if(c(a))for(;e<h;e++)d=b(a[e],e,f),null!=d&&g.push(d);else for(e in a)d=b(a[e],e,f),null!=d&&g.push(d);return ba.apply([],g)},guid:1,proxy:function(a,b){var c,f;"string"===typeof b&&(c=a[b],b=a,a=c);if(p.isFunction(a))return f=ka.call(arguments,2),c=function(){return a.apply(b||this,f.concat(ka.call(arguments)))},c.guid=a.guid=a.guid||p.guid++,c},now:Date.now,support:ca});p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){la["[object "+b+"]"]=b.toLowerCase()});var xa=function(a){function b(a,c,f,d){var e,h,g,k,n;(c?c.ownerDocument||c:H)!==B&&ga(c);c=c||B;f=f||[];if(!a||"string"!==typeof a)return f;if(1!==(k=c.nodeType)&&9!==k)return[];if(G&&!d){if(e=oa.exec(a))if(g=e[1])if(9===k)if((h=c.getElementById(g))&&h.parentNode){if(h.id===g)return f.push(h),f}else return f;else{if(c.ownerDocument&&(h=c.ownerDocument.getElementById(g))&&N(c,h)&&h.id===g)return f.push(h),f}else{if(e[2])return ea.apply(f,c.getElementsByTagName(a)),
f;if((g=e[3])&&z.getElementsByClassName&&c.getElementsByClassName)return ea.apply(f,c.getElementsByClassName(g)),f}if(z.qsa&&(!qa||!qa.test(a))){h=e=M;g=c;n=9===k&&a;if(1===k&&"object"!==c.nodeName.toLowerCase()){k=E(a);(e=c.getAttribute("id"))?h=e.replace(da,"\\$&"):c.setAttribute("id",h);h="[id='"+h+"'] ";for(g=k.length;g--;)k[g]=h+q(k[g]);g=ba.test(a)&&r(c.parentNode)||c;n=k.join(",")}if(n)try{return ea.apply(f,g.querySelectorAll(n)),f}catch(V){}finally{e||c.removeAttribute("id")}}}return ia(a.replace(U,
"$1"),c,f,d)}function c(){function a(c,f){b.push(c+" ")>v.cacheLength&&delete a[b.shift()];return a[c+" "]=f}var b=[];return a}function f(a){a[M]=!0;return a}function d(a){var b=B.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var c=a.split("|"),f=a.length;f--;)v.attrHandle[c[f]]=b}function h(a,b){var c=b&&a,f=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(f)return f;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function n(a){return f(function(b){b=+b;return f(function(c,f){for(var d,e=a([],c.length,b),h=e.length;h--;)c[d=e[h]]&&(c[d]=!(f[d]=c[d]))})})}function r(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function l(){}function q(a){for(var b=
0,c=a.length,f="";b<c;b++)f+=a[b].value;return f}function s(a,b,c){var f=b.dir,d=c&&"parentNode"===f,e=hb++;return b.first?function(b,c,e){for(;b=b[f];)if(1===b.nodeType||d)return a(b,c,e)}:function(b,c,h){var g,k,n=[O,e];if(h)for(;b=b[f];){if((1===b.nodeType||d)&&a(b,c,h))return!0}else for(;b=b[f];)if(1===b.nodeType||d){k=b[M]||(b[M]={});if((g=k[f])&&g[0]===O&&g[1]===e)return n[2]=g[2];k[f]=n;if(n[2]=a(b,c,h))return!0}}}function p(a){return 1<a.length?function(b,c,f){for(var d=a.length;d--;)if(!a[d](b,
c,f))return!1;return!0}:a[0]}function u(a,b,c,f,d){for(var e,h=[],g=0,k=a.length,n=null!=b;g<k;g++)if(e=a[g])if(!c||c(e,f,d))h.push(e),n&&b.push(g);return h}function pa(a,c,d,e,h,g){e&&!e[M]&&(e=pa(e));h&&!h[M]&&(h=pa(h,g));return f(function(f,g,k,n){var V,r,l=[],q=[],s=g.length,p;if(!(p=f)){p=c||"*";for(var fa=k.nodeType?[k]:k,pa=[],Qa=0,A=fa.length;Qa<A;Qa++)b(p,fa[Qa],pa);p=pa}p=!a||!f&&c?p:u(p,l,a,k,n);fa=d?h||(f?a:s||e)?[]:g:p;d&&d(p,fa,k,n);if(e)for(V=u(fa,q),e(V,[],k,n),k=V.length;k--;)if(r=
V[k])fa[q[k]]=!(p[q[k]]=r);if(f){if(h||a){if(h){V=[];for(k=fa.length;k--;)(r=fa[k])&&V.push(p[k]=r);h(null,fa=[],V,n)}for(k=fa.length;k--;)(r=fa[k])&&-1<(V=h?X.call(f,r):l[k])&&(f[V]=!(g[V]=r))}}else fa=u(fa===g?fa.splice(s,fa.length):fa),h?h(null,g,fa,n):ea.apply(g,fa)})}function A(a){var b,c,f,d=a.length,e=v.relative[a[0].type];c=e||v.relative[" "];for(var h=e?1:0,g=s(function(a){return a===b},c,!0),k=s(function(a){return-1<X.call(b,a)},c,!0),n=[function(a,c,f){return!e&&(f||c!==ma)||((b=c).nodeType?
g(a,c,f):k(a,c,f))}];h<d;h++)if(c=v.relative[a[h].type])n=[s(p(n),c)];else{c=v.filter[a[h].type].apply(null,a[h].matches);if(c[M]){for(f=++h;f<d&&!v.relative[a[f].type];f++);return pa(1<h&&p(n),1<h&&q(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(U,"$1"),c,h<f&&A(a.slice(h,f)),f<d&&A(a=a.slice(f)),f<d&&q(a))}n.push(c)}return p(n)}function x(a,c){var d=0<c.length,e=0<a.length,h=function(f,h,g,k,n){var V,r,l,q=0,p="0",s=f&&[],fa=[],pa=ma,Qa=f||e&&v.find.TAG("*",n),A=O+=null==pa?1:
Math.random()||.1,x=Qa.length;for(n&&(ma=h!==B&&h);p!==x&&null!=(V=Qa[p]);p++){if(e&&V){for(r=0;l=a[r++];)if(l(V,h,g)){k.push(V);break}n&&(O=A)}d&&((V=!l&&V)&&q--,f&&s.push(V))}q+=p;if(d&&p!==q){for(r=0;l=c[r++];)l(s,fa,h,g);if(f){if(0<q)for(;p--;)s[p]||fa[p]||(fa[p]=W.call(k));fa=u(fa)}ea.apply(k,fa);n&&!f&&0<fa.length&&1<q+c.length&&b.uniqueSort(k)}n&&(O=A,ma=pa);return s};return d?f(h):h}var w,z,v,y,F,E,C,ia,ma,D,I,ga,B,K,G,qa,Q,L,N,M="sizzle"+-new Date,H=a.document,O=0,hb=0,Wa=c(),T=c(),Ka=c(),
J=function(a,b){a===b&&(I=!0);return 0},lb={}.hasOwnProperty,wa=[],W=wa.pop,P=wa.push,ea=wa.push,R=wa.slice,X=wa.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},S="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Xa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+S+"))|)[\\x20\\t\\r\\n\\f]*\\]",Y=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
Xa+")*)|.*)\\)|)",U=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,eb=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ca=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ha=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,aa=new RegExp(Y),la=new RegExp("^"+S+"$"),Ua={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Xa),PSEUDO:new RegExp("^"+Y),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},na=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Ba=/^[^{]+\{\s*\[native \w/,oa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ba=/[+~]/,da=/'|\\/g,ta=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Ea=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ea.apply(wa=R.call(H.childNodes),H.childNodes),wa[H.childNodes.length].nodeType}catch(Ca){ea={apply:wa.length?function(a,b){P.apply(a,R.call(b))}:function(a,b){for(var c=a.length,f=0;a[c++]=b[f++];);a.length=c-1}}}z=b.support={};F=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};ga=b.setDocument=function(a){var b=a?a.ownerDocument||a:H;a=b.defaultView;
if(b===B||9!==b.nodeType||!b.documentElement)return B;B=b;K=b.documentElement;G=!F(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){ga()},!1):a.attachEvent&&a.attachEvent("onunload",function(){ga()}));z.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});z.getElementsByTagName=d(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});z.getElementsByClassName=Ba.test(b.getElementsByClassName)&&d(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});z.getById=d(function(a){K.appendChild(a).id=M;return!b.getElementsByName||!b.getElementsByName(M).length});z.getById?(v.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&G){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},v.filter.ID=function(a){var b=a.replace(ta,Ea);return function(a){return a.getAttribute("id")===b}}):(delete v.find.ID,v.filter.ID=function(a){var b=
a.replace(ta,Ea);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});v.find.TAG=z.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,f=[],d=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[d++];)1===c.nodeType&&f.push(c);return f}return e};v.find.CLASS=z.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&G)return b.getElementsByClassName(a)};
Q=[];qa=[];if(z.qsa=Ba.test(b.querySelectorAll))d(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&qa.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||qa.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||qa.push(":checked")}),
d(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&qa.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||qa.push(":enabled",":disabled");a.querySelectorAll("*,:x");qa.push(",.*:")});(z.matchesSelector=Ba.test(L=K.matches||K.webkitMatchesSelector||K.mozMatchesSelector||K.oMatchesSelector||K.msMatchesSelector))&&d(function(a){z.disconnectedMatch=L.call(a,"div");L.call(a,
"[s!='']:x");Q.push("!=",Y)});qa=qa.length&&new RegExp(qa.join("|"));Q=Q.length&&new RegExp(Q.join("|"));N=(a=Ba.test(K.compareDocumentPosition))||Ba.test(K.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,f=b&&b.parentNode;return a===f||!!(f&&1===f.nodeType&&(c.contains?c.contains(f):a.compareDocumentPosition&&a.compareDocumentPosition(f)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};J=a?function(a,c){if(a===c)return I=!0,0;var f=!a.compareDocumentPosition-
!c.compareDocumentPosition;if(f)return f;f=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return f&1||!z.sortDetached&&c.compareDocumentPosition(a)===f?a===b||a.ownerDocument===H&&N(H,a)?-1:c===b||c.ownerDocument===H&&N(H,c)?1:D?X.call(D,a)-X.call(D,c):0:f&4?-1:1}:function(a,c){if(a===c)return I=!0,0;var f,d=0;f=a.parentNode;var e=c.parentNode,g=[a],k=[c];if(!f||!e)return a===b?-1:c===b?1:f?-1:e?1:D?X.call(D,a)-X.call(D,c):0;if(f===e)return h(a,c);for(f=a;f=f.parentNode;)g.unshift(f);
for(f=c;f=f.parentNode;)k.unshift(f);for(;g[d]===k[d];)d++;return d?h(g[d],k[d]):g[d]===H?-1:k[d]===H?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==B&&ga(a);c=c.replace(ha,"='$1']");if(!(!z.matchesSelector||!G||Q&&Q.test(c)||qa&&qa.test(c)))try{var f=L.call(a,c);if(f||z.disconnectedMatch||a.document&&11!==a.document.nodeType)return f}catch(d){}return 0<b(c,B,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==B&&
ga(a);return N(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==B&&ga(a);var c=v.attrHandle[b.toLowerCase()],c=c&&lb.call(v.attrHandle,b.toLowerCase())?c(a,b,!G):void 0;return void 0!==c?c:z.attributes||!G?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],f=0,d=0;I=!z.detectDuplicates;D=!z.sortStable&&a.slice(0);a.sort(J);if(I){for(;b=a[d++];)b===a[d]&&(f=c.push(d));
for(;f--;)a.splice(c[f],1)}D=null;return a};y=b.getText=function(a){var b,c="",f=0;b=a.nodeType;if(!b)for(;b=a[f++];)c+=y(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===b||4===b)return a.nodeValue;return c};v=b.selectors={cacheLength:50,createPseudo:f,match:Ua,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(ta,Ea);a[3]=(a[3]||a[4]||a[5]||"").replace(ta,Ea);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(Ua.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&aa.test(c)&&(b=E(c,!0))&&(b=c.indexOf(")",
c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ta,Ea).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Wa[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Wa(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},
ATTR:function(a,c,f){return function(d){d=b.attr(d,a);if(null==d)return"!="===c;if(!c)return!0;d+="";return"="===c?d===f:"!="===c?d!==f:"^="===c?f&&0===d.indexOf(f):"*="===c?f&&-1<d.indexOf(f):"$="===c?f&&d.slice(-f.length)===f:"~="===c?-1<(" "+d+" ").indexOf(f):"|="===c?d===f||d.slice(0,f.length+1)===f+"-":!1}},CHILD:function(a,b,c,f,d){var e="nth"!==a.slice(0,3),h="last"!==a.slice(-4),g="of-type"===b;return 1===f&&0===d?function(a){return!!a.parentNode}:function(b,c,k){var n,V,r,l,q;c=e!==h?"nextSibling":
"previousSibling";var p=b.parentNode,s=g&&b.nodeName.toLowerCase();k=!k&&!g;if(p){if(e){for(;c;){for(V=b;V=V[c];)if(g?V.nodeName.toLowerCase()===s:1===V.nodeType)return!1;q=c="only"===a&&!q&&"nextSibling"}return!0}q=[h?p.firstChild:p.lastChild];if(h&&k)for(k=p[M]||(p[M]={}),n=k[a]||[],l=n[0]===O&&n[1],r=n[0]===O&&n[2],V=l&&p.childNodes[l];V=++l&&V&&V[c]||(r=l=0)||q.pop();){if(1===V.nodeType&&++r&&V===b){k[a]=[O,l,r];break}}else if(k&&(n=(b[M]||(b[M]={}))[a])&&n[0]===O)r=n[1];else for(;(V=++l&&V&&
V[c]||(r=l=0)||q.pop())&&((g?V.nodeName.toLowerCase()!==s:1!==V.nodeType)||!++r||(k&&((V[M]||(V[M]={}))[a]=[O,r]),V!==b)););r-=d;return r===f||0===r%f&&0<=r/f}}},PSEUDO:function(a,c){var d,e=v.pseudos[a]||v.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[M]?e(c):1<e.length?(d=[a,a,"",c],v.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,b){for(var f,d=e(a,c),h=d.length;h--;)f=X.call(a,d[h]),a[f]=!(b[f]=d[h])}):function(a){return e(a,0,d)}):e}},pseudos:{not:f(function(a){var b=
[],c=[],d=C(a.replace(U,"$1"));return d[M]?f(function(a,b,c,f){f=d(a,null,f,[]);for(var e=a.length;e--;)if(c=f[e])a[e]=!(b[e]=c)}):function(a,f,e){b[0]=a;d(b,null,e,c);return!c.pop()}}),has:f(function(a){return function(c){return 0<b(a,c).length}}),contains:f(function(a){return function(b){return-1<(b.textContent||b.innerText||y(b)).indexOf(a)}}),lang:f(function(a){la.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ta,Ea).toLowerCase();return function(b){var c;do if(c=G?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===K},focus:function(a){return a===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return na.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&
"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,b){return[b-1]}),eq:n(function(a,b,c){return[0>c?c+b:c]}),even:n(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:n(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:n(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:n(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};v.pseudos.nth=v.pseudos.eq;for(w in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})v.pseudos[w]=g(w);for(w in{submit:!0,reset:!0})v.pseudos[w]=k(w);l.prototype=v.filters=v.pseudos;v.setFilters=new l;E=b.tokenize=function(a,c){var f,d,e,h,g,k,n;if(g=T[a+" "])return c?0:g.slice(0);g=a;k=[];for(n=v.preFilter;g;){if(!f||(d=eb.exec(g)))d&&(g=g.slice(d[0].length)||g),k.push(e=[]);f=!1;if(d=ca.exec(g))f=d.shift(),e.push({value:f,type:d[0].replace(U," ")}),g=g.slice(f.length);for(h in v.filter)!(d=Ua[h].exec(g))||n[h]&&!(d=n[h](d))||(f=d.shift(),e.push({value:f,
type:h,matches:d}),g=g.slice(f.length));if(!f)break}return c?g.length:g?b.error(a):T(a,k).slice(0)};C=b.compile=function(a,b){var c,f=[],d=[],e=Ka[a+" "];if(!e){b||(b=E(a));for(c=b.length;c--;)e=A(b[c]),e[M]?f.push(e):d.push(e);e=Ka(a,x(d,f));e.selector=a}return e};ia=b.select=function(a,b,c,f){var d,e,h,g,k="function"===typeof a&&a,n=!f&&E(a=k.selector||a);c=c||[];if(1===n.length){e=n[0]=n[0].slice(0);if(2<e.length&&"ID"===(h=e[0]).type&&z.getById&&9===b.nodeType&&G&&v.relative[e[1].type]){b=(v.find.ID(h.matches[0].replace(ta,
Ea),b)||[])[0];if(!b)return c;k&&(b=b.parentNode);a=a.slice(e.shift().value.length)}for(d=Ua.needsContext.test(a)?0:e.length;d--;){h=e[d];if(v.relative[g=h.type])break;if(g=v.find[g])if(f=g(h.matches[0].replace(ta,Ea),ba.test(e[0].type)&&r(b.parentNode)||b)){e.splice(d,1);a=f.length&&q(e);if(!a)return ea.apply(c,f),c;break}}}(k||C(a,n))(f,b,!G,c,ba.test(a)&&r(b.parentNode)||b);return c};z.sortStable=M.split("").sort(J).join("")===M;z.detectDuplicates=!!I;ga();z.sortDetached=d(function(a){return a.compareDocumentPosition(B.createElement("div"))&
1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});z.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||e("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,c){var f;if(!c)return!0===a[b]?b.toLowerCase():(f=a.getAttributeNode(b))&&f.specified?f.value:null});return b}(a);p.find=xa;p.expr=xa.selectors;p.expr[":"]=p.expr.pseudos;p.unique=xa.uniqueSort;p.text=xa.getText;p.isXMLDoc=xa.isXML;p.contains=xa.contains;var Fa=p.expr.match.needsContext,Ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ra=/^.[^:#\[\.,]*$/;p.filter=function(a,b,c){var f=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===f.nodeType?p.find.matchesSelector(f,a)?[f]:[]:p.find.matches(a,p.grep(b,
function(a){return 1===a.nodeType}))};p.fn.extend({find:function(a){var b,c=this.length,f=[],d=this;if("string"!==typeof a)return this.pushStack(p(a).filter(function(){for(b=0;b<c;b++)if(p.contains(d[b],this))return!0}));for(b=0;b<c;b++)p.find(a,d[b],f);f=this.pushStack(1<c?p.unique(f):f);f.selector=this.selector?this.selector+" "+a:a;return f},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===
typeof a&&Fa.test(a)?p(a):a||[],!1).length}});var Da,La=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:La.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Da).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof p?b[0]:b,p.merge(this,p.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Y,!0)),Ga.test(c[1])&&p.isPlainObject(b))for(c in b)if(p.isFunction(this[c]))this[c](b[c]);
else this.attr(c,b[c])}else(c=Y.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=Y,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(p.isFunction(a))return"undefined"!==typeof Da.ready?Da.ready(a):a(p);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return p.makeArray(a,this)}).prototype=p.fn;Da=p(Y);var Ma=/^(?:parents|prev(?:Until|All))/,Na={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(a,
b,c){for(var f=[],d=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&p(a).is(c))break;f.push(a)}return f},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});p.fn.extend({has:function(a){var b=p(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(p.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,f=0,d=this.length,e=[],h=Fa.test(a)||"string"!==typeof a?p(a,b||this.context):0;f<d;f++)for(c=this[f];c&&c!==
b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&p.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?p.unique(e):e)},index:function(a){return a?"string"===typeof a?ea.call(p(a),this[0]):ea.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(p.unique(p.merge(this.get(),p(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});p.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return a.contentDocument||p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,f){var d=p.map(this,b,c);"Until"!==a.slice(-5)&&(f=c);f&&"string"===typeof f&&(d=p.filter(f,d));1<this.length&&(Na[a]||p.unique(d),Ma.test(a)&&d.reverse());return this.pushStack(d)}});var ua=/\S+/g,Va={};p.Callbacks=function(a){a="string"===typeof a?Va[a]||g(a):p.extend({},a);var b,c,f,d,e,h,k=[],n=!a.once&&[],r=function(g){b=
a.memory&&g;c=!0;h=d||0;d=0;e=k.length;for(f=!0;k&&h<e;h++)if(!1===k[h].apply(g[0],g[1])&&a.stopOnFalse){b=!1;break}f=!1;k&&(n?n.length&&r(n.shift()):b?k=[]:l.disable())},l={add:function(){if(k){var c=k.length;(function Bb(b){p.each(b,function(b,c){var f=p.type(c);"function"===f?a.unique&&l.has(c)||k.push(c):c&&c.length&&"string"!==f&&Bb(c)})})(arguments);f?e=k.length:b&&(d=c,r(b))}return this},remove:function(){k&&p.each(arguments,function(a,b){for(var c;-1<(c=p.inArray(b,k,c));)k.splice(c,1),f&&
(c<=e&&e--,c<=h&&h--)});return this},has:function(a){return a?-1<p.inArray(a,k):!(!k||!k.length)},empty:function(){k=[];e=0;return this},disable:function(){k=n=b=void 0;return this},disabled:function(){return!k},lock:function(){n=void 0;b||l.disable();return this},locked:function(){return!n},fireWith:function(a,b){!k||c&&!n||(b=b||[],b=[a,b.slice?b.slice():b],f?n.push(b):r(b));return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!c}};return l};p.extend({Deferred:function(a){var b=
[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",f={state:function(){return c},always:function(){d.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,e){var h=p.isFunction(a[b])&&a[b];d[e[1]](function(){var a=h&&h.apply(this,arguments);if(a&&p.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[e[0]+"With"](this===f?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?p.extend(a,f):f}},d={};f.pipe=f.then;p.each(b,function(a,e){var h=e[2],g=e[3];f[e[1]]=h.add;g&&h.add(function(){c=g},b[a^1][2].disable,b[2][2].lock);d[e[0]]=function(){d[e[0]+"With"](this===d?f:this,arguments);return this};d[e[0]+"With"]=h.fireWith});f.promise(d);a&&a.call(d,d);return d},when:function(a){var b=0,c=ka.call(arguments),f=c.length,d=1!==f||a&&p.isFunction(a.promise)?
f:0,e=1===d?a:p.Deferred(),h=function(a,b,c){return function(f){b[a]=this;c[a]=1<arguments.length?ka.call(arguments):f;c===g?e.notifyWith(b,c):--d||e.resolveWith(b,c)}},g,k,n;if(1<f)for(g=Array(f),k=Array(f),n=Array(f);b<f;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(h(b,n,c)).fail(e.reject).progress(h(b,k,g)):--d;d||e.resolveWith(n,c);return e.promise()}});var Oa;p.fn.ready=function(a){p.ready.promise().done(a);return this};p.extend({isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:
p.ready(!0)},ready:function(a){(!0===a?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==a&&0<--p.readyWait||(Oa.resolveWith(Y,[p]),p.fn.triggerHandler&&(p(Y).triggerHandler("ready"),p(Y).off("ready"))))}});p.ready.promise=function(b){Oa||(Oa=p.Deferred(),"complete"===Y.readyState?setTimeout(p.ready):(Y.addEventListener("DOMContentLoaded",f,!1),a.addEventListener("load",f,!1)));return Oa.promise(b)};p.ready.promise();var va=p.access=function(a,b,c,f,d,e,h){var g=0,k=a.length,n=null==c;if("object"===p.type(c))for(g in d=
!0,c)p.access(a,b,g,c[g],!0,e,h);else if(void 0!==f&&(d=!0,p.isFunction(f)||(h=!0),n&&(h?(b.call(a,f),b=null):(n=b,b=function(a,b,c){return n.call(p(a),c)})),b))for(;g<k;g++)b(a[g],c,h?f:f.call(a[g],g,b(a[g],c)));return d?a:n?b.call(a):k?b(a[0],c):e};p.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1;h.accepts=p.acceptData;h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,
b)}catch(f){b[this.expando]=c,p.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var f;a=this.key(a);var d=this.cache[a];if("string"===typeof b)d[b]=c;else if(p.isEmptyObject(d))p.extend(this.cache[a],b);else for(f in b)d[f]=b[f];return d},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,p.camelCase(b));this.set(a,b,c);return void 0!==
c?c:b},remove:function(a,b){var c,f;c=this.key(a);var d=this.cache[c];if(void 0===b)this.cache[c]={};else for(p.isArray(b)?f=b.concat(b.map(p.camelCase)):(c=p.camelCase(b),b in d?f=[b,c]:(f=c,f=f in d?[f]:f.match(ua)||[])),c=f.length;c--;)delete d[f[c]]},hasData:function(a){return!p.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var P=new h,aa=new h,Sa=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bb=/([A-Z])/g;p.extend({hasData:function(a){return aa.hasData(a)||
P.hasData(a)},data:function(a,b,c){return aa.access(a,b,c)},removeData:function(a,b){aa.remove(a,b)},_data:function(a,b,c){return P.access(a,b,c)},_removeData:function(a,b){P.remove(a,b)}});p.fn.extend({data:function(a,b){var c,f,d,e=this[0],h=e&&e.attributes;if(void 0===a){if(this.length&&(d=aa.get(e),1===e.nodeType&&!P.get(e,"hasDataAttrs"))){for(c=h.length;c--;)h[c]&&(f=h[c].name,0===f.indexOf("data-")&&(f=p.camelCase(f.slice(5)),k(e,f,d[f])));P.set(e,"hasDataAttrs",!0)}return d}return"object"===
typeof a?this.each(function(){aa.set(this,a)}):va(this,function(b){var c,f=p.camelCase(a);if(e&&void 0===b){c=aa.get(e,a);if(void 0!==c)return c;c=aa.get(e,f);if(void 0!==c)return c;c=k(e,f,void 0);if(void 0!==c)return c}else this.each(function(){var c=aa.get(this,f);aa.set(this,f,b);-1!==a.indexOf("-")&&void 0!==c&&aa.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){aa.remove(this,a)})}});p.extend({queue:function(a,b,c){var f;if(a)return b=(b||
"fx")+"queue",f=P.get(a,b),c&&(!f||p.isArray(c)?f=P.access(a,b,p.makeArray(c)):f.push(c)),f||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),f=c.length,d=c.shift(),e=p._queueHooks(a,b),h=function(){p.dequeue(a,b)};"inprogress"===d&&(d=c.shift(),f--);d&&("fx"===b&&c.unshift("inprogress"),delete e.stop,d.call(a,h,e));!f&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return P.get(a,c)||P.access(a,c,{empty:p.Callbacks("once memory").add(function(){P.remove(a,[b+"queue",c])})})}});
p.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?p.queue(this[0],a):void 0===b?this:this.each(function(){var c=p.queue(this,a,b);p._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,f=1,d=p.Deferred(),e=this,h=this.length,g=function(){--f||d.resolveWith(e,[e])};"string"!==
typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=P.get(e[h],a+"queueHooks"))&&c.empty&&(f++,c.empty.add(g));g();return d.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,sa=["Top","Right","Bottom","Left"],v=function(a,b){a=b||a;return"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)},cb=/^(?:checkbox|radio)$/i;(function(){var a=Y.createDocumentFragment().appendChild(Y.createElement("div")),b=Y.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked",
"checked");b.setAttribute("name","t");a.appendChild(b);ca.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";ca.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();ca.focusinBubbles="onfocusin"in a;var Z=/^key/,ya=/^(?:mouse|pointer|contextmenu)|click/,R=/^(?:focusinfocus|focusoutblur)$/,da=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(a,b,c,f,d){var e,h,g,k,n,r,l,q,s;if(n=P.get(a))for(c.handler&&(e=c,c=e.handler,d=e.selector),c.guid||
(c.guid=p.guid++),(k=n.events)||(k=n.events={}),(h=n.handle)||(h=n.handle=function(b){return"undefined"!==typeof p&&p.event.triggered!==b.type?p.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(ua)||[""],n=b.length;n--;)g=da.exec(b[n])||[],q=r=g[1],s=(g[2]||"").split(".").sort(),q&&(g=p.event.special[q]||{},q=(d?g.delegateType:g.bindType)||q,g=p.event.special[q]||{},r=p.extend({type:q,origType:r,data:f,handler:c,guid:c.guid,selector:d,needsContext:d&&p.expr.match.needsContext.test(d),namespace:s.join(".")},
e),(l=k[q])||(l=k[q]=[],l.delegateCount=0,g.setup&&!1!==g.setup.call(a,f,s,h)||a.addEventListener&&a.addEventListener(q,h,!1)),g.add&&(g.add.call(a,r),r.handler.guid||(r.handler.guid=c.guid)),d?l.splice(l.delegateCount++,0,r):l.push(r),p.event.global[q]=!0)},remove:function(a,b,c,f,d){var e,h,g,k,n,r,l,q,s,u,pa,A=P.hasData(a)&&P.get(a);if(A&&(k=A.events)){b=(b||"").match(ua)||[""];for(n=b.length;n--;)if(g=da.exec(b[n])||[],s=pa=g[1],u=(g[2]||"").split(".").sort(),s){l=p.event.special[s]||{};s=(f?
l.delegateType:l.bindType)||s;q=k[s]||[];g=g[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=e=q.length;e--;)r=q[e],!d&&pa!==r.origType||c&&c.guid!==r.guid||g&&!g.test(r.namespace)||f&&f!==r.selector&&("**"!==f||!r.selector)||(q.splice(e,1),r.selector&&q.delegateCount--,l.remove&&l.remove.call(a,r));h&&!q.length&&(l.teardown&&!1!==l.teardown.call(a,u,A.handle)||p.removeEvent(a,s,A.handle),delete k[s])}else for(s in k)p.event.remove(a,s+b[n],c,f,!0);p.isEmptyObject(k)&&(delete A.handle,
P.remove(a,"events"))}},trigger:function(b,c,f,d){var e,h,g,k,n,r,l=[f||Y],q=ha.call(b,"type")?b.type:b;r=ha.call(b,"namespace")?b.namespace.split("."):[];h=e=f=f||Y;if(3!==f.nodeType&&8!==f.nodeType&&!R.test(q+p.event.triggered)&&(0<=q.indexOf(".")&&(r=q.split("."),q=r.shift(),r.sort()),k=0>q.indexOf(":")&&"on"+q,b=b[p.expando]?b:new p.Event(q,"object"===typeof b&&b),b.isTrigger=d?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,
b.result=void 0,b.target||(b.target=f),c=null==c?[b]:p.makeArray(c,[b]),r=p.event.special[q]||{},d||!r.trigger||!1!==r.trigger.apply(f,c))){if(!d&&!r.noBubble&&!p.isWindow(f)){g=r.delegateType||q;R.test(g+q)||(h=h.parentNode);for(;h;h=h.parentNode)l.push(h),e=h;e===(f.ownerDocument||Y)&&l.push(e.defaultView||e.parentWindow||a)}for(e=0;(h=l[e++])&&!b.isPropagationStopped();)b.type=1<e?g:r.bindType||q,(n=(P.get(h,"events")||{})[b.type]&&P.get(h,"handle"))&&n.apply(h,c),(n=k&&h[k])&&n.apply&&p.acceptData(h)&&
(b.result=n.apply(h,c),!1===b.result&&b.preventDefault());b.type=q;d||b.isDefaultPrevented()||r._default&&!1!==r._default.apply(l.pop(),c)||!p.acceptData(f)||!k||!p.isFunction(f[q])||p.isWindow(f)||((e=f[k])&&(f[k]=null),p.event.triggered=q,f[q](),p.event.triggered=void 0,e&&(f[k]=e));return b.result}},dispatch:function(a){a=p.event.fix(a);var b,c,f,d,e=[],h=ka.call(arguments);b=(P.get(this,"events")||{})[a.type]||[];var g=p.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!g.preDispatch||
!1!==g.preDispatch.call(this,a)){e=p.event.handlers.call(this,a,b);for(b=0;(d=e[b++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,c=0;(f=d.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,f=((p.event.special[f.origType]||{}).handle||f.handler).apply(d.elem,h),void 0!==f&&!1===(a.result=f)&&(a.preventDefault(),a.stopPropagation());g.postDispatch&&g.postDispatch.call(this,a);return a.result}},handlers:function(a,
b){var c,f,d,e,h=[],g=b.delegateCount,k=a.target;if(g&&k.nodeType&&(!a.button||"click"!==a.type))for(;k!==this;k=k.parentNode||this)if(!0!==k.disabled||"click"!==a.type){f=[];for(c=0;c<g;c++)e=b[c],d=e.selector+" ",void 0===f[d]&&(f[d]=e.needsContext?0<=p(d,this).index(k):p.find(d,this,null,[k]).length),f[d]&&f.push(e);f.length&&h.push({elem:k,handlers:f})}g<b.length&&h.push({elem:this,handlers:b.slice(g)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,f,d=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Y,f=c.documentElement,c=c.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=
b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0));a.which||void 0===d||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},fix:function(a){if(a[p.expando])return a;var b,c,f;b=a.type;var d=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=ya.test(b)?this.mouseHooks:Z.test(b)?this.keyHooks:{});f=e.props?this.props.concat(e.props):this.props;a=new p.Event(d);for(b=f.length;b--;)c=f[b],a[c]=d[c];a.target||(a.target=Y);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?
e.filter(a,d):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&p.nodeName(this,"input"))return this.click(),!1},_default:function(a){return p.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=
a.result)}}},simulate:function(a,b,c,f){a=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});f?p.event.trigger(a,null,b):p.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};p.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};p.Event=function(a,b){if(!(this instanceof p.Event))return new p.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?
n:r):this.type=a;b&&p.extend(this,b);this.timeStamp=a&&a.timeStamp||p.now();this[p.expando]=!0};p.Event.prototype={isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=
n;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,f=a.relatedTarget,d=a.handleObj;if(!f||f!==this&&!p.contains(this,f))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});ca.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=
function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){var f=this.ownerDocument||this,d=P.access(f,b);d||f.addEventListener(a,c,!0);P.access(f,b,(d||0)+1)},teardown:function(){var f=this.ownerDocument||this,d=P.access(f,b)-1;d?P.access(f,b,d):(f.removeEventListener(a,c,!0),P.remove(f,b))}}});p.fn.extend({on:function(a,b,c,f,d){var e,h;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(h in a)this.on(h,b,c,a[h],d);return this}null==c&&null==
f?(f=b,c=b=void 0):null==f&&("string"===typeof b?(f=c,c=void 0):(f=c,c=b,b=void 0));if(!1===f)f=r;else if(!f)return this;1===d&&(e=f,f=function(a){p().off(a);return e.apply(this,arguments)},f.guid=e.guid||(e.guid=p.guid++));return this.each(function(){p.event.add(this,a,f,c,b)})},one:function(a,b,c,f){return this.on(a,b,c,f,1)},off:function(a,b,c){var f;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,p(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),
this;if("object"===typeof a){for(f in a)this.off(f,b,a[f]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=r);return this.each(function(){p.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return p.event.trigger(a,b,c,!0)}});var Ha=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ia=/<([\w:]+)/,jb=/<|&#?\w+;/,kb=/<(?:script|style|link)/i,za=/checked\s*(?:[^=]|=\s*.checked.)/i,
db=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,pa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ga={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ga.optgroup=ga.option;ga.tbody=ga.tfoot=ga.colgroup=ga.caption=ga.thead;ga.th=ga.td;p.extend({clone:function(a,b,c){var f,d,e,h,g=a.cloneNode(!0),k=p.contains(a.ownerDocument,
a);if(!(ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(h=x(g),e=x(a),f=0,d=e.length;f<d;f++){var n=e[f],r=h[f],l=r.nodeName.toLowerCase();if("input"===l&&cb.test(n.type))r.checked=n.checked;else if("input"===l||"textarea"===l)r.defaultValue=n.defaultValue}if(b)if(c)for(e=e||x(a),h=h||x(g),f=0,d=e.length;f<d;f++)y(e[f],h[f]);else y(a,g);h=x(g,"script");0<h.length&&w(h,!k&&x(a,"script"));return g},buildFragment:function(a,b,c,f){for(var d,e,h,g=b.createDocumentFragment(),k=[],
n=0,r=a.length;n<r;n++)if((d=a[n])||0===d)if("object"===p.type(d))p.merge(k,d.nodeType?[d]:d);else if(jb.test(d)){e=e||g.appendChild(b.createElement("div"));h=(Ia.exec(d)||["",""])[1].toLowerCase();h=ga[h]||ga._default;e.innerHTML=h[1]+d.replace(Ha,"<$1></$2>")+h[2];for(h=h[0];h--;)e=e.lastChild;p.merge(k,e.childNodes);e=g.firstChild;e.textContent=""}else k.push(b.createTextNode(d));g.textContent="";for(n=0;d=k[n++];)if(!f||-1===p.inArray(d,f))if(a=p.contains(d.ownerDocument,d),e=x(g.appendChild(d),
"script"),a&&w(e),c)for(h=0;d=e[h++];)db.test(d.type||"")&&c.push(d);return g},cleanData:function(a){for(var b,c,f,d,e=p.event.special,h=0;void 0!==(c=a[h]);h++){if(p.acceptData(c)&&(d=c[P.expando])&&(b=P.cache[d])){if(b.events)for(f in b.events)e[f]?p.event.remove(c,f):p.removeEvent(c,f,b.handle);P.cache[d]&&delete P.cache[d]}delete aa.cache[c[aa.expando]]}}});p.fn.extend({text:function(a){return va(this,function(a){return void 0===a?p.text(this):this.empty().each(function(){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||l(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=l(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,
this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,f=a?p.filter(a,this):this,d=0;null!=(c=f[d]);d++)b||1!==c.nodeType||p.cleanData(x(c)),c.parentNode&&(b&&p.contains(c.ownerDocument,c)&&w(x(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(p.cleanData(x(a,!1)),a.textContent="");return this},clone:function(a,
b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return p.clone(this,a,b)})},html:function(a){return va(this,function(a){var b=this[0]||{},c=0,f=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!kb.test(a)&&!ga[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ha,"<$1></$2>");try{for(;c<f;c++)b=this[c]||{},1===b.nodeType&&(p.cleanData(x(b,!1)),b.innerHTML=a);b=0}catch(d){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=
arguments[0];this.domManip(arguments,function(b){a=this.parentNode;p.cleanData(x(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=ba.apply([],a);var c,f,d,e,h=0,g=this.length,k=this,n=g-1,r=a[0],l=p.isFunction(r);if(l||1<g&&"string"===typeof r&&!ca.checkClone&&za.test(r))return this.each(function(c){var f=k.eq(c);l&&(a[0]=r.call(this,c,f.html()));f.domManip(a,b)});if(g&&(c=p.buildFragment(a,
this[0].ownerDocument,!1,this),f=c.firstChild,1===c.childNodes.length&&(c=f),f)){f=p.map(x(c,"script"),s);for(d=f.length;h<g;h++)e=c,h!==n&&(e=p.clone(e,!0,!0),d&&p.merge(f,x(e,"script"))),b.call(this[h],e,h);if(d)for(c=f[f.length-1].ownerDocument,p.map(f,u),h=0;h<d;h++)e=f[h],db.test(e.type||"")&&!P.access(e,"globalEval")&&p.contains(c,e)&&(e.src?p._evalUrl&&p._evalUrl(e.src):p.globalEval(e.textContent.replace(pa,"")))}return this}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",
insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(a){for(var c=[],f=p(a),d=f.length-1,e=0;e<=d;e++)a=e===d?this:this.clone(!0),p(f[e])[b](a),ja.apply(c,a.get());return this.pushStack(c)}});var ma,ia={},Wa=/^margin/,wa=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),Ka=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
h.innerHTML="";d.appendChild(e);var g=a.getComputedStyle(h,null);c="1%"!==g.top;f="4px"===g.width;d.removeChild(e)}var c,f,d=Y.documentElement,e=Y.createElement("div"),h=Y.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===h.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(h),a.getComputedStyle&&p.extend(ca,{pixelPosition:function(){b();
return c},boxSizingReliable:function(){null==f&&b();return f},reliableMarginRight:function(){var b;b=h.appendChild(Y.createElement("div"));b.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";b.style.marginRight=b.style.width="0";h.style.width="1px";d.appendChild(e);b=!parseFloat(a.getComputedStyle(b,null).marginRight);d.removeChild(e);return b}}))})();p.swap=function(a,b,c,f){var d,e={};for(d in b)e[d]=
a.style[d],a.style[d]=b[d];c=c.apply(a,f||[]);for(d in b)a.style[d]=e[d];return c};var qa=/^(none|table(?!-c[ea]).+)/,hb=new RegExp("^("+Aa+")(.*)$","i"),lb=new RegExp("^([+-])=("+Aa+")","i"),Ua={position:"absolute",visibility:"hidden",display:"block"},eb={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,f){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,e,h,g=p.camelCase(b),k=a.style;b=p.cssProps[g]||(p.cssProps[g]=E(k,g));h=p.cssHooks[b]||p.cssHooks[g];if(void 0!==c)e=typeof c,"string"===e&&(d=lb.exec(c))&&(c=(d[1]+1)*d[2]+parseFloat(p.css(a,b)),e="number"),null!=c&&c===c&&("number"!==e||p.cssNumber[g]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(k[b]="inherit"),
h&&"set"in h&&void 0===(c=h.set(a,c,f))||(k[b]=c));else return h&&"get"in h&&void 0!==(d=h.get(a,!1,f))?d:k[b]}},css:function(a,b,c,f){var d,e;e=p.camelCase(b);b=p.cssProps[e]||(p.cssProps[e]=E(a.style,e));(e=p.cssHooks[b]||p.cssHooks[e])&&"get"in e&&(d=e.get(a,!0,c));void 0===d&&(d=A(a,b,f));"normal"===d&&b in eb&&(d=eb[b]);return""===c||c?(a=parseFloat(d),!0===c||p.isNumeric(a)?a||0:d):d}});p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,f){if(c)return qa.test(p.css(a,"display"))&&
0===a.offsetWidth?p.swap(a,Ua,function(){return H(a,b,f)}):H(a,b,f)},set:function(a,c,f){var d=f&&Ka(a);return D(a,c,f?B(a,b,f,"border-box"===p.css(a,"boxSizing",!1,d),d):0)}}});p.cssHooks.marginRight=F(ca.reliableMarginRight,function(a,b){if(b)return p.swap(a,{display:"inline-block"},A,[a,"marginRight"])});p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var f=0,d={};for(c="string"===typeof c?c.split(" "):[c];4>f;f++)d[a+sa[f]+b]=c[f]||c[f-2]||c[0];return d}};
Wa.test(a)||(p.cssHooks[a+b].set=D)});p.fn.extend({css:function(a,b){return va(this,function(a,b,c){var f,d={},e=0;if(p.isArray(b)){c=Ka(a);for(f=b.length;e<f;e++)d[b[e]]=p.css(a,b[e],!1,c);return d}return void 0!==c?p.style(a,b,c):p.css(a,b)},a,b,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){v(this)?p(this).show():p(this).hide()})}});p.Tween=G;G.prototype={constructor:G,
init:function(a,b,c,f,d,e){this.elem=a;this.prop=c;this.easing=d||"swing";this.options=b;this.start=this.now=this.cur();this.end=f;this.unit=e||(p.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];this.pos=this.options.duration?b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,
this.now,this);c&&c.set?c.set(this):G.propHooks._default.set(this);return this}};G.prototype.init.prototype=G.prototype;G.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=p.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(p.fx.step[a.prop])p.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};G.propHooks.scrollTop=
G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};p.fx=G.prototype.init;p.fx.step={};var ta,fb,Ea=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),Cb=/queueHooks$/,Ba=[function(a,b,c){var f,d,e,h,g,k,n=this,r={},l=a.style,q=a.nodeType&&v(a),s=P.get(a,"fxshow");c.queue||(h=p._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,g=h.empty.fire,
h.empty.fire=function(){h.unqueued||g()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--;p.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],k=p.css(a,"display"),d="none"===k?P.get(a,"olddisplay")||C(a.nodeName):k,"inline"===d&&"none"===p.css(a,"float")&&(l.display="inline-block"));c.overflow&&(l.overflow="hidden",n.always(function(){l.overflow=c.overflow[0];l.overflowX=c.overflow[1];l.overflowY=
c.overflow[2]}));for(f in b)if(d=b[f],Ea.exec(d)){delete b[f];e=e||"toggle"===d;if(d===(q?"hide":"show"))if("show"===d&&s&&void 0!==s[f])q=!0;else continue;r[f]=s&&s[f]||p.style(a,f)}else k=void 0;if(p.isEmptyObject(r))"inline"===("none"===k?C(a.nodeName):k)&&(l.display=k);else for(f in s?"hidden"in s&&(q=s.hidden):s=P.access(a,"fxshow",{}),e&&(s.hidden=!q),q?p(a).show():n.done(function(){p(a).hide()}),n.done(function(){var b;P.remove(a,"fxshow");for(b in r)p.style(a,b,r[b])}),r)b=K(q?s[f]:0,f,n),
f in s||(s[f]=b.start,q&&(b.end=b.start,b.start="width"===f||"height"===f?1:0))}],Ya={"*":[function(a,b){var c=this.createTween(a,b),f=c.cur(),d=qb.exec(b),e=d&&d[3]||(p.cssNumber[a]?"":"px"),h=(p.cssNumber[a]||"px"!==e&&+f)&&qb.exec(p.css(c.elem,a)),g=1,k=20;if(h&&h[3]!==e){e=e||h[3];d=d||[];h=+f||1;do g=g||".5",h/=g,p.style(c.elem,a,h+e);while(g!==(g=c.cur()/f)&&1!==g&&--k)}d&&(h=c.start=+h||+f||0,c.unit=e,c.end=d[1]?h+(d[1]+1)*d[2]:+d[2]);return c}]};p.Animation=p.extend(O,{tweener:function(a,
b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,f=0,d=a.length;f<d;f++)c=a[f],Ya[c]=Ya[c]||[],Ya[c].unshift(b)},prefilter:function(a,b){b?Ba.unshift(a):Ba.push(a)}});p.speed=function(a,b,c){var f=a&&"object"===typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};f.duration=p.fx.off?0:"number"===typeof f.duration?f.duration:f.duration in p.fx.speeds?p.fx.speeds[f.duration]:p.fx.speeds._default;if(null==f.queue||!0===f.queue)f.queue=
"fx";f.old=f.complete;f.complete=function(){p.isFunction(f.old)&&f.old.call(this);f.queue&&p.dequeue(this,f.queue)};return f};p.fn.extend({fadeTo:function(a,b,c,f){return this.filter(v).css("opacity",0).show().end().animate({opacity:b},a,c,f)},animate:function(a,b,c,f){var d=p.isEmptyObject(a),e=p.speed(b,c,f);b=function(){var b=O(this,p.extend({},a),e);(d||P.get(this,"finish"))&&b.stop(!0)};b.finish=b;return d||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var f=function(a){var b=
a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,d=null!=a&&a+"queueHooks",e=p.timers,h=P.get(this);if(d)h[d]&&h[d].stop&&f(h[d]);else for(d in h)h[d]&&h[d].stop&&Cb.test(d)&&f(h[d]);for(d=e.length;d--;)e[d].elem!==this||null!=a&&e[d].queue!==a||(e[d].anim.stop(c),b=!1,e.splice(d,1));!b&&c||p.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=P.get(this),f=c[a+"queue"];
b=c[a+"queueHooks"];var d=p.timers,e=f?f.length:0;c.finish=!0;p.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=d.length;b--;)d[b].elem===this&&d[b].queue===a&&(d[b].anim.stop(!0),d.splice(b,1));for(b=0;b<e;b++)f[b]&&f[b].finish&&f[b].finish.call(this);delete c.finish})}});p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(a,f,d){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,f,d)}});p.each({slideDown:N("show"),slideUp:N("hide"),
slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,f){return this.animate(b,a,c,f)}});p.timers=[];p.fx.tick=function(){var a,b=0,c=p.timers;for(ta=p.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||p.fx.stop();ta=void 0};p.fx.timer=function(a){p.timers.push(a);a()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){fb||(fb=setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){clearInterval(fb);
fb=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(a,b){a=p.fx?p.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var f=setTimeout(b,a);c.stop=function(){clearTimeout(f)}})};(function(){var a=Y.createElement("input"),b=Y.createElement("select"),c=b.appendChild(Y.createElement("option"));a.type="checkbox";ca.checkOn=""!==a.value;ca.optSelected=c.selected;b.disabled=!0;ca.optDisabled=!c.disabled;a=Y.createElement("input");a.value="t";a.type="radio";ca.radioValue="t"===
a.value})();var rb,$a=p.expr.attrHandle;p.fn.extend({attr:function(a,b){return va(this,p.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})}});p.extend({attr:function(a,b,c){var f,d,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if("undefined"===typeof a.getAttribute)return p.prop(a,b,c);1===e&&p.isXMLDoc(a)||(b=b.toLowerCase(),f=p.attrHooks[b]||(p.expr.match.bool.test(b)?rb:void 0));if(void 0!==c)if(null===c)p.removeAttr(a,b);else{if(f&&"set"in f&&void 0!==
(d=f.set(a,c,b)))return d;a.setAttribute(b,c+"");return c}else{if(f&&"get"in f&&null!==(d=f.get(a,b)))return d;d=p.find.attr(a,b);return null==d?void 0:d}}},removeAttr:function(a,b){var c,f,d=0,e=b&&b.match(ua);if(e&&1===a.nodeType)for(;c=e[d++];)f=p.propFix[c]||c,p.expr.match.bool.test(c)&&(a[f]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});rb={set:function(a,
b,c){!1===b?p.removeAttr(a,c):a.setAttribute(c,c);return c}};p.each(p.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||p.find.attr;$a[b]=function(a,b,f){var d,e;f||(e=$a[b],$a[b]=d,d=null!=c(a,b,f)?b.toLowerCase():null,$a[b]=e);return d}});var Db=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(a,b){return va(this,p.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[p.propFix[a]||a]})}});p.extend({propFix:{"for":"htmlFor","class":"className"},
prop:function(a,b,c){var f,d,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!p.isXMLDoc(a))b=p.propFix[b]||b,d=p.propHooks[b];return void 0!==c?d&&"set"in d&&void 0!==(f=d.set(a,c,b))?f:a[b]=c:d&&"get"in d&&null!==(f=d.get(a,b))?f:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Db.test(a.nodeName)||a.href?a.tabIndex:-1}}}});ca.optSelected||(p.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});var mb=/[\t\r\n\f]/g;p.fn.extend({addClass:function(a){var b,c,f,d,e;b="string"===typeof a&&a;var h=0,g=this.length;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<g;h++)if(c=this[h],f=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(mb," "):" ")){for(e=0;d=b[e++];)0>f.indexOf(" "+d+" ")&&(f+=d+" ");f=p.trim(f);c.className!==f&&(c.className=f)}return this},
removeClass:function(a){var b,c,f,d,e;b=0===arguments.length||"string"===typeof a&&a;var h=0,g=this.length;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(ua)||[];h<g;h++)if(c=this[h],f=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(mb," "):"")){for(e=0;d=b[e++];)for(;0<=f.indexOf(" "+d+" ");)f=f.replace(" "+d+" "," ");f=a?p.trim(f):"";c.className!==f&&(c.className=f)}return this},toggleClass:function(a,b){var c=
typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,f=0,d=p(this),e=a.match(ua)||[];b=e[f++];)d.hasClass(b)?d.removeClass(b):d.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&P.set(this,"__className__",this.className),this.className=this.className||!1===a?"":P.get(this,"__className__")||""})},hasClass:function(a){a=
" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(mb," ").indexOf(a))return!0;return!1}});var Eb=/\r/g;p.fn.extend({val:function(a){var b,c,f,d=this[0];if(arguments.length)return f=p.isFunction(a),this.each(function(c){1===this.nodeType&&(c=f?a.call(this,c,p(this).val()):a,null==c?c="":"number"===typeof c?c+="":p.isArray(c)&&(c=p.map(c,function(a){return null==a?"":a+""})),b=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],b&&
"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(d){if((b=p.valHooks[d.type]||p.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(Eb,""):null==c?"":c}}});p.extend({valHooks:{option:{get:function(a){var b=p.find.attr(a,"value");return null!=b?b:p.trim(p.text(a))}},select:{get:function(a){for(var b,c=a.options,f=a.selectedIndex,d=(a="select-one"===a.type||0>f)?null:[],e=a?f+1:c.length,h=0>f?e:a?f:0;h<e;h++)if(b=
c[h],!(!b.selected&&h!==f||(ca.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&p.nodeName(b.parentNode,"optgroup"))){b=p(b).val();if(a)return b;d.push(b)}return d},set:function(a,b){for(var c,f,d=a.options,e=p.makeArray(b),h=d.length;h--;)if(f=d[h],f.selected=0<=p.inArray(f.value,e))c=!0;c||(a.selectedIndex=-1);return e}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(a,b){if(p.isArray(b))return a.checked=0<=p.inArray(p(a).val(),b)}};ca.checkOn||
(p.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});p.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,
b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,f){return this.on(b,a,c,f)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var nb=p.now(),ob=/\?/;p.parseJSON=function(a){return JSON.parse(a+"")};p.parseXML=function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(f){b=void 0}b&&!b.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+
a);return b};var Pa,Ja,Fb=/#.*$/,sb=/([?&])_=[^&]*/,Gb=/^(.*?):[ \t]*([^\r\n]*)$/mg,Hb=/^(?:GET|HEAD)$/,Ib=/^\/\//,tb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ub={},ib={},vb="*/".concat("*");try{Ja=location.href}catch(Pb){Ja=Y.createElement("a"),Ja.href="",Ja=Ja.href}Pa=tb.exec(Ja.toLowerCase())||[];p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ja,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Pa[1]),global:!0,processData:!0,async:!0,
contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?X(X(a,p.ajaxSettings),b):X(p.ajaxSettings,
a)},ajaxPrefilter:L(ub),ajaxTransport:L(ib),ajax:function(a,b){function c(a,b,h,k){var r,x,w,v;v=b;if(2!==z){z=2;g&&clearTimeout(g);f=void 0;e=k||"";y.readyState=0<a?4:0;k=200<=a&&300>a||304===a;if(h){w=l;for(var F=y,E,ma,C,ia,D=w.contents,I=w.dataTypes;"*"===I[0];)I.shift(),void 0===E&&(E=w.mimeType||F.getResponseHeader("Content-Type"));if(E)for(ma in D)if(D[ma]&&D[ma].test(E)){I.unshift(ma);break}if(I[0]in h)C=I[0];else{for(ma in h){if(!I[0]||w.converters[ma+" "+I[0]]){C=ma;break}ia||(ia=ma)}C=
C||ia}C?(C!==I[0]&&I.unshift(C),w=h[C]):w=void 0}a:{h=l;E=w;ma=y;C=k;var ga,B,V,F={},D=h.dataTypes.slice();if(D[1])for(B in h.converters)F[B.toLowerCase()]=h.converters[B];for(ia=D.shift();ia;)if(h.responseFields[ia]&&(ma[h.responseFields[ia]]=E),!V&&C&&h.dataFilter&&(E=h.dataFilter(E,h.dataType)),V=ia,ia=D.shift())if("*"===ia)ia=V;else if("*"!==V&&V!==ia){B=F[V+" "+ia]||F["* "+ia];if(!B)for(ga in F)if(w=ga.split(" "),w[1]===ia&&(B=F[V+" "+w[0]]||F["* "+w[0]])){!0===B?B=F[ga]:!0!==F[ga]&&(ia=w[0],
D.unshift(w[1]));break}if(!0!==B)if(B&&h["throws"])E=B(E);else try{E=B(E)}catch(K){w={state:"parsererror",error:B?K:"No conversion from "+V+" to "+ia};break a}}w={state:"success",data:E}}if(k)l.ifModified&&((v=y.getResponseHeader("Last-Modified"))&&(p.lastModified[d]=v),(v=y.getResponseHeader("etag"))&&(p.etag[d]=v)),204===a||"HEAD"===l.type?v="nocontent":304===a?v="notmodified":(v=w.state,r=w.data,x=w.error,k=!x);else if(x=v,a||!v)v="error",0>a&&(a=0);y.status=a;y.statusText=(b||v)+"";k?u.resolveWith(q,
[r,v,y]):u.rejectWith(q,[y,v,x]);y.statusCode(A);A=void 0;n&&s.trigger(k?"ajaxSuccess":"ajaxError",[y,l,k?r:x]);pa.fireWith(q,[y,v]);n&&(s.trigger("ajaxComplete",[y,l]),--p.active||p.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var f,d,e,h,g,k,n,r,l=p.ajaxSetup({},b),q=l.context||l,s=l.context&&(q.nodeType||q.jquery)?p(q):p.event,u=p.Deferred(),pa=p.Callbacks("once memory"),A=l.statusCode||{},x={},w={},z=0,v="canceled",y={readyState:0,getResponseHeader:function(a){var b;
if(2===z){if(!h)for(h={};b=Gb.exec(e);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===z?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();z||(a=w[c]=w[c]||a,x[a]=b);return this},overrideMimeType:function(a){z||(l.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>z)for(b in a)A[b]=[A[b],a[b]];else y.always(a[y.status]);return this},abort:function(a){a=a||v;f&&f.abort(a);c(0,a);return this}};u.promise(y).complete=
pa.add;y.success=y.done;y.error=y.fail;l.url=((a||l.url||Ja)+"").replace(Fb,"").replace(Ib,Pa[1]+"//");l.type=b.method||b.type||l.method||l.type;l.dataTypes=p.trim(l.dataType||"*").toLowerCase().match(ua)||[""];null==l.crossDomain&&(k=tb.exec(l.url.toLowerCase()),l.crossDomain=!(!k||k[1]===Pa[1]&&k[2]===Pa[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(Pa[3]||("http:"===Pa[1]?"80":"443"))));l.data&&l.processData&&"string"!==typeof l.data&&(l.data=p.param(l.data,l.traditional));T(ub,l,b,y);if(2===z)return y;
(n=l.global)&&0===p.active++&&p.event.trigger("ajaxStart");l.type=l.type.toUpperCase();l.hasContent=!Hb.test(l.type);d=l.url;l.hasContent||(l.data&&(d=l.url+=(ob.test(d)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=sb.test(d)?d.replace(sb,"$1_="+nb++):d+(ob.test(d)?"&":"?")+"_="+nb++));l.ifModified&&(p.lastModified[d]&&y.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&y.setRequestHeader("If-None-Match",p.etag[d]));(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&
y.setRequestHeader("Content-Type",l.contentType);y.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+vb+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)y.setRequestHeader(r,l.headers[r]);if(l.beforeSend&&(!1===l.beforeSend.call(q,y,l)||2===z))return y.abort();v="abort";for(r in{success:1,error:1,complete:1})y[r](l[r]);if(f=T(ib,l,b,y)){y.readyState=1;n&&s.trigger("ajaxSend",[y,l]);l.async&&0<l.timeout&&(g=setTimeout(function(){y.abort("timeout")},
l.timeout));try{z=1,f.send(x,c)}catch(F){if(2>z)c(-1,F);else throw F;}}else c(-1,"No Transport");return y},getJSON:function(a,b,c){return p.get(a,b,c,"json")},getScript:function(a,b){return p.get(a,void 0,b,"script")}});p.each(["get","post"],function(a,b){p[b]=function(a,c,f,d){p.isFunction(c)&&(d=d||f,f=c,c=void 0);return p.ajax({url:a,type:b,dataType:d,data:c,success:f})}});p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,
a)}});p._evalUrl=function(a){return p.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(a){var b;if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});this[0]&&(b=p(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}});p.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)};var Jb=/%20/g,Ab=/\[\]$/,wb=
/\r?\n/g,Kb=/^(?:submit|button|image|reset|file)$/i,Lb=/^(?:input|select|textarea|keygen)/i;p.param=function(a,b){var c,f=[],d=function(a,b){b=p.isFunction(b)?b():null==b?"":b;f[f.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){d(this.name,this.value)});else for(c in a)W(c,a[c],b,d);return f.join("&").replace(Jb,"+")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var a=p.prop(this,"elements");return a?p.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!p(this).is(":disabled")&&Lb.test(this.nodeName)&&!Kb.test(a)&&(this.checked||!cb.test(a))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a){return{name:b.name,value:a.replace(wb,"\r\n")}}):{name:b.name,value:c.replace(wb,"\r\n")}}).get()}});p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};
var ra=0,S={},Mb={0:200,1223:204},ab=p.ajaxSettings.xhr();if(a.ActiveXObject)p(a).on("unload",function(){for(var a in S)S[a]()});ca.cors=!!ab&&"withCredentials"in ab;ca.ajax=ab=!!ab;p.ajaxTransport(function(a){var b;if(ca.cors||ab&&!a.crossDomain)return{send:function(c,f){var d,e=a.xhr(),h=++ra;e.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(d in a.xhrFields)e[d]=a.xhrFields[d];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||
(c["X-Requested-With"]="XMLHttpRequest");for(d in c)e.setRequestHeader(d,c[d]);b=function(a){return function(){b&&(delete S[h],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?f(e.status,e.statusText):f(Mb[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,e.getAllResponseHeaders()))}};e.onload=b();e.onerror=b("error");b=S[h]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(g){if(b)throw g;}},abort:function(){b&&b()}}});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){p.globalEval(a);return a}}});p.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});p.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(f,d){b=p("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&d("error"===a.type?404:200,a.type)});Y.head.appendChild(b[0])},abort:function(){c&&c()}}}});
var xb=[],pb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=xb.pop()||p.expando+"_"+nb++;this[a]=!0;return a}});p.ajaxPrefilter("json jsonp",function(b,c,f){var d,e,h,g=!1!==b.jsonp&&(pb.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&pb.test(b.data)&&"data");if(g||"jsonp"===b.dataTypes[0])return d=b.jsonpCallback=p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g?b[g]=b[g].replace(pb,"$1"+
d):!1!==b.jsonp&&(b.url+=(ob.test(b.url)?"&":"?")+b.jsonp+"="+d),b.converters["script json"]=function(){h||p.error(d+" was not called");return h[0]},b.dataTypes[0]="json",e=a[d],a[d]=function(){h=arguments},f.always(function(){a[d]=e;b[d]&&(b.jsonpCallback=c.jsonpCallback,xb.push(d));h&&p.isFunction(e)&&e(h[0]);h=e=void 0}),"script"});p.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||Y;var f=Ga.exec(a);c=!c&&[];if(f)return[b.createElement(f[1])];
f=p.buildFragment([a],b,c);c&&c.length&&p(c).remove();return p.merge([],f.childNodes)};var yb=p.fn.load;p.fn.load=function(a,b,c){if("string"!==typeof a&&yb)return yb.apply(this,arguments);var f,d,e,h=this,g=a.indexOf(" ");0<=g&&(f=p.trim(a.slice(g)),a=a.slice(0,g));p.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(d="POST");0<h.length&&p.ajax({url:a,type:d,dataType:"html",data:b}).done(function(a){e=arguments;h.html(f?p("<div>").append(p.parseHTML(a)).find(f):a)}).complete(c&&function(a,b){h.each(c,
e||[a.responseText,b,a])});return this};p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length};var zb=a.document.documentElement;p.offset={setOffset:function(a,b,c){var f,d,e,h=p.css(a,"position"),g=p(a),k={};"static"===h&&(a.style.position="relative");e=g.offset();d=p.css(a,"top");f=p.css(a,"left");("absolute"===h||"fixed"===h)&&-1<(d+f).indexOf("auto")?(f=g.position(),d=f.top,f=f.left):(d=parseFloat(d)||0,f=parseFloat(f)||0);p.isFunction(b)&&(b=b.call(a,
c,e));null!=b.top&&(k.top=b.top-e.top+d);null!=b.left&&(k.left=b.left-e.left+f);"using"in b?b.using.call(a,k):g.css(k)}};p.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){p.offset.setOffset(this,a,b)});var b,c;c=this[0];var f={top:0,left:0},d=c&&c.ownerDocument;if(d){b=d.documentElement;if(!p.contains(b,c))return f;"undefined"!==typeof c.getBoundingClientRect&&(f=c.getBoundingClientRect());c=U(d);return{top:f.top+c.pageYOffset-b.clientTop,left:f.left+
c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],f={top:0,left:0};"fixed"===p.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),p.nodeName(a[0],"html")||(f=a.offset()),f.top+=p.css(a[0],"borderTopWidth",!0),f.left+=p.css(a[0],"borderLeftWidth",!0));return{top:b.top-f.top-p.css(c,"marginTop",!0),left:b.left-f.left-p.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||zb;a&&!p.nodeName(a,
"html")&&"static"===p.css(a,"position");)a=a.offsetParent;return a||zb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var f="pageYOffset"===c;p.fn[b]=function(d){return va(this,function(b,d,e){var h=U(b);if(void 0===e)return h?h[c]:b[d];h?h.scrollTo(f?a.pageXOffset:e,f?e:a.pageYOffset):b[d]=e},b,d,arguments.length,null)}});p.each(["top","left"],function(a,b){p.cssHooks[b]=F(ca.pixelPosition,function(a,c){if(c)return c=A(a,b),wa.test(c)?p(a).position()[b]+"px":c})});p.each({Height:"height",
Width:"width"},function(a,b){p.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,f){p.fn[f]=function(f,d){var e=arguments.length&&(c||"boolean"!==typeof f),h=c||(!0===f||!0===d?"margin":"border");return va(this,function(b,c,f){return p.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===f?p.css(b,c,h):p.style(b,c,f,h)},b,e?f:void 0,e,null)}})});p.fn.size=
function(){return this.length};p.fn.andSelf=p.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return p});var Nb=a.jQuery,Ob=a.$;p.noConflict=function(b){a.$===p&&(a.$=Ob);b&&a.jQuery===p&&(a.jQuery=Nb);return p};"undefined"===typeof b&&(a.jQuery=a.$=p);return p});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(b,d){var e,g;e=b.nodeName.toLowerCase();if("area"===e){e=b.parentNode;g=e.name;if(!b.href||!g||"map"!==e.nodeName.toLowerCase())return!1;e=a("img[usemap='#"+g+"']")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,
"visibility")}).length}a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,
"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||0<=d)&&b(c,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,f,h){a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0;f&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);h&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],g=c.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?q["inner"+c].call(this):this.each(function(){a(this).css(g,d(this,b)+"px")})};a.fn["outer"+c]=function(b,f){return"number"!==typeof b?q["outer"+c].call(this,b):this.each(function(){a(this).css(g,d(this,b,!0,f)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?
b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"===typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&0!==c)return c;b=b.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c,
d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,g;for(g=0;null!=(e=c[g]);g++)try{(d=a._data(e,"events"))&&d.remove&&a(e).triggerHandler("remove")}catch(q){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var e,g,q,l,s={},u=b.split(".")[0];b=b.split(".")[1];e=u+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=
function(b){return!!a.data(b,e)};a[u]=a[u]||{};g=a[u][b];q=a[u][b]=function(a,b){if(!this._createWidget)return new q(a,b);arguments.length&&this._createWidget(a,b)};a.extend(q,g,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});l=new c;l.options=a.widget.extend({},l.options);a.each(d,function(b,f){a.isFunction(f)?s[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,
e;this._super=a;this._superApply=d;e=f.apply(this,arguments);this._super=b;this._superApply=c;return e}}():s[b]=f});q.prototype=a.widget.extend(l,{widgetEventPrefix:g?l.widgetEventPrefix||b:b},s,{constructor:q,namespace:u,widgetName:b,widgetFullName:e});g?(a.each(g._childConstructors,function(b,c){var f=c.prototype;a.widget(f.namespace+"."+f.widgetName,q,c._proto)}),delete g._childConstructors):c._childConstructors.push(q);a.widget.bridge(b,q);return q};a.widget.extend=function(b){for(var c=e.call(arguments,
1),d=0,g=c.length,r,q;d<g;d++)for(r in c[d])q=c[d][r],c[d].hasOwnProperty(r)&&void 0!==q&&(a.isPlainObject(q)?b[r]=a.isPlainObject(b[r])?a.widget.extend({},b[r],q):a.widget.extend({},q):b[r]=q);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(g){var r="string"===typeof g,q=e.call(arguments,1),l=this;g=!r&&q.length?a.widget.extend.apply(null,[g].concat(q)):g;r?this.each(function(){var c,e=a.data(this,d);if("instance"===g)return l=e,!1;if(!e)return a.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+g+"'");if(!a.isFunction(e[g])||"_"===g.charAt(0))return a.error("no such method '"+g+"' for "+b+" widget instance");c=e[g].apply(e,q);if(c!==e&&void 0!==c)return l=c&&c.jquery?l.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,d);b?(b.option(g||{}),b._init&&b._init()):a.data(this,d,new c(g,this))});return l}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||
this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d=b,e,g,q;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(d={},e=b.split("."),b=e.shift(),e.length){g=d[b]=a.widget.extend({},this.options[b]);for(q=0;q<e.length-1;q++)g[e[q]]=g[e[q]]||{},g=g[e[q]];b=e.pop();if(1===arguments.length)return void 0===g[b]?null:g[b];g[b]=c}else{if(1===arguments.length)return void 0===
this.options[b]?null:this.options[b];d[b]=c}this._setOptions(d);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_on:function(b,c,d){var e,g=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget());a.each(d,function(d,k){function s(){if(b||!0!==g.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof k?g[k]:k).apply(g,arguments)}"string"!==typeof k&&(s.guid=k.guid=k.guid||s.guid||a.guid++);var u=d.match(/^([\w:-]*)\s*(.*)$/),w=u[1]+g.eventNamespace;(u=u[2])?e.delegate(u,w,s):c.bind(w,s)})},_off:function(a,b){b=(b||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,
{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,g=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&!1===g.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",
hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,g){"string"===typeof e&&(e={effect:e});var q,l=e?!0===e||"number"===typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});q=!a.isEmptyObject(e);e.complete=g;e.delay&&d.delay(e.delay);if(q&&a.effects&&a.effects.effect[l])d[b](e);else if(l!==b&&d[l])d[l](e.duration,e.easing,g);else d.queue(function(c){a(this)[b]();g&&g.call(d[0]);c()})}});var g=!1;a(document).mouseup(function(){g=!1});a.widget("ui.mouse",{version:"1.11.1",
options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!g){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));
if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);
b.preventDefault();return g=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return g=!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(e){}if(this.helper||d.disabled||0<a(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=
this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b,!1);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);
this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b,!0);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(!1===
this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=this,d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&
this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);this.element.focus();return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?
a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo);b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in
b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&
(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0});return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?
0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var b,c,d;b=this.options;c=this.document[0];this.relativeContainer=null;if(b.containment)if("window"===b.containment)this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
else if("document"===b.containment)this.containment=[0,0,a(c).width()-this.helperProportions.width-this.margins.left,(a(c).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(b.containment.constructor===Array)this.containment=b.containment;else{if("parent"===b.containment&&(b.containment=this.helper[0].parentNode),c=a(b.containment),d=c[0])b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),
10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],
this.relativeContainer=c}else this.containment=null},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,
b){var c,d,e,g=this.options,l=this._isRootNode(this.scrollParent[0]);e=a.pageX;d=a.pageY;l&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});b&&(this.containment&&(this.relativeContainer?(c=this.relativeContainer.offset(),c=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(e=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<
c[1]&&(d=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(e=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(d=c[3]+this.offset.click.top)),g.grid&&(d=g.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,d=c?d-this.offset.click.top>=c[1]||d-this.offset.click.top>c[3]?d:d-this.offset.click.top>=c[1]?d-g.grid[1]:d+g.grid[1]:d,e=g.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,
e=c?e-this.offset.click.left>=c[0]||e-this.offset.click.left>c[2]?e:e-this.offset.click.left>=c[0]?e-g.grid[0]:e+g.grid[0]:e),"y"===g.axis&&(e=this.originalPageX),"x"===g.axis&&(d=this.originalPageY));return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:
this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d,this],!0);"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,
position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,g=a.extend({},c,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,g))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,
function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var g=
!1,q=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(g=!0,a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!==q&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(q.instance.element[0],this.instance.element[0])&&
(g=!1);return g}));g?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,
this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),
this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",
{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,
c,d){c=d.options;var e=!1,g=d.scrollParentNotHidden[0],q=d.document[0];g!==q&&"HTML"!==g.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<c.scrollSensitivity?g.scrollTop=e=g.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(g.scrollTop=e=g.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<c.scrollSensitivity?g.scrollLeft=e=g.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(g.scrollLeft=
e=g.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(q).scrollTop()<c.scrollSensitivity?e=a(q).scrollTop(a(q).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(q).scrollTop())<c.scrollSensitivity&&(e=a(q).scrollTop(a(q).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(q).scrollLeft()<c.scrollSensitivity?e=a(q).scrollLeft(a(q).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(q).scrollLeft())<c.scrollSensitivity&&(e=a(q).scrollLeft(a(q).scrollLeft()+c.scrollSpeed))));
!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,g,q,l,s,u,w,y,x,z,C=d.options,A=C.snapTolerance,F=c.offset.left,E=
F+d.helperProportions.width,D=c.offset.top,B=D+d.helperProportions.height;for(x=d.snapElements.length-1;0<=x;x--)s=d.snapElements[x].left,u=s+d.snapElements[x].width,w=d.snapElements[x].top,y=w+d.snapElements[x].height,E<s-A||F>u+A||B<w-A||D>y+A||!a.contains(d.snapElements[x].item.ownerDocument,d.snapElements[x].item)?(d.snapElements[x].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[x].item})),d.snapElements[x].snapping=!1):
("inner"!==C.snapMode&&(e=Math.abs(w-B)<=A,g=Math.abs(y-D)<=A,q=Math.abs(s-E)<=A,l=Math.abs(u-F)<=A,e&&(c.position.top=d._convertPositionTo("relative",{top:w-d.helperProportions.height,left:0}).top-d.margins.top),g&&(c.position.top=d._convertPositionTo("relative",{top:y,left:0}).top-d.margins.top),q&&(c.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left),l&&(c.position.left=d._convertPositionTo("relative",{top:0,left:u}).left-d.margins.left)),
z=e||g||q||l,"outer"!==C.snapMode&&(e=Math.abs(w-D)<=A,g=Math.abs(y-B)<=A,q=Math.abs(s-F)<=A,l=Math.abs(u-E)<=A,e&&(c.position.top=d._convertPositionTo("relative",{top:w,left:0}).top-d.margins.top),g&&(c.position.top=d._convertPositionTo("relative",{top:y-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left),l&&(c.position.left=d._convertPositionTo("relative",{top:0,left:u-d.helperProportions.width}).left-d.margins.left)),
!d.snapElements[x].snapping&&(e||g||q||l||z)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[x].item})),d.snapElements[x].snapping=e||g||q||l||z)}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e;b=a.makeArray(a(d.options.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(e=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",e+
b)}),this.css("zIndex",e+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.effects={effect:{}};(function(a,b){function c(a,b,d){var f=w[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=f.floor?~~a:parseFloat(a);return isNaN(a)?b.def:f.mod?(a+f.mod)%f.mod:0>a?0:f.max<a?f.max:a}function d(b){var c=
s(),e=c._rgba=[];b=b.toLowerCase();C(l,function(a,d){var f,g=d.re.exec(b);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[u[g].cache]=f[u[g].cache],e=c._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&a.extend(e,z.transparent),c):z[b]}function e(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],
a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],s=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},w={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},y=s.support={},x=a("<p>")[0],z,C=a.each;x.style.cssText="background-color:rgba(1,1,1,.5)";
y.rgba=-1<x.style.backgroundColor.indexOf("rgba");C(u,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});s.fn=a.extend(s.prototype,{parse:function(e,g,l,r){if(e===b)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=a(e).css(g),g=b;var q=this,x=a.type(e),w=this._rgba=[];g!==b&&(e=[e,g,l,r],x="array");if("string"===x)return this.parse(d(e)||z._default);if("array"===x)return C(u.rgba.props,function(a,b){w[b.idx]=c(e[b.idx],b)}),this;if("object"===x)return e instanceof
s?C(u,function(a,b){e[b.cache]&&(q[b.cache]=e[b.cache].slice())}):C(u,function(b,d){var g=d.cache;C(d.props,function(a,b){if(!q[g]&&d.to){if("alpha"===a||null==e[a])return;q[g]=d.to(q._rgba)}q[g][b.idx]=c(e[a],b,!0)});q[g]&&0>a.inArray(null,q[g].slice(0,3))&&(q[g][3]=1,d.from&&(q._rgba=d.from(q[g])))}),this},is:function(a){var b=s(a),c=!0,d=this;C(u,function(a,f){var e,g=b[f.cache];g&&(e=d[f.cache]||f.to&&f.to(d._rgba)||[],C(f.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===e[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;C(u,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var d=s(a),f=d._space(),e=u[f],g=0===this.alpha()?s("transparent"):this,h=g[e.cache]||e.to(g._rgba),n=h.slice(),d=d[e.cache];C(e.props,function(a,f){var e=f.idx,g=h[e],l=d[e],r=w[f.type]||{};null!==l&&(null===g?n[e]=l:(r.mod&&(l-g>r.mod/2?g+=r.mod:g-l>r.mod/2&&(g-=r.mod)),n[e]=c((l-g)*b+g,f)))});return this[f](n)},blend:function(b){if(1===this._rgba[3])return this;
var c=this._rgba.slice(),d=c.pop(),e=s(b)._rgba;return s(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),b="rgb(");return b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),b="hsl(");return b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();
b&&c.push(~~(255*d));return"#"+a.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});s.fn.parse.prototype=s.fn;u.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var f=Math.max(b,c,d),e=Math.min(b,c,d),g=f-e,h=f+e,k=.5*h,h=0===g?0:.5>=k?g/h:g/(2-h);return[Math.round(e===f?0:b===f?60*(c-d)/g+360:c===f?60*(d-b)/
g+120:60*(b-c)/g+240)%360,h,k,null==a?1:a]};u.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-1/3)),a]};C(u,function(d,e){var n=e.props,l=e.cache,r=e.to,u=e.from;s.fn[d]=function(d){r&&!this[l]&&(this[l]=r(this._rgba));if(d===b)return this[l].slice();var e,g=a.type(d),q="array"===g||"object"===g?d:arguments,
x=this[l].slice();C(n,function(a,b){var d=q["object"===g?a:b.idx];null==d&&(d=x[b.idx]);x[b.idx]=c(d,b)});return u?(e=s(u(x)),e[l]=x,e):s(x)};C(n,function(b,c){s.fn[b]||(s.fn[b]=function(e){var h=a.type(e),k="alpha"===b?this._hsla?"hsla":"rgba":d,n=this[k](),l=n[c.idx];if("undefined"===h)return l;"function"===h&&(e=e.call(this,l),h=a.type(e));if(null==e&&c.empty)return this;"string"===h&&(h=g.exec(e))&&(e=l+parseFloat(h[2])*("+"===h[1]?1:-1));n[c.idx]=e;return this[k](n)})})});s.hook=function(b){b=
b.split(" ");C(b,function(b,c){a.cssHooks[c]={set:function(b,e){var g,h="";if("transparent"!==e&&("string"!==a.type(e)||(g=d(e)))){e=s(g||e);if(!y.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(k){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(l){}}};a.fx.step[c]=function(b){b.colorInit||(b.start=s(b.elem,c),b.end=s(b.end),b.colorInit=!0);a.cssHooks[c].set(b.elem,
b.start.transition(b.end,b.pos))}})};s.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};C(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};z=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",
purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(a);(function(){function b(c){var d,e=c.ownerDocument.defaultView?c.ownerDocument.defaultView.getComputedStyle(c,null):c.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(c=e.length;c--;)d=e[c],"string"===typeof e[d]&&(f[a.camelCase(d)]=e[d]);else for(d in e)"string"===typeof e[d]&&(f[d]=e[d]);return f}var c=["add","remove","toggle"],d={border:1,borderBottom:1,
borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)a.style(b.elem,c,b.end),b.setAttr=!0}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(e,g,q,l){var s=a.speed(g,q,l);return this.queue(function(){var g=
a(this),l=g.attr("class")||"",r,q=s.children?g.find("*").addBack():g,q=q.map(function(){return{el:a(this),start:b(this)}});r=function(){a.each(c,function(a,b){if(e[b])g[b+"Class"](e[b])})};r();q=q.map(function(){this.end=b(this.el[0]);var c=this.start,e=this.end,g={},h,n;for(h in e)n=e[h],c[h]===n||d[h]||!a.fx.step[h]&&isNaN(parseFloat(n))||(g[h]=n);this.diff=g;return this});g.attr("class",l);q=q.map(function(){var b=this,c=a.Deferred(),d=a.extend({},s,{queue:!1,complete:function(){c.resolve(b)}});
this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,q.get()).done(function(){r();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});s.complete.call(g[0])})})};a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return 1<arguments.length?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,
arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"===typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})})();(function(){function b(c,d,e,f){a.isPlainObject(c)&&(d=c,c=c.effect);c={effect:c};null==d&&(d={});a.isFunction(d)&&(f=d,
e=null,d={});if("number"===typeof d||a.fx.speeds[d])f=e,e=d,d={};a.isFunction(e)&&(f=e,e=null);d&&a.extend(c,d);e=e||d.duration;c.duration=a.fx.off?0:"number"===typeof e?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default;c.complete=f||d.complete;return c}function c(b){return!b||"number"===typeof b||a.fx.speeds[b]||"string"===typeof b&&!a.effects.effect[b]||a.isFunction(b)||"object"===typeof b&&!b.effect?!0:!1}a.extend(a.effects,{version:"1.11.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==
b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;d<b.length;d++)null!==b[d]&&(c=a.data("ui-effects-"+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/
b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}b.wrap(d);(b[0]===f||a.contains(b[0],f))&&a(f).focus();d=b.parent();"static"===b.css("position")?
(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());
return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var f=b.cssUnit(c);0<f[0]&&(e[c]=f[0]*d+f[1])});return e}});a.fn.extend({effect:function(){function c(b){function e(){a.isFunction(g)&&g.call(f[0]);a.isFunction(b)&&b()}var f=a(this),g=d.complete,k=d.mode;(f.is(":hidden")?"hide"===k:"show"===k)?(f[k](),e()):h.call(f[0],d,e)}var d=b.apply(this,arguments),e=d.mode,g=d.queue,h=a.effects.effect[d.effect];return a.fx.off||!h?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&
d.complete.call(this)}):!1===g?this.each(c):this.queue(g||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="show";return this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"===typeof d)return a.apply(this,arguments);var e=b.apply(this,
arguments);e.mode="toggle";return this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*
(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})();a.effects.effect.blind=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),g=a.effects.setMode(d,
b.mode||"hide"),q=b.direction||"up",l=/up|down|vertical/.test(q),s=l?"height":"width",u=l?"top":"left",q=/up|left|vertical|horizontal/.test(q),w={},y="show"===g,x,z,C;d.parent().is(".ui-effects-wrapper")?a.effects.save(d.parent(),e):a.effects.save(d,e);d.show();x=a.effects.createWrapper(d).css({overflow:"hidden"});z=x[s]();C=parseFloat(x.css(u))||0;w[s]=y?z:0;q||(d.css(l?"bottom":"right",0).css(l?"top":"left","auto").css({position:"absolute"}),w[u]=y?C:z+C);y&&(x.css(s,0),q||x.css(u,C+z));x.animate(w,
{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===g&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.bounce=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),g=a.effects.setMode(d,b.mode||"effect"),q="hide"===g,l="show"===g,s=b.direction||"up",g=b.distance,u=b.times||5,w=2*u+(l||q?1:0),y=b.duration/w,x=b.easing,z="up"===s||"down"===s?"top":"left",s="up"===s||"left"===s,C,A,F=d.queue(),E=F.length;(l||
q)&&e.push("opacity");a.effects.save(d,e);d.show();a.effects.createWrapper(d);g||(g=d["top"===z?"outerHeight":"outerWidth"]()/3);l&&(A={opacity:1},A[z]=0,d.css("opacity",0).css(z,s?2*-g:2*g).animate(A,y,x));q&&(g/=Math.pow(2,u-1));A={};for(l=A[z]=0;l<u;l++)C={},C[z]=(s?"-=":"+=")+g,d.animate(C,y,x).animate(A,y,x),g=q?2*g:g/2;q&&(C={opacity:0},C[z]=(s?"-=":"+=")+g,d.animate(C,y,x));d.queue(function(){q&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<E&&F.splice.apply(F,[1,0].concat(F.splice(E,
w+1)));d.dequeue()};a.effects.effect.clip=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),g="show"===a.effects.setMode(d,b.mode||"hide"),q="vertical"===(b.direction||"vertical"),l=q?"height":"width",q=q?"top":"left",s={},u,w;a.effects.save(d,e);d.show();u=a.effects.createWrapper(d).css({overflow:"hidden"});u="IMG"===d[0].tagName?u:d;w=u[l]();g&&(u.css(l,0),u.css(q,w/2));s[l]=g?w:0;s[q]=g?0:w/2;u.animate(s,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||
d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.drop=function(b,c){var d=a(this),e="position top bottom left right opacity height width".split(" "),g=a.effects.setMode(d,b.mode||"hide"),q="show"===g,l=b.direction||"left",s="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l?"pos":"neg",u={opacity:q?1:0},w;a.effects.save(d,e);d.show();a.effects.createWrapper(d);w=b.distance||d["top"===s?"outerHeight":"outerWidth"](!0)/2;q&&d.css("opacity",0).css(s,"pos"===l?
-w:w);u[s]=(q?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+w;d.animate(u,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.explode=function(b,c){function d(){y.push(this);y.length===e*g&&(q.css({visibility:"visible"}),a(y).remove(),l||q.hide(),c())}var e=b.pieces?Math.round(Math.sqrt(b.pieces)):3,g=e,q=a(this),l="show"===a.effects.setMode(q,b.mode||"hide"),s=q.show().css("visibility","hidden").offset(),
u=Math.ceil(q.outerWidth()/g),w=Math.ceil(q.outerHeight()/e),y=[],x,z,C,A,F,E;for(x=0;x<e;x++)for(A=s.top+x*w,E=x-(e-1)/2,z=0;z<g;z++)C=s.left+z*u,F=z-(g-1)/2,q.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-z*u,top:-x*w}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:u,height:w,left:C+(l?F*u:0),top:A+(l?E*w:0),opacity:l?0:1}).animate({left:C+(l?0:F*u),top:A+(l?0:E*w),opacity:l?1:0},b.duration||500,b.easing,
d)};a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})};a.effects.effect.fold=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),g=a.effects.setMode(d,b.mode||"hide"),q="show"===g,l="hide"===g,g=b.size||15,s=/([0-9]+)%/.exec(g),u=!!b.horizFirst,w=q!==u,y=w?["width","height"]:["height","width"],x=b.duration/2,z,C={},A={};a.effects.save(d,e);d.show();
z=a.effects.createWrapper(d).css({overflow:"hidden"});w=w?[z.width(),z.height()]:[z.height(),z.width()];s&&(g=parseInt(s[1],10)/100*w[l?0:1]);q&&z.css(u?{height:0,width:g}:{height:g,width:0});C[y[0]]=q?w[0]:g;A[y[1]]=q?w[1]:0;z.animate(C,x,b.easing).animate(A,x,b.easing,function(){l&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()})};a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],g=a.effects.setMode(d,b.mode||"show"),q={backgroundColor:d.css("backgroundColor")};
"hide"===g&&(q.opacity=0);a.effects.save(d,e);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(q,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&d.hide();a.effects.restore(d,e);c()}})};a.effects.effect.size=function(b,c){var d,e,g,q,l,s,u=a(this),w="position top bottom left right width height overflow opacity".split(" ");l="position top bottom left right overflow opacity".split(" ");var y=["width","height","overflow"],x=["fontSize"],z=
["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],A=a.effects.setMode(u,b.mode||"effect"),F=b.restore||"effect"!==A,E=b.scale||"both";s=b.origin||["middle","center"];var D=u.css("position"),B=F?w:l,H={height:0,width:0,outerHeight:0,outerWidth:0};"show"===A&&u.show();l={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()};"toggle"===b.mode&&"show"===A?(u.from=b.to||H,u.to=b.from||
l):(u.from=b.from||("show"===A?H:l),u.to=b.to||("hide"===A?H:l));g=u.from.height/l.height;q=u.from.width/l.width;d=u.to.height/l.height;e=u.to.width/l.width;if("box"===E||"both"===E)g!==d&&(B=B.concat(z),u.from=a.effects.setTransition(u,z,g,u.from),u.to=a.effects.setTransition(u,z,d,u.to)),q!==e&&(B=B.concat(C),u.from=a.effects.setTransition(u,C,q,u.from),u.to=a.effects.setTransition(u,C,e,u.to));"content"!==E&&"both"!==E||g===d||(B=B.concat(x).concat(y),u.from=a.effects.setTransition(u,x,g,u.from),
u.to=a.effects.setTransition(u,x,d,u.to));a.effects.save(u,B);u.show();a.effects.createWrapper(u);u.css("overflow","hidden").css(u.from);s&&(s=a.effects.getBaseline(s,l),u.from.top=(l.outerHeight-u.outerHeight())*s.y,u.from.left=(l.outerWidth-u.outerWidth())*s.x,u.to.top=(l.outerHeight-u.to.outerHeight)*s.y,u.to.left=(l.outerWidth-u.to.outerWidth)*s.x);u.css(u.from);if("content"===E||"both"===E)z=z.concat(["marginTop","marginBottom"]).concat(x),C=C.concat(["marginLeft","marginRight"]),y=w.concat(z).concat(C),
u.find("*[width]").each(function(){var c=a(this),h=c.height(),l=c.width(),s=c.outerHeight(),u=c.outerWidth();F&&a.effects.save(c,y);c.from={height:h*g,width:l*q,outerHeight:s*g,outerWidth:u*q};c.to={height:h*d,width:l*e,outerHeight:h*d,outerWidth:l*e};g!==d&&(c.from=a.effects.setTransition(c,z,g,c.from),c.to=a.effects.setTransition(c,z,d,c.to));q!==e&&(c.from=a.effects.setTransition(c,C,q,c.from),c.to=a.effects.setTransition(c,C,e,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){F&&
a.effects.restore(c,y)})});u.animate(u.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===u.to.opacity&&u.css("opacity",u.from.opacity);"hide"===A&&u.hide();a.effects.restore(u,B);F||("static"===D?u.css({position:"relative",top:u.to.top,left:u.to.left}):a.each(["top","left"],function(a,b){u.css(b,function(b,c){var d=parseInt(c,10),e=a?u.to.left:u.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(u);c()}})};a.effects.effect.scale=function(b,c){var d=a(this),
e=a.extend(!0,{},b),g=a.effects.setMode(d,b.mode||"effect"),q=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===g?0:100),l=b.direction||"both",s=b.origin,u={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},w="horizontal"!==l?q/100:1,q="vertical"!==l?q/100:1;e.effect="size";e.queue=!1;e.complete=c;"effect"!==g&&(e.origin=s||["middle","center"],e.restore=!0);e.from=b.from||("show"===g?{height:0,width:0,outerHeight:0,outerWidth:0}:u);e.to={height:u.height*
w,width:u.width*q,outerHeight:u.outerHeight*w,outerWidth:u.outerWidth*q};e.fade&&("show"===g&&(e.from.opacity=0,e.to.opacity=1),"hide"===g&&(e.from.opacity=1,e.to.opacity=0));d.effect(e)};a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),g="hide"===e,q=parseInt(b.percent,10)||150,l=q/100,s={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:g?q:100,from:g?
s:{height:s.height*l,width:s.width*l,outerHeight:s.outerHeight*l,outerWidth:s.outerWidth*l}});d.effect(b)};a.effects.effect.pulsate=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"show"),g="show"===e,q="hide"===e,e=2*(b.times||5)+(g||"hide"===e?1:0),l=b.duration/e,s=0,u=d.queue(),w=u.length;if(g||!d.is(":visible"))d.css("opacity",0).show(),s=1;for(g=1;g<e;g++)d.animate({opacity:s},l,b.easing),s=1-s;d.animate({opacity:s},l,b.easing);d.queue(function(){q&&d.hide();c()});1<w&&u.splice.apply(u,
[1,0].concat(u.splice(w,e+1)));d.dequeue()};a.effects.effect.shake=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),g=a.effects.setMode(d,b.mode||"effect"),q=b.direction||"left",l=b.distance||20,s=b.times||3,u=2*s+1,w=Math.round(b.duration/u),y="up"===q||"down"===q?"top":"left",x="up"===q||"left"===q,q={},z={},C={},A=d.queue(),F=A.length;a.effects.save(d,e);d.show();a.effects.createWrapper(d);q[y]=(x?"-=":"+=")+l;z[y]=(x?"+=":"-=")+2*l;C[y]=(x?"-=":"+=")+2*l;
d.animate(q,w,b.easing);for(l=1;l<s;l++)d.animate(z,w,b.easing).animate(C,w,b.easing);d.animate(z,w,b.easing).animate(q,w/2,b.easing).queue(function(){"hide"===g&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<F&&A.splice.apply(A,[1,0].concat(A.splice(F,u+1)));d.dequeue()};a.effects.effect.slide=function(b,c){var d=a(this),e="position top bottom left right width height".split(" "),g=a.effects.setMode(d,b.mode||"show"),q="show"===g,l=b.direction||"left",s="up"===l||"down"===l?"top":
"left",l="up"===l||"left"===l,u,w={};a.effects.save(d,e);d.show();u=b.distance||d["top"===s?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(d).css({overflow:"hidden"});q&&d.css(s,l?isNaN(u)?"-"+u:-u:u);w[s]=(q?l?"+=":"-=":l?"-=":"+=")+u;d.animate(w,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),g="fixed"===e.css("position"),q=a("body"),
l=g?q.scrollTop():0,q=g?q.scrollLeft():0,s=e.offset(),e={top:s.top-l,left:s.left-q,height:e.innerHeight(),width:e.innerWidth()},s=d.offset(),u=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:s.top-l,left:s.left-q,height:d.innerHeight(),width:d.innerWidth(),position:g?"fixed":"absolute"}).animate(e,b.duration,b.easing,function(){u.remove();c()})}});Flory.baseEntity=function(){this.id=Flory.baseEntity.entityIDCount++;this.name=""};
Flory.baseEntity.entityIDCount=0;Flory.baseEntity.prototype.constructor=Flory.baseEntity;Flory.Renderable=function(){Flory.baseEntity.call(this);this.mesh={};this.geometry={};this.material={};this.updateGeometry=!0};Flory.Renderable.prototype=Object.create(Flory.baseEntity.prototype);Flory.Renderable.prototype.constructor=Flory.Renderable;Flory.Entity=function(){Flory.baseEntity.call(this);this.data={}};Flory.Entity.prototype=Object.create(Flory.baseEntity.prototype);
Flory.Entity.prototype.constructor=Flory.Entity;Flory._CoreEnvironment=function(){this.entities=[];this.renderer={};this.data={};this.visualization=!1;this.data.rendererType=Flory._CoreEnvironment.RendererType.Default};
Flory._CoreEnvironment.prototype={constuctor:Flory._CoreEnvironment,add:function(a){if(this.id==a.id)console.log("Flory: Can't add an entity to itself.");else{for(var b=0,c=this.entities.length;b<c;b++)if(this.entities[b].id===a.id){console.log("Flory : Can't add an entity twice to the same environment.");return}this.addedEntity(this.entities[this.entities.push(a)-1])}return this},remove:function(a){for(var b=0,c=this.entities.length;b<c;b++)this.entities[b].id===a.id&&(this.entities.splice(b),this.removedEntity(a,
a.id,b));return this},removedEntity:function(a,b,c){},addedEntity:function(){},update:function(a){},enableVisualization:function(a,b){this.data.rendererType==Flory._CoreEnvironment.RendererType.Default||""==this.data.rendererType?this.renderer=new Flory.Renderer(a,b):this.data.rendererType==Flory._CoreEnvironment.RendererType.PointCloud&&(this.renderer=new Flory.PointCloudRenderer(a,b));this.visualization=!0;void 0!=b&&(void 0!=b.clearColor&&this.renderer.setClearColor(b.clearColor),void 0!=b.grid&&
1==b.grid&&this.addGrid(b.gridSize,b.gridSteps,b.gridPlane,b.gridPosition),void 0!=b.axis&&1==b.axis&&this.addAxis(b.axisSize,b.axisPosition));this.setUpVisualization(b);return this},addGrid:function(a,b,c,d){size=100;steps=10;plane="xy";position=void 0;void 0!=a&&(size=a);void 0!=b&&(steps=b);void 0!=c&&(plane=c);void 0!=d&&(position=new Flory.Vector3(d));this.renderer.createHelperGrid(size,steps,plane,position)},addAxis:function(a,b){position=void 0;size=2;void 0!=a&&(size=a);void 0!=b&&(position=
new Flory.Vector3(b));this.renderer.createAxis(size,position)},disableVisualization:function(){this.renderer={};var a=this.renderer.renderer.domElement;a.parentElement.removeChild(a);this.visualization=!1;this.disabledVisualization();return this},setUpVisualization:function(){},disabledVisualization:function(){},resetEnvironment:function(){},advance:function(a){this.update(a);if(this.visualization){a=0;for(var b=this.entities.length;a<b;a++)this.entities[a]instanceof Flory.Renderable&&this.renderer.updateRenderablePosition(this.entities[a]);
this.render()}return this},render:function(){this.renderer.render();return this}};Flory._CoreEnvironment.RendererType={Default:"default",PointCloud:"pointCloud"};Flory.Environment=function(){Flory._CoreEnvironment.call(this)};Flory.Environment.prototype=Object.create(Flory._CoreEnvironment.prototype);Flory.Environment.prototype.constructor=Flory.Environment;
Flory.Environment.prototype.removedEntity=function(a,b,c){this.visualization&&a instanceof Flory.Renderable&&this.renderer.removeRenderable(b);return this};Flory.Environment.prototype.addedEntity=function(a){this.visualization&&a instanceof Flory.Renderable&&this.renderer.addRenderable(a);return this};Flory.Environment.prototype.update=function(a){};
Flory.Environment.prototype.setUpVisualization=function(a){this.data.visualization_data=a;for(a=0;a<this.entities.length;a++)this.entities[a]instanceof Flory.Renderable&&this.renderer.addRenderable(this.entities[a])};Flory.Environment.prototype.disabledVisualization=function(){for(var a=0;a<this.entities.length;a++)this.entities[a]instanceof Flory.Renderable&&this.renderer.removeRenderable(this.entity[a]);this.data.visualization_data=void 0;delete this.data.visualization_data};
Flory.Environment.prototype.resetEnvironment=function(){};Flory.baseField=function(){Flory.Entity.call(this);this.data.field=[];this.field=this.data.field};Flory.baseField.prototype=Object.create(Flory.Entity.prototype);Flory.baseField.prototype.constructor=Flory.baseField;Flory.baseField.prototype.getForce=function(a,b){for(var c=0,d=0,e=0,g=this.field.length;e<g;e++){var f=this.field[e].position.distanceToSq(a);f<=c&&(d=e,c=f)}return this.field[d].vector};
Flory.baseField.prototype.scale=function(a){for(var b=0,c=this.field.length;b<c;b++)this.field.vector.scale(a)};Flory.ContinuousField=function(a){Flory.baseField.call(this,[]);this.scaler=1;this.field_function=void 0!==a?a:function(){}};Flory.ContinuousField.prototype=Object.create(Flory.baseField.prototype);Flory.ContinuousField.prototype.constructor=Flory.ContinuousField;Flory.ContinuousField.prototype.getForce=function(a){return this.field_function(a).mult(this.scaler)};
Flory.ContinuousField.prototype.scale=function(a){"number"===typeof a&&(this.scaler=a);return this};Flory.ContinuousField.prototype.clone=function(){return new Flory.ContinuousField(this.field_function)};
Flory.Field=function(a){Flory.baseField.call(this);for(var b=0,c=a.length;b<c;b++){this.field[b]={};if(void 0==a[b].position)this.field[b].position=new Flory.Vector(a[b][0]);else if(a[b].position instanceof Array)this.field[b].position=new Flory.Vector(a[b].position);else if(a[b].position instanceof baseVector)this.field[b].position=a[b].position instanceof Flory.Vector2?new Flory.Vector([a[b].position.x,a[b].position.y]):a[b].position instanceof Flory.Vector3?new Flory.Vector([a[b].position.x,a[b].position.y,
a[b].position.z]):a[b].position.clone();else{console.log("Flory: data.position is not an Array or a descendant of Flory.baseVector");break}if(void 0==a[b].vector)this.field[b].vector=new Flory.Vector(a[b][1]);else if(a[b].vector instanceof Array)this.field[b].vector=new Flory.Vector(a[b].vector);else if(a[b].vector instanceof baseVector)this.field[b].vector=a[b].vector instanceof Flory.Vector2?new Flory.Vector([a[b].vector.x,a[b].vector.y]):a[b].vector instanceof Flory.Vector3?new Flory.Vector([a[b].vector.x,
a[b].vector.y,a[b].vector.z]):a[b].vector.clone();else{console.log("Flory: data.vector is not an Array or a descendant of Flory.baseVector");break}}};Flory.Field.prototype=Object.create(Flory.baseField.prototype);Flory.Field.prototype.constructor=Flory.Field;Flory.Field.prototype.clone=function(){return new Flory.Field(this.field)};
Flory.Field2D=function(a){Flory.baseField.call(this);for(var b=0,c=a.length;b<c;b++){this.field[b]={};if(void 0==a[b].position)this.field[b].position=new Flory.Vector2(a[b][0][0],a[b][0][1]);else if(a[b].position instanceof Array)this.field[b].position=new Flory.Vector2(a[b].position[0],a[b].position[1]);else if(a[b].position instanceof baseVector)this.field[b].position=a[b].position instanceof Flory.Vector3?new Flory.Vector2([a[b].position.x,a[b].position.y]):a[b].position instanceof Flory.Vector?
new Flory.Vector2([a[b].position.components[0],a[b].position.components[1]]):a[b].position.clone();else{console.log("Flory: data.position is not an Array or a descendant of Flory.baseVector");break}if(void 0==a[b].vector)this.field[b].vector=new Flory.Vector2(a[b][1][0],a[b][1][1]);else if(a[b].vector instanceof Array)this.field[b].vector=new Flory.Vector2(a[b].vector[0],a[b].vector[1]);else if(a[b].vector instanceof baseVector)this.field[b].vector=a[b].vector instanceof Flory.Vector3?new Flory.Vector2([a[b].vector.x,
a[b].vector.y]):a[b].vector instanceof Flory.Vector?new Flory.Vector2([a[b].vector.components[0],a[b].vector.components[1]]):a[b].vector.clone();else{console.log("Flory: data.vector is not an Array or a descendant of Flory.baseVector");break}}};Flory.Field2D.prototype=Object.create(Flory.baseField.prototype);Flory.Field2D.prototype.constructor=Flory.Field2D;Flory.Field2D.prototype.clone=function(){return new Flory.Field2D(this.data)};
Flory.Field3D=function(a){Flory.baseField.call(this);for(var b=0,c=a.length;b<c;b++){this.field[b]={};if(void 0==a[b].position)this.field[b].position=new Flory.Vector3(a[b][0][0],a[b][0][1],a[b][0][2]);else if(a[b].position instanceof Array)this.field[b].position=new Flory.Vector3(a[b].position[0],a[b].position[1],a[b].position[2]);else if(a[b].position instanceof baseVector)this.field[b].position=a[b].position instanceof Flory.Vector2?new Flory.Vector3([a[b].position.x,a[b].position.y,0]):a[b].position instanceof
Flory.Vector?new Flory.Vector3([a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]]):a[b].position.clone();else{console.log("Flory: data.position is not an Array or a descendant of Flory.baseVector");break}if(void 0==a[b].vector)this.field[b].vector=new Flory.Vector3(a[b][1][0],a[b][1][1],a[b][1][2]);else if(a[b].vector instanceof Array)this.field[b].vector=new Flory.Vector3(a[b].vector[0],a[b].vector[1],a[b].vector[2]);else if(void 0!=a[b].vector.x||void 0!=a[b].vector.y||
void 0!=a[b].postiion.z)this.field[b].vector=a[b].vector.clone();else if(a[b].vector instanceof baseVector)this.field[b].vector=a[b].vector instanceof Flory.Vector2?new Flory.Vezctor3([a[b].vector.x,a[b].vector.y,0]):a[b].vector instanceof Flory.Vector?new Flory.Vector3([a[b].vector.components[0],a[b].vector.components[1],a[b].vector.components[2]]):a[b].vector.clone();else{console.log("Flory: data.vector is not an Array or a descendant of Flory.baseVector");break}}};Flory.Field3D.prototype=Object.create(Flory.baseField.prototype);
Flory.Field3D.prototype.constructor=Flory.Field3D;Flory.Field3D.prototype.clone=function(){return new Flory.Field3D(this.field)};Flory.ContinuousField=function(a){Flory.baseField.call(this,[]);this.scaler=1;this.field_function=void 0!==a?a:function(){}};Flory.ContinuousField.prototype=Object.create(Flory.baseField.prototype);Flory.ContinuousField.prototype.constructor=Flory.ContinuousField;Flory.ContinuousField.prototype.getForce=function(a){return this.field_function(a).mult(this.scaler)};
Flory.ContinuousField.prototype.scale=function(a){"number"===typeof a&&(this.scaler=a);return this};Flory.ContinuousField.prototype.clone=function(){return new Flory.ContinuousField(this.field_function)};Flory.DataProcessor=function(){};
Flory.DataProcessor.prototype={constructor:Flory.DataProcessor,mean:function(a){for(var b=0,c=0,d=a.length,c=0;c<d;c++)b+=a[c];return b/d},meanSquare:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c]*a[c];return b/d},meanSquareMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].position.length(),b+=e*e;return b/d},meanSquareMonomerVelocity:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].velocity.length(),b+=e*e;return b/d},meanSquareMonomerAcceleration:function(a){for(var b=
0,c=0,d=a.length,e=0;c<d;c++)e=a[c].acceleration.length(),b+=e*e;return b/d},meanMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].position.length();return b/d},meanMonomerPosition:function(a){for(var b=0,c=a.length,d=new Flory.Vector;b<c;b++)d.add(a[b].position);return d.mult(1/c)},meanMonomerSpeed:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].velocity.length();return b/d},meanMonomerVelocity:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].velocity);
return b.mult(1/d)},meanMonomerAcceleration:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].acceleration);return b.mult(1/d)}};var THREE={REVISION:"73"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);
void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),f=self.setTimeout(function(){b(c+
g)},g);a=c+g;return f});void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})}();void 0===self.performance&&(self.performance={});void 0===self.performance.now&&function(){var a=Date.now();self.performance.now=function(){return Date.now()-a}}();void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});
void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;
THREE.DoubleSide=2;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;
THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.NeverDepth=0;THREE.AlwaysDepth=1;THREE.LessDepth=2;THREE.LessEqualDepth=3;THREE.EqualDepth=4;THREE.GreaterEqualDepth=5;THREE.GreaterDepth=6;THREE.NotEqualDepth=7;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=300;THREE.CubeReflectionMapping=301;
THREE.CubeRefractionMapping=302;THREE.EquirectangularReflectionMapping=303;THREE.EquirectangularRefractionMapping=304;THREE.SphericalReflectionMapping=305;THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;
THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1025;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGBEFormat=THREE.RGBAFormat;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;
THREE.RGBA_S3TC_DXT5_Format=2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;THREE.LoopOnce=2200;THREE.LoopRepeat=2201;THREE.LoopPingPong=2202;
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};THREE.Color=function(a){return 3===arguments.length?this.fromArray(arguments):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,
c,d){b=THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/
360,e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,g)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=THREE.ColorKeywords[a],
void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,c);return this},convertGammaToLinear:function(){var a=
this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),g=Math.min(b,c,d),f,h=(g+e)/2;if(g===e)g=f=0;else{var k=e-g,g=.5>=h?k/(e+g):
k/(2-e-g);switch(e){case b:f=(c-d)/k+(c<d?6:0);break;case c:f=(d-b)/k+2;break;case d:f=(b-c)/k+4}f/=6}a.h=f;a.s=g;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=
a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=
this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),g=Math.sin(a._x/2),f=Math.sin(a._y/2),h=Math.sin(a._z/2),k=a.order;"XYZ"===k?(this._x=g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"YXZ"===
k?(this._x=g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"ZXY"===k?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"ZYX"===k?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"YZX"===k?(this._x=g*d*e+c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e-g*f*h):"XZY"===k&&(this._x=g*d*e-c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e+g*f*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],f=b[9],h=b[2],k=b[6],b=b[10],n=c+g+b;0<n?(c=.5/Math.sqrt(n+1),this._w=.25/c,this._x=(k-f)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(k-f)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(f+k)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(f+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,f=b._x,h=b._y,k=b._z,n=b._w;this._x=c*n+g*f+d*k-e*h;this._y=d*n+g*h+e*f-c*k;this._z=e*n+g*k+c*h-d*f;this._w=g*n-c*f-d*h-e*k;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,f=g*a._w+c*a._x+d*a._y+e*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a);if(1<=f)return this._w=g,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(f),k=Math.sqrt(1-f*f);if(.001>Math.abs(k))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;f=Math.sin((1-b)*h)/k;h=
Math.sin(b*h)/k;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=d*f+this._y*h;this._z=e*f+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+
a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},
sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;
this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,
b)}}(),clampLength:function(a,b){var c=this.length();this.multiplyScalar(Math.max(a,Math.min(b,c))/c);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=
-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.multiplyScalar(a/
this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=
a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,g=this.y-a.y;this.x=e*c-g*d+a.x;this.y=e*d+g*c+a.y;return this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,
b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));
return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];
return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*d-f*c,k=a*c+f*b-e*d,n=a*d+e*c-g*b,b=-e*b-g*c-f*d;this.x=h*a+b*-e+k*-f-n*-g;this.y=k*a+b*-g+n*-e-h*-f;this.z=n*a+b*-f+h*-g-k*-e;return this},project:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();
return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,
this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();this.multiplyScalar(Math.max(a,Math.min(b,c))/c);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},cross:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,f=b.y,h=b.z;this.x=d*h-e*f;this.y=e*g-c*h;this.z=c*f-d*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),
projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=
this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],
a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},
addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=
a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},
divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var g=a[8],f=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var n=a[10];if(.01>Math.abs(d-f)&&.01>Math.abs(g-c)&&.01>Math.abs(k-b)){if(.1>Math.abs(d+f)&&.1>Math.abs(g+c)&&.1>Math.abs(k+b)&&.1>Math.abs(e+
h+n-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;n=(n+1)/2;d=(d+f)/4;g=(g+c)/4;k=(k+b)/4;e>h&&e>n?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=g/b):h>n?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),b=d/c,d=k/c):.01>n?(c=b=.707106781,d=0):(d=Math.sqrt(n),b=g/d,c=k/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-k)*(b-k)+(g-c)*(g-c)+(f-d)*(f-d));.001>Math.abs(a)&&(a=1);this.x=(b-k)/a;this.y=(g-c)/a;this.z=(f-d)/a;this.w=Math.acos((e+h+n-1)/2);return this},min:function(a){this.x=
Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,
d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};
THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var g=e[4],f=e[8],h=e[1],k=e[5],n=e[9],r=e[2],q=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(-n,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(q,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?
(this._y=Math.atan2(f,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-r,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(q,-1,1)),.99999>Math.abs(q)?(this._y=Math.atan2(-r,e),this._z=Math.atan2(-g,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(r,-1,1)),.99999>Math.abs(r)?(this._x=Math.atan2(q,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-g,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-n,k),this._y=Math.atan2(-r,a)):(this._x=
0,this._y=Math.atan2(f,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(q,k),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-n,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,c,d);return this}}(),setFromVector3:function(a,
b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+
3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){var e=b.geometry;if(void 0!==e)if(e instanceof THREE.Geometry)for(var g=e.vertices,e=0,f=g.length;e<f;e++)a.copy(g[e]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(e instanceof THREE.BufferGeometry&&void 0!==e.attributes.position)for(g=e.attributes.position.array,e=0,f=g.length;e<f;e+=3)a.set(g[e],g[e+1],g[e+2]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);
this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,g,f,h,k){var n=this.elements;n[0]=a;n[3]=b;n[6]=c;n[1]=d;n[4]=e;n[7]=g;n[2]=f;n[5]=h;n[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");
return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===
a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],k=a[7],a=a[8];return b*g*a-b*f*k-c*e*a+c*f*h+d*e*k-d*g*h},getInverse:function(a,
b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=
b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,g,f,h,k,n,r,q,l,s,u,w){var y=this.elements;y[0]=a;y[4]=b;y[8]=c;y[12]=d;y[1]=e;y[5]=g;y[9]=f;y[13]=h;y[2]=k;y[6]=n;y[10]=r;y[14]=q;y[3]=l;y[7]=s;y[11]=u;y[15]=w;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){var d=this.elements;a.set(d[0],d[1],d[2]);b.set(d[4],d[5],d[6]);c.set(d[8],d[9],d[10]);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements;b=b.elements;var d=1/a.set(b[0],
b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),f=Math.cos(d),d=Math.sin(d),h=Math.cos(e),
e=Math.sin(e);if("XYZ"===a.order){a=g*h;var k=g*e,n=c*h,r=c*e;b[0]=f*h;b[4]=-f*e;b[8]=d;b[1]=k+n*d;b[5]=a-r*d;b[9]=-c*f;b[2]=r-a*d;b[6]=n+k*d;b[10]=g*f}else"YXZ"===a.order?(a=f*h,k=f*e,n=d*h,r=d*e,b[0]=a+r*c,b[4]=n*c-k,b[8]=g*d,b[1]=g*e,b[5]=g*h,b[9]=-c,b[2]=k*c-n,b[6]=r+a*c,b[10]=g*f):"ZXY"===a.order?(a=f*h,k=f*e,n=d*h,r=d*e,b[0]=a-r*c,b[4]=-g*e,b[8]=n+k*c,b[1]=k+n*c,b[5]=g*h,b[9]=r-a*c,b[2]=-g*d,b[6]=c,b[10]=g*f):"ZYX"===a.order?(a=g*h,k=g*e,n=c*h,r=c*e,b[0]=f*h,b[4]=n*d-k,b[8]=a*d+r,b[1]=f*e,b[5]=
r*d+a,b[9]=k*d-n,b[2]=-d,b[6]=c*f,b[10]=g*f):"YZX"===a.order?(a=g*f,k=g*d,n=c*f,r=c*d,b[0]=f*h,b[4]=r-a*e,b[8]=n*e+k,b[1]=e,b[5]=g*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+n,b[10]=a-r*e):"XZY"===a.order&&(a=g*f,k=g*d,n=c*f,r=c*d,b[0]=f*h,b[4]=-e,b[8]=d*h,b[1]=a*e+r,b[5]=g*h,b[9]=k*e-n,b[2]=n*e-k,b[6]=c*h,b[10]=r*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,g=a.w,f=c+c,h=d+d,k=e+e;a=c*f;var n=c*h,c=c*k,r=d*h,d=d*k,e=e*k,f=g*f,h=g*h,g=g*k;b[0]=1-(r+e);b[4]=n-g;b[8]=c+h;b[1]=n+g;b[5]=1-(a+e);b[9]=d-f;b[2]=c-h;b[6]=d+f;b[10]=1-(a+r);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,g){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Vector3);void 0===c&&(c=new THREE.Vector3);
var f=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.lengthSq()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);f[0]=a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},
multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,g=c[0],f=c[4],h=c[8],k=c[12],n=c[1],r=c[5],q=c[9],l=c[13],s=c[2],u=c[6],w=c[10],y=c[14],x=c[3],z=c[7],C=c[11],c=c[15],A=d[0],F=d[4],E=d[8],D=d[12],B=d[1],H=d[5],I=d[9],G=d[13],M=d[2],N=d[6],K=d[10],Q=d[14],O=d[3],L=d[7],T=d[11],d=d[15];e[0]=g*A+f*B+h*M+k*O;e[4]=g*F+f*H+h*N+k*L;e[8]=g*E+f*I+h*K+k*T;e[12]=g*D+f*G+h*Q+k*d;e[1]=n*A+r*B+q*M+l*O;e[5]=n*F+r*H+q*N+l*L;e[9]=n*E+r*I+q*K+l*T;e[13]=n*D+r*G+q*Q+l*d;e[2]=s*A+u*B+w*M+y*
O;e[6]=s*F+u*H+w*N+y*L;e[10]=s*E+u*I+w*K+y*T;e[14]=s*D+u*G+w*Q+y*d;e[3]=x*A+z*B+C*M+c*O;e[7]=x*F+z*H+C*N+c*L;e[11]=x*E+z*I+C*K+c*T;e[15]=x*D+z*G+C*Q+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;
b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,
a.y,a.z);return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],f=a[5],h=a[9],k=a[13],n=a[2],r=a[6],q=a[10],l=a[14];return a[3]*(+e*h*r-d*k*
r-e*f*q+c*k*q+d*f*l-c*h*l)+a[7]*(+b*h*l-b*k*q+e*g*q-d*g*l+d*k*n-e*h*n)+a[11]*(+b*k*r-b*f*l-e*g*r+c*g*l+e*f*n-c*k*n)+a[15]*(-d*f*n-b*h*r+b*f*q+d*g*r-c*g*q+c*h*n)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=
c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=
this.elements,d=a.elements,e=d[0],g=d[4],f=d[8],h=d[12],k=d[1],n=d[5],r=d[9],q=d[13],l=d[2],s=d[6],u=d[10],w=d[14],y=d[3],x=d[7],z=d[11],d=d[15];c[0]=r*w*x-q*u*x+q*s*z-n*w*z-r*s*d+n*u*d;c[4]=h*u*x-f*w*x-h*s*z+g*w*z+f*s*d-g*u*d;c[8]=f*q*x-h*r*x+h*n*z-g*q*z-f*n*d+g*r*d;c[12]=h*r*s-f*q*s-h*n*u+g*q*u+f*n*w-g*r*w;c[1]=q*u*y-r*w*y-q*l*z+k*w*z+r*l*d-k*u*d;c[5]=f*w*y-h*u*y+h*l*z-e*w*z-f*l*d+e*u*d;c[9]=h*r*y-f*q*y-h*k*z+e*q*z+f*k*d-e*r*d;c[13]=f*q*l-h*r*l+h*k*u-e*q*u-f*k*w+e*r*w;c[2]=n*w*y-q*s*y+q*l*x-k*w*
x-n*l*d+k*s*d;c[6]=h*s*y-g*w*y-h*l*x+e*w*x+g*l*d-e*s*d;c[10]=g*q*y-h*n*y+h*k*x-e*q*x-g*k*d+e*n*d;c[14]=h*n*l-g*q*l-h*k*s+e*q*s+g*k*w-e*n*w;c[3]=r*s*y-n*u*y-r*l*x+k*u*x+n*l*z-k*s*z;c[7]=g*u*y-f*s*y+f*l*x-e*u*x-g*l*z+e*s*z;c[11]=f*n*y-g*r*y-f*k*x+e*r*x+g*k*z-e*n*z;c[15]=g*r*l-f*n*l+f*k*s-e*r*s-g*k*u+e*n*u;c=e*c[0]+k*c[4]+l*c[8]+y*c[12];if(0===c){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=
this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);
return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,g=a.x,f=a.y,h=a.z,k=e*g,n=e*f;this.set(k*g+c,k*f-d*h,k*h+d*f,0,k*f+d*h,n*f+c,n*h-d*g,0,k*h-d*f,n*h+d*g,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,
0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Matrix4);var g=this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),k=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(f=-f);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/f;var g=1/h,n=1/k;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=n;b.elements[9]*=n;b.elements[10]*=n;d.setFromRotationMatrix(b);e.x=f;e.y=h;e.z=k;return this}}(),makeFrustum:function(a,b,c,d,e,g){var f=this.elements;f[0]=2*e/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*e/(d-c);f[9]=(d+c)/(d-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+e)/(g-e);f[14]=-2*g*e/(g-e);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));
var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var f=this.elements,h=b-a,k=c-d,n=g-e;f[0]=2/h;f[4]=0;f[8]=0;f[12]=-((b+a)/h);f[1]=0;f[5]=2/k;f[9]=0;f[13]=-((c+d)/k);f[2]=0;f[6]=0;f[10]=-2/n;f[14]=-((g+e)/n);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,
b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),
distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,f){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),n=c.dot(this.direction),r=-c.dot(b),q=c.lengthSq(),l=Math.abs(1-k*k),s;0<l?(d=k*r-n,e=k*n-r,s=h*l,0<=d?e>=-s?e<=s?(h=1/l,d*=h,e*=h,k=d*(d+k*e+2*n)+e*(k*d+e+2*r)+q):(e=h,d=Math.max(0,-(k*e+n)),k=-d*d+e*(e+2*r)+q):(e=-h,d=Math.max(0,-(k*e+n)),
k=-d*d+e*(e+2*r)+q):e<=-s?(d=Math.max(0,-(-k*h+n)),e=0<d?-h:Math.min(Math.max(-h,-r),h),k=-d*d+e*(e+2*r)+q):e<=s?(d=0,e=Math.min(Math.max(-h,-r),h),k=e*(e+2*r)+q):(d=Math.max(0,-(k*h+n)),e=0<d?h:Math.min(Math.max(-h,-r),h),k=-d*d+e*(e+2*r)+q)):(e=0<k?-h:h,d=Math.max(0,-(k*e+n)),k=-d*d+e*(e+2*r)+q);g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);f&&f.copy(b).multiplyScalar(e).add(a);return k}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=
new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,g=b.radius*b.radius;if(e>g)return null;g=Math.sqrt(g-e);e=d-g;d+=g;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+
a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,g,f;d=1/this.direction.x;g=1/this.direction.y;f=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=g?(e=(a.min.y-h.y)*g,g*=a.max.y-h.y):(e=(a.max.y-h.y)*g,g*=a.min.y-
h.y);if(c>g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;0<=f?(e=(a.min.z-h.z)*f,f*=a.max.z-h.z):(e=(a.max.z-h.z)*f,f*=a.min.z-h.z);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,g,f,h,k){b.subVectors(g,e);c.subVectors(f,e);d.crossVectors(b,c);g=this.direction.dot(d);if(0<g){if(h)return null;h=1}else if(0>g)h=-1,
g=-g;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;f=h*this.direction.dot(b.cross(a));if(0>f||e+f>g)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/g,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,g=0,f=b.length;g<f;g++)e=Math.max(e,d.distanceToSquared(b[g]));this.radius=Math.sqrt(e);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},
empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));
return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};
THREE.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,g){var f=this.planes;f[0].copy(a);f[1].copy(b);f[2].copy(c);f[3].copy(d);f[4].copy(e);f[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],g=c[3],f=c[4],h=c[5],k=c[6],n=c[7],r=c[8],q=c[9],l=c[10],s=c[11],u=c[12],w=c[13],y=c[14],
c=c[15];b[0].setComponents(g-a,n-f,s-r,c-u).normalize();b[1].setComponents(g+a,n+f,s+r,c+u).normalize();b[2].setComponents(g+d,n+h,s+q,c+w).normalize();b[3].setComponents(g-d,n-h,s-q,c-w).normalize();b[4].setComponents(g-e,n-k,s-l,c-y).normalize();b[5].setComponents(g+e,n+k,s+l,c+y).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);
return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;
var f=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>f&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,
b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),g=this.normal.dot(e);if(0===g){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return g=
-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:d.copy(e).multiplyScalar(g).add(b.start)}}(),coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var g=e||c.getNormalMatrix(d),g=a.copy(this.normal).applyMatrix3(g),f=this.coplanarPoint(b);f.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(g,f);return this}}(),translate:function(a){this.constant-=
a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),
radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,f,h,k,n,r,q,l;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;g=Math.floor(e);f=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+
2;n=this.points[c[0]];r=this.points[c[1]];q=this.points[c[2]];l=this.points[c[3]];h=f*f;k=f*h;d.x=b(n.x,r.x,q.x,l.x,f,h,k);d.y=b(n.y,r.y,q.y,l.y,f,h,k);d.z=b(n.z,r.z,q.z,l.z,f,h,k);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),g.copy(d),k+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=k,e=b);h[h.length]=k;return{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];g=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),
h.push(k.copy(d).clone());h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,f,h){a.subVectors(f,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var k=b.dot(b);f=b.dot(c);var n=d*k-e*e;h=h||new THREE.Vector3;if(0===n)return h.set(-2,-1,-1);n=1/n;k=(k*g-e*f)*n;d=(d*f-e*g)*n;return h.set(1-k-d,d,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,
this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},
equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Channels=function(){this.mask=1};THREE.Channels.prototype={constructor:THREE.Channels,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=self.performance.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=self.performance.now(),a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;e<d;e++)c[e]=b[e];for(e=0;e<d;e++)c[e].call(this,a)}}}};
(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,g,f){if(!1!==a.visible&&(a.raycast(b,g),!0===f)){a=a.children;f=0;for(var h=a.length;f<h;f++)c(a[f],b,g,!0)}}a.Raycaster=function(b,c,g,f){this.ray=new a.Ray(b,c);this.near=g||0;this.far=f||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(a,e){var g=[];c(a,this,g,e);g.sort(b);return g},intersectObjects:function(a,e){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var f=0,h=a.length;f<h;f++)c(a[f],this,g,e);g.sort(b);return g}}})(THREE);
THREE.Object3D=function(){Flory.baseEntity.call(this);this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.channels=new THREE.Channels;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;THREE.Object3D.prototype=Object.create(Flory.baseEntity.prototype);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set renderDepth(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},
rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,
c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=
new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);
return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),
this.children.splice(b,1))},getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=
a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=
new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=
this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&(e.userData=
this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=
[];for(var g=0;g<this.children.length;g++)e.children.push(this.children[g].toJSON(a).object)}if(c){var c=b(a.geometries),g=b(a.materials),f=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<g.length&&(d.materials=g);0<f.length&&(d.textures=f);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.rotationAutoUpdate=a.rotationAutoUpdate;this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}};
THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==g?g:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
THREE.Face4=function(a,b,c,d,e,g,f){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,g,f)};THREE.BufferAttribute=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;
c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),g=new THREE.Color);b[c++]=g.r;b[c++]=g.g;b[c++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];b[c++]=g.a;b[c++]=g.b;b[c++]=
g.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),g=new THREE.Vector2);b[c++]=g.x;b[c++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),g=new THREE.Vector3);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z}return this},
copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),g=new THREE.Vector4);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z;b[c++]=g.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},
setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,
b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};
THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};
THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};THREE.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(a,b)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);
THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.copy=function(a){THREE.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBuffer=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(a){THREE.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+
2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;
return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=
this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,g=a.vertexNormals.length;e<g;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=
this.verticesNeedUpdate=!0},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);
a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d){var e=void 0!==f?[r[a].clone(),r[b].clone(),r[d].clone()]:[],g=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:
[],e=new THREE.Face3(a,b,d,e,g);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([q[a].clone(),q[b].clone(),q[d].clone()]);void 0!==n&&c.faceVertexUvs[1].push([l[a].clone(),l[b].clone(),l[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,g=e.position.array,f=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,n=void 0!==e.uv2?e.uv2.array:void 0;void 0!==n&&(this.faceVertexUvs[1]=[]);for(var r=[],q=[],l=[],
s=e=0;e<g.length;e+=3,s+=2)c.vertices.push(new THREE.Vector3(g[e],g[e+1],g[e+2])),void 0!==f&&r.push(new THREE.Vector3(f[e],f[e+1],f[e+2])),void 0!==h&&c.colors.push(new THREE.Color(h[e],h[e+1],h[e+2])),void 0!==k&&q.push(new THREE.Vector2(k[s],k[s+1])),void 0!==n&&l.push(new THREE.Vector2(n[s],n[s+1]));if(void 0!==d)if(g=a.groups,0<g.length)for(e=0;e<g.length;e++)for(var s=g[e],u=s.start,w=s.count,s=u,u=u+w;s<u;s+=3)b(d[s],d[s+1],d[s+2]);else for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=
0;e<g.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new THREE.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,
-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],g=this.vertices[e.a],f=this.vertices[e.b];a.subVectors(this.vertices[e.c],f);b.subVectors(g,f);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new THREE.Vector3;if(a){var e,g,f,h=new THREE.Vector3,
k=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],g=this.vertices[c.b],f=this.vertices[c.c],h.subVectors(f,g),k.subVectors(e,g),h.cross(k),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),
e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone())},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=
e.vertexNormals[a].clone();var g=new THREE.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var f=this.morphNormals[a].vertexNormals,h,k;c=0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),f.push(k)}f=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;
g.computeFaceNormals();g.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=f.faceNormals[c],k=f.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var a=
0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,g=this.vertices,f=a.vertices,h=this.faces,k=a.faces,n=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var r=0,q=f.length;r<q;r++){var l=f[r].clone();void 0!==b&&l.applyMatrix4(b);g.push(l)}r=0;for(q=k.length;r<q;r++){var f=k[r],s,u=f.vertexNormals,w=f.vertexColors,l=new THREE.Face3(f.a+e,f.b+e,f.c+e);l.normal.copy(f.normal);void 0!==d&&l.normal.applyMatrix3(d).normalize();b=0;for(g=u.length;b<
g;b++)s=u[b].clone(),void 0!==d&&s.applyMatrix3(d).normalize(),l.vertexNormals.push(s);l.color.copy(f.color);b=0;for(g=w.length;b<g;b++)s=w[b],l.vertexColors.push(s.clone());l.materialIndex=f.materialIndex+c;h.push(l)}r=0;for(q=a.length;r<q;r++)if(c=a[r],d=[],void 0!==c){b=0;for(g=c.length;b<g;b++)d.push(c[b].clone());n.push(d)}}},mergeMesh:function(a){!1===a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),
this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),g,f;g=0;for(f=this.vertices.length;g<f;g++)d=this.vertices[g],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[d]];a=[];g=0;for(f=this.faces.length;g<f;g++)for(e=this.faces[g],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]===e[(d+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(e=a[g],this.faces.splice(e,
1),c=0,f=this.faceVertexUvs.length;c<f;c++)this.faceVertexUvs[c].splice(e,1);g=this.vertices.length-b.length;this.vertices=b;return g},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],g,f;d&&d.length===b&&(g=[]);e&&e.length===b&&(f=[]);for(c=0;c<b;c++){var h=a[c]._id;g&&g.push(d[h]);f&&f.push(e[h])}g&&(this.faceVertexUvs[0]=g);f&&(this.faceVertexUvs[1]=
f)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==n[b])return n[b];n[b]=k.length/3;k.push(a.x,a.y,a.z);return n[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==q[b])return q[b];q[b]=r.length;r.push(a.getHex());return q[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==s[b])return s[b];s[b]=l.length/2;l.push(a.x,a.y);return s[b]}var e={metadata:{version:4.4,type:"Geometry",
generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var g=this.parameters,f;for(f in g)void 0!==g[f]&&(e[f]=g[f]);return e}g=[];for(f=0;f<this.vertices.length;f++){var h=this.vertices[f];g.push(h.x,h.y,h.z)}var h=[],k=[],n={},r=[],q={},l=[],s={};for(f=0;f<this.faces.length;f++){var u=this.faces[f],w=void 0!==this.faceVertexUvs[0][f],y=0<u.normal.length(),x=0<u.vertexNormals.length,z=1!==u.color.r||1!==u.color.g||1!==u.color.b,
C=0<u.vertexColors.length,A=0,A=a(A,0,0),A=a(A,1,!1),A=a(A,2,!1),A=a(A,3,w),A=a(A,4,y),A=a(A,5,x),A=a(A,6,z),A=a(A,7,C);h.push(A);h.push(u.a,u.b,u.c);w&&(w=this.faceVertexUvs[0][f],h.push(d(w[0]),d(w[1]),d(w[2])));y&&h.push(b(u.normal));x&&(y=u.vertexNormals,h.push(b(y[0]),b(y[1]),b(y[2])));z&&h.push(c(u.color));C&&(u=u.vertexColors,h.push(c(u[0]),c(u[1]),c(u[2])))}e.data={};e.data.vertices=g;e.data.normals=k;0<r.length&&(e.data.colors=r);0<l.length&&(e.data.uvs=[l]);e.data.faces=h;return e},clone:function(){return(new this.constructor).copy(this)},
copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;e<g;e++){for(var f=b[e],h=[],k=0,n=f.length;k<n;k++)h.push(f[k].clone());this.faceVertexUvs[c].push(h)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};
THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b,c=[],
d;a=a.faces;for(var e=0;e<a.length;e++){var g=a[e];g.materialIndex!==d&&(d=g.materialIndex,void 0!==b&&(b.count=3*e-b.start,c.push(b)),b={start:3*e,materialIndex:d})}void 0!==b&&(b.count=3*e-b.start,c.push(b));this.groups=c},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,f=a.morphTargets,h=f.length;if(0<h){for(var k=[],n=0;n<h;n++)k[n]=[];this.morphTargets.position=k}var r=a.morphNormals,q=r.length;if(0<q){for(var l=[],n=0;n<q;n++)l[n]=
[];this.morphTargets.normal=l}for(var s=a.skinIndices,u=a.skinWeights,w=s.length===c.length,y=u.length===c.length,n=0;n<b.length;n++){var x=b[n];this.vertices.push(c[x.a],c[x.b],c[x.c]);var z=x.vertexNormals;3===z.length?this.normals.push(z[0],z[1],z[2]):(z=x.normal,this.normals.push(z,z,z));z=x.vertexColors;3===z.length?this.colors.push(z[0],z[1],z[2]):(z=x.color,this.colors.push(z,z,z));!0===e&&(z=d[0][n],void 0!==z?this.uvs.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
n),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===g&&(z=d[1][n],void 0!==z?this.uvs2.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",n),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(z=0;z<h;z++){var C=f[z].vertices;k[z].push(C[x.a],C[x.b],C[x.c])}for(z=0;z<q;z++)C=r[z].vertexNormals[n],l[z].push(C.a,C.b,C.c);w&&this.skinIndices.push(s[x.a],s[x.b],s[x.c]);y&&this.skinWeights.push(u[x.a],u[x.b],
u[x.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype);
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute&&!1===b instanceof THREE.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new THREE.BufferAttribute(b,
c))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b)):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a]},get drawcalls(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups},get offsets(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups},addDrawCall:function(a,
b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=
b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);
return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Points||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",
a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=
a.geometry;if(a instanceof THREE.Mesh){var c=b.__directGeometry;if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),
c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&
(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&
(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new THREE.BufferAttribute(b,
2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,g=d.length;e<g;e++){var f=d[e],h=new THREE.Float32Attribute(3*f.length,3);b.push(h.copyVector3sArray(f))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*a.skinIndices.length,
4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){var a=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var b=
this.attributes.position.array;if(b){var c=this.boundingBox;c.makeEmpty();for(var d=0,e=b.length;d<e;d+=3)a.fromArray(b,d),c.expandByPoint(a)}if(void 0===b||0===b.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var a=
new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,g=c.length;e<g;e+=3)b.fromArray(c,e),a.expandByPoint(b);a.center(d);for(var f=0,e=0,g=c.length;e<g;e+=3)b.fromArray(c,e),f=Math.max(f,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(f);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,g=0,f=e.length;g<f;g++)e[g]=0;var e=b.normal.array,h,k,n,r=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector3,s=new THREE.Vector3,u=new THREE.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);
for(var w=0,y=c.length;w<y;++w)for(g=c[w],f=g.start,h=g.count,g=f,f+=h;g<f;g+=3)h=3*a[g+0],k=3*a[g+1],n=3*a[g+2],r.fromArray(d,h),q.fromArray(d,k),l.fromArray(d,n),s.subVectors(l,q),u.subVectors(r,q),s.cross(u),e[h]+=s.x,e[h+1]+=s.y,e[h+2]+=s.z,e[k]+=s.x,e[k+1]+=s.y,e[k+2]+=s.z,e[n]+=s.x,e[n+1]+=s.y,e[n+2]+=s.z}else for(g=0,f=d.length;g<f;g+=9)r.fromArray(d,g),q.fromArray(d,g+3),l.fromArray(d,g+6),s.subVectors(l,q),u.subVectors(r,q),s.cross(u),e[g]=s.x,e[g+1]=s.y,e[g+2]=s.z,e[g+3]=s.x,e[g+4]=s.y,
e[g+5]=s.z,e[g+6]=s.x,e[g+7]=s.y,e[g+8]=s.z;this.normalizeNormals();b.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(a){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(a,b){if(!1===a instanceof THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var c=this.attributes,
d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,g=a.attributes[d],f=g.array,h=0,g=g.itemSize*b;h<f.length;h++,g++)e[g]=f[h];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,g=a.length;e<g;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);
if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c],b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==
c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new this.constructor).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.BufferGeometry.MaxIndex=65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};
THREE.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype);
THREE.AnimationAction=function(a,b,c,d,e){if(void 0===a)throw Error("clip is null");this.clip=a;this.localRoot=null;this.startTime=b||0;this.timeScale=c||1;this.weight=d||1;this.loop=e||THREE.LoopRepeat;this.loopCount=0;this.enabled=!0;this.actionTime=-this.startTime;this.clipTime=0;this.propertyBindings=[]};
THREE.AnimationAction.prototype={constructor:THREE.AnimationAction,setLocalRoot:function(a){this.localRoot=a;return this},updateTime:function(a){var b=this.clipTime,c=this.loopCount,d=this.clip.duration;this.actionTime+=a;if(this.loop===THREE.LoopOnce)return this.loopCount=0,this.clipTime=Math.min(Math.max(this.actionTime,0),d),this.clipTime!==b&&(this.clipTime===d?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this,
direction:-1})),this.clipTime;this.loopCount=Math.floor(this.actionTime/d);a=this.actionTime-this.loopCount*d;a%=d;this.loop==THREE.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(a=d-a);this.clipTime=a;this.loopCount!==c&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount});return this.clipTime},syncWith:function(a){this.actionTime=a.actionTime;this.timeScale=a.timeScale;return this},warpToDuration:function(a){this.timeScale=this.clip.duration/a;return this},
init:function(a){this.clipTime=a-this.startTime;return this},update:function(a){this.updateTime(a);return this.clip.getAt(this.clipTime)},getTimeScaleAt:function(a){return this.timeScale.getAt?this.timeScale.getAt(a):this.timeScale},getWeightAt:function(a){return this.weight.getAt?this.weight.getAt(a):this.weight}};
THREE.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;if(0>this.duration)for(a=0;a<this.tracks.length;a++)b=this.tracks[a],this.duration=Math.max(b.keys[b.keys.length-1].time);this.trim();this.optimize();this.results=[]};
THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,getAt:function(a){a=Math.max(0,Math.min(a,this.duration));for(var b=0;b<this.tracks.length;b++)this.results[b]=this.tracks[b].getAt(a);return this.results},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
THREE.AnimationClip.CreateFromMorphTargetSequence=function(a,b,c){for(var d=b.length,e=[],g=0;g<d;g++){var f=[];f.push({time:(g+d-1)%d,value:0});f.push({time:g,value:1});f.push({time:(g+1)%d,value:0});f.sort(THREE.KeyframeTrack.keyComparer);0===f[0].time&&f.push({time:d,value:f[0].value});e.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+b[g].name+"]",f)).scale(1/c))}return new THREE.AnimationClip(a,-1,e)};
THREE.AnimationClip.findByName=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return a[c];return null};THREE.AnimationClip.CreateClipsFromMorphTargetSequences=function(a,b){for(var c={},d=/^([\w-]*?)([\d]+)$/,e=0,g=a.length;e<g;e++){var f=a[e],h=f.name.match(d);if(h&&1<h.length){var k=h[1];(h=c[k])||(c[k]=h=[]);h.push(f)}}d=[];for(k in c)d.push(THREE.AnimationClip.CreateFromMorphTargetSequence(k,c[k],b));return d};
THREE.AnimationClip.parse=function(a){for(var b=[],c=0;c<a.tracks.length;c++)b.push(THREE.KeyframeTrack.parse(a.tracks[c]).scale(1/a.fps));return new THREE.AnimationClip(a.name,a.duration,b)};
THREE.AnimationClip.parseAnimation=function(a,b,c){if(!a)return console.error("  no animation in JSONLoader data"),null;var d=function(a,b,c,d,e){for(var f=[],g=0;g<b.length;g++){var h=b[g];void 0!==h[c]&&f.push({time:h.time,value:e(h)})}return 0<f.length?new d(a,f):null},e=[],g=a.name||"default",f=a.length||-1,h=a.fps||30;a=a.hierarchy||[];for(var k=0;k<a.length;k++){var n=a[k].keys;if(n&&0!=n.length)if(n[0].morphTargets){for(var f={},r=0;r<n.length;r++)if(n[r].morphTargets)for(var q=0;q<n[r].morphTargets.length;q++)f[n[r].morphTargets[q]]=
-1;for(var l in f){for(var s=[],q=0;q<n[r].morphTargets.length;q++){var u=n[r];s.push({time:u.time,value:u.morphTarget===l?1:0})}e.push(new THREE.NumberKeyframeTrack(c+".morphTargetInfluence["+l+"]",s))}f=f.length*(h||1)}else r=c+".bones["+b[k].name+"]",(q=d(r+".position",n,"pos",THREE.VectorKeyframeTrack,function(a){return(new THREE.Vector3).fromArray(a.pos)}))&&e.push(q),(q=d(r+".quaternion",n,"rot",THREE.QuaternionKeyframeTrack,function(a){return a.rot.slerp?a.rot.clone():(new THREE.Quaternion).fromArray(a.rot)}))&&
e.push(q),(n=d(r+".scale",n,"scl",THREE.VectorKeyframeTrack,function(a){return(new THREE.Vector3).fromArray(a.scl)}))&&e.push(n)}return 0===e.length?null:new THREE.AnimationClip(g,f,e)};THREE.AnimationMixer=function(a){this.root=a;this.time=0;this.timeScale=1;this.actions=[];this.propertyBindingMap={}};
THREE.AnimationMixer.prototype={constructor:THREE.AnimationMixer,addAction:function(a){this.actions.push(a);a.init(this.time);a.mixer=this;for(var b=a.clip.tracks,c=a.localRoot||this.root,d=0;d<b.length;d++){var e=b[d],g=c.uuid+"-"+e.name,f=this.propertyBindingMap[g];void 0===f&&(f=new THREE.PropertyBinding(c,e.name),this.propertyBindingMap[g]=f);a.propertyBindings.push(f);f.referenceCount+=1}},removeAllActions:function(){for(var a=0;a<this.actions.length;a++)this.actions[a].mixer=null;for(var b in this.propertyBindingMap)this.propertyBindingMap[b].unbind();
this.actions=[];this.propertyBindingMap={};return this},removeAction:function(a){var b=this.actions.indexOf(a);-1!==b&&(this.actions.splice(b,1),a.mixer=null);b=a.localRoot||this.root;a=a.clip.tracks;for(var c=0;c<a.length;c++){var d=b.uuid+"-"+a[c].name,e=this.propertyBindingMap[d];e.referenceCount-=1;0>=e.referenceCount&&(e.unbind(),delete this.propertyBindingMap[d])}return this},findActionByName:function(a){for(var b=0;b<this.actions.length;b++)if(this.actions[b].name===a)return this.actions[b];
return null},play:function(a,b){a.startTime=this.time;this.addAction(a);return this},fadeOut:function(a,b){var c=[];c.push({time:this.time,value:1});c.push({time:this.time+b,value:0});a.weight=new THREE.NumberKeyframeTrack("weight",c);return this},fadeIn:function(a,b){var c=[];c.push({time:this.time,value:0});c.push({time:this.time+b,value:1});a.weight=new THREE.NumberKeyframeTrack("weight",c);return this},warp:function(a,b,c,d){var e=[];e.push({time:this.time,value:b});e.push({time:this.time+d,value:c});
a.timeScale=new THREE.NumberKeyframeTrack("timeScale",e);return this},crossFade:function(a,b,c,d){this.fadeOut(a,c);this.fadeIn(b,c);if(d){d=a.clip.duration/b.clip.duration;var e=1/d;this.warp(a,1,d,c);this.warp(b,e,1,c)}return this},update:function(a){a*=this.timeScale;this.time+=a;for(var b=0;b<this.actions.length;b++){var c=this.actions[b],d=c.getWeightAt(this.time),e=c.getTimeScaleAt(this.time),e=c.update(a*e);if(!(0>=c.weight)&&c.enabled)for(var g=0;g<e.length;g++)c.propertyBindings[g].accumulate(e[g],
d)}for(var f in this.propertyBindingMap)this.propertyBindingMap[f].apply();return this}};THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype);
THREE.AnimationUtils={getEqualsFunc:function(a){return a.equals?function(a,c){return a.equals(c)}:function(a,c){return a===c}},clone:function(a){if("object"===typeof a){if(a.clone)return a.clone();console.error("can not figure out how to copy exemplarValue",a)}return a},lerp:function(a,b,c,d){return THREE.AnimationUtils.getLerpFunc(a,d)(a,b,c)},lerp_object:function(a,b,c){return a.lerp(b,c)},slerp_object:function(a,b,c){return a.slerp(b,c)},lerp_number:function(a,b,c){return a*(1-c)+b*c},lerp_boolean:function(a,
b,c){return.5>c?a:b},lerp_boolean_immediate:function(a,b,c){return a},lerp_string:function(a,b,c){return.5>c?a:b},lerp_string_immediate:function(a,b,c){return a},getLerpFunc:function(a,b){if(void 0===a||null===a)throw Error("examplarValue is null");switch(typeof a){case "object":if(a.lerp)return THREE.AnimationUtils.lerp_object;if(a.slerp)return THREE.AnimationUtils.slerp_object;break;case "number":return THREE.AnimationUtils.lerp_number;case "boolean":return b?THREE.AnimationUtils.lerp_boolean:THREE.AnimationUtils.lerp_boolean_immediate;
case "string":return b?THREE.AnimationUtils.lerp_string:THREE.AnimationUtils.lerp_string_immediate}}};THREE.KeyframeTrack=function(a,b){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keys in track named "+a);this.name=a;this.keys=b;this.lastIndex=0;this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,getAt:function(a){for(;this.lastIndex<this.keys.length&&a>=this.keys[this.lastIndex].time;)this.lastIndex++;for(;0<this.lastIndex&&a<this.keys[this.lastIndex-1].time;)this.lastIndex--;if(this.lastIndex>=this.keys.length)return this.setResult(this.keys[this.keys.length-1].value),this.result;if(0===this.lastIndex)return this.setResult(this.keys[0].value),this.result;var b=this.keys[this.lastIndex-1];this.setResult(b.value);if(b.constantToNext)return this.result;
var c=this.keys[this.lastIndex];return this.result=this.lerpValues(this.result,c.value,(a-b.time)/(c.time-b.time))},shift:function(a){if(0!==a)for(var b=0;b<this.keys.length;b++)this.keys[b].time+=a;return this},scale:function(a){if(1!==a)for(var b=0;b<this.keys.length;b++)this.keys[b].time*=a;return this},trim:function(a,b){for(var c=0,d=1;d<this.keys.length;d++)this.keys[d]<=a&&c++;for(var e=0,d=this.keys.length-2;0<d;d++)if(this.keys[d]>=b)e++;else break;0<c+e&&(this.keys=this.keys.splice(c,this.keys.length-
e-c));return this},validate:function(){var a=null;if(0===this.keys.length)console.error("  track is empty, no keys",this);else{for(var b=0;b<this.keys.length;b++){var c=this.keys[b];if(!c){console.error("  key is null in track",this,b);return}if("number"!==typeof c.time||isNaN(c.time)){console.error("  key.time is not a valid number",this,b,c);return}if(void 0===c.value||null===c.value){console.error("  key.value is null in track",this,b,c);return}if(a&&a.time>c.time){console.error("  key.time is less than previous key time, out of order keys",
this,b,c,a);return}a=c}return this}},optimize:function(){var a=[],b=this.keys[0];a.push(b);THREE.AnimationUtils.getEqualsFunc(b.value);for(var c=1;c<this.keys.length-1;c++){var d=this.keys[c],e=this.keys[c+1];b.time===d.time||this.compareValues(b.value,d.value)&&this.compareValues(d.value,e.value)||(b.constantToNext=this.compareValues(b.value,d.value),a.push(d),b=d)}a.push(this.keys[this.keys.length-1]);this.keys=a;return this}};THREE.KeyframeTrack.keyComparer=function(a,b){return a.time-b.time};
THREE.KeyframeTrack.parse=function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");return THREE.KeyframeTrack.GetTrackTypeForTypeName(a.type).parse(a)};
THREE.KeyframeTrack.GetTrackTypeForTypeName=function(a){switch(a.toLowerCase()){case "vector":case "vector2":case "vector3":case "vector4":return THREE.VectorKeyframeTrack;case "quaternion":return THREE.QuaternionKeyframeTrack;case "integer":case "scalar":case "double":case "float":case "number":return THREE.NumberKeyframeTrack;case "bool":case "boolean":return THREE.BooleanKeyframeTrack;case "string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);};
THREE.PropertyBinding=function(a,b){this.rootNode=a;this.trackName=b;this.referenceCount=0;this.originalValue=null;var c=THREE.PropertyBinding.parseTrackName(b);this.directoryName=c.directoryName;this.nodeName=c.nodeName;this.objectName=c.objectName;this.objectIndex=c.objectIndex;this.propertyName=c.propertyName;this.propertyIndex=c.propertyIndex;this.node=THREE.PropertyBinding.findNode(a,this.nodeName)||a;this.cumulativeValue=null;this.cumulativeWeight=0};
THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,reset:function(){this.cumulativeValue=null;this.cumulativeWeight=0},accumulate:function(a,b){this.isBound||this.bind();0===this.cumulativeWeight?0<b&&(null===this.cumulativeValue&&(this.cumulativeValue=THREE.AnimationUtils.clone(a)),this.cumulativeWeight=b):(this.cumulativeValue=this.lerpValue(this.cumulativeValue,a,b/(this.cumulativeWeight+b)),this.cumulativeWeight+=b)},unbind:function(){this.isBound&&(this.setValue(this.originalValue),
this.triggerDirty=this.equalsValue=this.lerpValue=this.getValue=this.setValue=null,this.isBound=!1)},bind:function(){if(!this.isBound){var a=this.node;if(a){if(this.objectName){if("materials"===this.objectName){if(!a.material){console.error("  can not bind to material as node does not have a material",this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials}else if("bones"===this.objectName){if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",
this);return}for(var a=a.skeleton.bones,b=0;b<a.length;b++)if(a[b].name===this.objectIndex){this.objectIndex=b;break}}else{if(void 0===a[this.objectName]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[this.objectName]}if(void 0!==this.objectIndex){if(void 0===a[this.objectIndex]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[this.objectIndex]}}var c=a[this.propertyName];if(c){if(void 0!==this.propertyIndex){if("morphTargetInfluences"===
this.propertyName)for(a.geometry||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this),a.geometry.morphTargets||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this),b=0;b<this.node.geometry.morphTargets.length;b++)if(a.geometry.morphTargets[b].name===this.propertyIndex){this.propertyIndex=b;break}this.setValue=function(a){return this.equalsValue(c[this.propertyIndex],a)?!1:(c[this.propertyIndex]=
a,!0)};this.getValue=function(){return c[this.propertyIndex]}}else c.copy?(this.setValue=function(a){return this.equalsValue(c,a)?!1:(c.copy(a),!0)},this.getValue=function(){return c}):(this.setValue=function(b){return this.equalsValue(a[this.propertyName],b)?!1:(a[this.propertyName]=b,!0)},this.getValue=function(){return a[this.propertyName]});void 0!==a.needsUpdate?this.triggerDirty=function(){this.node.needsUpdate=!0}:void 0!==a.matrixWorldNeedsUpdate&&(this.triggerDirty=function(){a.matrixWorldNeedsUpdate=
!0});this.originalValue=this.getValue();this.equalsValue=THREE.AnimationUtils.getEqualsFunc(this.originalValue);this.lerpValue=THREE.AnimationUtils.getLerpFunc(this.originalValue,!0);this.isBound=!0}else console.error("  trying to update property for track: "+this.nodeName+"."+this.propertyName+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.trackName+" but it wasn't found.")}},apply:function(){this.isBound||this.bind();if(0<this.cumulativeWeight){if(1>this.cumulativeWeight){var a=
1-this.cumulativeWeight;this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,a/(this.cumulativeWeight+a))}this.setValue(this.cumulativeValue)&&this.triggerDirty&&this.triggerDirty();this.cumulativeValue=null;this.cumulativeWeight=0}}};
THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={directoryName:c[1],nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
THREE.PropertyBinding.findNode=function(a,b){function c(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}function d(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null}if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var e=c(a.skeleton);if(e)return e}return a.children&&(e=d(a.children))?e:null};
THREE.VectorKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.VectorKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.VectorKeyframeTrack.prototype.constructor=THREE.VectorKeyframeTrack;THREE.VectorKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.VectorKeyframeTrack.prototype.lerpValues=function(a,b,c){return a.lerp(b,c)};THREE.VectorKeyframeTrack.prototype.compareValues=function(a,b){return a.equals(b)};
THREE.VectorKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value.clone()})}return new THREE.VectorKeyframeTrack(this.name,a)};THREE.VectorKeyframeTrack.parse=function(a){for(var b=THREE["Vector"+a.keys[0].value.length],c=[],d=0;d<a.keys.length;d++){var e=a.keys[d];c.push({value:(new b).fromArray(e.value),time:e.time})}return new THREE.VectorKeyframeTrack(a.name,c)};
THREE.QuaternionKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.QuaternionKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.QuaternionKeyframeTrack.prototype.constructor=THREE.QuaternionKeyframeTrack;THREE.QuaternionKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.QuaternionKeyframeTrack.prototype.lerpValues=function(a,b,c){return a.slerp(b,c)};
THREE.QuaternionKeyframeTrack.prototype.compareValues=function(a,b){return a.equals(b)};THREE.QuaternionKeyframeTrack.prototype.multiply=function(a){for(var b=0;b<this.keys.length;b++)this.keys[b].value.multiply(a);return this};THREE.QuaternionKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value.clone()})}return new THREE.QuaternionKeyframeTrack(this.name,a)};
THREE.QuaternionKeyframeTrack.parse=function(a){for(var b=[],c=0;c<a.keys.length;c++){var d=a.keys[c];b.push({value:(new THREE.Quaternion).fromArray(d.value),time:d.time})}return new THREE.QuaternionKeyframeTrack(a.name,b)};THREE.StringKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.StringKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.StringKeyframeTrack.prototype.constructor=THREE.StringKeyframeTrack;
THREE.StringKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.StringKeyframeTrack.prototype.lerpValues=function(a,b,c){return 1>c?a:b};THREE.StringKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.StringKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.StringKeyframeTrack(this.name,a)};
THREE.StringKeyframeTrack.parse=function(a){return new THREE.StringKeyframeTrack(a.name,a.keys)};THREE.BooleanKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.BooleanKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.BooleanKeyframeTrack.prototype.constructor=THREE.BooleanKeyframeTrack;THREE.BooleanKeyframeTrack.prototype.setResult=function(a){this.result=a};
THREE.BooleanKeyframeTrack.prototype.lerpValues=function(a,b,c){return 1>c?a:b};THREE.BooleanKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.BooleanKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.BooleanKeyframeTrack(this.name,a)};THREE.BooleanKeyframeTrack.parse=function(a){return new THREE.BooleanKeyframeTrack(a.name,a.keys)};
THREE.NumberKeyframeTrack=function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.NumberKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.NumberKeyframeTrack.prototype.constructor=THREE.NumberKeyframeTrack;THREE.NumberKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.NumberKeyframeTrack.prototype.lerpValues=function(a,b,c){return a*(1-c)+b*c};THREE.NumberKeyframeTrack.prototype.compareValues=function(a,b){return a===b};
THREE.NumberKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var c=this.keys[b];a.push({time:c.time,value:c.value})}return new THREE.NumberKeyframeTrack(this.name,a)};THREE.NumberKeyframeTrack.parse=function(a){return new THREE.NumberKeyframeTrack(a.name,a.keys)};THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);
THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,-1);f.lookAt(new THREE.Vector3(0,-1,0));
this.add(f);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,l=c.texture.generateMipmaps;c.texture.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,f,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=l;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(a,b,c,d,e,g){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera;
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(c-a,c+a,d+b,d-b,this.near,this.far)};THREE.OrthographicCamera.prototype.copy=function(a){THREE.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return this};
THREE.OrthographicCamera.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=g;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var b=this.fullWidth/this.fullHeight,a=Math.tan(THREE.Math.degToRad(.5*a))*this.near,c=-a,d=b*c,b=Math.abs(b*a-d),c=Math.abs(a-c);this.projectionMatrix.makeFrustum(d+this.x*b/this.fullWidth,d+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*c/this.fullHeight,a-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(a,
this.aspect,this.near,this.far)};THREE.PerspectiveCamera.prototype.copy=function(a){THREE.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.aspect=a.aspect;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return this};THREE.PerspectiveCamera.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.fov=this.fov;a.object.aspect=this.aspect;a.object.near=this.near;a.object.far=this.far;return a};
THREE.Light=function(a){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a);this.receiveShadow=void 0};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.constructor=THREE.Light;
Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(a){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){this.shadow.camera.near=
a}},shadowCameraFar:{set:function(a){this.shadow.camera.far=a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")}},shadowBias:{set:function(a){this.shadow.bias=a}},shadowDarkness:{set:function(a){this.shadow.darkness=a}},shadowMapWidth:{set:function(a){this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){this.shadow.mapSize.height=a}}});
THREE.Light.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);return this};
THREE.Light.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.intensity&&(a.object.intensity=this.intensity);void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.exponent&&(a.object.exponent=this.exponent);return a};
THREE.LightShadow=function(a){this.camera=a;this.bias=0;this.darkness=1;this.mapSize=new THREE.Vector2(512,512);this.matrix=this.map=null};THREE.LightShadow.prototype={constructor:THREE.LightShadow,copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.darkness=a.darkness;this.mapSize.copy(a.mapSize)},clone:function(){return(new this.constructor).copy(this)}};THREE.AmbientLight=function(a){THREE.Light.call(this,a);this.type="AmbientLight";this.castShadow=void 0};
THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.shadow=new THREE.LightShadow(new THREE.OrthographicCamera(-500,500,500,-500,50,5E3))};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight;THREE.DirectionalLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.target=a.target.clone();this.shadow=a.shadow.clone();return this};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.type="HemisphereLight";this.castShadow=void 0;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};
THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight;THREE.HemisphereLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);this.intensity=a.intensity;return this};
THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a);this.type="PointLight";this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,1,500))};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.constructor=THREE.PointLight;
THREE.PointLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this};
THREE.SpotLight=function(a,b,c,d,e,g){THREE.Light.call(this,a);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.decay=void 0!==g?g:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(50,1,50,5E3))};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.constructor=THREE.SpotLight;
THREE.SpotLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.distance=a.distance;this.angle=a.angle;this.exponent=a.exponent;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this};THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a,b,c;return function(d,e,g){function f(a,c,d,f,k){a=e+a;var n=THREE.Loader.Handlers.get(a);null!==n?a=n.load(a):(b.setCrossOrigin(g),a=b.load(a));void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=
THREE.RepeatWrapping),1!==c[1]&&(a.wrapT=THREE.RepeatWrapping));void 0!==d&&a.offset.fromArray(d);void 0!==f&&("repeat"===f[0]&&(a.wrapS=THREE.RepeatWrapping),"mirror"===f[0]&&(a.wrapS=THREE.MirroredRepeatWrapping),"repeat"===f[1]&&(a.wrapT=THREE.RepeatWrapping),"mirror"===f[1]&&(a.wrapT=THREE.MirroredRepeatWrapping));void 0!==k&&(a.anisotropy=k);c=THREE.Math.generateUUID();h[c]=a;return c}void 0===a&&(a=new THREE.Color);void 0===b&&(b=new THREE.TextureLoader);void 0===c&&(c=new THREE.MaterialLoader);
var h={},k={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"},n;for(n in d){var r=d[n];switch(n){case "DbgColor":k.color=r;break;case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":k.name=r;break;case "blending":k.blending=THREE[r];break;case "colorDiffuse":k.color=a.fromArray(r).getHex();break;case "colorSpecular":k.specular=a.fromArray(r).getHex();break;case "colorEmissive":k.emissive=a.fromArray(r).getHex();break;case "specularCoef":k.shininess=r;break;case "shading":"basic"===
r.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===r.toLowerCase()&&(k.type="MeshPhongMaterial");break;case "mapDiffuse":k.map=f(r,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapLight":k.lightMap=f(r,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;
case "mapAO":k.aoMap=f(r,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":k.bumpMap=f(r,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":k.bumpScale=r;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":k.normalMap=f(r,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);
break;case "mapNormalFactor":k.normalScale=[r,r];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":k.specularMap=f(r,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapAlpha":k.alphaMap=f(r,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;
case "flipSided":k.side=THREE.BackSide;break;case "doubleSided":k.side=THREE.DoubleSide;break;case "transparency":console.warn("THREE.Loader: transparency has been renamed to opacity");k.opacity=r;break;case "opacity":case "transparent":case "depthTest":case "depthWrite":case "transparent":case "visible":case "wireframe":k[n]=r;break;case "vertexColors":!0===r&&(k.vertexColors=THREE.VertexColors);"face"===r&&(k.vertexColors=THREE.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",
n,r)}}"MeshPhongMaterial"!==k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);c.setTextures(h);return c.parse(k)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g)return b&&setTimeout(function(){b(g)},0),g;var f=new XMLHttpRequest;f.open("GET",a,!0);f.addEventListener("load",function(c){c=c.target.response;THREE.Cache.add(a,c);b&&b(c);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);f.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=
this.crossOrigin);void 0!==this.responseType&&(f.responseType=this.responseType);void 0!==this.withCredentials&&(f.withCredentials=this.withCredentials);f.send(null);e.manager.itemStart(a);return f},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a},setWithCredentials:function(a){this.withCredentials=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g)return e.manager.itemStart(a),b?setTimeout(function(){b(g);e.manager.itemEnd(a)},0):e.manager.itemEnd(a),g;var f=document.createElement("img");f.addEventListener("load",function(c){THREE.Cache.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);f.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},
!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);e.manager.itemStart(a);f.src=a;return f},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};
THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader: .statusDomElement has been removed.");return this._statusDomElement},load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a);c=new THREE.XHRLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.setWithCredentials(this.withCredentials);
c.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d){if("object"===d.type){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===d.type){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,g);b(c.geometry,c.materials)})},setCrossOrigin:function(a){this.crossOrigin=a},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==
a.scale?1/a.scale:1;(function(b){var d,f,h,k,n,r,q,l,s,u,w,y,x,z=a.faces;r=a.vertices;var C=a.normals,A=a.colors,F=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&F++;for(d=0;d<F;d++)c.faceVertexUvs[d]=[]}k=0;for(n=r.length;k<n;)d=new THREE.Vector3,d.x=r[k++]*b,d.y=r[k++]*b,d.z=r[k++]*b,c.vertices.push(d);k=0;for(n=z.length;k<n;)if(b=z[k++],s=b&1,h=b&2,d=b&8,q=b&16,u=b&32,r=b&64,b&=128,s){s=new THREE.Face3;s.a=z[k];s.b=z[k+1];s.c=z[k+3];w=new THREE.Face3;w.a=z[k+1];w.b=z[k+2];w.c=
z[k+3];k+=4;h&&(h=z[k++],s.materialIndex=h,w.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<F;d++)for(y=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],f=0;4>f;f++)l=z[k++],x=y[2*l],l=y[2*l+1],x=new THREE.Vector2(x,l),2!==f&&c.faceVertexUvs[d][h].push(x),0!==f&&c.faceVertexUvs[d][h+1].push(x);q&&(q=3*z[k++],s.normal.set(C[q++],C[q++],C[q]),w.normal.copy(s.normal));if(u)for(d=0;4>d;d++)q=3*z[k++],u=new THREE.Vector3(C[q++],C[q++],C[q]),2!==d&&s.vertexNormals.push(u),0!==d&&w.vertexNormals.push(u);
r&&(r=z[k++],r=A[r],s.color.setHex(r),w.color.setHex(r));if(b)for(d=0;4>d;d++)r=z[k++],r=A[r],2!==d&&s.vertexColors.push(new THREE.Color(r)),0!==d&&w.vertexColors.push(new THREE.Color(r));c.faces.push(s);c.faces.push(w)}else{s=new THREE.Face3;s.a=z[k++];s.b=z[k++];s.c=z[k++];h&&(h=z[k++],s.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<F;d++)for(y=a.uvs[d],c.faceVertexUvs[d][h]=[],f=0;3>f;f++)l=z[k++],x=y[2*l],l=y[2*l+1],x=new THREE.Vector2(x,l),c.faceVertexUvs[d][h].push(x);q&&(q=3*z[k++],s.normal.set(C[q++],
C[q++],C[q]));if(u)for(d=0;3>d;d++)q=3*z[k++],u=new THREE.Vector3(C[q++],C[q++],C[q]),s.vertexNormals.push(u);r&&(r=z[k++],s.color.setHex(A[r]));if(b)for(d=0;3>d;d++)r=z[k++],s.vertexColors.push(new THREE.Color(A[r]));c.faces.push(s)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,f=a.skinWeights.length;d<f;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:
0));if(a.skinIndices)for(d=0,f=a.skinIndices.length;d<f;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(b){if(void 0!==
a.morphTargets)for(var d=0,f=a.morphTargets.length;d<f;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var h=c.morphTargets[d].vertices,k=a.morphTargets[d].vertices,n=0,r=k.length;n<r;n+=3){var q=new THREE.Vector3;q.x=k[n]*b;q.y=k[n+1]*b;q.z=k[n+2]*b;h.push(q)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,h=a.morphColors[0].colors,
d=0,f=b.length;d<f;d++)b[d].color.fromArray(h,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var f=0;f<d.length;f++){var h=THREE.AnimationClip.parseAnimation(d[f],c.bones);h&&b.push(h)}c.morphTargets&&(d=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();
if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}};
THREE.LoadingManager=function(a,b,c){var d=this,e=!1,g=0,f=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++;if(!1===e&&void 0!==d.onStart)d.onStart(a,g,f);e=!0};this.itemEnd=function(a){g++;if(void 0!==d.onProgress)d.onProgress(a,g,f);if(g===f&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.data.index;void 0!==c&&(c=new self[c.type](c.array),b.setIndex(new THREE.BufferAttribute(c,1)));var d=a.data.attributes,e;for(e in d){var g=d[e],c=new self[g.type](g.array);
b.addAttribute(e,new THREE.BufferAttribute(c,g.itemSize))}e=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==e)for(c=0,d=e.length;c!==d;++c)g=e[c],b.addGroup(g.start,g.count);a=a.data.boundingSphere;void 0!==a&&(e=new THREE.Vector3,void 0!==a.center&&e.fromArray(a.center),b.boundingSphere=new THREE.Sphere(e,a.radius));return b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return b[a]},parse:function(a){var b=new THREE[a.type];b.uuid=a.uuid;void 0!==
a.name&&(b.name=a.name);void 0!==a.color&&b.color.setHex(a.color);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&
(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);void 0!==a.sizeAttenuation&&(b.sizeAttenuation=
a.sizeAttenuation);void 0!==a.map&&(b.map=this.getTexture(a.map));void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0);void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap));a.normalScale&&(b.normalScale=new THREE.Vector2(a.normalScale,a.normalScale));void 0!==a.displacementMap&&(b.displacementMap=this.getTexture(a.displacementMap));void 0!==a.displacementScale&&
(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==a.specularMap&&(b.specularMap=this.getTexture(a.specularMap));void 0!==a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation);a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap));void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap));
void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),
d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,g=a.length;e<g;e++){var f,h=a[e];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":f=new THREE[h.type](h.width,h.height,h.widthSegments,
h.heightSegments);break;case "BoxGeometry":case "CubeGeometry":f=new THREE.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleBufferGeometry":f=new THREE.CircleBufferGeometry(h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CircleGeometry":f=new THREE.CircleGeometry(h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":f=new THREE.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,
h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":f=new THREE.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "SphereBufferGeometry":f=new THREE.SphereBufferGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":f=new THREE.DodecahedronGeometry(h.radius,h.detail);break;case "IcosahedronGeometry":f=new THREE.IcosahedronGeometry(h.radius,
h.detail);break;case "OctahedronGeometry":f=new THREE.OctahedronGeometry(h.radius,h.detail);break;case "TetrahedronGeometry":f=new THREE.TetrahedronGeometry(h.radius,h.detail);break;case "RingGeometry":f=new THREE.RingGeometry(h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case "TorusGeometry":f=new THREE.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":f=new THREE.TorusKnotGeometry(h.radius,h.tube,
h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale);break;case "BufferGeometry":f=d.parse(h);break;case "Geometry":f=c.parse(h.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}f.uuid=h.uuid;void 0!==h.name&&(f.name=h.name);b[h.uuid]=f}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new THREE.MaterialLoader;d.setTextures(b);for(var e=0,g=a.length;e<g;e++){var f=d.parse(a[e]);c[f.uuid]=f}}return c},
parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);return f.load(a,function(){d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){var g=new THREE.LoadingManager(b),f=new THREE.ImageLoader(g);f.setCrossOrigin(this.crossOrigin);for(var g=0,h=a.length;g<h;g++){var k=a[g],n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:d.texturePath+k.url;e[k.uuid]=c(n)}}return e},
parseTextures:function(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return THREE[a]}var d={};if(void 0!==a)for(var e=0,g=a.length;e<g;e++){var f=a[e];void 0===f.image&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid);void 0===b[f.image]&&console.warn("THREE.ObjectLoader: Undefined image",f.image);var h=new THREE.Texture(b[f.image]);h.needsUpdate=!0;h.uuid=f.uuid;void 0!==f.name&&(h.name=
f.name);void 0!==f.mapping&&(h.mapping=c(f.mapping));void 0!==f.offset&&(h.offset=new THREE.Vector2(f.offset[0],f.offset[1]));void 0!==f.repeat&&(h.repeat=new THREE.Vector2(f.repeat[0],f.repeat[1]));void 0!==f.minFilter&&(h.minFilter=c(f.minFilter));void 0!==f.magFilter&&(h.magFilter=c(f.magFilter));void 0!==f.anisotropy&&(h.anisotropy=f.anisotropy);Array.isArray(f.wrap)&&(h.wrapS=c(f.wrap[0]),h.wrapT=c(f.wrap[1]));d[f.uuid]=h}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,
c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function g(a){if(void 0!==a)return void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),d[a]}var f;switch(b.type){case "Scene":f=new THREE.Scene;break;case "PerspectiveCamera":f=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);break;case "OrthographicCamera":f=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":f=new THREE.AmbientLight(b.color);
break;case "DirectionalLight":f=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":f=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":f=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent,b.decay);break;case "HemisphereLight":f=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":f=new THREE.Mesh(e(b.geometry),g(b.material));break;case "LOD":f=new THREE.LOD;break;case "Line":f=new THREE.Line(e(b.geometry),
g(b.material),b.mode);break;case "PointCloud":case "Points":f=new THREE.Points(e(b.geometry),g(b.material));break;case "Sprite":f=new THREE.Sprite(g(b.material));break;case "Group":f=new THREE.Group;break;default:f=new THREE.Object3D}f.uuid=b.uuid;void 0!==b.name&&(f.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(f.position,f.quaternion,f.scale)):(void 0!==b.position&&f.position.fromArray(b.position),void 0!==b.rotation&&f.rotation.fromArray(b.rotation),void 0!==b.scale&&f.scale.fromArray(b.scale));
void 0!==b.castShadow&&(f.castShadow=b.castShadow);void 0!==b.receiveShadow&&(f.receiveShadow=b.receiveShadow);void 0!==b.visible&&(f.visible=b.visible);void 0!==b.userData&&(f.userData=b.userData);if(void 0!==b.children)for(var h in b.children)f.add(this.parseObject(b.children[h],c,d));if("LOD"===b.type){b=b.levels;for(var k=0;k<b.length;k++){var n=b[k];h=f.getObjectByProperty("uuid",n.object);void 0!==h&&f.addLevel(h,n.distance)}}return f}}()};
THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.Texture,g=new THREE.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){e.image=a;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.CubeTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(a,b,c,d){function e(c){f.load(a[c],function(a){g.images[c]=a;h++;6===h&&(g.needsUpdate=!0,b&&b(g))},void 0,d)}var g=new THREE.CubeTexture([]),f=new THREE.ImageLoader;f.setCrossOrigin(this.crossOrigin);var h=0;for(c=0;c<a.length;++c)e(c);return g},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(a,b,c,d){var e=this,g=new THREE.DataTexture,f=new THREE.XHRLoader(this.manager);f.setCrossOrigin(this.crossOrigin);f.setResponseType("arraybuffer");f.load(a,function(a){if(a=e._parser(a))void 0!==a.image?g.image=a.image:void 0!==a.data&&(g.image.width=a.width,g.image.height=a.height,g.image.data=a.data),g.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,g.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,
g.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,g.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,g.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(g.format=a.format),void 0!==a.type&&(g.type=a.type),void 0!==a.mipmaps&&(g.mipmaps=a.mipmaps),1===a.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.needsUpdate=!0,b&&b(g,a)},c,d);return g},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(a,b,c,d){var e=this,g=[],f=new THREE.CompressedTexture;f.image=g;var h=new THREE.XHRLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setResponseType("arraybuffer");if(Array.isArray(a))for(var k=0,n=function(l){h.load(a[l],function(a){a=e._parser(a,!0);g[l]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};k+=1;6===k&&(1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter),f.format=
a.format,f.needsUpdate=!0,b&&b(f))},c,d)},r=0,q=a.length;r<q;++r)n(r);else h.load(a,function(a){a=e._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var h=0;h<a.mipmapCount;h++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+h]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else f.image.width=a.width,f.image.height=a.height,f.mipmaps=a.mipmaps;1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter);f.format=a.format;f.needsUpdate=!0;b&&
b(f)},c,d);return f},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.colorWrite=this.depthWrite=
this.depthTest=!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):
this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){var b={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);this.color instanceof THREE.Color&&(b.color=this.color.getHex());this.emissive instanceof THREE.Color&&(b.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(b.specular=this.specular.getHex());void 0!==this.shininess&&(b.shininess=this.shininess);this.map instanceof THREE.Texture&&
(b.map=this.map.toJSON(a).uuid);this.alphaMap instanceof THREE.Texture&&(b.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof THREE.Texture&&(b.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof THREE.Texture&&(b.bumpMap=this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(b.normalMap=this.normalMap.toJSON(a).uuid,b.normalScale=this.normalScale);this.displacementMap instanceof THREE.Texture&&(b.displacementMap=this.displacementMap.toJSON(a).uuid,
b.displacementScale=this.displacementScale,b.displacementBias=this.displacementBias);this.specularMap instanceof THREE.Texture&&(b.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof THREE.Texture&&(b.envMap=this.envMap.toJSON(a).uuid,b.reflectivity=this.reflectivity);void 0!==this.size&&(b.size=this.size);void 0!==this.sizeAttenuation&&(b.sizeAttenuation=this.sizeAttenuation);void 0!==this.vertexColors&&this.vertexColors!==THREE.NoColors&&(b.vertexColors=this.vertexColors);void 0!==
this.shading&&this.shading!==THREE.SmoothShading&&(b.shading=this.shading);void 0!==this.blending&&this.blending!==THREE.NormalBlending&&(b.blending=this.blending);void 0!==this.side&&this.side!==THREE.FrontSide&&(b.side=this.side);1>this.opacity&&(b.opacity=this.opacity);!0===this.transparent&&(b.transparent=this.transparent);0<this.alphaTest&&(b.alphaTest=this.alphaTest);!0===this.wireframe&&(b.wireframe=this.wireframe);1<this.wireframeLinewidth&&(b.wireframeLinewidth=this.wireframeLinewidth);return b},
clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.side=a.side;this.opacity=a.opacity;this.transparent=a.transparent;this.blending=a.blending;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.precision=a.precision;this.polygonOffset=
a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.overdraw=a.overdraw;this.visible=a.visible;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){console.warn("THREE."+
this.type+": .wrapRGB has been removed.");return new THREE.Color}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.vertexColors=a.vertexColors;this.fog=a.fog;return this};
THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;
THREE.LineDashedMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;this.vertexColors=a.vertexColors;this.fog=a.fog;return this};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=
!1;this.setValues(a)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;
this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.map=a.map;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.specular.copy(a.specular);this.shininess=a.shininess;this.metal=a.metal;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissiveMap=a.emissiveMap;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=
a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;
THREE.MeshDepthMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;
THREE.MeshNormalMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};THREE.MultiMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(){for(var a={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},b=0,c=this.materials.length;b<c;b++)a.materials.push(this.materials[b].toJSON());a.visible=this.visible;return a},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};THREE.MeshFaceMaterial=THREE.MultiMaterial;
THREE.PointsMaterial=function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.vertexColors=a.vertexColors;this.fog=a.fog;return this};THREE.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)};
THREE.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)};THREE.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.derivatives=this.morphNormals=
this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.attributes=a.attributes;this.defines=a.defines;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=
a.morphNormals;this.derivatives=a.derivatives;return this};THREE.ShaderMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.attributes=this.attributes;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;
THREE.SpriteMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;this.fog=a.fog;return this};
THREE.Texture=function(a,b,c,d,e,g,f,h,k){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==k?k:1;this.format=void 0!==f?f:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var c=
this.image;void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,g=c.uuid,f;void 0!==c.toDataURL?f=c:(f=document.createElement("canvas"),f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0,c.width,c.height));f=2048<f.width||2048<f.height?f.toDataURL("image/jpeg",.6):f.toDataURL("image/png");d[e]={uuid:g,url:f}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===
THREE.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case THREE.RepeatWrapping:a.x-=Math.floor(a.x);break;case THREE.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case THREE.RepeatWrapping:a.y-=Math.floor(a.y);break;case THREE.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.y)%
2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CanvasTexture=function(a,b,c,d,e,g,f,h,k){THREE.Texture.call(this,a,b,c,d,e,g,f,h,k);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;
THREE.CubeTexture=function(a,b,c,d,e,g,f,h,k){b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,g,f,h,k);this.images=a;this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;THREE.CubeTexture.prototype.copy=function(a){THREE.Texture.prototype.copy.call(this,a);this.images=a.images;return this};
THREE.CompressedTexture=function(a,b,c,d,e,g,f,h,k,n,r){THREE.Texture.call(this,null,g,f,h,k,n,d,e,r);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(a,b,c,d,e,g,f,h,k,n,r){THREE.Texture.call(this,null,g,f,h,k,n,d,e,r);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:THREE.NearestFilter;this.minFilter=void 0!==n?n:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(a,b,c,d,e,g,f,h,k){function n(){requestAnimationFrame(n);a.readyState===a.HAVE_ENOUGH_DATA&&(r.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,g,f,h,k);this.generateMipmaps=!1;var r=this;n()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);
THREE.Group.prototype.constructor=THREE.Group;THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};THREE.Points.prototype=Object.create(THREE.Object3D.prototype);THREE.Points.prototype.constructor=THREE.Points;
THREE.Points.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){function e(a,e){var f=b.distanceSqToPoint(a);if(f<k){var h=b.closestPointToPoint(a);h.applyMatrix4(g.matrixWorld);var l=c.ray.origin.distanceTo(h);l<c.near||l>c.far||d.push({distance:l,distanceToRay:Math.sqrt(f),point:h.clone(),index:e,face:null,object:g})}}var g=this,f=g.geometry,h=c.params.Points.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===f.boundingBox||!1!==
b.isIntersectionBox(f.boundingBox)){var h=h/((this.scale.x+this.scale.y+this.scale.z)/3),k=h*h,h=new THREE.Vector3;if(f instanceof THREE.BufferGeometry){var n=f.index,f=f.attributes.position.array;if(null!==n)for(var r=n.array,n=0,q=r.length;n<q;n++){var l=r[n];h.fromArray(f,3*l);e(h,l)}else for(n=0,r=f.length/3;n<r;n++)h.fromArray(f,3*n),e(h,n)}else for(h=f.vertices,n=0,r=h.length;n<r;n++)e(h[n],n)}}}();THREE.Points.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};
THREE.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(a,b)};THREE.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(a,b)};
THREE.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(a,b);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})};THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.constructor=THREE.Line;
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var g=d.linePrecision,g=g*g,f=this.geometry;null===f.boundingSphere&&f.computeBoundingSphere();c.copy(f.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)){a.getInverse(this.matrixWorld);b.copy(d.ray).applyMatrix4(a);var h=new THREE.Vector3,k=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,q=this instanceof THREE.LineSegments?2:1;if(f instanceof
THREE.BufferGeometry){var l=f.index,s=f.attributes;if(null!==l)for(var f=l.array,s=s.position.array,l=0,u=f.length-1;l<u;l+=q){var w=f[l+1];h.fromArray(s,3*f[l]);k.fromArray(s,3*w);w=b.distanceSqToSegment(h,k,r,n);w>g||(r.applyMatrix4(this.matrixWorld),w=d.ray.origin.distanceTo(r),w<d.near||w>d.far||e.push({distance:w,point:n.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}else for(s=s.position.array,l=0,u=s.length/3-1;l<u;l+=q)h.fromArray(s,3*l),k.fromArray(s,
3*l+3),w=b.distanceSqToSegment(h,k,r,n),w>g||(r.applyMatrix4(this.matrixWorld),w=d.ray.origin.distanceTo(r),w<d.near||w>d.far||e.push({distance:w,point:n.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}else if(f instanceof THREE.Geometry)for(h=f.vertices,k=h.length,l=0;l<k-1;l+=q)w=b.distanceSqToSegment(h[l],h[l+1],r,n),w>g||(r.applyMatrix4(this.matrixWorld),w=d.ray.origin.distanceTo(r),w<d.near||w>d.far||e.push({distance:w,point:n.clone().applyMatrix4(this.matrixWorld),
index:l,face:null,faceIndex:null,object:this}))}}}();THREE.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.LineStrip=0;THREE.LinePieces=1;THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.create(THREE.Line.prototype);THREE.LineSegments.prototype.constructor=THREE.LineSegments;
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.constructor=THREE.Mesh;
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){function a(a,b,c,d,e,f,g){THREE.Triangle.barycoordFromPoint(a,b,c,d,w);e.multiplyScalar(w.x);f.multiplyScalar(w.y);g.multiplyScalar(w.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g){var h=a.material;if(null===(h.side===THREE.BackSide?c.intersectTriangle(f,e,d,!0,g):c.intersectTriangle(d,e,f,h.side!==THREE.DoubleSide,g)))return null;x.copy(g);x.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(x);return c<b.near||c>b.far?null:{distance:c,point:x.clone(),
object:a}}function c(c,d,e,g,n,q,r,x){f.fromArray(g,3*q);h.fromArray(g,3*r);k.fromArray(g,3*x);if(c=b(c,d,e,f,h,k,y))n&&(l.fromArray(n,2*q),s.fromArray(n,2*r),u.fromArray(n,2*x),c.uv=a(y,f,h,k,l,s,u)),c.face=new THREE.Face3(q,r,x,THREE.Triangle.normal(f,h,k)),c.faceIndex=q;return c}var d=new THREE.Matrix4,e=new THREE.Ray,g=new THREE.Sphere,f=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,q=new THREE.Vector3,l=new THREE.Vector2,s=new THREE.Vector2,
u=new THREE.Vector2,w=new THREE.Vector3,y=new THREE.Vector3,x=new THREE.Vector3;return function(x,w){var A=this.geometry,F=this.material;if(void 0!==F){null===A.boundingSphere&&A.computeBoundingSphere();var E=this.matrixWorld;g.copy(A.boundingSphere);g.applyMatrix4(E);if(!1!==x.ray.isIntersectionSphere(g)&&(d.getInverse(E),e.copy(x.ray).applyMatrix4(d),null===A.boundingBox||!1!==e.isIntersectionBox(A.boundingBox))){var D,B;if(A instanceof THREE.BufferGeometry){var H,I,F=A.index,E=A.attributes,A=E.position.array;
void 0!==E.uv&&(D=E.uv.array);if(null!==F)for(var E=F.array,G=0,M=E.length;G<M;G+=3){if(F=E[G],H=E[G+1],I=E[G+2],B=c(this,x,e,A,D,F,H,I))B.faceIndex=Math.floor(G/3),w.push(B)}else for(G=0,M=A.length;G<M;G+=9)if(F=G/3,H=F+1,I=F+2,B=c(this,x,e,A,D,F,H,I))B.index=F,w.push(B)}else if(A instanceof THREE.Geometry){var N,K,E=F instanceof THREE.MeshFaceMaterial,G=!0===E?F.materials:null,M=A.vertices;H=A.faces;I=A.faceVertexUvs[0];0<I.length&&(D=I);for(var Q=0,O=H.length;Q<O;Q++){var L=H[Q];B=!0===E?G[L.materialIndex]:
F;if(void 0!==B){I=M[L.a];N=M[L.b];K=M[L.c];if(!0===B.morphTargets){B=A.morphTargets;var T=this.morphTargetInfluences;f.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var X=0,W=B.length;X<W;X++){var U=T[X];if(0!==U){var J=B[X].vertices;f.addScaledVector(n.subVectors(J[L.a],I),U);h.addScaledVector(r.subVectors(J[L.b],N),U);k.addScaledVector(q.subVectors(J[L.c],K),U)}}f.add(I);h.add(N);k.add(K);I=f;N=h;K=k}if(B=b(this,x,e,I,N,K,y))D&&(T=D[Q],l.copy(T[0]),s.copy(T[1]),u.copy(T[2]),B.uv=a(y,I,N,K,l,s,u)),B.face=
L,B.faceIndex=Q,w.push(B)}}}}}}}();THREE.Mesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this};
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};
THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};
THREE.Skeleton.prototype.update=function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(g=this.geometry.bones.length;e<g;++e)d=
this.geometry.bones[e],-1!==d.parent&&null!==d.parent?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh;
THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)};THREE.SkinnedMesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)};
THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}})};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.constructor=THREE.LOD;
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object};
THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;e<g;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=!1}}}();
THREE.LOD.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this};THREE.LOD.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a};
THREE.Sprite=function(){var a=new Uint16Array([0,1,2,0,2,3]),b=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),c=new Float32Array([0,0,1,0,1,1,0,1]),d=new THREE.BufferGeometry;d.setIndex(new THREE.BufferAttribute(a,1));d.addAttribute("position",new THREE.BufferAttribute(b,3));d.addAttribute("uv",new THREE.BufferAttribute(c,2));return function(a){THREE.Object3D.call(this);this.type="Sprite";this.geometry=d;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);
THREE.Sprite.prototype.constructor=THREE.Sprite;THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)};THREE.Particle=THREE.Sprite;
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.constructor=THREE.LensFlare;
THREE.LensFlare.prototype.add=function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};
THREE.LensFlare.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};
THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";
THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n";THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif";THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalAmbientLight += lightColor;\n\n\t}\n\n#endif\n\n";
THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n";THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";
THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n";
THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tfloat texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n\t\tfloat shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\tbool isPointLight = shadowDarkness[ i ] < 0.0;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tfloat realShadowDarkness = abs( shadowDarkness[ i ] );\n\n\t\t\tvec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tconst float Dr = 1.25;\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tconst float Dr = 2.25;\n\t#endif\n\n\t\t\tfloat os = Dr *  2.0 * texelSizeY;\n\n\t\t\tconst vec3 Gsd = vec3( - 1, 0, 1 );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n\t#else \n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness;\n\n\t#endif\n\n\t\t} else {\n\n#endif \n\t\t\tfloat texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n\t\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n\t\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t\tbool frustumTest = all( frustumTestVec );\n\n\t\t\tif ( frustumTest ) {\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\n\t\t\t\t/*\n\t\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\t\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\t\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\t\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\t\tshadow += 1.0;\n\t\t\t\t\t}\n\t\t\t\t\tshadow /= 9.0;\n\t\t\t\t*/\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tconst float ShadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfloat fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tshadow *= shadowDarkness[ i ];\n\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 0 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 1 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 2 ] *= vec3( 0.25 );\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n\t\t\t\tshadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n\t\t\t\tshadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n\t#else \n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\tshadow = shadowDarkness[ i ];\n\n\t#endif\n\n\t\t\t}\n\n#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) {\n\n\t\t\t\tif ( i == 0 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n\t\t\t\t} else if ( i == 1 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\t}\n\n#endif\n\n\t\tshadowMask = shadowMask * vec3( 1.0 - shadow );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n\t#if defined(POINT_LIGHT_SHADOWS)\n\n\n\t\tvoid adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n\t\t\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\t\tif ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n\t\t\t\tshadowValue += 1.0;\n\n\t\t}\n\n\n\t\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n\t\t\tvec3 absV = abs( v );\n\n\n\t\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\t\tabsV *= scaleToCube;\n\n\n\t\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n\t\t\tvec2 planar = v.xy;\n\n\t\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\t\tif ( absV.z >= almostOne ) {\n\n\t\t\t\tif ( v.z > 0.0 )\n\t\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\t\tfloat signX = sign( v.x );\n\t\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\t\tfloat signY = sign( v.y );\n\t\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t\t}\n\n\n\t\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif";
THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},
lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},
spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},
fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = vec3( 1.0 );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,
THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,
THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform vec3 ambientLightColor;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 shadowMask = vec3( 1.0 );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.shadowmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t\telse\n\t\t\toutgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;\n\t#else\n\t\toutgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n\t#endif",
THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",
value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.begin_vertex,
THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,
THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 totalEmissiveLight = emissive;\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,
THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.normal_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.hemilight_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.shadowmap_fragment,"totalDiffuseLight *= shadowMask;\ntotalSpecularLight *= shadowMask;\n#ifdef METAL\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n#else\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n#endif",
THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,
"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,
THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( psColor, opacity );\n\tvec3 shadowMask = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.shadowmap_fragment,"\toutgoingLight = diffuseColor.rgb * shadowMask;",THREE.ShaderChunk.fog_fragment,
"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,
THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},
normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,
THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",
THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",
THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,
THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")},
distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;\n}"].join("\n"),fragmentShader:["uniform vec3 lightPos;\nvarying vec4 vWorldPosition;",
THREE.ShaderChunk.common,"vec4 pack1K ( float depth ) {\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = fract( depth * bitSh );\n\tres -= res.xxyz * bitMsk;\n\treturn res; \n}\nfloat unpack1K ( vec4 color ) {\n\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===J&&(a*=d,b*=d,c*=d);v.clearColor(a,b,c,d)}function c(){R.init();v.viewport(Da,La,Ma,Na);b(ba.r,ba.g,ba.b,ja)}function d(){Ga=Za=null;Fa="";xa=-1;Sa=!0;R.reset()}function e(a){a.preventDefault();d();c();da.clear()}function g(a){a=a.target;a.removeEventListener("dispose",g);a:{var b=da.get(a);if(a.image&&b.__image__webglTextureCube)v.deleteTexture(b.__image__webglTextureCube);else{if(void 0===b.__webglInit)break a;v.deleteTexture(b.__webglTexture)}da.delete(a)}Aa.textures--}
function f(a){a=a.target;a.removeEventListener("dispose",f);var b=da.get(a),c=da.get(a.texture);if(a&&void 0!==c.__webglTexture){v.deleteTexture(c.__webglTexture);if(a instanceof THREE.WebGLRenderTargetCube)for(c=0;6>c;c++)v.deleteFramebuffer(b.__webglFramebuffer[c]),v.deleteRenderbuffer(b.__webglRenderbuffer[c]);else v.deleteFramebuffer(b.__webglFramebuffer),v.deleteRenderbuffer(b.__webglRenderbuffer);da.delete(a.texture);da.delete(a)}Aa.textures--}function h(a){a=a.target;a.removeEventListener("dispose",
h);k(a);da.delete(a)}function k(a){var b=da.get(a).program;a.program=void 0;void 0!==b&&Ia.releaseProgram(b)}function n(a,b){return b[0]-a[0]}function r(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function q(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function l(a,b,c,d,e){var f;
c.transparent?(d=ha,f=++ca):(d=la,f=++na);f=d[f];void 0!==f?(f.id=a.id,f.object=a,f.geometry=b,f.material=c,f.z=P.z,f.group=e):(f={id:a.id,object:a,geometry:b,material:c,z:P.z,group:e},d.push(f))}function s(a,b){if(!1!==a.visible){if(0!==(a.channels.mask&b.channels.mask))if(a instanceof THREE.Light)ea.push(a);else if(a instanceof THREE.Sprite)p.push(a);else if(a instanceof THREE.LensFlare)Ca.push(a);else if(a instanceof THREE.ImmediateRenderObject)!0===oa.sortObjects&&(P.setFromMatrixPosition(a.matrixWorld),
P.applyProjection(va)),l(a,null,a.material,P.z,null);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),!1===a.frustumCulled||!0===Oa.intersectsObject(a)){var c=a.material;if(!0===c.visible){!0===oa.sortObjects&&(P.setFromMatrixPosition(a.matrixWorld),P.applyProjection(va));var d=Ha.update(a);if(c instanceof THREE.MeshFaceMaterial)for(var e=d.groups,f=c.materials,c=0,g=e.length;c<g;c++){var h=e[c],k=f[h.materialIndex];
!0===k.visible&&l(a,d,k,P.z,h)}else l(a,d,c,P.z,null)}}d=a.children;c=0;for(g=d.length;c<g;c++)s(d[c],b)}}function u(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++){var h=a[f],k=h.object,l=h.geometry,n=void 0===e?h.material:e,h=h.group;k.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,k.matrixWorld);k.normalMatrix.getNormalMatrix(k.modelViewMatrix);if(k instanceof THREE.ImmediateRenderObject){w(n);var p=y(b,c,d,n,k);Fa="";k.render(function(a){oa.renderBufferImmediate(a,p,n)})}else oa.renderBufferDirect(b,
c,d,l,n,k,h)}}function w(a){a.side!==THREE.DoubleSide?R.enable(v.CULL_FACE):R.disable(v.CULL_FACE);R.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?R.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha):R.setBlending(THREE.NoBlending);R.setDepthFunc(a.depthFunc);R.setDepthTest(a.depthTest);R.setDepthWrite(a.depthWrite);R.setColorWrite(a.colorWrite);R.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}
function y(a,b,c,d,e){Ra=0;var f=da.get(d);if(d.needsUpdate||!f.program){a:{var g=da.get(d),l=Ia.getParameters(d,b,c,e),n=Ia.getProgramCode(d,l),p=g.program,q=!0;if(void 0===p)d.addEventListener("dispose",h);else if(p.code!==n)k(d);else if(void 0!==l.shaderID)break a;else q=!1;q&&(l.shaderID?(p=THREE.ShaderLib[l.shaderID],g.__webglShader={name:d.type,uniforms:THREE.UniformsUtils.clone(p.uniforms),vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}):g.__webglShader={name:d.type,uniforms:d.uniforms,
vertexShader:d.vertexShader,fragmentShader:d.fragmentShader},d.__webglShader=g.__webglShader,p=Ia.acquireProgram(d,l,n),g.program=p,d.program=p);l=p.getAttributes();if(d.morphTargets)for(n=d.numSupportedMorphTargets=0;n<oa.maxMorphTargets;n++)0<=l["morphTarget"+n]&&d.numSupportedMorphTargets++;if(d.morphNormals)for(n=d.numSupportedMorphNormals=0;n<oa.maxMorphNormals;n++)0<=l["morphNormal"+n]&&d.numSupportedMorphNormals++;g.uniformsList=[];var l=g.program.getUniforms(),s;for(s in g.__webglShader.uniforms)(n=
l[s])&&g.uniformsList.push([g.__webglShader.uniforms[s],n])}d.needsUpdate=!1}n=p=q=!1;g=f.program;s=g.getUniforms();l=f.__webglShader.uniforms;g.id!==Za&&(v.useProgram(g.program),Za=g.id,n=p=q=!0);d.id!==xa&&(-1===xa&&(n=!0),xa=d.id,p=!0);if(q||a!==Ga)v.uniformMatrix4fv(s.projectionMatrix,!1,a.projectionMatrix.elements),ya.logarithmicDepthBuffer&&v.uniform1f(s.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==Ga&&(Ga=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&
void 0!==s.cameraPosition&&(P.setFromMatrixPosition(a.matrixWorld),v.uniform3f(s.cameraPosition,P.x,P.y,P.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshBasicMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&void 0!==s.viewMatrix&&v.uniformMatrix4fv(s.viewMatrix,!1,a.matrixWorldInverse.elements);d.skinning&&(e.bindMatrix&&void 0!==s.bindMatrix&&v.uniformMatrix4fv(s.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&void 0!==
s.bindMatrixInverse&&v.uniformMatrix4fv(s.bindMatrixInverse,!1,e.bindMatrixInverse.elements),ya.floatVertexTextures&&e.skeleton&&e.skeleton.useVertexTexture?(void 0!==s.boneTexture&&(q=z(),v.uniform1i(s.boneTexture,q),oa.setTexture(e.skeleton.boneTexture,q)),void 0!==s.boneTextureWidth&&v.uniform1i(s.boneTextureWidth,e.skeleton.boneTextureWidth),void 0!==s.boneTextureHeight&&v.uniform1i(s.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&void 0!==s.boneGlobalMatrices&&
v.uniformMatrix4fv(s.boneGlobalMatrices,!1,e.skeleton.boneMatrices));if(p){c&&d.fog&&(l.fogColor.value=c.color,c instanceof THREE.Fog?(l.fogNear.value=c.near,l.fogFar.value=c.far):c instanceof THREE.FogExp2&&(l.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(Sa){var n=!0,r,u=q=0,w=0,A,y,I,K=bb,E=a.matrixWorldInverse,F=K.directional.colors,G=K.directional.positions,L=K.point.colors,Q=K.point.positions,O=K.point.distances,M=
K.point.decays,H=K.spot.colors,T=K.spot.positions,J=K.spot.distances,W=K.spot.directions,ea=K.spot.anglesCos,X=K.spot.exponents,R=K.spot.decays,U=K.hemi.skyColors,Y=K.hemi.groundColors,ca=K.hemi.positions,ha=0,la=0,na=0,Z=0,ba=0,Ca=0,ka=0,ja=0,ra=r=0;c=I=ra=0;for(p=b.length;c<p;c++)r=b[c],A=r.color,y=r.intensity,I=r.distance,r instanceof THREE.AmbientLight?r.visible&&(q+=A.r,u+=A.g,w+=A.b):r instanceof THREE.DirectionalLight?(ba+=1,r.visible&&(aa.setFromMatrixPosition(r.matrixWorld),P.setFromMatrixPosition(r.target.matrixWorld),
aa.sub(P),aa.transformDirection(E),r=3*ha,G[r+0]=aa.x,G[r+1]=aa.y,G[r+2]=aa.z,C(F,r,A,y),ha+=1)):r instanceof THREE.PointLight?(Ca+=1,r.visible&&(ra=3*la,C(L,ra,A,y),P.setFromMatrixPosition(r.matrixWorld),P.applyMatrix4(E),Q[ra+0]=P.x,Q[ra+1]=P.y,Q[ra+2]=P.z,O[la]=I,M[la]=0===r.distance?0:r.decay,la+=1)):r instanceof THREE.SpotLight?(ka+=1,r.visible&&(ra=3*na,C(H,ra,A,y),aa.setFromMatrixPosition(r.matrixWorld),P.copy(aa).applyMatrix4(E),T[ra+0]=P.x,T[ra+1]=P.y,T[ra+2]=P.z,J[na]=I,P.setFromMatrixPosition(r.target.matrixWorld),
aa.sub(P),aa.transformDirection(E),W[ra+0]=aa.x,W[ra+1]=aa.y,W[ra+2]=aa.z,ea[na]=Math.cos(r.angle),X[na]=r.exponent,R[na]=0===r.distance?0:r.decay,na+=1)):r instanceof THREE.HemisphereLight&&(ja+=1,r.visible&&(aa.setFromMatrixPosition(r.matrixWorld),aa.transformDirection(E),I=3*Z,ca[I+0]=aa.x,ca[I+1]=aa.y,ca[I+2]=aa.z,A=r.color,r=r.groundColor,C(U,I,A,y),C(Y,I,r,y),Z+=1));c=3*ha;for(p=Math.max(F.length,3*ba);c<p;c++)F[c]=0;c=3*la;for(p=Math.max(L.length,3*Ca);c<p;c++)L[c]=0;c=3*na;for(p=Math.max(H.length,
3*ka);c<p;c++)H[c]=0;c=3*Z;for(p=Math.max(U.length,3*ja);c<p;c++)U[c]=0;c=3*Z;for(p=Math.max(Y.length,3*ja);c<p;c++)Y[c]=0;K.directional.length=ha;K.point.length=la;K.spot.length=na;K.hemi.length=Z;K.ambient[0]=q;K.ambient[1]=u;K.ambient[2]=w;Sa=!1}n?(n=bb,l.ambientLightColor.value=n.ambient,l.directionalLightColor.value=n.directional.colors,l.directionalLightDirection.value=n.directional.positions,l.pointLightColor.value=n.point.colors,l.pointLightPosition.value=n.point.positions,l.pointLightDistance.value=
n.point.distances,l.pointLightDecay.value=n.point.decays,l.spotLightColor.value=n.spot.colors,l.spotLightPosition.value=n.spot.positions,l.spotLightDistance.value=n.spot.distances,l.spotLightDirection.value=n.spot.directions,l.spotLightAngleCos.value=n.spot.anglesCos,l.spotLightExponent.value=n.spot.exponents,l.spotLightDecay.value=n.spot.decays,l.hemisphereLightSkyColor.value=n.hemi.skyColors,l.hemisphereLightGroundColor.value=n.hemi.groundColors,l.hemisphereLightDirection.value=n.hemi.positions,
x(l,!0)):x(l,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){l.opacity.value=d.opacity;l.diffuse.value=d.color;d.emissive&&(l.emissive.value=d.emissive);l.map.value=d.map;l.specularMap.value=d.specularMap;l.alphaMap.value=d.alphaMap;d.aoMap&&(l.aoMap.value=d.aoMap,l.aoMapIntensity.value=d.aoMapIntensity);var S;d.map?S=d.map:d.specularMap?S=d.specularMap:d.displacementMap?S=d.displacementMap:d.normalMap?S=d.normalMap:d.bumpMap?
S=d.bumpMap:d.alphaMap?S=d.alphaMap:d.emissiveMap&&(S=d.emissiveMap);void 0!==S&&(S instanceof THREE.WebGLRenderTarget&&(S=S.texture),n=S.offset,S=S.repeat,l.offsetRepeat.value.set(n.x,n.y,S.x,S.y));l.envMap.value=d.envMap;l.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;l.reflectivity.value=d.reflectivity;l.refractionRatio.value=d.refractionRatio}d instanceof THREE.LineBasicMaterial?(l.diffuse.value=d.color,l.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(l.diffuse.value=
d.color,l.opacity.value=d.opacity,l.dashSize.value=d.dashSize,l.totalSize.value=d.dashSize+d.gapSize,l.scale.value=d.scale):d instanceof THREE.PointsMaterial?(l.psColor.value=d.color,l.opacity.value=d.opacity,l.size.value=d.size,l.scale.value=N.height/2,l.map.value=d.map,null!==d.map&&(a=d.map.offset,S=d.map.repeat,l.offsetRepeat.value.set(a.x,a.y,S.x,S.y))):d instanceof THREE.MeshPhongMaterial?(l.specular.value=d.specular,l.shininess.value=Math.max(d.shininess,1E-4),d.lightMap&&(l.lightMap.value=
d.lightMap,l.lightMapIntensity.value=d.lightMapIntensity),d.emissiveMap&&(l.emissiveMap.value=d.emissiveMap),d.bumpMap&&(l.bumpMap.value=d.bumpMap,l.bumpScale.value=d.bumpScale),d.normalMap&&(l.normalMap.value=d.normalMap,l.normalScale.value.copy(d.normalScale)),d.displacementMap&&(l.displacementMap.value=d.displacementMap,l.displacementScale.value=d.displacementScale,l.displacementBias.value=d.displacementBias)):d instanceof THREE.MeshDepthMaterial?(l.mNear.value=a.near,l.mFar.value=a.far,l.opacity.value=
d.opacity):d instanceof THREE.MeshNormalMaterial&&(l.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&l.shadowMatrix)for(a=d=0,S=b.length;a<S;a++)n=b[a],!0===n.castShadow&&(n instanceof THREE.PointLight||n instanceof THREE.SpotLight||n instanceof THREE.DirectionalLight)&&(c=n.shadow,n instanceof THREE.PointLight?(P.setFromMatrixPosition(n.matrixWorld).negate(),c.matrix.identity().setPosition(P),l.shadowDarkness.value[d]=-c.darkness):l.shadowDarkness.value[d]=c.darkness,l.shadowMatrix.value[d]=
c.matrix,l.shadowMap.value[d]=c.map,l.shadowMapSize.value[d]=c.mapSize,l.shadowBias.value[d]=c.bias,d++);b=f.uniformsList;f=0;for(d=b.length;f<d;f++)if(a=b[f][0],!1!==a.needsUpdate)switch(l=a.type,c=a.value,S=b[f][1],l){case "1i":v.uniform1i(S,c);break;case "1f":v.uniform1f(S,c);break;case "2f":v.uniform2f(S,c[0],c[1]);break;case "3f":v.uniform3f(S,c[0],c[1],c[2]);break;case "4f":v.uniform4f(S,c[0],c[1],c[2],c[3]);break;case "1iv":v.uniform1iv(S,c);break;case "3iv":v.uniform3iv(S,c);break;case "1fv":v.uniform1fv(S,
c);break;case "2fv":v.uniform2fv(S,c);break;case "3fv":v.uniform3fv(S,c);break;case "4fv":v.uniform4fv(S,c);break;case "Matrix3fv":v.uniformMatrix3fv(S,!1,c);break;case "Matrix4fv":v.uniformMatrix4fv(S,!1,c);break;case "i":v.uniform1i(S,c);break;case "f":v.uniform1f(S,c);break;case "v2":v.uniform2f(S,c.x,c.y);break;case "v3":v.uniform3f(S,c.x,c.y,c.z);break;case "v4":v.uniform4f(S,c.x,c.y,c.z,c.w);break;case "c":v.uniform3f(S,c.r,c.g,c.b);break;case "iv1":v.uniform1iv(S,c);break;case "iv":v.uniform3iv(S,
c);break;case "fv1":v.uniform1fv(S,c);break;case "fv":v.uniform3fv(S,c);break;case "v2v":void 0===a._array&&(a._array=new Float32Array(2*c.length));p=l=0;for(n=c.length;l<n;l++,p+=2)a._array[p+0]=c[l].x,a._array[p+1]=c[l].y;v.uniform2fv(S,a._array);break;case "v3v":void 0===a._array&&(a._array=new Float32Array(3*c.length));p=l=0;for(n=c.length;l<n;l++,p+=3)a._array[p+0]=c[l].x,a._array[p+1]=c[l].y,a._array[p+2]=c[l].z;v.uniform3fv(S,a._array);break;case "v4v":void 0===a._array&&(a._array=new Float32Array(4*
c.length));p=l=0;for(n=c.length;l<n;l++,p+=4)a._array[p+0]=c[l].x,a._array[p+1]=c[l].y,a._array[p+2]=c[l].z,a._array[p+3]=c[l].w;v.uniform4fv(S,a._array);break;case "m3":v.uniformMatrix3fv(S,!1,c.elements);break;case "m3v":void 0===a._array&&(a._array=new Float32Array(9*c.length));l=0;for(n=c.length;l<n;l++)c[l].flattenToArrayOffset(a._array,9*l);v.uniformMatrix3fv(S,!1,a._array);break;case "m4":v.uniformMatrix4fv(S,!1,c.elements);break;case "m4v":void 0===a._array&&(a._array=new Float32Array(16*
c.length));l=0;for(n=c.length;l<n;l++)c[l].flattenToArrayOffset(a._array,16*l);v.uniformMatrix4fv(S,!1,a._array);break;case "t":p=z();v.uniform1i(S,p);if(!c)continue;c instanceof THREE.CubeTexture||Array.isArray(c.image)&&6===c.image.length?D(c,p):c instanceof THREE.WebGLRenderTargetCube?B(c.texture,p):c instanceof THREE.WebGLRenderTarget?oa.setTexture(c.texture,p):oa.setTexture(c,p);break;case "tv":void 0===a._array&&(a._array=[]);l=0;for(n=a.value.length;l<n;l++)a._array[l]=z();v.uniform1iv(S,a._array);
l=0;for(n=a.value.length;l<n;l++)c=a.value[l],p=a._array[l],c&&(c instanceof THREE.CubeTexture||c.image instanceof Array&&6===c.image.length?D(c,p):c instanceof THREE.WebGLRenderTarget?oa.setTexture(c.texture,p):c instanceof THREE.WebGLRenderTargetCube?B(c.texture,p):oa.setTexture(c,p));break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+l)}}v.uniformMatrix4fv(s.modelViewMatrix,!1,e.modelViewMatrix.elements);s.normalMatrix&&v.uniformMatrix3fv(s.normalMatrix,!1,e.normalMatrix.elements);
void 0!==s.modelMatrix&&v.uniformMatrix4fv(s.modelMatrix,!1,e.matrixWorld.elements);return g}function x(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.pointLightDecay.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=
b;a.spotLightExponent.needsUpdate=b;a.spotLightDecay.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function z(){var a=Ra;a>=ya.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+ya.maxTextures);Ra+=1;return a}function C(a,b,c,d){a[b+0]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function A(a,b,c){c?(v.texParameteri(a,v.TEXTURE_WRAP_S,M(b.wrapS)),v.texParameteri(a,
v.TEXTURE_WRAP_T,M(b.wrapT)),v.texParameteri(a,v.TEXTURE_MAG_FILTER,M(b.magFilter)),v.texParameteri(a,v.TEXTURE_MIN_FILTER,M(b.minFilter))):(v.texParameteri(a,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(a,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),b.wrapS===THREE.ClampToEdgeWrapping&&b.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",b),v.texParameteri(a,v.TEXTURE_MAG_FILTER,
G(b.magFilter)),v.texParameteri(a,v.TEXTURE_MIN_FILTER,G(b.minFilter)),b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",b));!(c=Z.get("EXT_texture_filter_anisotropic"))||b.type===THREE.FloatType&&null===Z.get("OES_texture_float_linear")||b.type===THREE.HalfFloatType&&null===Z.get("OES_texture_half_float_linear")||!(1<b.anisotropy||da.get(b).__currentAnisotropy)||
(v.texParameterf(a,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,oa.getMaxAnisotropy())),da.get(b).__currentAnisotropy=b.anisotropy)}function F(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElement("canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);
return d}return a}function E(a){return THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height)}function D(a,b){var c=da.get(a);if(6===a.image.length)if(0<a.version&&c.__version!==a.version){c.__image__webglTextureCube||(a.addEventListener("dispose",g),c.__image__webglTextureCube=v.createTexture(),Aa.textures++);R.activeTexture(v.TEXTURE0+b);R.bindTexture(v.TEXTURE_CUBE_MAP,c.__image__webglTextureCube);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,a.flipY);for(var d=a instanceof THREE.CompressedTexture,
e=a.image[0]instanceof THREE.DataTexture,f=[],h=0;6>h;h++)f[h]=!oa.autoScaleCubemaps||d||e?e?a.image[h].image:a.image[h]:F(a.image[h],ya.maxCubemapSize);var k=E(f[0]),l=M(a.format),n=M(a.type);A(v.TEXTURE_CUBE_MAP,a,k);for(h=0;6>h;h++)if(d)for(var p,q=f[h].mipmaps,r=0,s=q.length;r<s;r++)p=q[r],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<R.getCompressedTextureFormats().indexOf(l)?R.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+h,r,l,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):
R.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+h,r,l,p.width,p.height,0,l,n,p.data);else e?R.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,l,f[h].width,f[h].height,0,l,n,f[h].data):R.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,l,l,n,f[h]);a.generateMipmaps&&k&&v.generateMipmap(v.TEXTURE_CUBE_MAP);c.__version=a.version;if(a.onUpdate)a.onUpdate(a)}else R.activeTexture(v.TEXTURE0+b),R.bindTexture(v.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function B(a,b){R.activeTexture(v.TEXTURE0+b);R.bindTexture(v.TEXTURE_CUBE_MAP,
da.get(a).__webglTexture)}function H(a,b,c){v.bindFramebuffer(v.FRAMEBUFFER,a);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,c,da.get(b.texture).__webglTexture,0)}function I(a,b){v.bindRenderbuffer(v.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,b.width,b.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,b.width,
b.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,a)):v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,b.width,b.height)}function G(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?v.NEAREST:v.LINEAR}function M(a){var b;if(a===THREE.RepeatWrapping)return v.REPEAT;if(a===THREE.ClampToEdgeWrapping)return v.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return v.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return v.NEAREST;
if(a===THREE.NearestMipMapNearestFilter)return v.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return v.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return v.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return v.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return v.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return v.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return v.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return v.UNSIGNED_SHORT_5_5_5_1;
if(a===THREE.UnsignedShort565Type)return v.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return v.BYTE;if(a===THREE.ShortType)return v.SHORT;if(a===THREE.UnsignedShortType)return v.UNSIGNED_SHORT;if(a===THREE.IntType)return v.INT;if(a===THREE.UnsignedIntType)return v.UNSIGNED_INT;if(a===THREE.FloatType)return v.FLOAT;b=Z.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return b.HALF_FLOAT_OES;if(a===THREE.AlphaFormat)return v.ALPHA;if(a===THREE.RGBFormat)return v.RGB;if(a===THREE.RGBAFormat)return v.RGBA;
if(a===THREE.LuminanceFormat)return v.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return v.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return v.FUNC_ADD;if(a===THREE.SubtractEquation)return v.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return v.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return v.ZERO;if(a===THREE.OneFactor)return v.ONE;if(a===THREE.SrcColorFactor)return v.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return v.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return v.SRC_ALPHA;
if(a===THREE.OneMinusSrcAlphaFactor)return v.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return v.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return v.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return v.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return v.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return v.SRC_ALPHA_SATURATE;b=Z.get("WEBGL_compressed_texture_s3tc");if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=Z.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===THREE.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===THREE.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===THREE.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=
Z.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return b.MIN_EXT;if(a===THREE.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var N=void 0!==a.canvas?a.canvas:document.createElement("canvas"),K=void 0!==a.context?a.context:null,Q=N.width,O=N.height,L=1,T=void 0!==a.alpha?a.alpha:!1,X=void 0!==a.depth?a.depth:!0,W=void 0!==a.stencil?a.stencil:!0,U=void 0!==a.antialias?a.antialias:!1,J=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:
!0,ka=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,ba=new THREE.Color(0),ja=0,ea=[],la=[],na=-1,ha=[],ca=-1,Y=new Float32Array(8),p=[],Ca=[];this.domElement=N;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.gammaFactor=2;this.gammaOutput=this.gammaInput=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var oa=this,Za=null,Ta=null,xa=-1,Fa="",Ga=null,Ra=0,Da=0,La=0,Ma=N.width,Na=N.height,
ua=0,Va=0,Oa=new THREE.Frustum,va=new THREE.Matrix4,P=new THREE.Vector3,aa=new THREE.Vector3,Sa=!0,bb={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},Aa={geometries:0,textures:0},sa={calls:0,vertices:0,faces:0,points:0};this.info={render:sa,memory:Aa,programs:null};
var v;try{T={alpha:T,depth:X,stencil:W,antialias:U,premultipliedAlpha:J,preserveDrawingBuffer:ka};v=K||N.getContext("webgl",T)||N.getContext("experimental-webgl",T);if(null===v){if(null!==N.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}N.addEventListener("webglcontextlost",e,!1)}catch(cb){console.error("THREE.WebGLRenderer: "+cb)}var Z=new THREE.WebGLExtensions(v);Z.get("OES_texture_float");Z.get("OES_texture_float_linear");
Z.get("OES_texture_half_float");Z.get("OES_texture_half_float_linear");Z.get("OES_standard_derivatives");Z.get("ANGLE_instanced_arrays");Z.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var ya=new THREE.WebGLCapabilities(v,Z,a),R=new THREE.WebGLState(v,Z,M),da=new THREE.WebGLProperties,Ha=new THREE.WebGLObjects(v,da,this.info),Ia=new THREE.WebGLPrograms(this,ya);this.info.programs=Ia.programs;var jb=new THREE.WebGLBufferRenderer(v,Z,sa),kb=new THREE.WebGLIndexedBufferRenderer(v,
Z,sa);c();this.context=v;this.capabilities=ya;this.extensions=Z;this.state=R;var za=new THREE.WebGLShadowMap(this,ea,Ha);this.shadowMap=za;var db=new THREE.SpritePlugin(this,p),gb=new THREE.LensFlarePlugin(this,Ca);this.getContext=function(){return v};this.getContextAttributes=function(){return v.getContextAttributes()};this.forceContextLoss=function(){Z.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var a;return function(){if(void 0!==a)return a;var b=Z.get("EXT_texture_filter_anisotropic");
return a=null!==b?v.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=function(){return ya.precision};this.getPixelRatio=function(){return L};this.setPixelRatio=function(a){void 0!==a&&(L=a)};this.getSize=function(){return{width:Q,height:O}};this.setSize=function(a,b,c){Q=a;O=b;N.width=a*L;N.height=b*L;!1!==c&&(N.style.width=a+"px",N.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){Da=a*L;La=b*L;Ma=c*L;Na=d*L;v.viewport(Da,La,Ma,Na)};this.getViewport=
function(a){a.x=Da/L;a.y=La/L;a.z=Ma/L;a.w=Na/L};this.setScissor=function(a,b,c,d){v.scissor(a*L,b*L,c*L,d*L)};this.enableScissorTest=function(a){R.setScissorTest(a)};this.getClearColor=function(){return ba};this.setClearColor=function(a,c){ba.set(a);ja=void 0!==c?c:1;b(ba.r,ba.g,ba.b,ja)};this.getClearAlpha=function(){return ja};this.setClearAlpha=function(a){ja=a;b(ba.r,ba.g,ba.b,ja)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=v.COLOR_BUFFER_BIT;if(void 0===b||b)d|=v.DEPTH_BUFFER_BIT;
if(void 0===c||c)d|=v.STENCIL_BUFFER_BIT;v.clear(d)};this.clearColor=function(){v.clear(v.COLOR_BUFFER_BIT)};this.clearDepth=function(){v.clear(v.DEPTH_BUFFER_BIT)};this.clearStencil=function(){v.clear(v.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){N.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){R.initAttributes();var d=da.get(a);a.hasPositions&&!d.position&&
(d.position=v.createBuffer());a.hasNormals&&!d.normal&&(d.normal=v.createBuffer());a.hasUvs&&!d.uv&&(d.uv=v.createBuffer());a.hasColors&&!d.color&&(d.color=v.createBuffer());b=b.getAttributes();a.hasPositions&&(v.bindBuffer(v.ARRAY_BUFFER,d.position),v.bufferData(v.ARRAY_BUFFER,a.positionArray,v.DYNAMIC_DRAW),R.enableAttribute(b.position),v.vertexAttribPointer(b.position,3,v.FLOAT,!1,0,0));if(a.hasNormals){v.bindBuffer(v.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&c.shading===THREE.FlatShading)for(var e=
0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,l=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=l;g[e+3]=h;g[e+4]=k;g[e+5]=l;g[e+6]=h;g[e+7]=k;g[e+8]=l}v.bufferData(v.ARRAY_BUFFER,a.normalArray,v.DYNAMIC_DRAW);R.enableAttribute(b.normal);v.vertexAttribPointer(b.normal,3,v.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(v.bindBuffer(v.ARRAY_BUFFER,d.uv),v.bufferData(v.ARRAY_BUFFER,a.uvArray,v.DYNAMIC_DRAW),R.enableAttribute(b.uv),v.vertexAttribPointer(b.uv,2,v.FLOAT,
!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(v.bindBuffer(v.ARRAY_BUFFER,d.color),v.bufferData(v.ARRAY_BUFFER,a.colorArray,v.DYNAMIC_DRAW),R.enableAttribute(b.color),v.vertexAttribPointer(b.color,3,v.FLOAT,!1,0,0));R.disableUnusedAttributes();v.drawArrays(v.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f,g){w(e);var h=y(a,b,c,e,f),k=!1;a=d.id+"_"+h.id+"_"+e.wireframe;a!==Fa&&(Fa=a,k=!0);b=f.morphTargetInfluences;if(void 0!==b){a=[];c=0;for(k=b.length;c<k;c++){var l=
b[c];a.push([l,c])}a.sort(n);8<a.length&&(a.length=8);var p=d.morphAttributes;c=0;for(k=a.length;c<k;c++)l=a[c],Y[c]=l[0],0!==l[0]?(b=l[1],!0===e.morphTargets&&p.position&&d.addAttribute("morphTarget"+c,p.position[b]),!0===e.morphNormals&&p.normal&&d.addAttribute("morphNormal"+c,p.normal[b])):(!0===e.morphTargets&&d.removeAttribute("morphTarget"+c),!0===e.morphNormals&&d.removeAttribute("morphNormal"+c));a=h.getUniforms();null!==a.morphTargetInfluences&&v.uniform1fv(a.morphTargetInfluences,Y);k=!0}b=
d.index;c=d.attributes.position;!0===e.wireframe&&(b=Ha.getWireframeAttribute(d));null!==b?(a=kb,a.setIndex(b)):a=jb;if(k){a:{var k=void 0,q;if(d instanceof THREE.InstancedBufferGeometry&&(q=Z.get("ANGLE_instanced_arrays"),null===q)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}void 0===k&&(k=0);R.initAttributes();var l=d.attributes,h=h.getAttributes(),p=e.defaultAttributeValues,
r;for(r in h){var s=h[r];if(0<=s){var u=l[r];if(void 0!==u){var x=u.itemSize,z=Ha.getAttributeBuffer(u);if(u instanceof THREE.InterleavedBufferAttribute){var A=u.data,C=A.stride,u=u.offset;A instanceof THREE.InstancedInterleavedBuffer?(R.enableAttributeAndDivisor(s,A.meshPerAttribute,q),void 0===d.maxInstancedCount&&(d.maxInstancedCount=A.meshPerAttribute*A.count)):R.enableAttribute(s);v.bindBuffer(v.ARRAY_BUFFER,z);v.vertexAttribPointer(s,x,v.FLOAT,!1,C*A.array.BYTES_PER_ELEMENT,(k*C+u)*A.array.BYTES_PER_ELEMENT)}else u instanceof
THREE.InstancedBufferAttribute?(R.enableAttributeAndDivisor(s,u.meshPerAttribute,q),void 0===d.maxInstancedCount&&(d.maxInstancedCount=u.meshPerAttribute*u.count)):R.enableAttribute(s),v.bindBuffer(v.ARRAY_BUFFER,z),v.vertexAttribPointer(s,x,v.FLOAT,!1,0,k*x*4)}else if(void 0!==p&&(x=p[r],void 0!==x))switch(x.length){case 2:v.vertexAttrib2fv(s,x);break;case 3:v.vertexAttrib3fv(s,x);break;case 4:v.vertexAttrib4fv(s,x);break;default:v.vertexAttrib1fv(s,x)}}}R.disableUnusedAttributes()}null!==b&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,
Ha.getAttributeBuffer(b))}q=Infinity;null!==b?q=b.count:void 0!==c&&(q=c.count);r=d.drawRange.start;b=d.drawRange.count;c=null!==g?g.start:0;k=null!==g?g.count:Infinity;g=Math.max(0,r,c);q=Math.min(0+q,r+b,c+k)-1;q=Math.max(0,q-g+1);f instanceof THREE.Mesh?(!0===e.wireframe?(R.setLineWidth(e.wireframeLinewidth*L),a.setMode(v.LINES)):a.setMode(v.TRIANGLES),d instanceof THREE.InstancedBufferGeometry&&0<d.maxInstancedCount?a.renderInstances(d):a.render(g,q)):f instanceof THREE.Line?(d=e.linewidth,void 0===
d&&(d=1),R.setLineWidth(d*L),f instanceof THREE.LineSegments?a.setMode(v.LINES):a.setMode(v.LINE_STRIP),a.render(g,q)):f instanceof THREE.Points&&(a.setMode(v.POINTS),a.render(g,q))};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e=a.fog;Fa="";xa=-1;Ga=null;Sa=!0;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);
va.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Oa.setFromMatrix(va);ea.length=0;ca=na=-1;p.length=0;Ca.length=0;s(a,b);la.length=na+1;ha.length=ca+1;!0===oa.sortObjects&&(la.sort(r),ha.sort(q));za.render(a);sa.calls=0;sa.vertices=0;sa.faces=0;sa.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,u(la,b,ea,e,d),u(ha,b,ea,e,d)):(R.setBlending(THREE.NoBlending),u(la,b,ea,
e),u(ha,b,ea,e));db.render(a,b);gb.render(a,b,ua,Va);c&&(a=c.texture,b=E(c),a.generateMipmaps&&b&&a.minFilter!==THREE.NearestFilter&&a.minFilter!==THREE.LinearFilter&&(a=c instanceof THREE.WebGLRenderTargetCube?v.TEXTURE_CUBE_MAP:v.TEXTURE_2D,c=da.get(c.texture).__webglTexture,R.bindTexture(a,c),v.generateMipmap(a),R.bindTexture(a,null)));R.setDepthTest(!0);R.setDepthWrite(!0);R.setColorWrite(!0)}};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?R.disable(v.CULL_FACE):(b===THREE.FrontFaceDirectionCW?
v.frontFace(v.CW):v.frontFace(v.CCW),a===THREE.CullFaceBack?v.cullFace(v.BACK):a===THREE.CullFaceFront?v.cullFace(v.FRONT):v.cullFace(v.FRONT_AND_BACK),R.enable(v.CULL_FACE))};this.setTexture=function(a,b){var c=da.get(a);if(0<a.version&&c.__version!==a.version){var d=a.image;if(void 0===d)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",a);else if(!1===d.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",a);else{void 0===
c.__webglInit&&(c.__webglInit=!0,a.addEventListener("dispose",g),c.__webglTexture=v.createTexture(),Aa.textures++);R.activeTexture(v.TEXTURE0+b);R.bindTexture(v.TEXTURE_2D,c.__webglTexture);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,a.flipY);v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);v.pixelStorei(v.UNPACK_ALIGNMENT,a.unpackAlignment);a.image=F(a.image,ya.maxTextureSize);if((a.wrapS!==THREE.ClampToEdgeWrapping||a.wrapT!==THREE.ClampToEdgeWrapping||a.minFilter!==THREE.NearestFilter&&
a.minFilter!==THREE.LinearFilter)&&!1===E(a.image)){d=a.image;if(d instanceof HTMLImageElement||d instanceof HTMLCanvasElement){var e=document.createElement("canvas");e.width=THREE.Math.nearestPowerOfTwo(d.width);e.height=THREE.Math.nearestPowerOfTwo(d.height);e.getContext("2d").drawImage(d,0,0,e.width,e.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+d.width+"x"+d.height+"). Resized to "+e.width+"x"+e.height,d);d=e}a.image=d}var f=a.image,d=E(f),e=M(a.format),h=M(a.type);
A(v.TEXTURE_2D,a,d);var k=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<k.length&&d){for(var l=0,n=k.length;l<n;l++)f=k[l],R.texImage2D(v.TEXTURE_2D,l,e,f.width,f.height,0,e,h,f.data);a.generateMipmaps=!1}else R.texImage2D(v.TEXTURE_2D,0,e,f.width,f.height,0,e,h,f.data);else if(a instanceof THREE.CompressedTexture)for(l=0,n=k.length;l<n;l++)f=k[l],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<R.getCompressedTextureFormats().indexOf(e)?R.compressedTexImage2D(v.TEXTURE_2D,l,e,f.width,
f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R.texImage2D(v.TEXTURE_2D,l,e,f.width,f.height,0,e,h,f.data);else if(0<k.length&&d){l=0;for(n=k.length;l<n;l++)f=k[l],R.texImage2D(v.TEXTURE_2D,l,e,e,h,f);a.generateMipmaps=!1}else R.texImage2D(v.TEXTURE_2D,0,e,e,h,a.image);a.generateMipmaps&&d&&v.generateMipmap(v.TEXTURE_2D);c.__version=a.version;if(a.onUpdate)a.onUpdate(a)}}else R.activeTexture(v.TEXTURE0+b),R.bindTexture(v.TEXTURE_2D,
c.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&void 0===da.get(a).__webglFramebuffer){var c=da.get(a),d=da.get(a.texture);void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",f);d.__webglTexture=v.createTexture();Aa.textures++;var e=E(a),g=M(a.texture.format),h=M(a.texture.type);if(b){c.__webglFramebuffer=[];c.__webglRenderbuffer=[];R.bindTexture(v.TEXTURE_CUBE_MAP,d.__webglTexture);
A(v.TEXTURE_CUBE_MAP,a.texture,e);for(d=0;6>d;d++)c.__webglFramebuffer[d]=v.createFramebuffer(),c.__webglRenderbuffer[d]=v.createRenderbuffer(),R.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,a.width,a.height,0,g,h,null),H(c.__webglFramebuffer[d],a,v.TEXTURE_CUBE_MAP_POSITIVE_X+d),I(c.__webglRenderbuffer[d],a);a.texture.generateMipmaps&&e&&v.generateMipmap(v.TEXTURE_CUBE_MAP)}else c.__webglFramebuffer=v.createFramebuffer(),c.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:
v.createRenderbuffer(),R.bindTexture(v.TEXTURE_2D,d.__webglTexture),A(v.TEXTURE_2D,a.texture,e),R.texImage2D(v.TEXTURE_2D,0,g,a.width,a.height,0,g,h,null),H(c.__webglFramebuffer,a,v.TEXTURE_2D),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,c.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,c.__webglRenderbuffer):I(c.__webglRenderbuffer,
a),a.texture.generateMipmaps&&e&&v.generateMipmap(v.TEXTURE_2D);b?R.bindTexture(v.TEXTURE_CUBE_MAP,null):R.bindTexture(v.TEXTURE_2D,null);v.bindRenderbuffer(v.RENDERBUFFER,null);v.bindFramebuffer(v.FRAMEBUFFER,null)}a?(c=da.get(a),d=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,c=a.width,e=a.height,h=g=0):(d=null,c=Ma,e=Na,g=Da,h=La);d!==Ta&&(v.bindFramebuffer(v.FRAMEBUFFER,d),v.viewport(g,h,c,e),Ta=d);b&&(d=da.get(a.texture),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,
v.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,d.__webglTexture,0));ua=c;Va=e};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(!1===a instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var g=da.get(a).__webglFramebuffer;if(g){var h=!1;g!==Ta&&(v.bindFramebuffer(v.FRAMEBUFFER,g),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&M(k.format)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
k.type===THREE.UnsignedByteType||M(k.type)===v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&Z.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&Z.get("EXT_color_buffer_half_float")?v.checkFramebufferStatus(v.FRAMEBUFFER)===v.FRAMEBUFFER_COMPLETE?v.readPixels(b,c,d,e,M(k.format),M(k.type),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&
v.bindFramebuffer(v.FRAMEBUFFER,Ta)}}}};this.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return Z.get("OES_texture_float")};this.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return Z.get("OES_texture_half_float")};this.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return Z.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return Z.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return Z.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=
function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return Z.get("EXT_blend_minmax")};this.supportsVertexTextures=function(){return ya.vertexTextures};this.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return Z.get("ANGLE_instanced_arrays")};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};
this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Object.defineProperties(this,{shadowMapEnabled:{get:function(){return za.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");za.enabled=
a}},shadowMapType:{get:function(){return za.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");za.type=a}},shadowMapCullFace:{get:function(){return za.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");za.cullFace=a}},shadowMapDebug:{get:function(){return za.debug},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.");za.debug=a}}})};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.shareDepthFrom=void 0!==c.shareDepthFrom?c.shareDepthFrom:null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,get wrapS(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set wrapS(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a},get wrapT(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set wrapT(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a},
get magFilter(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set magFilter(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a},get minFilter(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set minFilter(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a},get anisotropy(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return this.texture.anisotropy},set anisotropy(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a},get offset(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set offset(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a},get repeat(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set repeat(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
this.texture.repeat=a},get format(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set format(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a},get type(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set type(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a},get generateMipmaps(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");
return this.texture.generateMipmaps},set generateMipmaps(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a},setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose()},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.shareDepthFrom=
a.shareDepthFrom;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,g){a.drawArrays(d,b,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");if(null===c)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var f=a.attributes.position;f instanceof THREE.InterleavedBufferAttribute?c.drawArraysInstancedANGLE(d,
0,f.data.count,a.maxInstancedCount):c.drawArraysInstancedANGLE(d,0,f.count,a.maxInstancedCount)}}};
THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(b,h){a.drawElements(d,h,e,b*g);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");null===c?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
c.drawElementsInstancedANGLE(d,a.index.array.length,e,0,a.maxInstancedCount)}};
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];var d;switch(c){case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}};
THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";
this.logarithmicDepthBuffer=void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);
this.maxFragmentUniforms=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(a,b,c){function d(a){a=a.target;var h=g[a.id].attributes,k;for(k in h)e(h[k]);a.removeEventListener("dispose",d);delete g[a.id];k=b.get(a);k.wireframe&&e(k.wireframe);c.memory.geometries--}function e(c){var d;d=c instanceof THREE.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof THREE.InterleavedBufferAttribute?b.delete(c.data):b.delete(c))}var g={};this.get=function(a){var b=a.geometry;if(void 0!==
g[b.id])return g[b.id];b.addEventListener("dispose",d);var e;b instanceof THREE.BufferGeometry?e=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e=b._bufferGeometry);g[b.id]=e;c.memory.geometries++;return e}};
THREE.WebGLObjects=function(a,b,c){function d(c,d){var e=c instanceof THREE.InterleavedBufferAttribute?c.data:c,g=b.get(e);void 0===g.__webglBuffer?(g.__webglBuffer=a.createBuffer(),a.bindBuffer(d,g.__webglBuffer),a.bufferData(d,e.array,e.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),g.version=e.version):g.version!==e.version&&(a.bindBuffer(d,g.__webglBuffer),!1===e.dynamic||-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(d,e.updateRange.offset*e.array.BYTES_PER_ELEMENT,e.array.subarray(e.updateRange.offset,e.updateRange.offset+e.updateRange.count)),e.updateRange.count=0),g.version=e.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var g=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var g=b.get(c);if(void 0!==g.wireframe)return g.wireframe;var k=[],n=c.index,r=c.attributes;c=r.position;if(null!==n)for(var r={},n=n.array,q=0,l=n.length;q<l;q+=3){var s=n[q+0],u=n[q+1],w=n[q+2];e(r,s,u)&&k.push(s,u);e(r,u,w)&&k.push(u,w);e(r,w,s)&&k.push(w,s)}else for(n=r.position.array,q=0,l=n.length/3-1;q<l;q+=3)s=q+0,u=q+1,w=q+2,k.push(s,u,u,w,w,s);k=new THREE.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(k),1);d(k,a.ELEMENT_ARRAY_BUFFER);return g.wireframe=k};this.update=
function(b){var c=g.get(b);b.geometry instanceof THREE.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var n in e)d(e[n],a.ARRAY_BUFFER);b=c.morphAttributes;for(n in b)for(var e=b[n],r=0,q=e.length;r<q;r++)d(e[r],a.ARRAY_BUFFER);return c}};
THREE.WebGLProgram=function(){function a(a){var b=[],c;for(c in a){var f=a[c];!1!==f&&b.push("#define "+c+" "+f)}return b.join("\n")}function b(a){return""!==a}var c=0;return function(d,e,g,f){var h=d.context,k=g.defines,n=g.__webglShader.vertexShader,r=g.__webglShader.fragmentShader,q="SHADOWMAP_TYPE_BASIC";f.shadowMapType===THREE.PCFShadowMap?q="SHADOWMAP_TYPE_PCF":f.shadowMapType===THREE.PCFSoftShadowMap&&(q="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",s="ENVMAP_MODE_REFLECTION",u="ENVMAP_BLENDING_MULTIPLY";
if(f.envMap){switch(g.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:l="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:l="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:l="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:s="ENVMAP_MODE_REFRACTION"}switch(g.combine){case THREE.MultiplyOperation:u="ENVMAP_BLENDING_MULTIPLY";
break;case THREE.MixOperation:u="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:u="ENVMAP_BLENDING_ADD"}}var w=0<d.gammaFactor?d.gammaFactor:1,y=a(k),x=h.createProgram();g instanceof THREE.RawShaderMaterial?d=k="":(k=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,y,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+w,"#define MAX_DIR_LIGHTS "+
f.maxDirLights,"#define MAX_POINT_LIGHTS "+f.maxPointLights,"#define MAX_SPOT_LIGHTS "+f.maxSpotLights,"#define MAX_HEMI_LIGHTS "+f.maxHemiLights,"#define MAX_SHADOWS "+f.maxShadows,"#define MAX_BONES "+f.maxBones,f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+s:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&
f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?
"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<f.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;",
"uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;",
"\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(b).join("\n"),d=[f.bumpMap||f.normalMap||f.flatShading||g.derivatives?"#extension GL_OES_standard_derivatives : enable":"",f.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+f.precision+" float;","precision "+
f.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,y,"#define MAX_DIR_LIGHTS "+f.maxDirLights,"#define MAX_POINT_LIGHTS "+f.maxPointLights,"#define MAX_SPOT_LIGHTS "+f.maxSpotLights,"#define MAX_HEMI_LIGHTS "+f.maxHemiLights,"#define MAX_SHADOWS "+f.maxShadows,f.alphaTest?"#define ALPHATEST "+f.alphaTest:"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+w,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":
"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+l:"",f.envMap?"#define "+s:"",f.envMap?"#define "+u:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.metal?"#define METAL":
"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+q:"",f.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",0<f.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(b).join("\n"));r=d+r;
n=THREE.WebGLShader(h,h.VERTEX_SHADER,k+n);r=THREE.WebGLShader(h,h.FRAGMENT_SHADER,r);h.attachShader(x,n);h.attachShader(x,r);void 0!==g.index0AttributeName?h.bindAttribLocation(x,0,g.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(x,0,"position");h.linkProgram(x);f=h.getProgramInfoLog(x);q=h.getShaderInfoLog(n);l=h.getShaderInfoLog(r);u=s=!0;if(!1===h.getProgramParameter(x,h.LINK_STATUS))s=!1,console.error("THREE.WebGLProgram: shader error: ",h.getError(),"gl.VALIDATE_STATUS",h.getProgramParameter(x,
h.VALIDATE_STATUS),"gl.getProgramInfoLog",f,q,l);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===q||""===l)u=!1;u&&(this.diagnostics={runnable:s,material:g,programLog:f,vertexShader:{log:q,prefix:k},fragmentShader:{log:l,prefix:d}});h.deleteShader(n);h.deleteShader(r);var z;this.getUniforms=function(){if(void 0===z){for(var a={},b=h.getProgramParameter(x,h.ACTIVE_UNIFORMS),c=0;c<b;c++){var d=h.getActiveUniform(x,c).name,e=h.getUniformLocation(x,d),f=d.lastIndexOf("[0]");
-1!==f&&f===d.length-3&&(a[d.substr(0,f)]=e);a[d]=e}z=a}return z};var C;this.getAttributes=function(){if(void 0===C){for(var a={},b=h.getProgramParameter(x,h.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=h.getActiveAttrib(x,c).name;a[d]=h.getAttribLocation(x,d)}C=a}return C};this.destroy=function(){h.deleteProgram(x);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");
return this.getAttributes()}}});this.id=c++;this.code=e;this.usedTimes=1;this.program=x;this.vertexShader=n;this.fragmentShader=r;return this}}();
THREE.WebGLPrograms=function(a,b){var c=[],d={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},e="precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap displacementMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled pointLightShadows shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");this.getParameters=
function(c,e,h,k){var n,r,q,l,s,u=d[c.type];n=s=l=q=r=0;for(var w=e.length;n<w;n++){var y=e[n];!1!==y.visible&&(y instanceof THREE.DirectionalLight&&r++,y instanceof THREE.PointLight&&q++,y instanceof THREE.SpotLight&&l++,y instanceof THREE.HemisphereLight&&s++)}for(var y=n=w=0,x=e.length;y<x;y++){var z=e[y];z.castShadow&&((z instanceof THREE.SpotLight||z instanceof THREE.DirectionalLight)&&w++,z instanceof THREE.PointLight&&(w++,n++))}e=w;b.floatVertexTextures&&k&&k.skeleton&&k.skeleton.useVertexTexture?
w=1024:(w=Math.floor((b.maxVertexUniforms-20)/4),void 0!==k&&k instanceof THREE.SkinnedMesh&&(w=Math.min(k.skeleton.bones.length,w),w<k.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+k.skeleton.bones.length+", this GPU supports just "+w+" (try OpenGL instead of ANGLE)")));y=a.getPrecision();null!==c.precision&&(y=b.getMaxPrecision(c.precision),y!==c.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",c.precision,"not supported, using",y,"instead."));return{shaderID:u,
precision:y,supportsVertexTextures:b.vertexTextures,map:!!c.map,envMap:!!c.envMap,envMapMode:c.envMap&&c.envMap.mapping,lightMap:!!c.lightMap,aoMap:!!c.aoMap,emissiveMap:!!c.emissiveMap,bumpMap:!!c.bumpMap,normalMap:!!c.normalMap,displacementMap:!!c.displacementMap,specularMap:!!c.specularMap,alphaMap:!!c.alphaMap,combine:c.combine,vertexColors:c.vertexColors,fog:h,useFog:c.fog,fogExp:h instanceof THREE.FogExp2,flatShading:c.shading===THREE.FlatShading,sizeAttenuation:c.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,
skinning:c.skinning,maxBones:w,useVertexTexture:b.floatVertexTextures&&k&&k.skeleton&&k.skeleton.useVertexTexture,morphTargets:c.morphTargets,morphNormals:c.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,maxDirLights:r,maxPointLights:q,maxSpotLights:l,maxHemiLights:s,maxShadows:e,pointLightShadows:n,shadowMapEnabled:a.shadowMap.enabled&&k.receiveShadow&&0<e,shadowMapType:a.shadowMap.type,shadowMapDebug:a.shadowMap.debug,alphaTest:c.alphaTest,metal:c.metal,doubleSided:c.side===
THREE.DoubleSide,flipSided:c.side===THREE.BackSide}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(d=0;d<e.length;d++){var n=e[d];c.push(n);c.push(b[n])}return c.join()};this.acquireProgram=function(b,d,e){for(var k,n=0,r=c.length;n<r;n++){var q=c[n];if(q.code===e){k=q;++k.usedTimes;break}}void 0===k&&(k=new THREE.WebGLProgram(a,e,b,d),c.push(k));
return k};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=c.indexOf(a);c[b]=c[c.length-1];c.pop();a.destroy()}};this.programs=c};THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
THREE.WebGLShader=function(){function a(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
THREE.WebGLShadowMap=function(a,b,c){function d(a,b,c,d){var e=a.geometry,f=null,f=l,g=a.customDepthMaterial;c&&(f=s,g=a.customDistanceMaterial);g?f=g:(a=a instanceof THREE.SkinnedMesh&&b.skinning,g=0,void 0!==e.morphTargets&&0<e.morphTargets.length&&b.morphTargets&&(g|=1),a&&(g|=2),f=f[g]);f.visible=b.visible;f.wireframe=b.wireframe;f.wireframeLinewidth=b.wireframeLinewidth;c&&void 0!==f.uniforms.lightPos&&f.uniforms.lightPos.value.copy(d);return f}function e(a,b){if(!1!==a.visible){(a instanceof
THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===h.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld),q.push(a));for(var c=a.children,d=0,f=c.length;d<f;d++)e(c[d],b)}}var g=a.context,f=a.state,h=new THREE.Frustum,k=new THREE.Matrix4;new THREE.Vector3;new THREE.Vector3;for(var n=new THREE.Vector3,r=new THREE.Vector3,q=[],l=Array(4),s=Array(4),u=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,
0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],w=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],y=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],x=new THREE.Vector4,z=THREE.ShaderLib.depthRGBA,C=THREE.UniformsUtils.clone(z.uniforms),A=THREE.ShaderLib.distanceRGBA,F=THREE.UniformsUtils.clone(A.uniforms),
E=0;4!==E;++E){var D=0!==(E&1),B=0!==(E&2),H=new THREE.ShaderMaterial({uniforms:C,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader,morphTargets:D,skinning:B});H._shadowPass=!0;l[E]=H;D=new THREE.ShaderMaterial({uniforms:F,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,morphTargets:D,skinning:B});D._shadowPass=!0;s[E]=D}var I=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=THREE.PCFShadowMap;this.cullFace=THREE.CullFaceFront;this.render=function(l){var s,
z;if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)){g.clearColor(1,1,1,1);f.disable(g.BLEND);f.enable(g.CULL_FACE);g.frontFace(g.CCW);g.cullFace(I.cullFace===THREE.CullFaceFront?g.FRONT:g.BACK);f.setDepthTest(!0);a.getViewport(x);for(var A=0,C=b.length;A<C;A++){var D=b[A];if(!0===D.castShadow){var B=D.shadow,F=B.camera,E=B.mapSize;if(D instanceof THREE.PointLight){s=6;z=!0;var H=E.x/4,U=E.y/2;y[0].set(2*H,U,H,U);y[1].set(0,U,H,U);y[2].set(3*H,U,H,U);y[3].set(H,U,H,U);y[4].set(3*H,0,H,U);
y[5].set(H,0,H,U)}else s=1,z=!1;null===B.map&&(H=THREE.LinearFilter,I.type===THREE.PCFSoftShadowMap&&(H=THREE.NearestFilter),B.map=new THREE.WebGLRenderTarget(E.x,E.y,{minFilter:H,magFilter:H,format:THREE.RGBAFormat}),B.matrix=new THREE.Matrix4,D instanceof THREE.SpotLight&&(F.aspect=E.x/E.y),F.updateProjectionMatrix());E=B.map;B=B.matrix;r.setFromMatrixPosition(D.matrixWorld);F.position.copy(r);a.setRenderTarget(E);a.clear();for(E=0;E<s;E++)for(z?(n.copy(F.position),n.add(u[E]),F.up.copy(w[E]),F.lookAt(n),
H=y[E],a.setViewport(H.x,H.y,H.z,H.w)):(n.setFromMatrixPosition(D.target.matrixWorld),F.lookAt(n)),F.updateMatrixWorld(),F.matrixWorldInverse.getInverse(F.matrixWorld),B.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B.multiply(F.projectionMatrix),B.multiply(F.matrixWorldInverse),k.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),h.setFromMatrix(k),q.length=0,e(l,F),H=0,U=q.length;H<U;H++){var J=q[H],ka=c.update(J),ba=J.material;if(ba instanceof THREE.MeshFaceMaterial)for(var ja=ka.groups,ba=
ba.materials,ea=0,la=ja.length;ea<la;ea++){var na=ja[ea],ha=ba[na.materialIndex];!0===ha.visible&&(ha=d(J,ha,z,r),a.renderBufferDirect(F,b,null,ka,ha,J,na))}else ha=d(J,ba,z,r),a.renderBufferDirect(F,b,null,ka,ha,J,null)}a.resetGLState()}}a.setViewport(x.x,x.y,x.z,x.w);l=a.getClearColor();s=a.getClearAlpha();a.setClearColor(l,s);f.enable(g.BLEND);I.cullFace===THREE.CullFaceFront&&g.cullFace(g.BACK);a.resetGLState();I.needsUpdate=!1}}};
THREE.WebGLState=function(a,b,c){var d=this,e=new Uint8Array(16),g=new Uint8Array(16),f=new Uint8Array(16),h={},k=null,n=null,r=null,q=null,l=null,s=null,u=null,w=null,y=null,x=null,z=null,C=null,A=null,F=null,E=null,D=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),B=void 0,H={};this.init=function(){a.clearColor(0,0,0,1);a.clearDepth(1);a.clearStencil(0);this.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.frontFace(a.CCW);a.cullFace(a.BACK);this.enable(a.CULL_FACE);this.enable(a.BLEND);a.blendEquation(a.FUNC_ADD);
a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)};this.initAttributes=function(){for(var a=0,b=e.length;a<b;a++)e[a]=0};this.enableAttribute=function(c){e[c]=1;0===g[c]&&(a.enableVertexAttribArray(c),g[c]=1);0!==f[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),f[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){e[b]=1;0===g[b]&&(a.enableVertexAttribArray(b),g[b]=1);f[b]!==c&&(d.vertexAttribDivisorANGLE(b,c),f[b]=c)};this.disableUnusedAttributes=function(){for(var b=0,c=g.length;b<
c;b++)g[b]!==e[b]&&(a.disableVertexAttribArray(b),g[b]=0)};this.enable=function(b){!0!==h[b]&&(a.enable(b),h[b]=!0)};this.disable=function(b){!1!==h[b]&&(a.disable(b),h[b]=!1)};this.getCompressedTextureFormats=function(){if(null===k&&(k=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)k.push(c[d]);return k};this.setBlending=function(b,d,e,f,g,h,k){b!==n&&(b===THREE.NoBlending?this.disable(a.BLEND):
b===THREE.AdditiveBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===THREE.SubtractiveBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):b===THREE.MultiplyBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):b===THREE.CustomBlending?this.enable(a.BLEND):(this.enable(a.BLEND),a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,
a.ONE,a.ONE_MINUS_SRC_ALPHA)),n=b);if(b===THREE.CustomBlending){g=g||d;h=h||e;k=k||f;if(d!==r||g!==s)a.blendEquationSeparate(c(d),c(g)),r=d,s=g;if(e!==q||f!==l||h!==u||k!==w)a.blendFuncSeparate(c(e),c(f),c(h),c(k)),q=e,l=f,u=h,w=k}else w=u=s=l=q=r=null};this.setDepthFunc=function(b){if(y!==b){if(b)switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);
break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);y=b}};this.setDepthTest=function(b){b?this.enable(a.DEPTH_TEST):this.disable(a.DEPTH_TEST)};this.setDepthWrite=function(b){x!==b&&(a.depthMask(b),x=b)};this.setColorWrite=function(b){z!==b&&(a.colorMask(b,b,b,b),z=b)};this.setFlipSided=
function(b){C!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),C=b)};this.setLineWidth=function(b){b!==A&&(a.lineWidth(b),A=b)};this.setPolygonOffset=function(b,c,d){b?this.enable(a.POLYGON_OFFSET_FILL):this.disable(a.POLYGON_OFFSET_FILL);!b||F===c&&E===d||(a.polygonOffset(c,d),F=c,E=d)};this.setScissorTest=function(b){b?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+D-1);B!==b&&(a.activeTexture(b),B=b)};this.bindTexture=function(b,c){void 0===
B&&d.activeTexture();var e=H[B];void 0===e&&(e={type:void 0,texture:void 0},H[B]=e);if(e.type!==b||e.texture!==c)a.bindTexture(b,c),e.type=b,e.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.reset=function(){for(var b=0;b<g.length;b++)1===g[b]&&(a.disableVertexAttribArray(b),g[b]=0);h={};C=z=x=n=k=null}};
THREE.LensFlarePlugin=function(a,b){var c,d,e,g,f,h,k,n,r,q,l=a.context,s=a.state,u,w,y,x,z,C;this.render=function(A,F,E,D){if(0!==b.length){A=new THREE.Vector3;var B=D/E,H=.5*E,I=.5*D,G=16/D,M=new THREE.Vector2(G*B,G),N=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1);if(void 0===y){var G=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),Q=new Uint16Array([0,1,2,0,2,3]);u=l.createBuffer();w=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,u);l.bufferData(l.ARRAY_BUFFER,G,l.STATIC_DRAW);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
w);l.bufferData(l.ELEMENT_ARRAY_BUFFER,Q,l.STATIC_DRAW);z=l.createTexture();C=l.createTexture();s.bindTexture(l.TEXTURE_2D,z);l.texImage2D(l.TEXTURE_2D,0,l.RGB,16,16,0,l.RGB,l.UNSIGNED_BYTE,null);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);s.bindTexture(l.TEXTURE_2D,C);l.texImage2D(l.TEXTURE_2D,0,
l.RGBA,16,16,0,l.RGBA,l.UNSIGNED_BYTE,null);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);var G=(x=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
Q=l.createProgram(),O=l.createShader(l.FRAGMENT_SHADER),L=l.createShader(l.VERTEX_SHADER),T="precision "+a.getPrecision()+" float;\n";l.shaderSource(O,T+G.fragmentShader);l.shaderSource(L,T+G.vertexShader);l.compileShader(O);l.compileShader(L);l.attachShader(Q,O);l.attachShader(Q,L);l.linkProgram(Q);y=Q;r=l.getAttribLocation(y,"position");q=l.getAttribLocation(y,"uv");c=l.getUniformLocation(y,"renderType");d=l.getUniformLocation(y,"map");e=l.getUniformLocation(y,"occlusionMap");g=l.getUniformLocation(y,
"opacity");f=l.getUniformLocation(y,"color");h=l.getUniformLocation(y,"scale");k=l.getUniformLocation(y,"rotation");n=l.getUniformLocation(y,"screenPosition")}l.useProgram(y);s.initAttributes();s.enableAttribute(r);s.enableAttribute(q);s.disableUnusedAttributes();l.uniform1i(e,0);l.uniform1i(d,1);l.bindBuffer(l.ARRAY_BUFFER,u);l.vertexAttribPointer(r,2,l.FLOAT,!1,16,0);l.vertexAttribPointer(q,2,l.FLOAT,!1,16,8);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,w);s.disable(l.CULL_FACE);l.depthMask(!1);Q=0;for(O=
b.length;Q<O;Q++)if(G=16/D,M.set(G*B,G),L=b[Q],A.set(L.matrixWorld.elements[12],L.matrixWorld.elements[13],L.matrixWorld.elements[14]),A.applyMatrix4(F.matrixWorldInverse),A.applyProjection(F.projectionMatrix),N.copy(A),K.x=N.x*H+H,K.y=N.y*I+I,x||0<K.x&&K.x<E&&0<K.y&&K.y<D){s.activeTexture(l.TEXTURE0);s.bindTexture(l.TEXTURE_2D,null);s.activeTexture(l.TEXTURE1);s.bindTexture(l.TEXTURE_2D,z);l.copyTexImage2D(l.TEXTURE_2D,0,l.RGB,K.x-8,K.y-8,16,16,0);l.uniform1i(c,0);l.uniform2f(h,M.x,M.y);l.uniform3f(n,
N.x,N.y,N.z);s.disable(l.BLEND);s.enable(l.DEPTH_TEST);l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0);s.activeTexture(l.TEXTURE0);s.bindTexture(l.TEXTURE_2D,C);l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,K.x-8,K.y-8,16,16,0);l.uniform1i(c,1);s.disable(l.DEPTH_TEST);s.activeTexture(l.TEXTURE1);s.bindTexture(l.TEXTURE_2D,z);l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0);L.positionScreen.copy(N);L.customUpdateCallback?L.customUpdateCallback(L):L.updateLensFlares();l.uniform1i(c,2);s.enable(l.BLEND);for(var T=
0,X=L.lensFlares.length;T<X;T++){var W=L.lensFlares[T];.001<W.opacity&&.001<W.scale&&(N.x=W.x,N.y=W.y,N.z=W.z,G=W.size*W.scale/D,M.x=G*B,M.y=G,l.uniform3f(n,N.x,N.y,N.z),l.uniform2f(h,M.x,M.y),l.uniform1f(k,W.rotation),l.uniform1f(g,W.opacity),l.uniform3f(f,W.color.r,W.color.g,W.color.b),s.setBlending(W.blending,W.blendEquation,W.blendSrc,W.blendDst),a.setTexture(W.texture,1),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0))}}s.enable(l.CULL_FACE);s.enable(l.DEPTH_TEST);l.depthMask(!0);a.resetGLState()}}};
THREE.SpritePlugin=function(a,b){var c,d,e,g,f,h,k,n,r,q,l,s,u,w,y,x,z;function C(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var A=a.context,F=a.state,E,D,B,H,I=new THREE.Vector3,G=new THREE.Quaternion,M=new THREE.Vector3;this.render=function(N,K){if(0!==b.length){if(void 0===B){var Q=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),O=new Uint16Array([0,1,2,0,2,3]);E=A.createBuffer();D=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,E);A.bufferData(A.ARRAY_BUFFER,Q,A.STATIC_DRAW);A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,
D);A.bufferData(A.ELEMENT_ARRAY_BUFFER,O,A.STATIC_DRAW);var Q=A.createProgram(),O=A.createShader(A.VERTEX_SHADER),L=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(O,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
A.shaderSource(L,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
A.compileShader(O);A.compileShader(L);A.attachShader(Q,O);A.attachShader(Q,L);A.linkProgram(Q);B=Q;x=A.getAttribLocation(B,"position");z=A.getAttribLocation(B,"uv");c=A.getUniformLocation(B,"uvOffset");d=A.getUniformLocation(B,"uvScale");e=A.getUniformLocation(B,"rotation");g=A.getUniformLocation(B,"scale");f=A.getUniformLocation(B,"color");h=A.getUniformLocation(B,"map");k=A.getUniformLocation(B,"opacity");n=A.getUniformLocation(B,"modelViewMatrix");r=A.getUniformLocation(B,"projectionMatrix");q=
A.getUniformLocation(B,"fogType");l=A.getUniformLocation(B,"fogDensity");s=A.getUniformLocation(B,"fogNear");u=A.getUniformLocation(B,"fogFar");w=A.getUniformLocation(B,"fogColor");y=A.getUniformLocation(B,"alphaTest");Q=document.createElement("canvas");Q.width=8;Q.height=8;O=Q.getContext("2d");O.fillStyle="white";O.fillRect(0,0,8,8);H=new THREE.Texture(Q);H.needsUpdate=!0}A.useProgram(B);F.initAttributes();F.enableAttribute(x);F.enableAttribute(z);F.disableUnusedAttributes();F.disable(A.CULL_FACE);
F.enable(A.BLEND);A.bindBuffer(A.ARRAY_BUFFER,E);A.vertexAttribPointer(x,2,A.FLOAT,!1,16,0);A.vertexAttribPointer(z,2,A.FLOAT,!1,16,8);A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,D);A.uniformMatrix4fv(r,!1,K.projectionMatrix.elements);F.activeTexture(A.TEXTURE0);A.uniform1i(h,0);O=Q=0;(L=N.fog)?(A.uniform3f(w,L.color.r,L.color.g,L.color.b),L instanceof THREE.Fog?(A.uniform1f(s,L.near),A.uniform1f(u,L.far),A.uniform1i(q,1),O=Q=1):L instanceof THREE.FogExp2&&(A.uniform1f(l,L.density),A.uniform1i(q,2),O=Q=2)):
(A.uniform1i(q,0),O=Q=0);for(var L=0,T=b.length;L<T;L++){var X=b[L];X.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,X.matrixWorld);X.z=-X.modelViewMatrix.elements[14]}b.sort(C);for(var W=[],L=0,T=b.length;L<T;L++){var X=b[L],U=X.material;A.uniform1f(y,U.alphaTest);A.uniformMatrix4fv(n,!1,X.modelViewMatrix.elements);X.matrixWorld.decompose(I,G,M);W[0]=M.x;W[1]=M.y;X=0;N.fog&&U.fog&&(X=O);Q!==X&&(A.uniform1i(q,X),Q=X);null!==U.map?(A.uniform2f(c,U.map.offset.x,U.map.offset.y),A.uniform2f(d,
U.map.repeat.x,U.map.repeat.y)):(A.uniform2f(c,0,0),A.uniform2f(d,1,1));A.uniform1f(k,U.opacity);A.uniform3f(f,U.color.r,U.color.g,U.color.b);A.uniform1f(e,U.rotation);A.uniform2fv(g,W);F.setBlending(U.blending,U.blendEquation,U.blendSrc,U.blendDst);F.setDepthTest(U.depthTest);F.setDepthWrite(U.depthWrite);U.map&&U.map.image&&U.map.image.width?a.setTexture(U.map,0):a.setTexture(H,0);A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,0)}F.enable(A.CULL_FACE);a.resetGLState()}}};
THREE.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture is being deprecated. Use THREE.TextureLoader() instead.");var e=new THREE.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");var e=new THREE.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,
c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Group,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],f,h,k;if(0<THREE.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var n=2*c;for(h=c-1;2<c;){if(0>=n--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}f=h;c<=f&&(f=0);h=f+1;c<=h&&(h=0);k=h+1;c<=k&&(k=0);var r;a:{var q=
r=void 0,l=void 0,s=void 0,u=void 0,w=void 0,y=void 0,x=void 0,z=void 0,q=a[e[f]].x,l=a[e[f]].y,s=a[e[h]].x,u=a[e[h]].y,w=a[e[k]].x,y=a[e[k]].y;if(Number.EPSILON>(s-q)*(y-l)-(u-l)*(w-q))r=!1;else{var C=void 0,A=void 0,F=void 0,E=void 0,D=void 0,B=void 0,H=void 0,I=void 0,G=void 0,M=void 0,G=I=H=z=x=void 0,C=w-s,A=y-u,F=q-w,E=l-y,D=s-q,B=u-l;for(r=0;r<c;r++)if(x=a[e[r]].x,z=a[e[r]].y,!(x===q&&z===l||x===s&&z===u||x===w&&z===y)&&(H=x-q,I=z-l,G=x-s,M=z-u,x-=w,z-=y,G=C*M-A*G,H=D*I-B*H,I=F*z-E*x,G>=-Number.EPSILON&&
I>=-Number.EPSILON&&H>=-Number.EPSILON)){r=!1;break a}r=!0}}if(r){d.push([a[e[f]],a[e[h]],a[e[k]]]);g.push([e[f],e[h],e[k]]);f=h;for(k=h+1;k<c;f++,k++)e[f]=e[k];c--;n=2*c}}return b?g:d}}(),triangulateShape:function(a,b){function c(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-d.x,n=e.y-d.y,q=a.x-d.x,r=a.y-d.y,D=h*k-g*n,B=h*q-g*r;if(Math.abs(D)>Number.EPSILON){if(0<D){if(0>B||B>
D)return[];k=n*q-k*r;if(0>k||k>D)return[]}else{if(0<B||B<D)return[];k=n*q-k*r;if(0<k||k<D)return[]}if(0===k)return!f||0!==B&&B!==D?[a]:[];if(k===D)return!f||0!==B&&B!==D?[b]:[];if(0===B)return[d];if(B===D)return[e];f=k/D;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==B||n*q!==k*r)return[];h=0===g&&0===h;k=0===k&&0===n;if(h&&k)return a.x!==d.x||a.y!==d.y?[]:[a];if(h)return c(d,e,a)?[a]:[];if(k)return c(a,b,d)?[d]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,D=d.x,n=e,d=e.x):(b=
e,D=e.x,n=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,D=d.y,n=e,d=e.y):(b=e,D=e.y,n=d,d=d.y));return k<=D?a<D?[]:a===D?f?[]:[b]:a<=d?[b,h]:[b,n]:k>d?[]:k===d?f?[]:[g]:a<=d?[g,h]:[g,n]}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var g,f,h,k,n,r={};h=a.concat();g=0;for(f=b.length;g<f;g++)Array.prototype.push.apply(h,b[g]);g=0;for(f=
h.length;g<f;g++)n=h[g].x+":"+h[g].y,void 0!==r[n]&&console.warn("THREE.Shape: Duplicate point",n),r[n]=g;g=function(a,b){function c(a,b){var d=h.length-1,f=a-1;0>f&&(f=d);var g=a+1;g>d&&(g=0);d=e(h[a],h[f],h[g],k[b]);if(!d)return!1;d=k.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return(d=e(k[b],k[f],k[g],h[a]))?!0:!1}function f(a,b){var c,e;for(c=0;c<h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function g(a,c){var e,f,h,k;for(e=0;e<n.length;e++)for(f=b[n[e]],
h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,n=[],q,r,E,D,B,H=[],I,G,M,N=0;for(q=b.length;N<q;N++)n.push(N);I=0;for(var K=2*n.length;0<n.length;){K--;if(0>K){console.log("Infinite Loop! Holes left:"+n.length+", Probably Hole outside Shape!");break}for(r=I;r<h.length;r++){E=h[r];q=-1;for(N=0;N<n.length;N++)if(D=n[N],B=E.x+":"+E.y+":"+D,void 0===H[B]){k=b[D];for(G=0;G<k.length;G++)if(D=k[G],c(r,G)&&!f(E,D)&&!g(E,D)){q=G;n.splice(N,1);
I=h.slice(0,r+1);D=h.slice(r);G=k.slice(q);M=k.slice(0,q+1);h=I.concat(G).concat(M).concat(D);I=r;break}if(0<=q)break;H[B]=!0}if(0<=q)break}}return h}(a,b);var q=THREE.ShapeUtils.triangulate(g,!1);g=0;for(f=q.length;g<f;g++)for(k=q[g],h=0;3>h;h++)n=k[h].x+":"+k[h].y,n=r[n],void 0!==n&&(k[h]=n);return q.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,b,c,d,e){var g=
1-a,f=1-a;return g*g*g*b+3*f*f*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain);this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);
THREE.Audio.prototype.constructor=THREE.Audio;THREE.Audio.prototype.load=function(a){var b=this,c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(a){b.context.decodeAudioData(this.response,function(a){b.source.buffer=a;b.autoplay&&b.play()})};c.send();return this};
THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;this.connect()}};THREE.Audio.prototype.pause=function(){this.source.stop();this.startTime=this.context.currentTime};
THREE.Audio.prototype.stop=function(){this.source.stop();this.startTime=0};THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)};THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)};
THREE.Audio.prototype.setFilter=function(a){!0===this.isPlaying?(this.disconnect(),this.filter=a,this.connect()):this.filter=a};THREE.Audio.prototype.getFilter=function(){return this.filter};THREE.Audio.prototype.setPlaybackRate=function(a){this.playbackRate=a;!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)};THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate};THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};
THREE.Audio.prototype.setLoop=function(a){this.source.loop=a};THREE.Audio.prototype.getLoop=function(){return this.source.loop};THREE.Audio.prototype.setRefDistance=function(a){this.panner.refDistance=a};THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance};THREE.Audio.prototype.setRolloffFactor=function(a){this.panner.rolloffFactor=a};THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};
THREE.Audio.prototype.setVolume=function(a){this.gain.gain.value=a};THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value};THREE.Audio.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new (window.AudioContext||window.webkitAudioContext)};
THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.constructor=THREE.AudioListener;
THREE.AudioListener.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}();THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c},getSpacedPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){a||
(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,g=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),g+=c.distanceTo(d),b.push(g),d=c;return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=0,e=c.length,g;g=b?b:a*c[e-1];for(var f=0,h=e-
1,k;f<=h;)if(d=Math.floor(f+(h-f)/2),k=c[d]-g,0>k)f=d+1;else if(0<k)h=d-1;else{h=d;break}d=h;if(c[d]===g)return d/(e-1);f=c[d];return c=(d+(g-f)/(c[d+1]-f))/(e-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)}};THREE.Curve.Utils=THREE.CurveUtils;
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.constructor=THREE.CurvePath;THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};
THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=b)return a=this.curves[d],b=1-(c[d]-b)/a.getLength(),a.getPointAt(b);d++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};
THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new THREE.Vector3(e.x,e.y,e.z||0))}return b};THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.Path.prototype.constructor=THREE.Path;THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){this.actions.push({action:"moveTo",args:[a,b]})};THREE.Path.prototype.lineTo=function(a,b){var c=this.actions[this.actions.length-1].args,c=new THREE.LineCurve(new THREE.Vector2(c[c.length-2],c[c.length-1]),new THREE.Vector2(a,b));this.curves.push(c);this.actions.push({action:"lineTo",args:[a,b]})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=this.actions[this.actions.length-1].args,e=new THREE.QuadraticBezierCurve(new THREE.Vector2(e[e.length-2],e[e.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(e);this.actions.push({action:"quadraticCurveTo",args:[a,b,c,d]})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,g){var f=this.actions[this.actions.length-1].args,f=new THREE.CubicBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,g));this.curves.push(f);this.actions.push({action:"bezierCurveTo",args:[a,b,c,d,e,g]})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:"splineThru",args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,g){var f=this.actions[this.actions.length-1].args;this.absarc(a+f[f.length-2],b+f[f.length-1],c,d,e,g)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,g,f,h){var k=this.actions[this.actions.length-1].args;this.absellipse(a+k[k.length-2],b+k[k.length-1],c,d,e,g,f,h)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,g,f,h){var k=[a,b,c,d,e,g,f,h||0];a=new THREE.EllipseCurve(a,b,c,d,e,g,f,h);this.curves.push(a);a=a.getPoint(1);k.push(a.x);k.push(a.y);this.actions.push({action:"ellipse",args:k})};
THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;d<a;d++)c.push(this.getPoint(d/a));return c};
THREE.Path.prototype.getPoints=function(a,b){a=a||12;for(var c=THREE.ShapeUtils.b2,d=THREE.ShapeUtils.b3,e=[],g,f,h,k,n,r,q,l,s,u,w=0,y=this.actions.length;w<y;w++){s=this.actions[w];var x=s.args;switch(s.action){case "moveTo":e.push(new THREE.Vector2(x[0],x[1]));break;case "lineTo":e.push(new THREE.Vector2(x[0],x[1]));break;case "quadraticCurveTo":g=x[2];f=x[3];n=x[0];r=x[1];0<e.length?(s=e[e.length-1],q=s.x,l=s.y):(s=this.actions[w-1].args,q=s[s.length-2],l=s[s.length-1]);for(x=1;x<=a;x++)u=x/a,
s=c(u,q,n,g),u=c(u,l,r,f),e.push(new THREE.Vector2(s,u));break;case "bezierCurveTo":g=x[4];f=x[5];n=x[0];r=x[1];h=x[2];k=x[3];0<e.length?(s=e[e.length-1],q=s.x,l=s.y):(s=this.actions[w-1].args,q=s[s.length-2],l=s[s.length-1]);for(x=1;x<=a;x++)u=x/a,s=d(u,q,n,h,g),u=d(u,l,r,k,f),e.push(new THREE.Vector2(s,u));break;case "splineThru":s=this.actions[w-1].args;u=[new THREE.Vector2(s[s.length-2],s[s.length-1])];s=a*x[0].length;u=u.concat(x[0]);u=new THREE.SplineCurve(u);for(x=1;x<=s;x++)e.push(u.getPointAt(x/
s));break;case "arc":g=x[0];f=x[1];r=x[2];h=x[3];s=x[4];n=!!x[5];q=s-h;l=2*a;for(x=1;x<=l;x++)u=x/l,n||(u=1-u),u=h+u*q,s=g+r*Math.cos(u),u=f+r*Math.sin(u),e.push(new THREE.Vector2(s,u));break;case "ellipse":g=x[0];f=x[1];r=x[2];k=x[3];h=x[4];s=x[5];n=!!x[6];var z=x[7];q=s-h;l=2*a;var C,A;0!==z&&(C=Math.cos(z),A=Math.sin(z));for(x=1;x<=l;x++){u=x/l;n||(u=1-u);u=h+u*q;s=g+r*Math.cos(u);u=f+k*Math.sin(u);if(0!==z){var F=s;s=(F-g)*C-(u-f)*A+g;u=(F-g)*A+(u-f)*C+f}e.push(new THREE.Vector2(s,u))}}}c=e[e.length-
1];Math.abs(c.x-e[0].x)<Number.EPSILON&&Math.abs(c.y-e[0].y)<Number.EPSILON&&e.splice(e.length-1,1);b&&e.push(e[0]);return e};
THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||
g.x<=a.x&&a.x<=h.x))return!0}return d}var e=THREE.ShapeUtils.isClockWise,g=function(a){for(var b=[],c=new THREE.Path,d=0,e=a.length;d<e;d++){var f=a[d],g=f.args,f=f.action;"moveTo"===f&&0!==c.actions.length&&(b.push(c),c=new THREE.Path);c[f].apply(c,g)}0!==c.actions.length&&b.push(c);return b}(this.actions);if(0===g.length)return[];if(!0===b)return c(g);var f,h,k,n=[];if(1===g.length)return h=g[0],k=new THREE.Shape,k.actions=h.actions,k.curves=h.curves,n.push(k),n;var r=!e(g[0].getPoints()),r=a?!r:
r;k=[];var q=[],l=[],s=0,u;q[s]=void 0;l[s]=[];for(var w=0,y=g.length;w<y;w++)h=g[w],u=h.getPoints(),f=e(u),(f=a?!f:f)?(!r&&q[s]&&s++,q[s]={s:new THREE.Shape,p:u},q[s].s.actions=h.actions,q[s].s.curves=h.curves,r&&s++,l[s]=[]):l[s].push({h:h,p:u[0]});if(!q[0])return c(g);if(1<q.length){w=!1;h=[];e=0;for(g=q.length;e<g;e++)k[e]=[];e=0;for(g=q.length;e<g;e++)for(f=l[e],r=0;r<f.length;r++){s=f[r];u=!0;for(y=0;y<q.length;y++)d(s.p,q[y].p)&&(e!==y&&h.push({froms:e,tos:y,hole:r}),u?(u=!1,k[y].push(s)):
w=!0);u&&k[e].push(s)}0<h.length&&(w||(l=k))}w=0;for(e=q.length;w<e;w++)for(k=q[w].s,n.push(k),h=l[w],g=0,f=h.length;g<f;g++)k.holes.push(h[g].h);return n};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.constructor=THREE.Shape;THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};
THREE.Shape.prototype.getPointsHoles=function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.extractAllPoints(a)};THREE.Shape.Utils=THREE.ShapeUtils;THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};
THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};
THREE.CubicBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;
THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};THREE.EllipseCurve=function(a,b,c,d,e,g,f,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=f;this.aRotation=h||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);var c=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){var b=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a;a=(e-this.aX)*b-(c-this.aY)*d+this.aX;c=(e-this.aX)*d+(c-this.aY)*b+this.aY}return new THREE.Vector2(a,c)};
THREE.ArcCurve=function(a,b,c,d,e,g){THREE.EllipseCurve.call(this,a,b,c,c,d,e,g)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,r,q){a=((b-a)/e-(c-a)/(e+r)+(c-b)/r)*r;d=((c-b)/r-(d-b)/(r+q)+(d-c)/q)*r;this.init(b,c,a,d)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*
b*a};return THREE.Curve.create(function(a){this.points=a||[]},function(a){var f=this.points,h,k;k=f.length;2>k&&console.log("duh, you need at least 2 points");a*=k-1;h=Math.floor(a);a-=h;0===a&&h===k-1&&(h=k-2,a=1);var n,r,q;0===h?(b.subVectors(f[0],f[1]).add(f[0]),n=b):n=f[h-1];r=f[h];q=f[h+1];h+2<k?f=f[h+2]:(b.subVectors(f[k-1],f[k-2]).add(f[k-2]),f=b);if(void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var l="chordal"===this.type?.5:.25;k=Math.pow(n.distanceToSquared(r),l);
h=Math.pow(r.distanceToSquared(q),l);l=Math.pow(q.distanceToSquared(f),l);1E-4>h&&(h=1);1E-4>k&&(k=h);1E-4>l&&(l=h);c.initNonuniformCatmullRom(n.x,r.x,q.x,f.x,k,h,l);d.initNonuniformCatmullRom(n.y,r.y,q.y,f.y,k,h,l);e.initNonuniformCatmullRom(n.z,r.z,q.z,f.z,k,h,l)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(n.x,r.x,q.x,f.x,k),d.initCatmullRom(n.y,r.y,q.y,f.y,k),e.initCatmullRom(n.z,r.z,q.z,f.z,k));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-0;var c=Math.floor(a);a-=c;var c=c+(0<c?0:(Math.floor(Math.abs(c)/b.length)+1)*b.length),d=b[(c-1)%b.length],e=b[c%b.length],g=b[(c+1)%b.length],b=b[(c+2)%b.length],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
THREE.BoxGeometry=function(a,b,c,d,e,g){function f(a,b,c,d,e,f,g,w){var y,x=h.widthSegments,z=h.heightSegments,C=e/2,A=f/2,F=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)y="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)y="y",z=h.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)y="x",x=h.depthSegments;var E=x+1,D=z+1,B=e/x,H=f/z,I=new THREE.Vector3;I[y]=0<g?1:-1;for(e=0;e<D;e++)for(f=0;f<E;f++){var G=new THREE.Vector3;G[a]=(f*B-C)*c;G[b]=(e*H-A)*d;G[y]=g;h.vertices.push(G)}for(e=
0;e<z;e++)for(f=0;f<x;f++)A=f+E*e,a=f+E*(e+1),b=f+1+E*(e+1),c=f+1+E*e,d=new THREE.Vector2(f/x,1-e/z),g=new THREE.Vector2(f/x,1-(e+1)/z),y=new THREE.Vector2((f+1)/x,1-(e+1)/z),C=new THREE.Vector2((f+1)/x,1-e/z),A=new THREE.Face3(A+F,a+F,c+F),A.normal.copy(I),A.vertexNormals.push(I.clone(),I.clone(),I.clone()),A.materialIndex=w,h.faces.push(A),h.faceVertexUvs[0].push([d,g,C]),A=new THREE.Face3(a+F,b+F,c+F),A.normal.copy(I),A.vertexNormals.push(I.clone(),I.clone(),I.clone()),A.materialIndex=w,h.faces.push(A),
h.faceVertexUvs[0].push([g.clone(),y,C.clone()])}THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=g||1;var h=this;d=a/2;e=b/2;g=c/2;f("z","y",-1,-1,c,b,d,0);f("z","y",1,-1,c,b,-d,1);f("x","z",1,1,a,c,e,2);f("x","z",1,-1,a,c,-e,3);f("x","y",1,-1,a,b,g,4);f("x","y",-1,-1,a,b,-g,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.BoxGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.BoxGeometry(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)};THREE.CubeGeometry=THREE.BoxGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new THREE.CircleBufferGeometry(a,b,c,d))};
THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;THREE.CircleGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CircleGeometry(a.radius,a.segments,a.thetaStart,a.thetaLength)};
THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),f=new Float32Array(3*e),e=new Float32Array(2*e);f[2]=1;e[0]=.5;e[1]=.5;for(var h=0,k=3,n=2;h<=b;h++,k+=3,n+=2){var r=c+h/b*d;g[k]=a*Math.cos(r);g[k+1]=a*Math.sin(r);f[k+2]=1;e[n]=(g[k]/a+1)/2;e[n+1]=(g[k+1]/a+1)/2}c=
[];for(k=1;k<=b;k++)c.push(k,k+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(g,3));this.addAttribute("normal",new THREE.BufferAttribute(f,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CircleBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CircleBufferGeometry(a.radius,a.segments,a.thetaStart,a.thetaLength)};
THREE.CylinderGeometry=function(a,b,c,d,e,g,f,h){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:f,thetaLength:h};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;g=void 0!==g?g:!1;f=void 0!==f?f:0;h=void 0!==h?h:2*Math.PI;var k=c/2,n,r,q=[],l=[];for(r=0;r<=e;r++){var s=[],u=[],w=r/e,y=w*(b-a)+a;for(n=0;n<=d;n++){var x=n/d,z=new THREE.Vector3;z.x=y*Math.sin(x*h+
f);z.y=-w*c+k;z.z=y*Math.cos(x*h+f);this.vertices.push(z);s.push(this.vertices.length-1);u.push(new THREE.Vector2(x,1-w))}q.push(s);l.push(u)}c=(b-a)/c;for(n=0;n<d;n++)for(0!==a?(f=this.vertices[q[0][n]].clone(),h=this.vertices[q[0][n+1]].clone()):(f=this.vertices[q[1][n]].clone(),h=this.vertices[q[1][n+1]].clone()),f.setY(Math.sqrt(f.x*f.x+f.z*f.z)*c).normalize(),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*c).normalize(),r=0;r<e;r++){var s=q[r][n],u=q[r+1][n],w=q[r+1][n+1],y=q[r][n+1],x=f.clone(),z=f.clone(),
C=h.clone(),A=h.clone(),F=l[r][n].clone(),E=l[r+1][n].clone(),D=l[r+1][n+1].clone(),B=l[r][n+1].clone();this.faces.push(new THREE.Face3(s,u,y,[x,z,A]));this.faceVertexUvs[0].push([F,E,B]);this.faces.push(new THREE.Face3(u,w,y,[z.clone(),C,A.clone()]));this.faceVertexUvs[0].push([E.clone(),D,B.clone()])}if(!1===g&&0<a)for(this.vertices.push(new THREE.Vector3(0,k,0)),n=0;n<d;n++)s=q[0][n],u=q[0][n+1],w=this.vertices.length-1,x=new THREE.Vector3(0,1,0),z=new THREE.Vector3(0,1,0),C=new THREE.Vector3(0,
1,0),F=l[0][n].clone(),E=l[0][n+1].clone(),D=new THREE.Vector2(E.x,0),this.faces.push(new THREE.Face3(s,u,w,[x,z,C],void 0,1)),this.faceVertexUvs[0].push([F,E,D]);if(!1===g&&0<b)for(this.vertices.push(new THREE.Vector3(0,-k,0)),n=0;n<d;n++)s=q[e][n+1],u=q[e][n],w=this.vertices.length-1,x=new THREE.Vector3(0,-1,0),z=new THREE.Vector3(0,-1,0),C=new THREE.Vector3(0,-1,0),F=l[e][n+1].clone(),E=l[e][n].clone(),D=new THREE.Vector2(E.x,1),this.faces.push(new THREE.Face3(s,u,w,[x,z,C],void 0,2)),this.faceVertexUvs[0].push([F,
E,D]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;THREE.CylinderGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)};
THREE.EdgesGeometry=function(a,b){function c(a,b){return a-b}THREE.BufferGeometry.call(this);var d=Math.cos(THREE.Math.degToRad(void 0!==b?b:1)),e=[0,0],g={},f=["a","b","c"],h;a instanceof THREE.BufferGeometry?(h=new THREE.Geometry,h.fromBufferGeometry(a)):h=a.clone();h.mergeVertices();h.computeFaceNormals();var k=h.vertices;h=h.faces;for(var n=0,r=h.length;n<r;n++)for(var q=h[n],l=0;3>l;l++){e[0]=q[f[l]];e[1]=q[f[(l+1)%3]];e.sort(c);var s=e.toString();void 0===g[s]?g[s]={vert1:e[0],vert2:e[1],face1:n,
face2:void 0}:g[s].face2=n}e=[];for(s in g)if(f=g[s],void 0===f.face2||h[f.face1].normal.dot(h[f.face2].normal)<=d)n=k[f.vert1],e.push(n.x),e.push(n.y),e.push(n.z),n=k[f.vert2],e.push(n.x),e.push(n.y),e.push(n.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,d>Number.EPSILON?
f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2));return new THREE.Vector2(c/d,a/d)}function e(a,b){var c,d;for(J=a.length;0<=--J;){c=J;d=J-1;0>d&&(d=a.length-1);for(var e=0,f=s+2*r,e=0;e<f;e++){var g=X*e,h=X*(e+1),k=b+c+g,g=b+d+g,l=b+d+h,h=b+c+h,k=k+I,g=g+I,l=l+I,h=h+I;H.faces.push(new THREE.Face3(k,g,h,null,null,1));H.faces.push(new THREE.Face3(g,l,h,null,null,1));k=x.generateSideWallUV(H,
k,g,l,h);H.faceVertexUvs[0].push([k[0],k[1],k[3]]);H.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function g(a,b,c){H.vertices.push(new THREE.Vector3(a,b,c))}function f(a,b,c){a+=I;b+=I;c+=I;H.faces.push(new THREE.Face3(a,b,c,null,null,0));a=x.generateTopUV(H,a,b,c);H.faceVertexUvs[0].push(a)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,n=void 0!==b.bevelSize?b.bevelSize:k-2,r=void 0!==b.bevelSegments?b.bevelSegments:3,q=void 0!==b.bevelEnabled?b.bevelEnabled:!0,
l=void 0!==b.curveSegments?b.curveSegments:12,s=void 0!==b.steps?b.steps:1,u=b.extrudePath,w,y=!1,x=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,z,C,A,F;u&&(w=u.getSpacedPoints(s),y=!0,q=!1,z=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(u,s,!1),C=new THREE.Vector3,A=new THREE.Vector3,F=new THREE.Vector3);q||(n=k=r=0);var E,D,B,H=this,I=this.vertices.length,u=a.extractPoints(l),l=u.shape,G=u.holes;if(u=!THREE.ShapeUtils.isClockWise(l)){l=l.reverse();
D=0;for(B=G.length;D<B;D++)E=G[D],THREE.ShapeUtils.isClockWise(E)&&(G[D]=E.reverse());u=!1}var M=THREE.ShapeUtils.triangulateShape(l,G),N=l;D=0;for(B=G.length;D<B;D++)E=G[D],l=l.concat(E);var K,Q,O,L,T,X=l.length,W,U=M.length,u=[],J=0;O=N.length;K=O-1;for(Q=J+1;J<O;J++,K++,Q++)K===O&&(K=0),Q===O&&(Q=0),u[J]=d(N[J],N[K],N[Q]);var ka=[],ba,ja=u.concat();D=0;for(B=G.length;D<B;D++){E=G[D];ba=[];J=0;O=E.length;K=O-1;for(Q=J+1;J<O;J++,K++,Q++)K===O&&(K=0),Q===O&&(Q=0),ba[J]=d(E[J],E[K],E[Q]);ka.push(ba);
ja=ja.concat(ba)}for(K=0;K<r;K++){O=K/r;L=k*(1-O);Q=n*Math.sin(O*Math.PI/2);J=0;for(O=N.length;J<O;J++)T=c(N[J],u[J],Q),g(T.x,T.y,-L);D=0;for(B=G.length;D<B;D++)for(E=G[D],ba=ka[D],J=0,O=E.length;J<O;J++)T=c(E[J],ba[J],Q),g(T.x,T.y,-L)}Q=n;for(J=0;J<X;J++)T=q?c(l[J],ja[J],Q):l[J],y?(A.copy(z.normals[0]).multiplyScalar(T.x),C.copy(z.binormals[0]).multiplyScalar(T.y),F.copy(w[0]).add(A).add(C),g(F.x,F.y,F.z)):g(T.x,T.y,0);for(O=1;O<=s;O++)for(J=0;J<X;J++)T=q?c(l[J],ja[J],Q):l[J],y?(A.copy(z.normals[O]).multiplyScalar(T.x),
C.copy(z.binormals[O]).multiplyScalar(T.y),F.copy(w[O]).add(A).add(C),g(F.x,F.y,F.z)):g(T.x,T.y,h/s*O);for(K=r-1;0<=K;K--){O=K/r;L=k*(1-O);Q=n*Math.sin(O*Math.PI/2);J=0;for(O=N.length;J<O;J++)T=c(N[J],u[J],Q),g(T.x,T.y,h+L);D=0;for(B=G.length;D<B;D++)for(E=G[D],ba=ka[D],J=0,O=E.length;J<O;J++)T=c(E[J],ba[J],Q),y?g(T.x,T.y+w[s-1].y,w[s-1].x+L):g(T.x,T.y,h+L)}(function(){if(q){var a;a=0*X;for(J=0;J<U;J++)W=M[J],f(W[2]+a,W[1]+a,W[0]+a);a=s+2*r;a*=X;for(J=0;J<U;J++)W=M[J],f(W[0]+a,W[1]+a,W[2]+a)}else{for(J=
0;J<U;J++)W=M[J],f(W[2],W[1],W[0]);for(J=0;J<U;J++)W=M[J],f(W[0]+X*s,W[1]+X*s,W[2]+X*s)}})();(function(){var a=0;e(N,a);a+=N.length;D=0;for(B=G.length;D<B;D++)E=G[D],e(E,a),a+=E.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,g,f,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=e.shape,n=e.holes;if(!THREE.ShapeUtils.isClockWise(k))for(k=k.reverse(),e=0,g=n.length;e<g;e++)f=n[e],THREE.ShapeUtils.isClockWise(f)&&(n[e]=f.reverse());var r=THREE.ShapeUtils.triangulateShape(k,n);e=0;for(g=n.length;e<g;e++)f=n[e],k=k.concat(f);
n=k.length;g=r.length;for(e=0;e<n;e++)f=k[e],this.vertices.push(new THREE.Vector3(f.x,f.y,0));for(e=0;e<g;e++)n=r[e],k=n[0]+h,f=n[1]+h,n=n[2]+h,this.faces.push(new THREE.Face3(k,f,n,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,k,f,n))};
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),g=1/b,f=0,h=b;f<=h;f++)for(var k=c+f*g*d,n=Math.cos(k),r=Math.sin(k),k=0,q=a.length;k<q;k++){var l=a[k],s=new THREE.Vector3;s.x=n*l.x-r*l.y;s.y=r*l.x+n*l.y;s.z=l.z;this.vertices.push(s)}c=a.length;f=0;for(h=b;f<h;f++)for(k=0,q=a.length-1;k<q;k++){b=r=k+c*f;d=r+c;var n=r+1+c,r=r+1,l=f*g,s=k*e,u=
l+g,w=s+e;this.faces.push(new THREE.Face3(b,d,r));this.faceVertexUvs[0].push([new THREE.Vector2(l,s),new THREE.Vector2(u,s),new THREE.Vector2(l,w)]);this.faces.push(new THREE.Face3(d,n,r));this.faceVertexUvs[0].push([new THREE.Vector2(u,s),new THREE.Vector2(u,w),new THREE.Vector2(l,w)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;THREE.PlaneGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PlaneGeometry(a.width,a.height,a.widthSegments,a.heightSegments)};
THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var f=c+1,h=d+1,k=a/c,n=b/d;b=new Float32Array(f*h*3);a=new Float32Array(f*h*3);for(var r=new Float32Array(f*h*2),q=0,l=0,s=0;s<h;s++)for(var u=s*n-g,w=0;w<f;w++)b[q]=w*k-e,b[q+1]=-u,a[q+2]=1,r[l]=w/c,r[l+1]=1-s/d,q+=3,l+=2;q=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(s=0;s<d;s++)for(w=0;w<c;w++)g=w+f*(s+1),h=w+1+f*(s+1),k=w+1+f*s,e[q]=w+f*s,e[q+1]=g,e[q+2]=k,e[q+3]=g,e[q+4]=h,e[q+5]=k,q+=6;this.setIndex(new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(r,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.PlaneBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PlaneBufferGeometry(a.width,a.height,a.widthSegments,a.heightSegments)};
THREE.RingGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||0;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var f,h=[],k=a,n=(b-a)/d;for(a=0;a<d+1;a++){for(f=0;f<c+1;f++){var r=new THREE.Vector3,q=e+f/c*g;r.x=k*Math.cos(q);r.y=k*Math.sin(q);this.vertices.push(r);h.push(new THREE.Vector2((r.x/b+1)/2,
(r.y/b+1)/2))}k+=n}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++)for(e=a*(c+1),f=0;f<c;f++)g=q=f+e,n=q+c+1,r=q+c+2,this.faces.push(new THREE.Face3(g,n,r,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[n].clone(),h[r].clone()]),g=q,n=q+c+2,r=q+1,this.faces.push(new THREE.Face3(g,n,r,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[n].clone(),h[r].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,k)};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.RingGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.RingGeometry(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)};
THREE.SphereGeometry=function(a,b,c,d,e,g,f){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};this.fromBufferGeometry(new THREE.SphereBufferGeometry(a,b,c,d,e,g,f))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.SphereGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)};
THREE.SphereBufferGeometry=function(a,b,c,d,e,g,f){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;f=void 0!==f?f:Math.PI;for(var h=g+f,k=(b+1)*(c+1),n=new THREE.BufferAttribute(new Float32Array(3*k),3),r=new THREE.BufferAttribute(new Float32Array(3*
k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),q=0,l=[],s=new THREE.Vector3,u=0;u<=c;u++){for(var w=[],y=u/c,x=0;x<=b;x++){var z=x/b,C=-a*Math.cos(d+z*e)*Math.sin(g+y*f),A=a*Math.cos(g+y*f),F=a*Math.sin(d+z*e)*Math.sin(g+y*f);s.set(C,A,F).normalize();n.setXYZ(q,C,A,F);r.setXYZ(q,s.x,s.y,s.z);k.setXY(q,z,1-y);w.push(q);q++}l.push(w)}d=[];for(u=0;u<c;u++)for(x=0;x<b;x++)e=l[u][x+1],f=l[u][x],q=l[u+1][x],s=l[u+1][x+1],(0!==u||0<g)&&d.push(e,f,s),(u!==c-1||h<Math.PI)&&d.push(f,q,s);this.setIndex(new (65535<
n.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(d,1));this.addAttribute("position",n);this.addAttribute("normal",r);this.addAttribute("uv",k);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.SphereBufferGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.SphereBufferGeometry(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)};
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var g=new THREE.Vector3,f=[],h=[],k=0;k<=c;k++)for(var n=0;n<=d;n++){var r=n/d*e,q=k/c*Math.PI*2;g.x=a*Math.cos(r);g.y=a*Math.sin(r);var l=new THREE.Vector3;l.x=(a+b*Math.cos(q))*Math.cos(r);l.y=(a+b*Math.cos(q))*Math.sin(r);l.z=b*Math.sin(q);this.vertices.push(l);f.push(new THREE.Vector2(n/
d,k/c));h.push(l.clone().sub(g).normalize())}for(k=1;k<=c;k++)for(n=1;n<=d;n++)a=(d+1)*k+n-1,b=(d+1)*(k-1)+n-1,e=(d+1)*(k-1)+n,g=(d+1)*k+n,r=new THREE.Face3(a,b,g,[h[a].clone(),h[b].clone(),h[g].clone()]),this.faces.push(r),this.faceVertexUvs[0].push([f[a].clone(),f[b].clone(),f[g].clone()]),r=new THREE.Face3(b,e,g,[h[b].clone(),h[e].clone(),h[g].clone()]),this.faces.push(r),this.faceVertexUvs[0].push([f[b].clone(),f[e].clone(),f[g].clone()]);this.computeFaceNormals()};
THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;THREE.TorusGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TorusGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)};
THREE.TorusKnotGeometry=function(a,b,c,d,e,g,f){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=b/c;b=Math.cos(a);f*=d*(2+b)*.5;g=d*(2+b)*g*.5;d=e*d*Math.sin(a)*.5;return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:g,heightScale:f};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;g=g||3;f=f||1;for(var k=Array(c),n=new THREE.Vector3,r=new THREE.Vector3,q=new THREE.Vector3,l=0;l<c;++l){k[l]=
Array(d);var s=l/c*2*e*Math.PI,u=h(s,g,e,a,f),s=h(s+.01,g,e,a,f);n.subVectors(s,u);r.addVectors(s,u);q.crossVectors(n,r);r.crossVectors(q,n);q.normalize();r.normalize();for(s=0;s<d;++s){var w=s/d*2*Math.PI,y=-b*Math.cos(w),w=b*Math.sin(w),x=new THREE.Vector3;x.x=u.x+y*r.x+w*q.x;x.y=u.y+y*r.y+w*q.y;x.z=u.z+y*r.z+w*q.z;k[l][s]=this.vertices.push(x)-1}}for(l=0;l<c;++l)for(s=0;s<d;++s)e=(l+1)%c,g=(s+1)%d,a=k[l][s],b=k[e][s],e=k[e][g],g=k[l][g],f=new THREE.Vector2(l/c,s/d),n=new THREE.Vector2((l+1)/c,
s/d),r=new THREE.Vector2((l+1)/c,(s+1)/d),q=new THREE.Vector2(l/c,(s+1)/d),this.faces.push(new THREE.Face3(a,b,g)),this.faceVertexUvs[0].push([f,n,q]),this.faces.push(new THREE.Face3(b,e,g)),this.faceVertexUvs[0].push([n.clone(),r,q.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TorusKnotGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TorusKnotGeometry(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.p,a.q,a.heightScale)};
THREE.TubeGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||THREE.TubeGeometry.NoTaper;var f=[],h,k,n=b+1,r,q,l,s,u,w=new THREE.Vector3,y,x,z;y=new THREE.TubeGeometry.FrenetFrames(a,b,e);x=y.normals;z=y.binormals;this.tangents=y.tangents;this.normals=x;this.binormals=z;for(y=0;y<n;y++)for(f[y]=[],r=y/(n-1),u=a.getPointAt(r),h=x[y],k=z[y],l=c*g(r),r=0;r<
d;r++)q=r/d*2*Math.PI,s=-l*Math.cos(q),q=l*Math.sin(q),w.copy(u),w.x+=s*h.x+q*k.x,w.y+=s*h.y+q*k.y,w.z+=s*h.z+q*k.z,f[y][r]=this.vertices.push(new THREE.Vector3(w.x,w.y,w.z))-1;for(y=0;y<b;y++)for(r=0;r<d;r++)g=e?(y+1)%b:y+1,n=(r+1)%d,a=f[y][r],c=f[g][r],g=f[g][n],n=f[y][n],w=new THREE.Vector2(y/b,r/d),x=new THREE.Vector2((y+1)/b,r/d),z=new THREE.Vector2((y+1)/b,(r+1)/d),h=new THREE.Vector2(y/b,(r+1)/d),this.faces.push(new THREE.Face3(a,c,n)),this.faceVertexUvs[0].push([w,x,h]),this.faces.push(new THREE.Face3(c,
g,n)),this.faceVertexUvs[0].push([x.clone(),z,h.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.prototype.clone=function(){return new this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed,this.parameters.taper)};THREE.TubeGeometry.NoTaper=function(a){return 1};
THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],g=[],f=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var n,r,q;this.tangents=e;this.normals=g;this.binormals=f;for(n=0;n<b;n++)r=n/(b-1),e[n]=a.getTangentAt(r),e[n].normalize();g[0]=new THREE.Vector3;f[0]=new THREE.Vector3;a=Number.MAX_VALUE;n=Math.abs(e[0].x);r=Math.abs(e[0].y);q=Math.abs(e[0].z);n<=a&&(a=n,d.set(1,0,0));r<=a&&(a=r,d.set(0,1,0));q<=a&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();g[0].crossVectors(e[0],
h);f[0].crossVectors(e[0],g[0]);for(n=1;n<b;n++)g[n]=g[n-1].clone(),f[n]=f[n-1].clone(),h.crossVectors(e[n-1],e[n]),h.length()>Number.EPSILON&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[n-1].dot(e[n]),-1,1)),g[n].applyMatrix4(k.makeRotationAxis(h,d))),f[n].crossVectors(e[n],g[n]);if(c)for(d=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(g[0],g[b-1]))&&(d=-d),n=1;n<b;n++)g[n].applyMatrix4(k.makeRotationAxis(e[n],d*n)),f[n].crossVectors(e[n],g[n])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function g(a,b,c,d){d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()],void 0,d);k.faces.push(d);y.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(y.z,-y.x);k.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function f(a,
b){for(var c=Math.pow(2,b),d=e(k.vertices[a.a]),f=e(k.vertices[a.b]),h=e(k.vertices[a.c]),l=[],n=a.materialIndex,q=0;q<=c;q++){l[q]=[];for(var r=e(d.clone().lerp(h,q/c)),s=e(f.clone().lerp(h,q/c)),u=c-q,w=0;w<=u;w++)l[q][w]=0===w&&q===c?r:e(r.clone().lerp(s,w/u))}for(q=0;q<c;q++)for(w=0;w<2*(c-q)-1;w++)d=Math.floor(w/2),0===w%2?g(l[q][d+1],l[q+1][d],l[q][d],n):g(l[q][d+1],l[q+1][d+1],l[q+1][d],n)}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/
2/Math.PI+.5,a.y));return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var k=this,n=0,r=a.length;n<r;n+=3)e(new THREE.Vector3(a[n],a[n+1],a[n+2]));a=this.vertices;for(var q=[],l=n=0,r=b.length;n<r;n+=3,l++){var s=a[b[n]],u=a[b[n+1]],w=a[b[n+2]];q[l]=new THREE.Face3(s.index,u.index,w.index,[s.clone(),u.clone(),w.clone()],void 0,l)}for(var y=new THREE.Vector3,n=0,r=q.length;n<r;n++)f(q[n],d);n=0;for(r=this.faceVertexUvs[0].length;n<
r;n++)b=this.faceVertexUvs[0][n],d=b[0].x,a=b[1].x,q=b[2].x,l=Math.max(d,a,q),s=Math.min(d,a,q),.9<l&&.1>s&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>q&&(b[2].x+=1));n=0;for(r=this.vertices.length;n<r;n++)this.vertices[n].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.PolyhedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.PolyhedronGeometry(a.vertices,a.indices,a.radius,a.detail)};
THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;THREE.DodecahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.DodecahedronGeometry(a.radius,a.detail)};
THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.IcosahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.IcosahedronGeometry(a.radius,a.detail)};THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;THREE.OctahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.OctahedronGeometry(a.radius,a.detail)};THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;THREE.TetrahedronGeometry.prototype.clone=function(){var a=this.parameters;return new THREE.TetrahedronGeometry(a.radius,a.detail)};
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,g=this.faceVertexUvs[0],f,h,k,n,r=b+1;for(f=0;f<=c;f++)for(n=f/c,h=0;h<=b;h++)k=h/b,k=a(k,n),d.push(k);var q,l,s,u;for(f=0;f<c;f++)for(h=0;h<b;h++)a=f*r+h,d=f*r+h+1,n=(f+1)*r+h+1,k=(f+1)*r+h,q=new THREE.Vector2(h/b,f/c),l=new THREE.Vector2((h+1)/b,f/c),s=new THREE.Vector2((h+1)/b,(f+1)/c),u=new THREE.Vector2(h/b,(f+1)/c),e.push(new THREE.Face3(a,
d,k)),g.push([q,l,u]),e.push(new THREE.Face3(d,n,k)),g.push([l.clone(),s,u.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(a){function b(a,b){return a-b}THREE.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof THREE.Geometry){var g=a.vertices,f=a.faces,h=0,k=new Uint32Array(6*f.length);a=0;for(var n=f.length;a<n;a++)for(var r=f[a],q=0;3>q;q++){c[0]=r[e[q]];c[1]=r[e[(q+1)%3]];c.sort(b);var l=c.toString();void 0===d[l]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[l]=!0,h++)}c=new Float32Array(6*h);a=0;for(n=h;a<n;a++)for(q=0;2>q;q++)d=g[k[2*a+q]],h=6*a+3*q,c[h+0]=d.x,c[h+1]=d.y,
c[h+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(a instanceof THREE.BufferGeometry){if(null!==a.index){n=a.index.array;g=a.attributes.position;e=a.drawcalls;h=0;0===e.length&&a.addGroup(0,n.length);k=new Uint32Array(2*n.length);f=0;for(r=e.length;f<r;++f){a=e[f];q=a.start;l=a.count;a=q;for(var s=q+l;a<s;a+=3)for(q=0;3>q;q++)c[0]=n[a+q],c[1]=n[a+(q+1)%3],c.sort(b),l=c.toString(),void 0===d[l]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[l]=!0,h++)}c=new Float32Array(6*h);a=0;for(n=
h;a<n;a++)for(q=0;2>q;q++)h=6*a+3*q,d=k[2*a+q],c[h+0]=g.getX(d),c[h+1]=g.getY(d),c[h+2]=g.getZ(d)}else for(g=a.attributes.position.array,h=g.length/3,k=h/3,c=new Float32Array(6*h),a=0,n=k;a<n;a++)for(q=0;3>q;q++)h=18*a+6*q,k=9*a+3*q,c[h+0]=g[k],c[h+1]=g[k+1],c[h+2]=g[k+2],d=9*a+(q+1)%3*3,c[h+3]=g[d],c[h+4]=g[d+1],c[h+5]=g[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,g,f,h){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===f&&(f=.2*e);void 0===h&&(h=.2*f);this.position.copy(d);f<e&&(this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:g})),this.line.matrixAutoUpdate=!1,this.add(this.line));this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:g}));
this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,f,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);b<a&&(this.line.scale.set(1,a-b,1),this.line.updateMatrix());this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){void 0!==this.line&&this.line.material.color.set(a);this.cone.material.color.set(a)};
THREE.BoxHelper=function(a){var b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),d=new THREE.BufferGeometry;d.setIndex(new THREE.BufferAttribute(b,1));d.addAttribute("position",new THREE.BufferAttribute(c,3));THREE.LineSegments.call(this,d,new THREE.LineBasicMaterial({color:16776960}));void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){a.setFromObject(b);if(!a.empty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){function a(a,f,h,k){d.set(f,h,k).unproject(e);a=c[a];if(void 0!==a)for(f=0,h=a.length;f<h;f++)b.vertices[a[f]].copy(d)}var b,c,d=new THREE.Vector3,e=new THREE.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,
-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry,f=g.vertices,g=g.faces,h=0,k=0,n=g.length;k<n;k++){var r=g[k],q=r.normal;a.copy(f[r.a]).add(f[r.b]).add(f[r.c]).divideScalar(3).applyMatrix4(d);b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);
e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return this}}();
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var g=0===e?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.LineSegments.call(this,c,d)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.rotateX(-Math.PI/2);for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,g.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,g.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.translate(0,-.5,0);a.rotateX(-Math.PI/2);var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,g=this.geometry.attributes.position,f=this.object.geometry;if(f instanceof THREE.Geometry)for(var h=f.vertices,k=f.faces,n=f=0,r=k.length;n<r;n++)for(var q=k[n],l=0,s=q.vertexNormals.length;l<s;l++){var u=q.vertexNormals[l];a.copy(h[q[d[l]]]).applyMatrix4(e);
b.copy(u).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(f,a.x,a.y,a.z);f+=1;g.setXYZ(f,b.x,b.y,b.z);f+=1}else if(f instanceof THREE.BufferGeometry)for(d=f.attributes.position,h=f.attributes.normal,l=f=0,s=d.count;l<s;l++)a.set(d.getX(l),d.getY(l),d.getZ(l)).applyMatrix4(e),b.set(h.getX(l),h.getY(l),h.getZ(l)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(f,a.x,a.y,a.z),f+=1,g.setXYZ(f,b.x,b.y,b.z),f+=1;g.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:c}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};
THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/,c,d={},e=this.geometry,g=0,f=e.morphTargets.length;g<f;g++){var h=e.morphTargets[g].name.match(b);if(h&&1<h.length){var k=h[1];d[k]||(d[k]={start:Infinity,end:-Infinity});h=d[k];g<h.start&&(h.start=g);g>h.end&&(h.end=g);c||(c=k)}}for(k in d)h=d[k],this.createAnimation(k,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),f=d.weight;g!==d.currentFrame&&
(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*f,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*f,this.morphTargetInfluences[d.lastFrame]=(1-e)*f):this.morphTargetInfluences[d.currentFrame]=f}}};
THREE.OrbitControls=function(a,b){function c(a){if(!1!==g.enabled){a.preventDefault();var b=g.domElement===document?g.domElement.body:g.domElement;if(B===D.ROTATE){if(!0===g.noRotate)return;h.set(a.clientX,a.clientY);k.subVectors(h,f);g.rotateLeft(2*Math.PI*k.x/b.clientWidth*g.rotateSpeed);g.rotateUp(2*Math.PI*k.y/b.clientHeight*g.rotateSpeed);f.copy(h)}else if(B===D.DOLLY){if(!0===g.noZoom)return;w.set(a.clientX,a.clientY);y.subVectors(w,u);0<y.y?g.dollyIn():g.dollyOut();u.copy(w)}else if(B===D.PAN){if(!0===
g.noPan)return;r.set(a.clientX,a.clientY);q.subVectors(r,n);g.pan(q.x,q.y);n.copy(r)}g.update()}}function d(){!1!==g.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),g.dispatchEvent(N),B=D.NONE)}function e(a){if(!1!==g.enabled&&!0!==g.noZoom){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?g.dollyOut():g.dollyIn();g.update();g.dispatchEvent(M);g.dispatchEvent(N)}}this.object=
a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var g=this,f=new THREE.Vector2,h=new THREE.Vector2,k=new THREE.Vector2,n=new THREE.Vector2,r=new THREE.Vector2,
q=new THREE.Vector2,l=new THREE.Vector3,s=new THREE.Vector3,u=new THREE.Vector2,w=new THREE.Vector2,y=new THREE.Vector2,x=0,z=0,C=1,A=new THREE.Vector3,F=new THREE.Vector3,E=new THREE.Quaternion,D={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},B=D.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();var H=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),I=H.clone().inverse(),G={type:"change"},M={type:"start"},N={type:"end"};
this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*g.autoRotateSpeed);z-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*g.autoRotateSpeed);x-=a};this.panLeft=function(a){var b=this.object.matrix.elements;l.set(b[0],b[1],b[2]);l.multiplyScalar(-a);A.add(l)};this.panUp=function(a){var b=this.object.matrix.elements;l.set(b[4],b[5],b[6]);l.multiplyScalar(a);A.add(l)};this.pan=function(a,b){var c=g.domElement===document?g.domElement.body:g.domElement;if(void 0!==g.object.fov){var d=
g.object.position.clone().sub(g.target).length(),d=d*Math.tan(g.object.fov/2*Math.PI/180);g.panLeft(2*a*d/c.clientHeight);g.panUp(2*b*d/c.clientHeight)}else void 0!==g.object.top?(g.panLeft(a*(g.object.right-g.object.left)/c.clientWidth),g.panUp(b*(g.object.top-g.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,g.zoomSpeed));C/=a};this.dollyOut=function(a){void 0===a&&
(a=Math.pow(.95,g.zoomSpeed));C*=a};this.update=function(){var a=this.object.position;s.copy(a).sub(this.target);s.applyQuaternion(H);var b=Math.atan2(s.x,s.z),c=Math.atan2(Math.sqrt(s.x*s.x+s.z*s.z),s.y);this.autoRotate&&this.rotateLeft(2*Math.PI/60/60*g.autoRotateSpeed);var b=b+z,c=c+x,c=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,c)),c=Math.max(1E-6,Math.min(Math.PI-1E-6,c)),d=s.length()*C,d=Math.max(this.minDistance,Math.min(this.maxDistance,d));this.target.add(A);s.x=d*Math.sin(c)*
Math.sin(b);s.y=d*Math.cos(c);s.z=d*Math.sin(c)*Math.cos(b);s.applyQuaternion(I);a.copy(this.target).add(s);this.object.lookAt(this.target);x=z=0;C=1;A.set(0,0,0);if(1E-6<F.distanceToSquared(this.object.position)||1E-6<8*(1-E.dot(this.object.quaternion)))this.dispatchEvent(G),F.copy(this.object.position),E.copy(this.object.quaternion)};this.reset=function(){B=D.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.domElement.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){if(!1!==g.enabled){a.preventDefault();if(0===a.button){if(!0===g.noRotate)return;B=D.ROTATE;f.set(a.clientX,a.clientY)}else if(1===a.button){if(!0===g.noZoom)return;B=D.DOLLY;u.set(a.clientX,a.clientY)}else if(2===a.button){if(!0===g.noPan)return;B=D.PAN;n.set(a.clientX,a.clientY)}document.addEventListener("mousemove",c,!1);document.addEventListener("mouseup",d,!1);g.dispatchEvent(M)}},!1);this.domElement.addEventListener("mousewheel",
e,!1);this.domElement.addEventListener("DOMMouseScroll",e,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==g.enabled){switch(a.touches.length){case 1:if(!0===g.noRotate)return;B=D.TOUCH_ROTATE;f.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===g.noZoom)return;B=D.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;b=Math.sqrt(b*b+a*a);u.set(0,b);break;case 3:if(!0===g.noPan)return;B=D.TOUCH_PAN;n.set(a.touches[0].pageX,
a.touches[0].pageY);break;default:B=D.NONE}g.dispatchEvent(M)}},!1);this.domElement.addEventListener("touchend",function(){!1!==g.enabled&&(g.dispatchEvent(N),B=D.NONE)},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==g.enabled){a.preventDefault();a.stopPropagation();var b=g.domElement===document?g.domElement.body:g.domElement;switch(a.touches.length){case 1:if(!0===g.noRotate)break;if(B!==D.TOUCH_ROTATE)break;h.set(a.touches[0].pageX,a.touches[0].pageY);k.subVectors(h,f);g.rotateLeft(2*
Math.PI*k.x/b.clientWidth*g.rotateSpeed);g.rotateUp(2*Math.PI*k.y/b.clientHeight*g.rotateSpeed);f.copy(h);g.update();break;case 2:if(!0===g.noZoom)break;if(B!==D.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;a=Math.sqrt(b*b+a*a);w.set(0,a);y.subVectors(w,u);0<y.y?g.dollyOut():g.dollyIn();u.copy(w);g.update();break;case 3:if(!0===g.noPan)break;if(B!==D.TOUCH_PAN)break;r.set(a.touches[0].pageX,a.touches[0].pageY);q.subVectors(r,n);g.pan(q.x,q.y);n.copy(r);
g.update();break;default:B=D.NONE}}},!1);window.addEventListener("keydown",function(a){if(!1!==g.enabled&&!0!==g.noKeys&&!0!==g.noPan)switch(a.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed);g.update();break;case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed);g.update();break;case g.keys.LEFT:g.pan(g.keyPanSpeed,0);g.update();break;case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);
Flory.Renderer=function(a,b,c,d,e){this.data={};if(void 0!=a){Flory.isWebGlAvailable()?this.renderer=new THREE.WebGLRenderer:this.renderer=new THREE.CanvasRenderer;void 0==this.renderer&&console.log("Flory : WebGL is not supported in your browser.");this.renderer.setSize(window.innerWidth,window.innerHeight);var g=document.getElementById("#"+a);null==g&&(g=document.getElementById(a),null==g&&console.log("Flory: A canvas must be a valid id."));this.canvas=g;g.appendChild(this.renderer.domElement);
this.scene=void 0===c?new THREE.Scene:c;this.camera=void 0===d?new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1E4):d;cameraPosition=new Flory.Vector3([0,0,100]);void 0!=b&&void 0!=b.cameraPosition&&(cameraPosition=new Flory.Vector3(b.cameraPosition));this.camera.position.set(cameraPosition.components[0],cameraPosition.components[1],cameraPosition.components[2]);this.camera.up=new THREE.Vector3(0,0,1);this.camera.lookAt(this.scene.position);this.scene.add(this.camera);this.renderables=
void 0===e?{}:e;this.camera.z=20;a=new THREE.OrbitControls(this.camera,this.renderer.domElement);a.enableDamping=!0;a.dampingFactor=.25;a.addEventListener("change",function(){this.render})}else console.log("Flory : A canvas_id must be specified.")};
Flory.Renderer.prototype={constructor:Flory.Renderer,addRenderable:function(a){if(a instanceof Flory.Renderable)this.renderables[a.id]=a,this.scene.add(this.renderables[a.id].mesh);else return console.log("Flory : Attempted to add an object to Flory.Renderer.renderables that did not inherit from Flory.Renderable."),this},setClearColor:function(a){this.renderer.setClearColor(a)},setCameraPosition:function(a){void 0!=a&&void 0!=a.components[0]&&void 0!=a.components[1]&&void 0!=a.components[2]&&this.camera.position.set(a.components[0],
a.components[1],a.components[2])},createHelperGrid:function(a,b,c,d){c=c.toUpperCase().split("").sort().join("");a=new THREE.GridHelper(a,b);"XY"==c?a.rotation.x=Math.PI/2:"YZ"==c&&(a.rotation.z=Math.PI/2);void 0!=d&&a.position.set(d.components[0],d.components[1],d.components[2]);this.scene.add(a)},createAxis:function(a,b){var c=new THREE.AxisHelper(a);void 0!=b&&c.position.set(position.components[0],position.components[1],position.components[2]);this.scene.add(c)},updateRenderablePosition:function(a){var b=
a.id;a=a.position;if(a instanceof Flory.baseVector){var c=a.dimension();3==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1],this.renderables[b].mesh.position.z=a.components[2]):2==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1]):1==c?this.renderables[b].mesh.position.x=a.components[0]:(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1],
this.renderables[b].mesh.position.z=a.components[2]);return this}console.log("Flory: position of entity is not a baseVector ancestor.")},removeRenderable:function(a){for(var b in this.renderables)if(this.renderables[b].id==a){this.scene.remove(this.renderables[b]);this.renderables=this.renderables.splice(b,1);break}return this},removeAllRenderables:function(){for(var a in this.renderables)this.scene.remove(this.renderables[a]);this.renderables=[];return this},setDimension:function(a,b){this.renderer.setSize(a,
b);return this},render:function(){this.renderer.render(this.scene,this.camera);return this}};Flory.Renderer.ShaderTypes={};Flory.PointCloudRenderer=function(a,b){Flory.Renderer.call(this,a,b);this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial)};Flory.PointCloudRenderer.prototype=Object.create(Flory.Renderer.prototype);
Flory.PointCloudRenderer.prototype.updatePointPositions=function(a){if(void 0!=a){for(var b=0,c=a.length;b<c;b++)this.data.particles.vertices[b]=new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]);this.data.particle_system.geometry.verticesNeedUpdate=!0}return this};
Flory.PointCloudRenderer.prototype.updatePointList=function(a){if(void 0==a)return this;this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});for(var b=0,c=a.length;b<c;b++)a[b]instanceof Flory.Monomer&&this.data.particles.vertices.push(new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]));this.scene.remove(this.data.particle_system);for(b in this.renderables)if(this.renderables[b].id==this.data.particle_system.id){this.renderables[b]=
void 0;delete this.renderables[b];break}this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial);this.scene.add(this.data.particle_system);this.renderables[this.data.particle_system.id]=this.data.particle_system;return this};Flory.Options=function(a,b){this.data={};this.json=a;this.html_handle=$("#"+b);this.option_list=[];this.generateAndPlace(a,this.html_handle)};
Flory.Options.prototype={constructor:Flory.Options,generateAndPlace:function(a,b){var c=[],d;d="<div id='option-menu'>";for(var e=0,g=a.options.length;e<g;e++){var f=a.options[e];if("float"==f.type||"integer"==f.type||"number"==f.type){if(f.slider){var h=this.generateRangeSlider(f.value,f.min,f.max,f.name,f.label,f.step,f.has_text_box,f.text_box_is_editable),k=h.input_id,n=h.text_box_id;f.has_text_box&&c.push(function(){$("#"+k).on("input",function(){$("#"+n).val(this.value)});$("#"+n).on("change",
function(){$("#"+k).val(this.value)})})}else h=this.generateTextBox(f.value,f.name,f.label);d+=h.html}else if("string"==f.type)h=this.generateTextBox(f.value,f.name,"text",f.label),d+=h.html;else if("checkbox"==f.type)h=this.generateCheckBox(f.value,f.name,f.label),d+=h.html;else if("button"==f.type){var h=this.generateButton(f.value,f.name,f.label),r=f.callback,q=h.button_id;r&&c.push(function(){$("#"+q).on("click",function(){r(q)})});d+=h.html}}b.html(d+"</div>");for(e=0;e<c.length;e++)c[e]()},
generateButton:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<button class='button' id='"+e+"'>"+a+"</button>"),d=d+"</div>";return{html:d,button_id:e}},generateTextBox:function(a,b,c,d){var e="";void 0==d&&(d=b);var g=Flory.generateGUID(),e=e+"<div class='option'>"+("<label for='"+b+"'>"+d+"</label>"),e=e+("<input class='text-box' type='"+(void 0!=c?c:"")+"' data-key='"+b+"' id='"+g+"' name='"+b+"' value='"+
a+"'> "),e=e+"</div>";return{html:e,text_box_id:g}},generateRangeSlider:function(a,b,c,d,e,g,f,h){h="";void 0==e&&(e=d);var k=Flory.generateGUID(),n=Flory.generateGUID();h=h+"<div class='option'>"+("<label for='"+d+"'>"+e+"</label>");f?(h+="<input class='text-box-above-slider' id='"+n+"' type='number' name='"+d+"' min='"+b+"' max='"+c+"' value='"+a+"'>",h+="<input class='range-slider-with-text-box' id='"+k+"' type='range' data-key='"+d+"' value='"+a+"'' name='"+d+"' min='"+b+"' max='"+c+"' step='"+
g+"'>"):h+="<input class='range-slider' id='"+k+"' type='range' value='"+a+"'' data-key='"+d+"' name='"+d+"' min='"+b+"' max='"+c+"' step='"+g+"'>";h+="</div>";return{html:h,input_id:k,text_box_id:n}},generateCheckBox:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<input class='checkbox' name='"+b+"' data-key='"+b+"' id='"+e+"' type='checkbox' value='i-am-a-check-box-causing-errors' ");a&&(d+="checked");d+=
">";d+="</div>";return{html:d,check_box_id:e}},update:function(){},updateValue:function(a,b){$("[name='"+a+"']").val(b).change()},getValue:function(a){var b=$("[name='"+a+"'").val();return"i-am-a-check-box-causing-errors"==b?$("[name='"+a+"']").is(":checked"):b},getValues:function(){}};Flory.Display=function(a,b){this.data={};this.json=a;this.value_functions=[];this.html_handle=$("#"+b);this.generateAndPlace(this.json,this.html_handle)};
Flory.Display.prototype={constructor:Flory.Display,generateAndPlace:function(a,b){var c;c="<div id='display-menu'>";for(var d=0,e=this.json.display.length;d<e;d++){var g=this.json.display[d];void 0==g.label&&(g.label=g.name);var f=Flory.generateGUID(),h=g.value();c+="<div class='display-value'>";c+="<label for='"+g.name+"'>"+g.label+"</label>";c+="<input type='text' class='display-value-text-box' data-key='"+g.name+"' id='"+f+"' name = '"+g.name+"' value='"+h+"'>";c+="</div>";this.value_functions[g.name]=
g.value}b.html(c+"</div>");return this},updateValues:function(){for(var a in this.value_functions){var b=this.value_functions[a](),c=$("[data-key='"+a+"'");if("number"==typeof b||"string"==typeof b)c.val(b);else if(b instanceof Flory.Vector){var d=b.dimension(),e="";for(a=0;a<d;a++)e+=b.components[a]+",";e=e.substring(0,e.length-1);c.val(e)}else b instanceof Flory.Vector3?c.val(b.x+","+b.y+","+b.z):b instanceof Flory.Vector2&&c.val(b.x+","+b.y)}return this},updateValue:function(a){$("[data-key='"+
a+"'").val(this.value_functions[a]())}};Flory.Particle=function(a){Flory.Renderable.call(this);this.position={};this.velocity={};this.acceleration={};this.radius={};this.charge={};this.mass={};this.name=void 0==a?"Particle":a};Flory.Particle.prototype=Object.create(Flory.Renderable.prototype);Flory.Particle.prototype.setDefaultMesh=function(){};
Flory.Monomer2D=function(a){Flory.Particle.call(this,a.name);var b=a.radius,c=a.charge,d=a.mass,e=a.kinematics,g=a.renderableSettings,f=a.position,h=a.velocity,k=a.acceleration;a=a.force;this.dimension=2;void 0!=e&&(f=void 0===f?e.position:f,h=void 0===h?e.velocity:h,k=void 0===k?e.acceleration:k,a=void 0===a?e.force:a);this.radius=void 0!=b?b:Flory.Monomer2D.defaultRadius;this.charge=void 0!=c?c:0;this.mass=void 0!=d?d:0;if(void 0==f)this.position=new Flory.Vector2(0,0);else if(f instanceof Array)this.position=
new Flory.Vector2(f[0],f[1]);else if(void 0!=f.x||void 0!=f.y)this.position=new Flory.Vector2(f.x,f.y);else if(f instanceof Flory.baseVector)this.position=f instanceof Flory.Vector3?new Flory.Vector2(f.x,f.y):f instanceof Flory.Vector?new Flory.Vector2(f.components[0],f.components[1]):f.clone();else{console.log("Flory: position is not a valid Flory.baseVector .");return}if(void 0==h)this.velocity=new Flory.Vector2(0,0);else if(h instanceof Array)this.velocity=new Flory.Vector2(h[0],h[1]);else if(void 0!=
h.x||void 0!=h.y)this.velocity=new Flory.Vector2(h.x,h.y);else if(h instanceof Flory.baseVector)this.velocity=h instanceof Flory.Vector3?new Flory.Vector2(h.x,h.y):h instanceof Flory.Vector?new Flory.Vector2(h.components[0],h.components[1]):h.clone();else{console.log("Flory: velocity is not a valid Flory.baseVector .");return}if(void 0==k)this.acceleration=new Flory.Vector2(0,0);else if(k instanceof Array)this.acceleration=new Flory.Vector2(k[0],k[1]);else if(void 0!=k.x||void 0!=k.y)this.acceleration=
new Flory.Vector2(k.x,k.y);else if(k instanceof Flory.baseVector)this.acceleration=k instanceof Flory.Vector3?new Flory.Vector2(k.x,k.y):k instanceof Flory.Vector?new Flory.Vector2(k.components[0],k.components[1]):k.clone();else{console.log("Flory: acceleration is not a valid Flory.baseVector .");return}if(void 0==a)this.force=new Flory.Vector2(0,0);else if(a instanceof Array)this.force=new Flory.Vector2(a[0],a[1]);else if(void 0!=a.x||void 0!=a.y)this.force=new Flory.Vector2(a.x,a.y);else if(a instanceof
Flory.baseVector)this.force=a instanceof Flory.Vector3?new Flory.Vector2(a.x,a.y):a instanceof Flory.Vector?new Flory.Vector2(a.components[0],a.components[1]):a.clone();else{console.log("Flory: force is not a valid Flory.baseVector .");return}this.setDefaultMesh(g)};Flory.Monomer2D.prototype=Object.create(Flory.Particle.prototype);
Flory.Monomer2D.prototype.setDefaultMesh=function(a){var b={},c={},c=new THREE.CircleGeometry(this.radius,void 0!=a&&"number"==typeof a.segments?a.segments:20,0,6.28318530718),b=void 0!=a&&"number"==typeof a.color?a.color:16711680,b=void 0==a?new THREE.MeshBasicMaterial({color:b}):void 0!=a.material&&a.material instanceof THREE.Material?a.material:new THREE.MeshBasicMaterial({color:b});this.mesh=new THREE.Mesh(c,b);this.geometry=c;this.material=b};
Flory.Monomer2D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer2D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer2D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer2D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};Flory.Monomer2D.prototype.clone=function(){return new Flory.Monomer2D(this.radius,this.position)};Flory.Monomer2D.defaultRadius=1;
Flory.Monomer3D=function(a){Flory.Particle.call(this,a.name);var b=a.radius,c=a.charge,d=a.mass,e=a.kinematics,g=a.renderableSettings;this.dimension=3;var f=a.position,h=a.velocity,k=a.acceleration;a=a.force;void 0!=e&&(f=void 0===f?e.position:f,h=void 0===h?e.velocity:h,k=void 0===k?e.acceleration:k,a=void 0===a?e.force:a);this.radius=void 0!==b?b:Flory.Monomer3D.defaultRadius;this.charge=void 0!==c?c:0;this.mass=void 0!=d?d:0;if(void 0==f)this.position=new Flory.Vector3(0,0,0);else if(f instanceof
Array)this.position=new Flory.Vector3(f[0],f[1],f[2]);else if(void 0!=f.x||void 0!=f.y||void 0!=f.z)this.position=new Flory.Vector3(f.x,f.y,f.z);else if(f instanceof Flory.baseVector)this.position=f instanceof Flory.Vector2?new Flory.Vector3(f.x,f.y,0):f instanceof Flory.Vector?new Flory.Vector3(f.components[0],f.components[1],f.components[2]):f.clone();else{console.log("Flory: position is not a valid Flory.baseVector.");return}if(void 0==h)this.velocity=new Flory.Vector3(0,0,0);else if(h instanceof
Array)this.velocity=new Flory.Vector3(h[0],h[1],h[2]);else if(void 0!=h.x||void 0!=h.y||void 0!=h.z)this.velocity=new Flory.Vector3(h.x,h.y,h.z);else if(h instanceof Flory.baseVector)this.velocity=h instanceof Flory.Vector2?new Flory.Vector3(h.x,h.y,0):h instanceof Flory.Vector?new Flory.Vector3(h.components[0],h.components[1],h.components[2]):h.clone();else{console.log("Flory: velocity is not a valid Flory.baseVector.");return}if(void 0==k)this.acceleration=new Flory.Vector3(0,0,0);else if(k instanceof
Array)this.acceleration=new Flory.Vector3(k[0],k[1],k[2]);else if(void 0!=k.x||void 0!=k.y||void 0!=k.z)this.acceleration=new Flory.Vector3(k.x,k.y,k.z);else if(k instanceof Flory.baseVector)this.acceleration=k instanceof Flory.Vector2?new Flory.Vector3(k.x,k.y,0):k instanceof Flory.Vector?new Flory.Vector3(k.components[0],k.components[1],k.components[2]):k.clone();else{console.log("Flory: acceleration is not a valid Flory.baseVector.");return}if(void 0==a)this.force=new Flory.Vector3(0,0,0);else if(a instanceof
Array)this.force=new Flory.Vector3(a[0],a[1],a[2]);else if(void 0!=a.x||void 0!=a.y||void 0!=a.z)this.force=new Flory.Vector3(a.x,a.y,a.z);else if(a instanceof Flory.baseVector)this.force=a instanceof Flory.Vector2?new Flory.Vector3(a.x,a.y,0):a instanceof Flory.Vector?new Flory.Vector3(a.components[0],a.components[1],a.components[2]):a.clone();else{console.log("Flory: force is not a valid Flory.baseVector.");return}this.setDefaultMesh(g)};Flory.Monomer3D.prototype=Object.create(Flory.Particle.prototype);
Flory.Monomer3D.prototype.setDefaultMesh=function(a){var b={},c={},c=void 0!=a&&"number"==typeof a.segments?a.segments:20,c=new THREE.SphereGeometry(this.radius,c,c),b=void 0!=a&&"number"==typeof a.color?a.color:16711680,b=void 0==a?new THREE.MeshBasicMaterial({color:b}):void 0!=a.material&&a.material instanceof THREE.Material?a.material:new THREE.MeshBasicMaterial({color:b});this.mesh=new THREE.Mesh(c,b);this.geometry=c;this.material=b};
Flory.Monomer3D.prototype.applyForce=function(a,b){acceleration.x+=a.x/this.mass*b;acceleration.y+=a.y/this.mass*b;acceleration.z+=a.z/this.mass*b};Flory.Monomer3D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer3D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer3D.prototype.incrementZ=function(a){this.position.z+=a;return this};Flory.Monomer3D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};
Flory.Monomer3D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};Flory.Monomer3D.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer3D.defaultRadius=1;
Flory.Monomer=function(a){var b=a.name;if(void 0==a.kinematics&&void 0===a.position)console.log("Flory: Flory.Monomer needs at least the position to know what the dimension of the monomer is.");else if(void 0!==a.kinematics&&void 0===a.kinematics.position)console.log("Flory: Flory.Monomer needs at least the position to know what the dimension of the monomer is.");else{Flory.Particle.call(this,b);var b=a.radius,c=a.charge,d=a.mass,e=a.kinematics,g=a.renderableSettings,f=a.position,h=a.velocity,k=a.acceleration;
a=a.force;void 0!=e&&(f=void 0===f?e.position:f,h=void 0===h?e.velocity:h,k=void 0===k?e.acceleration:k,a=void 0===a?e.force:a);this.radius=void 0!=b?b:Flory.Monomer.defaultRadius;this.charge=void 0!=c?c:0;this.mass=void 0!=d?d:0;void 0==f.components&&f instanceof Array?this.position=new Flory.Vector(f):f instanceof Flory.baseVector?this.position=f instanceof Flory.Vector2||f instanceof Flory.Vector3?new Flory.Vector(h.components):f.clone():console.log("Flory: position is not an array or descendant of Flory.baseVector ");
void 0==h?this.velocity=new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==h.components&&h instanceof Array?this.velocity=new Flory.Vector(h):h instanceof Flory.baseVector?this.velocity=h instanceof Flory.Vector2||h instanceof Flory.Vector3?new Flory.Vector(h.components):h.clone():console.log("Flory: velocity is not an array or descendant of Flory.baseVector ");void 0==k?this.acceleration=new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):
void 0==k.components&&k instanceof Array?this.acceleration=new Flory.Vector(k):k instanceof Flory.baseVector?this.acceleration=k instanceof Flory.Vector2||k instanceof Flory.Vector3?new Flory.Vector(h.components):k.clone():console.log("Flory: acceleration is not an array or descendant of Flory.baseVector ");void 0==a?this.force=new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==a.components&&a instanceof Array?this.force=new Flory.Vector(a):a instanceof Flory.baseVector?
this.force=a instanceof Flory.Vector2||a instanceof Flory.Vector3?new Flory.Vector(h.components):a.clone():console.log("Flory: force is not an array or descendant of Flory.baseVector ");this.setDefaultMesh(g)}};Flory.Monomer.prototype=Object.create(Flory.Particle.prototype);
Flory.Monomer.prototype.setDefaultMesh=function(a){var b={},c={},c=void 0!=a&&"number"==typeof a.segments?a.segments:20,c=3<=this.position.dimension()?new THREE.SphereGeometry(this.radius,c,c):new THREE.CircleGeometry(this.radius,c,0,6.28318530718),b=void 0!=a&&"number"==typeof a.color?a.color:16711680,b=void 0==a?new THREE.MeshBasicMaterial({color:b}):void 0!=a.material&&a.material instanceof THREE.Material?a.material:new THREE.MeshBasicMaterial({color:b});this.geometry=c;this.material=b;this.mesh=
new THREE.Mesh(c,b);return this};Flory.Monomer.prototype.applyForce=function(a,b){for(var c=0;c<this.acceleration.components.length;c++)this.acceleration.components[c]+=a.components[c]/this.mass*b;return this};Flory.Monomer.prototype.incrementDimension=function(a,b){this.position.components[a]+=b;return this};Flory.Monomer.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer.defaultRadius=1;Flory.Box2D=function(a,b,c,d,e){Flory.Entity.call(this);this.name=void 0==e?"Box2D":e;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.width=void 0==c?0:c;this.height=void 0==d?0:d};Flory.Box2D.prototype=Object.create(Flory.Entity);Flory.Box2D.prototype.contructor=Flory.Box2D;
Flory.Box3D=function(a,b,c,d,e,g,f){Flory.Entity.call(this);this.name=void 0==f?"Box3D":f;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.z=void 0==b?0:c;this.width=void 0==d?0:d;this.height=void 0==e?0:e;this.length=void 0==g?0:g};Flory.Box3D.prototype=Object.create(Flory.Entity);Flory.Box3D.prototype.contructor=Flory.Box3D;Flory.Newtonian=function(){Flory.Environment.call(this);this.meshes=[]};Flory.Newtonian.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian.constructor=Flory.Newtonian;
Flory.Newtonian.prototype.update=function(a){a=this.entities.length;for(var b=0;b<a;b++){var c=this.entities[b],d=new Flory.Vector;if(c instanceof Flory.Particle){for(var e=0;e<a;e++){var g=this.entities[e];g instanceof Flory.baseField&&d.add(g.getForce(c.position))}c.force=d.clone();c.acceleration=c.force.mult(1/c.mass);c.velocity.add(c.acceleration.mult(Flory.timestep));c.position.add(c.velocity.mult(.5*Flory.timestep))}}return this};
Flory.RandomWalk=function(a,b){Flory.Environment.call(this);this.randomGen=new Flory.RandomGen(a);this.step_size=void 0!=b?b:1};Flory.RandomWalk.prototype=Object.create(Flory.Environment.prototype);Flory.RandomWalk.prototype.constructor=Flory.RandomWalk;
Flory.RandomWalk.prototype.update=function(a){var b=this.entities.length,c,d,e,g=1;void 0!=a.number_of_steps&&(g=a.number_of_steps);for(var f=0;f<g;f++)for(var h=0;h<b;h++)if(a=this.entities[h],a instanceof Flory.Particle){c=a.position.dimension();c=1/c;d=0;e=this.randomGen.random();for(e-=c;0<e;)e-=c,d++;e=this.randomGen.random();.5>e?a.position.components[d]++:a.position.components[d]--}return this};
Flory.LennardJones=function(a,b){Flory.Environment.call(this);this.epsilon=void 0!=a?a:Flory.LennardJones.default_epsilon;this.sigma=void 0!=b?b:Flory.LennardJones.default_sigma;this.data.rendererType=Flory.Environment.RendererType.PointCloud};Flory.LennardJones.prototype=Object.create(Flory.Environment.prototype);Flory.LennardJones.prototype.constructor=Flory.LennardJones;
Flory.LennardJones.prototype.addedEntity=function(a){a instanceof Flory.Monomer&&(a.data.last_position=a.position.clone(),this.visualization&&this.renderer.updatePointList(this.entities))};Flory.LennardJones.prototype.setUpVisualization=function(){this.renderer.updatePointList(this.entities)};
Flory.LennardJones.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a];c.force.zero();if(c instanceof Flory.Monomer)for(var d=0,b=this.entities.length;d<a;d++){var e=this.entities[d];if(e instanceof Flory.Monomer){var g=e.position.clone().sub(c.position),f=g.length();if(!(f>Flory.LennardJones.far_cutoff_distance)){var h=this.sigma/f,g=g.scale(-24*this.epsilon/(f*f)*(2*Math.pow(h,12)-Math.pow(h,6)));c.force.add(g);e.force.add(g.negate())}}}}a=0;for(b=this.entities.length;a<
b;a++)c=this.entities[a],c instanceof Flory.Monomer&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*Flory.timestep)));this.visualization&&(this.renderer.updatePointPositions(this.entities),this.renderer.render());return this};Flory.LennardJones.far_cutoff_distance=100;Flory.LennardJones.default_sigma=1;Flory.LennardJones.default_epsilon=1;Flory.Newtonian2D=function(){Flory.Environment.call(this)};
Flory.Newtonian2D.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian2D.constructor=Flory.Newtonian2D;
Flory.Newtonian2D.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a],d=new Flory.Vector2;if(c instanceof Flory.Monomer2D){for(var e=0,b=this.entities.length;e<b;e++){var g=this.entities[e];g instanceof Flory.Field2D&&d.add(g.getForce(c.position))}c.force=d.clone()}}a=0;for(b=this.entities.length;a<b;a++)c=this.entities[a],c instanceof Flory.Monomer2D&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*
Flory.timestep)),this.visualization&&this.renderer.updateRenderablePosition(this.entities[a]));this.visualization&&this.renderer.render();return this};Flory.Polymer=function(a,b,c,d,e,g){Flory.Environment.call(this);this.randomGen=new Flory.RandomGen(a);this.step_size=void 0!=b?b:1;this.data.bondPairs=[];this.springConstant=d;this.bondLength=c;this.sigma=e;this.epsilon=g};Flory.Polymer.prototype=Object.create(Flory.Environment.prototype);Flory.Polymer.prototype.constructor=Flory.Polymer;
Flory.Polymer.prototype.removedEntity=function(a,b,c){this.visualization&&this.renderer.removeRenderable(b)};Flory.Polymer.prototype.addedEntity=function(a){this.visualization&&(a.mesh=this.generateMonomerMesh(a,this.data.visualization_data),this.renderer.addRenderable(a));return this};Flory.Polymer.prototype.addedEntityPair=function(a,b){this.visualization&&(entity.mesh=this.generateMonomerMesh(entity,this.data.visualization_data),this.renderer.addRenderable(entity));return this};
Flory.Polymer.prototype.createBondBetweenEntities=function(a,b,c){for(var d=!1,e=!1,g=0,f=0,h=0,k=this.entities.length;h<k;h++)this.entities[h].id===b.id&&(e=!0,g=h),this.entities[h].id===a.id&&(d=!0,f=h);d&&e?this.data.bondPairs.push([f,g,c]):console.log("Flory : Could not create bond between entities because the entities are not added to environment.");return this};
Flory.Polymer.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.Polymer.prototype.setUpVisualization=function(a){this.data.visualization_data=a;for(var b=0;b<this.entities.length;b++)this.entities[b].mesh=this.generateMonomerMesh(this.entities[b],a),this.renderer.addRenderable(this.entities[b])};Flory.Polymer.prototype.disabledVisualization=function(){for(var a=0;a<this.entities.length;a++)this.renderer.removeRenderable(this.entity[a]);this.data.visualization_data=void 0;delete this.data.visualization_data};
Flory.Polymer.prototype.update=function(a){var b=this.data.bondPairs.length,c=1;void 0!=a.number_of_steps&&(c=a.number_of_steps);for(var d=0;d<c;d++){for(var e=0;e<b;e++)pair=this.data.bondPairs[e],entity1=this.entities[pair[0]],f=this.entities[pair[1]],f.applyForce(entity1.position.clone().sub(f.position).mult(this.springConstant*(entity1.distanceTo(f)-pair[2])),Flory.timestep),entity1.applyForce(entity1.position.clone().sub(f.position).mult(-this.springConstant*(entity1.distanceTo(f)-pair[2])),
Flory.timestep);e=0;for(b=this.entities.length;e<b;e++)if(a=this.entities[e],a instanceof Flory.Monomer)for(var g=0,b=this.entities.length;g<e;g++){var f=this.entities[g];if(f instanceof Flory.Monomer){var h=f.position.clone().sub(a.position),k=h.length();if(!(k>Flory.Polymer.far_cutoff_distance)){var n=this.sigma/k,h=h.scale(-24*this.epsilon/(k*k)*(2*Math.pow(n,12)-Math.pow(n,6)));a.applyForce(h,Flory.timestep);f.applyForce(h.negate(),Flory.timestep)}}}for(e=0;e<this.entities.length;e++)this.entities[e].velocity.add(this.entities[e].acceleration.mult(Flory.timestep)),
this.entities[e].position.add(this.entities[e].velocity.mult(.5*Flory.timestep)),this.visualization&&this.renderer.updateRenderablePosition(this.entities[e])}this.visualization&&this.renderer.render();return this};Flory.Polymer.prototype.resetEnvironment=function(){this.entities=[]};Flory.Polymer.far_cutoff_distance=5;Flory.Polymer.default_sigma=1;Flory.Polymer.default_epsilon=1;
