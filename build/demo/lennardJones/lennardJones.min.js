'use strict';var Flory={VERSION:"0.01",timestep:.01,Vector3:function(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c}};
Flory.Vector3.prototype={constructor:Flory.Vector3,dimension:function(){return 3},add:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},sub:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},scale:function(a){this.x*=a;this.y*=a;this.z*=a;return this},mult:function(a){return new Flory.Vector3(this.x*a,this.y*a,this.z*a)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z},distanceTo:function(a){return Math.sqrt((a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z))},distanceToSq:function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)+(a.z-this.z)*(a.z-this.z)},zero:function(){this.z=this.y=this.x=0;return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},clone:function(){return new Flory.Vector3(this.x,this.y,this.z)}};
Flory.Vector2=function(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b};
Flory.Vector2.prototype={constructor:Flory.Vector2,dimension:function(){return 2},add:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a){this.x-=a.x;this.y-=a.y;return this},scale:function(a){this.x*=a;this.y*=a;return this},mult:function(a){return new Flory.Vector2(this.x*a,this.y*a)},dot:function(a){return this.x*a.x+this.y*a.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},distanceTo:function(a){return Math.sqrt((a.x-
this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y))},distanceToSq:function(a){return(a.x-this.x)*(a.x-this.x)+(a.y-this.y)*(a.y-this.y)},zero:function(){this.y=this.x=0;return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},clone:function(){return new Flory.Vector2(this.x,this.y)}};Flory.Vector=function(a){this.components=void 0==a?[]:"number"==typeof a?[].slice.apply(new Uint8Array(a)):a};
Flory.Vector.prototype={constructor:Flory.Vector,dimension:function(){return this.components.length},add:function(a){if(a.components.length>this.components.length){for(var b=0,c=this.components.length;b<c;b++)this.components[b]+=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]+=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]+=a.components[b];return this},sub:function(a){if(a.components.length>this.components.length){for(var b=
0,c=this.components.length;b<c;b++)this.components[b]-=a.components[b];for(c=a.components.length;b<c;b++)this.components[b]=0,this.components[b]-=a.components[b]}else for(var b=0,c=a.components.length;b<c;b++)this.components[b]-=a.components[b];return this},scale:function(a){for(var b=0,c=this.components.length;b<c;b++)this.components[b]*=a;return this},mult:function(a){for(var b=[],c=0,d=this.components.length;c<d;c++)b[c]=a*this.components[c];return new Flory.Vector(b)},dot:function(a){if(a.components.length!=
this.components.length)console.log("Flory.vector.dot(a) can only accept a vector of the same dimension as the object.");else{for(var b=0,c=0,d=a.components.length;c<d;c++)b+=this.components[c]*a.components[c];return b}},length:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return Math.sqrt(a)},lengthSq:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b]*this.components[b];return a},distanceTo:function(a){var b=0,c=
0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=(this.components[c]-0)*(this.components[c]-0)}else for(d=
a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return Math.sqrt(b)},distanceToSq:function(a){var b=0,c=0;if(a.components.length>this.components.length){for(var d=this.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);for(d=a.components.length;c<d;c++)b+=(0-a.components[c])*(0-a.components[c])}else if(a.components.length<this.components.length){for(d=a.components.length;c<d;c++)b+=(this.components[c]-
a.components[c])*(this.components[c]-a.components[c]);for(d=this.components.length;c<d;c++)b+=(this.components[c]-0)*(this.components[c]-0)}else for(d=a.components.length;c<d;c++)b+=(this.components[c]-a.components[c])*(this.components[c]-a.components[c]);return b},zero:function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=0;return this},negate:function(){for(var a=0,b=this.components.length;a<b;a++)this.components[a]=-this.components[a];return this},clone:function(){return new Flory.Vector(this.components.slice(0))}};
Flory.RandomGen=function(a){void 0==a&&(a=(new Date).getTime());this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=Array(this.N);this.mti=this.N+1;this.init_genrand(a)};Flory.RandomGen.prototype.init_genrand=function(a){this.mt[0]=a>>>0;for(this.mti=1;this.mti<this.N;this.mti++)a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((a&4294901760)>>>16)<<16)+1812433253*(a&65535)+this.mti,this.mt[this.mti]>>>=0};
Flory.RandomGen.prototype.init_by_array=function(a,b){var c,d,e;this.init_genrand(19650218);c=1;d=0;for(e=this.N>b?this.N:b;e;e--){var f=this.mt[c-1]^this.mt[c-1]>>>30;this.mt[c]=(this.mt[c]^(1664525*((f&4294901760)>>>16)<<16)+1664525*(f&65535))+a[d]+d;this.mt[c]>>>=0;c++;d++;c>=this.N&&(this.mt[0]=this.mt[this.N-1],c=1);d>=b&&(d=0)}for(e=this.N-1;e;e--)f=this.mt[c-1]^this.mt[c-1]>>>30,this.mt[c]=(this.mt[c]^(1566083941*((f&4294901760)>>>16)<<16)+1566083941*(f&65535))-c,this.mt[c]>>>=0,c++,c>=this.N&&
(this.mt[0]=this.mt[this.N-1],c=1);this.mt[0]=2147483648};
Flory.RandomGen.prototype.genrand_int32=function(){var a,b=[0,this.MATRIX_A];if(this.mti>=this.N){var c;this.mti==this.N+1&&this.init_genrand(5489);for(c=0;c<this.N-this.M;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+this.M]^a>>>1^b[a&1];for(;c<this.N-1;c++)a=this.mt[c]&this.UPPER_MASK|this.mt[c+1]&this.LOWER_MASK,this.mt[c]=this.mt[c+(this.M-this.N)]^a>>>1^b[a&1];a=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-
1]^a>>>1^b[a&1];this.mti=0}a=this.mt[this.mti++];a^=a>>>11;a^=a<<7&2636928640;a^=a<<15&4022730752;return(a^a>>>18)>>>0};Flory.RandomGen.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};Flory.RandomGen.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};Flory.RandomGen.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};Flory.RandomGen.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)};
Flory.RandomGen.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return 1.1102230246251565E-16*(67108864*a+b)};Flory.Matrix4=function(a){this.matrix=[];for(var b=0;16>b;b++)this.matrix[b]=a[b]};
Flory.Matrix4.prototype={contructor:Flory.Matrix4,setElement:function(a,b,c){this.matrix[4*a+b]=c;return this},setMatrix:function(a){this.matrix=a;return this},add:function(a){for(var b=0;16>b;b++)this.matrix[b]+=a.matrix[b];return this},multiply:function(a){m=this.matrix;t=a.matrix;m[0]=m[0]*t[0]+m[1]*t[4]+m[2]*t[8]+m[3]*t[12];m[1]=m[0]*t[1]+m[1]*t[5]+m[2]*t[9]+m[3]*t[13];m[2]=m[0]*t[2]+m[1]*t[6]+m[2]*t[10]+m[3]*t[14];m[3]=m[0]*t[3]+m[1]*t[7]+m[2]*t[11]+m[3]*t[15];m[0]=m[4]*t[0]+m[5]*t[4]+m[6]*t[8]+
m[7]*t[12];m[1]=m[4]*t[1]+m[5]*t[5]+m[6]*t[9]+m[7]*t[13];m[2]=m[4]*t[2]+m[5]*t[6]+m[6]*t[10]+m[7]*t[14];m[3]=m[4]*t[3]+m[5]*t[7]+m[6]*t[11]+m[7]*t[15];m[0]=m[8]*t[0]+m[9]*t[4]+m[10]*t[8]+m[11]*t[12];m[1]=m[8]*t[1]+m[9]*t[5]+m[10]*t[9]+m[11]*t[13];m[2]=m[8]*t[2]+m[9]*t[6]+m[10]*t[10]+m[11]*t[14];m[3]=m[8]*t[3]+m[9]*t[7]+m[10]*t[11]+m[11]*t[15];m[0]=m[12]*t[0]+m[13]*t[4]+m[14]*t[8]+m[15]*t[12];m[1]=m[12]*t[1]+m[13]*t[5]+m[14]*t[9]+m[15]*t[13];m[2]=m[12]*t[2]+m[13]*t[6]+m[14]*t[10]+m[15]*t[14];m[3]=
m[12]*t[3]+m[13]*t[7]+m[14]*t[11]+m[15]*t[15];return this},transpose:function(){for(var a=0;4>a;a++)for(var b=0;4>b;b++)this.matrix[a*b+b]=this.matrix[a*b+a]}};Flory.Matrix4.Identity=new Flory.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);
(function(a){function b(a){this.options=d.extend({},b.defaultOptions,a);this.data=[];this.minValue=this.maxValue=Number.NaN}function c(a){this.options=d.extend({},c.defaultChartOptions,a);this.seriesSet=[];this.currentValueRange=1;this.lastRenderTimeMillis=this.currentVisMinValue=0}var d={extend:function(){arguments[0]=arguments[0]||{};for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]="object"===typeof arguments[a][b]?arguments[a][b]instanceof
Array?arguments[a][b]:d.extend(arguments[0][b],arguments[a][b]):arguments[a][b]);return arguments[0]}};b.defaultOptions={resetBoundsInterval:3E3,resetBounds:!0};b.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1];this.minValue=this.data[0][1];for(var a=1;a<this.data.length;a++){var b=this.data[a][1];b>this.maxValue&&(this.maxValue=b);b<this.minValue&&(this.minValue=b)}}else this.minValue=this.maxValue=Number.NaN};b.prototype.append=function(a,b,c){for(var d=this.data.length-
1;0<d&&this.data[d][0]>a;)d--;0<this.data.length&&this.data[d][0]===a?c?(this.data[d][1]+=b,b=this.data[d][1]):this.data[d][1]=b:d<this.data.length-1?this.data.splice(d+1,0,[a,b]):this.data.push([a,b]);this.maxValue=isNaN(this.maxValue)?b:Math.max(this.maxValue,b);this.minValue=isNaN(this.minValue)?b:Math.min(this.minValue,b)};b.prototype.dropOldData=function(a,b){for(var c=0;this.data.length-c>=b&&this.data[c+1][0]<a;)c++;0!==c&&this.data.splice(0,c)};c.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,
yMinFormatter:function(a,b){return parseFloat(a).toFixed(b)},yMaxFormatter:function(a,b){return parseFloat(a).toFixed(b)},maxValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1E3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2},horizontalLines:[]};c.AnimateCompatibility=function(){return{requestAnimationFrame:function(a,
b){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a((new Date).getTime())},16)}).call(window,a,b)},cancelAnimationFrame:function(a){return(window.cancelAnimationFrame||function(a){clearTimeout(a)}).call(window,a)}}}();c.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"};c.prototype.addTimeSeries=function(a,b){this.seriesSet.push({timeSeries:a,
options:d.extend({},c.defaultSeriesPresentationOptions,b)});a.options.resetBounds&&0<a.options.resetBoundsInterval&&(a.resetBoundsTimerId=setInterval(function(){a.resetBounds()},a.options.resetBoundsInterval))};c.prototype.removeTimeSeries=function(a){for(var b=this.seriesSet.length,c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a){this.seriesSet.splice(c,1);break}a.resetBoundsTimerId&&clearInterval(a.resetBoundsTimerId)};c.prototype.getTimeSeriesOptions=function(a){for(var b=this.seriesSet.length,
c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a)return this.seriesSet[c].options};c.prototype.bringToFront=function(a){for(var b=this.seriesSet.length,c=0;c<b;c++)if(this.seriesSet[c].timeSeries===a){a=this.seriesSet.splice(c,1);this.seriesSet.push(a[0]);break}};c.prototype.streamTo=function(a,b){this.canvas=a;this.delay=b;this.start()};c.prototype.start=function(){if(!this.frame){if(this.options.enableDpiScaling&&window&&1!==window.devicePixelRatio){var a=this.canvas.getAttribute("width"),b=this.canvas.getAttribute("height");
this.canvas.setAttribute("width",a*window.devicePixelRatio);this.canvas.setAttribute("height",b*window.devicePixelRatio);this.canvas.style.width=a+"px";this.canvas.style.height=b+"px";this.canvas.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)}var d=function(){this.frame=c.AnimateCompatibility.requestAnimationFrame(function(){this.render();d()}.bind(this))}.bind(this);d()}};c.prototype.stop=function(){this.frame&&(c.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)};
c.prototype.updateValueRange=function(){for(var a=this.options,b=Number.NaN,c=Number.NaN,d=0;d<this.seriesSet.length;d++){var l=this.seriesSet[d].timeSeries;isNaN(l.maxValue)||(b=isNaN(b)?l.maxValue:Math.max(b,l.maxValue));isNaN(l.minValue)||(c=isNaN(c)?l.minValue:Math.min(c,l.minValue))}b=null!=a.maxValue?a.maxValue:b*a.maxValueScale;null!=a.minValue&&(c=a.minValue);this.options.yRangeFunction&&(b=this.options.yRangeFunction({min:c,max:b}),c=b.min,b=b.max);isNaN(b)||isNaN(c)||(d=b-c-this.currentValueRange,
l=c-this.currentVisMinValue,this.isAnimatingScale=.1<Math.abs(d)||.1<Math.abs(l),this.currentValueRange+=a.scaleSmoothing*d,this.currentVisMinValue+=a.scaleSmoothing*l);this.valueRange={min:c,max:b}};c.prototype.render=function(a,b){var c=(new Date).getTime();if(!this.isAnimatingScale){var d=Math.min(1E3/6,this.options.millisPerPixel);if(c-this.lastRenderTimeMillis<d)return}this.lastRenderTimeMillis=c;a=a||this.canvas;b=b||c-(this.delay||0);b-=b%this.options.millisPerPixel;var c=a.getContext("2d"),
d=this.options,l=a.clientWidth,p=a.clientHeight,r=b-l*d.millisPerPixel,n=function(a){a-=this.currentVisMinValue;return 0===this.currentValueRange?p:p-Math.round(a/this.currentValueRange*p)}.bind(this);this.updateValueRange();c.font=d.labels.fontSize+"px "+d.labels.fontFamily;c.save();c.translate(0,0);c.beginPath();c.rect(0,0,l,p);c.clip();c.save();c.fillStyle=d.grid.fillStyle;c.clearRect(0,0,l,p);c.fillRect(0,0,l,p);c.restore();c.save();c.lineWidth=d.grid.lineWidth;c.strokeStyle=d.grid.strokeStyle;
if(0<d.grid.millisPerLine)for(var u=l-c.measureText(u).width+4,w=b-b%d.grid.millisPerLine;w>=r;w-=d.grid.millisPerLine){var v=Math.round(l-(b-w)/d.millisPerPixel);d.grid.sharpLines&&(v-=.5);c.beginPath();c.moveTo(v,0);c.lineTo(v,p);c.stroke();c.closePath();if(d.timestampFormatter&&v<u){var x=d.timestampFormatter(new Date(w)),z=c.measureText(x).width,u=v-z-2;c.fillStyle=d.labels.fillStyle;c.fillText(x,v-z,p-2)}}for(u=1;u<d.grid.verticalSections;u++)w=Math.round(u*p/d.grid.verticalSections),d.grid.sharpLines&&
(w-=.5),c.beginPath(),c.moveTo(0,w),c.lineTo(l,w),c.stroke(),c.closePath();d.grid.borderVisible&&(c.beginPath(),c.strokeRect(0,0,l,p),c.closePath());c.restore();if(d.horizontalLines&&d.horizontalLines.length)for(u=0;u<d.horizontalLines.length;u++)w=d.horizontalLines[u],v=Math.round(n(w.value))-.5,c.strokeStyle=w.color||"#ffffff",c.lineWidth=w.lineWidth||1,c.beginPath(),c.moveTo(0,v),c.lineTo(l,v),c.stroke(),c.closePath();for(u=0;u<this.seriesSet.length;u++){c.save();x=this.seriesSet[u].timeSeries;
w=x.data;v=this.seriesSet[u].options;x.dropOldData(r,d.maxDataSetLength);c.lineWidth=v.lineWidth;c.strokeStyle=v.strokeStyle;c.beginPath();for(var y=z=x=0,A=0;A<w.length&&1!==w.length;A++){var C=Math.round(l-(b-w[A][0])/d.millisPerPixel),B=n(w[A][1]);if(0===A)x=C,c.moveTo(C,B);else switch(d.interpolation){case "linear":case "line":c.lineTo(C,B);break;default:c.bezierCurveTo(Math.round((z+C)/2),y,Math.round(z+C)/2,B,C,B);break;case "step":c.lineTo(C,y),c.lineTo(C,B)}z=C;y=B}1<w.length&&(v.fillStyle&&
(c.lineTo(l+v.lineWidth+1,y),c.lineTo(l+v.lineWidth+1,p+v.lineWidth+1),c.lineTo(x,p+v.lineWidth),c.fillStyle=v.fillStyle,c.fill()),v.strokeStyle&&"none"!==v.strokeStyle&&c.stroke(),c.closePath());c.restore()}if(!d.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var r=d.yMaxFormatter(this.valueRange.max,d.labels.precision),u=d.yMinFormatter(this.valueRange.min,d.labels.precision);c.fillStyle=d.labels.fillStyle;c.fillText(r,l-c.measureText(r).width-2,d.labels.fontSize);c.fillText(u,
l-c.measureText(u).width-2,p-2)}c.restore()};c.timeFormatter=function(a){function b(a){return(10>a?"0":"")+a}return b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())};a.TimeSeries=b;a.SmoothieChart=c})("undefined"===typeof exports?this:exports);
(function(a,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b=a.length,c=s.type(a);return"function"===c||s.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function d(a,b,c){if(s.isFunction(b))return s.grep(a,function(a,d){return!!b.call(a,
d,a)!==c});if(b.nodeType)return s.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(ma.test(b))return s.filter(b,a,c);b=s.filter(b,a)}return s.grep(a,function(a){return 0<=V.call(b,a)!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=Aa[a]={};s.each(a.match(va)||[],function(a,c){b[c]=!0});return b}function g(){ca.removeEventListener("DOMContentLoaded",g,!1);a.removeEventListener("load",g,!1);s.ready()}function h(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=s.expando+Math.random()}function l(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(gb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Za.test(c)?s.parseJSON(c):c}catch(d){}qa.set(a,b,c)}else c=void 0;return c}function p(){return!0}function r(){return!1}function n(){try{return ca.activeElement}catch(a){}}function u(a,b){return s.nodeName(a,"table")&&s.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function w(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function v(a){var b=ia.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function x(a,b){for(var c=0,d=a.length;c<d;c++)Y.set(a[c],"globalEval",!b||Y.get(b[c],"globalEval"))}function z(a,b){var c,d,g,e;if(1===b.nodeType){if(Y.hasData(a)&&(e=Y.access(a),c=Y.set(b,e),e=e.events))for(g in delete c.handle,
c.events={},e)for(c=0,d=e[g].length;c<d;c++)s.event.add(b,g,e[g][c]);qa.hasData(a)&&(g=qa.access(a),g=s.extend({},g),qa.set(b,g))}}function y(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&s.nodeName(a,b)?s.merge([a],c):c}function A(b,c){var d,g=s(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(g[0]))?d.display:s.css(g[0],"display");g.detach();return e}function C(a){var b=
ca,c=wb[a];c||(c=A(a,b),"none"!==c&&c||(q=(q||s("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=q[0].contentDocument,b.write(),b.close(),c=A(a,b),q.detach()),wb[a]=c);return c}function B(a,b,c){var d,g,e=a.style;(c=c||Wa(a))&&(g=c.getPropertyValue(b)||c[b]);c&&(""!==g||s.contains(a.ownerDocument,a)||(g=s.style(a,b)),Ma.test(g)&&xb.test(b)&&(a=e.width,b=e.minWidth,d=e.maxWidth,e.minWidth=e.maxWidth=e.width=g,g=c.width,e.width=a,e.minWidth=b,e.maxWidth=d));return void 0!==
g?g+"":g}function E(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function F(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,g=yb.length;g--;)if(b=yb[g]+c,b in a)return b;return d}function I(a,b,c){return(a=Ib.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function D(a,b,c,d,g){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=s.css(a,c+oa[b],!0,g)),d?("content"===c&&(e-=s.css(a,"padding"+
oa[b],!0,g)),"margin"!==c&&(e-=s.css(a,"border"+oa[b]+"Width",!0,g))):(e+=s.css(a,"padding"+oa[b],!0,g),"padding"!==c&&(e+=s.css(a,"border"+oa[b]+"Width",!0,g)));return e}function G(a,b,c){var d=!0,g="width"===b?a.offsetWidth:a.offsetHeight,e=Wa(a),f="border-box"===s.css(a,"boxSizing",!1,e);if(0>=g||null==g){g=B(a,b,e);if(0>g||null==g)g=a.style[b];if(Ma.test(g))return g;d=f&&(ja.boxSizingReliable()||g===a.style[b]);g=parseFloat(g)||0}return g+D(a,b,c||(f?"border":"content"),d,e)+"px"}function P(a,
b){for(var c,d,g,e=[],f=0,h=a.length;f<h;f++)d=a[f],d.style&&(e[f]=Y.get(d,"olddisplay"),c=d.style.display,b?(e[f]||"none"!==c||(d.style.display=""),""===d.style.display&&ra(d)&&(e[f]=Y.access(d,"olddisplay",C(d.nodeName)))):(g=ra(d),"none"===c&&g||Y.set(d,"olddisplay",g?c:s.css(d,"display"))));for(f=0;f<h;f++)d=a[f],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[f]||"":"none");return a}function L(a,b,c,d,g){return new L.prototype.init(a,b,c,d,g)}function ea(){setTimeout(function(){bb=
void 0});return bb=s.now()}function M(a,b){var c,d=0,g={height:a};for(b=b?1:0;4>d;d+=2-b)c=oa[d],g["margin"+c]=g["padding"+c]=a;b&&(g.opacity=g.width=a);return g}function R(a,b,c){for(var d,g=($a[b]||[]).concat($a["*"]),e=0,f=g.length;e<f;e++)if(d=g[e].call(c,b,a))return d}function W(a,b){var c,d,g,e,f;for(c in a)if(d=s.camelCase(c),g=b[d],e=a[c],s.isArray(e)&&(g=e[1],e=a[c]=e[0]),c!==d&&(a[d]=e,delete a[c]),(f=s.cssHooks[d])&&"expand"in f)for(c in e=f.expand(e),delete a[d],e)c in a||(a[c]=e[c],b[c]=
g);else b[d]=g}function Q(a,b,c){var d,g=0,e=vb.length,f=s.Deferred().always(function(){delete h.elem}),h=function(){if(d)return!1;for(var b=bb||ea(),b=Math.max(0,l.startTime+l.duration-b),c=1-(b/l.duration||0),g=0,e=l.tweens.length;g<e;g++)l.tweens[g].run(c);f.notifyWith(a,[l,c,b]);if(1>c&&e)return b;f.resolveWith(a,[l]);return!1},l=f.promise({elem:a,props:s.extend({},b),opts:s.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:bb||ea(),duration:c.duration,tweens:[],
createTween:function(b,c){var d=s.Tween(a,l.opts,b,c,l.opts.specialEasing[b]||l.opts.easing);l.tweens.push(d);return d},stop:function(b){var c=0,g=b?l.tweens.length:0;if(d)return this;for(d=!0;c<g;c++)l.tweens[c].run(1);b?f.resolveWith(a,[l,b]):f.rejectWith(a,[l,b]);return this}});c=l.props;for(W(c,l.opts.specialEasing);g<e;g++)if(b=vb[g].call(l,a,c,l.opts))return b;s.map(c,R,l);s.isFunction(l.opts.start)&&l.opts.start.call(a,l);s.fx.timer(s.extend(h,{elem:a,anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,
l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function J(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,g=0,e=b.toLowerCase().match(va)||[];if(s.isFunction(c))for(;d=e[g++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function H(a,b,c,d){function g(l){var h;e[l]=!0;s.each(a[l]||[],function(a,l){var la=l(b,c,d);if("string"===typeof la&&!f&&!e[la])return b.dataTypes.unshift(la),g(la),!1;if(f)return!(h=la)});return h}var e={},f=a===pb;
return g(b.dataTypes[0])||!e["*"]&&g("*")}function Z(a,b){var c,d,g=s.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((g[c]?a:d||(d={}))[c]=b[c]);d&&s.extend(!0,a,d);return a}function X(a,b,c,d){var g;if(s.isArray(b))s.each(b,function(b,g){c||Dc.test(a)?d(a,g):X(a+"["+("object"===typeof g?b:"")+"]",g,c,d)});else if(c||"object"!==s.type(b))d(a,b);else for(g in b)X(a+"["+g+"]",b[g],c,d)}function aa(a){return s.isWindow(a)?a:9===a.nodeType&&a.defaultView}var ha=[],T=ha.slice,K=ha.concat,wa=ha.push,
V=ha.indexOf,U={},sa=U.toString,na=U.hasOwnProperty,ja={},ca=a.document,s=function(a,b){return new s.fn.init(a,b)},Ra=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Va=/^-ms-/,N=/-([\da-z])/gi,xa=function(a,b){return b.toUpperCase()};s.fn=s.prototype={jquery:"2.1.1",constructor:s,selector:"",length:0,toArray:function(){return T.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:T.call(this)},pushStack:function(a){a=s.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;
return a},each:function(a,b){return s.each(this,a,b)},map:function(a){return this.pushStack(s.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(T.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:wa,sort:ha.sort,splice:ha.splice};s.extend=s.fn.extend=function(){var a,
b,c,d,g,e=arguments[0]||{},f=1,l=arguments.length,h=!1;"boolean"===typeof e&&(h=e,e=arguments[f]||{},f++);"object"===typeof e||s.isFunction(e)||(e={});f===l&&(e=this,f--);for(;f<l;f++)if(null!=(a=arguments[f]))for(b in a)c=e[b],d=a[b],e!==d&&(h&&d&&(s.isPlainObject(d)||(g=s.isArray(d)))?(g?(g=!1,c=c&&s.isArray(c)?c:[]):c=c&&s.isPlainObject(c)?c:{},e[b]=s.extend(h,c,d)):void 0!==d&&(e[b]=d));return e};s.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===s.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!s.isArray(a)&&0<=a-parseFloat(a)},isPlainObject:function(a){return"object"!==s.type(a)||a.nodeType||s.isWindow(a)||a.constructor&&!na.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
U[sa.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=s.trim(a))1===a.indexOf("use strict")?(b=ca.createElement("script"),b.text=a,ca.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Va,"ms-").replace(N,xa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var g,e=0,f=a.length;g=c(a);if(d)if(g)for(;e<f&&(g=b.apply(a[e],d),!1!==g);e++);else for(e in a){if(g=b.apply(a[e],d),!1===
g)break}else if(g)for(;e<f&&(g=b.call(a[e],e,a[e]),!1!==g);e++);else for(e in a)if(g=b.call(a[e],e,a[e]),!1===g)break;return a},trim:function(a){return null==a?"":(a+"").replace(Ra,"")},makeArray:function(a,b){var d=b||[];null!=a&&(c(Object(a))?s.merge(d,"string"===typeof a?[a]:a):wa.call(d,a));return d},inArray:function(a,b,c){return null==b?-1:V.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,g=a.length;d<c;d++)a[g++]=b[d];a.length=g;return a},grep:function(a,b,c){for(var d=[],g=0,e=a.length,
f=!c;g<e;g++)c=!b(a[g],g),c!==f&&d.push(a[g]);return d},map:function(a,b,d){var g,e=0,f=a.length,l=[];if(c(a))for(;e<f;e++)g=b(a[e],e,d),null!=g&&l.push(g);else for(e in a)g=b(a[e],e,d),null!=g&&l.push(g);return K.apply([],l)},guid:1,proxy:function(a,b){var c,d;"string"===typeof b&&(c=a[b],b=a,a=c);if(s.isFunction(a))return d=T.call(arguments,2),c=function(){return a.apply(b||this,d.concat(T.call(arguments)))},c.guid=a.guid=a.guid||s.guid++,c},now:Date.now,support:ja});s.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){U["[object "+b+"]"]=b.toLowerCase()});var Ia=function(a){function b(a,c,d,g){var e,f,l,h,p;(c?c.ownerDocument||c:L)!==I&&D(c);c=c||I;d=d||[];if(!a||"string"!==typeof a)return d;if(1!==(h=c.nodeType)&&9!==h)return[];if(R&&!g){if(e=wc.exec(a))if(l=e[1])if(9===h)if((f=c.getElementById(l))&&f.parentNode){if(f.id===l)return d.push(f),d}else return d;else{if(c.ownerDocument&&(f=c.ownerDocument.getElementById(l))&&$b(c,f)&&f.id===l)return d.push(f),d}else{if(e[2])return pb.apply(d,c.getElementsByTagName(a)),
d;if((l=e[3])&&A.getElementsByClassName&&c.getElementsByClassName)return pb.apply(d,c.getElementsByClassName(l)),d}if(A.qsa&&(!G||!G.test(a))){f=e=N;l=c;p=9===h&&a;if(1===h&&"object"!==c.nodeName.toLowerCase()){h=La(a);(e=c.getAttribute("id"))?f=e.replace(Dc,"\\$&"):c.setAttribute("id",f);f="[id='"+f+"'] ";for(l=h.length;l--;)h[l]=f+q(h[l]);l=Na.test(a)&&r(c.parentNode)||c;p=h.join(",")}if(p)try{return pb.apply(d,l.querySelectorAll(p)),d}catch(la){}finally{e||c.removeAttribute("id")}}}return jb(a.replace(ac,
"$1"),c,d,g)}function c(){function a(c,d){b.push(c+" ")>z.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function d(a){a[N]=!0;return a}function g(a){var b=I.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function f(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function l(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function h(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function p(a){return d(function(b){b=+b;return d(function(c,d){for(var g,e=a([],c.length,b),f=e.length;f--;)c[g=e[f]]&&(c[g]=!(d[g]=c[g]))})})}function r(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function n(){}function q(a){for(var b=
0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function v(a,b,c){var d=b.dir,g=c&&"parentNode"===d,e=sa++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,f){var l,h,p=[W,e];if(f)for(;b=b[d];){if((1===b.nodeType||g)&&a(b,c,f))return!0}else for(;b=b[d];)if(1===b.nodeType||g){h=b[N]||(b[N]={});if((l=h[d])&&l[0]===W&&l[1]===e)return p[2]=l[2];h[d]=p;if(p[2]=a(b,c,f))return!0}}}function s(a){return 1<a.length?function(b,c,d){for(var g=a.length;g--;)if(!a[g](b,
c,d))return!1;return!0}:a[0]}function Ta(a,b,c,d,g){for(var e,f=[],l=0,h=a.length,p=null!=b;l<h;l++)if(e=a[l])if(!c||c(e,d,g))f.push(e),p&&b.push(l);return f}function u(a,c,g,e,f,l){e&&!e[N]&&(e=u(e));f&&!f[N]&&(f=u(f,l));return d(function(d,l,h,p){var la,r,n=[],q=[],v=l.length,s;if(!(s=d)){s=c||"*";for(var u=h.nodeType?[h]:h,w=[],x=0,tc=u.length;x<tc;x++)b(s,u[x],w);s=w}s=!a||!d&&c?s:Ta(s,n,a,h,p);u=g?f||(d?a:v||e)?[]:l:s;g&&g(s,u,h,p);if(e)for(la=Ta(u,q),e(la,[],h,p),h=la.length;h--;)if(r=la[h])u[q[h]]=
!(s[q[h]]=r);if(d){if(f||a){if(f){la=[];for(h=u.length;h--;)(r=u[h])&&la.push(s[h]=r);f(null,u=[],la,p)}for(h=u.length;h--;)(r=u[h])&&-1<(la=f?xa.call(d,r):n[h])&&(d[la]=!(l[la]=r))}}else u=Ta(u===l?u.splice(v,u.length):u),f?f(null,l,u,p):pb.apply(l,u)})}function w(a){var b,c,d,g=a.length,e=z.relative[a[0].type];c=e||z.relative[" "];for(var f=e?1:0,l=v(function(a){return a===b},c,!0),h=v(function(a){return-1<xa.call(b,a)},c,!0),p=[function(a,c,d){return!e&&(d||c!==E)||((b=c).nodeType?l(a,c,d):h(a,
c,d))}];f<g;f++)if(c=z.relative[a[f].type])p=[v(s(p),c)];else{c=z.filter[a[f].type].apply(null,a[f].matches);if(c[N]){for(d=++f;d<g&&!z.relative[a[d].type];d++);return u(1<f&&s(p),1<f&&q(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace(ac,"$1"),c,f<d&&w(a.slice(f,d)),d<g&&w(a=a.slice(d)),d<g&&q(a))}p.push(c)}return s(p)}function x(a,c){var g=0<c.length,e=0<a.length,f=function(d,f,l,h,p){var la,r,n,q=0,v="0",s=d&&[],u=[],w=E,x=d||e&&z.find.TAG("*",p),tc=W+=null==w?1:Math.random()||
.1,Tc=x.length;for(p&&(E=f!==I&&f);v!==Tc&&null!=(la=x[v]);v++){if(e&&la){for(r=0;n=a[r++];)if(n(la,f,l)){h.push(la);break}p&&(W=tc)}g&&((la=!n&&la)&&q--,d&&s.push(la))}q+=v;if(g&&v!==q){for(r=0;n=c[r++];)n(s,u,f,l);if(d){if(0<q)for(;v--;)s[v]||u[v]||(u[v]=J.call(h));u=Ta(u)}pb.apply(h,u);p&&!d&&0<u.length&&1<q+c.length&&b.uniqueSort(h)}p&&(W=tc,E=w);return s};return g?d(f):f}var y,A,z,B,Xa,La,C,jb,E,Ya,F,D,I,Qa,R,G,P,ic,$b,N="sizzle"+-new Date,L=a.document,W=0,sa=0,qc=c(),ea=c(),M=c(),Ra=function(a,
b){a===b&&(F=!0);return 0},Q={}.hasOwnProperty,S=[],J=S.pop,H=S.push,pb=S.push,ja=S.slice,xa=S.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},sc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Va="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+sc+"))|)[\\x20\\t\\r\\n\\f]*\\]",Pa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
Va+")*)|.*)\\)|)",ac=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,na=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Kc=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,K=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,O=new RegExp(Pa),ca=new RegExp("^"+sc+"$"),Ia={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Va),PSEUDO:new RegExp("^"+Pa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},X=/^(?:input|select|textarea|button)$/i,rb=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,wc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Na=/[+~]/,Dc=/'|\\/g,lb=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Ba=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{pb.apply(S=ja.call(L.childNodes),L.childNodes),S[L.childNodes.length].nodeType}catch(ka){pb={apply:S.length?function(a,b){H.apply(a,ja.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}A=b.support={};Xa=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};D=b.setDocument=function(a){var b=a?a.ownerDocument||a:L;a=b.defaultView;if(b===
I||9!==b.nodeType||!b.documentElement)return I;I=b;Qa=b.documentElement;R=!Xa(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){D()},!1):a.attachEvent&&a.attachEvent("onunload",function(){D()}));A.attributes=g(function(a){a.className="i";return!a.getAttribute("className")});A.getElementsByTagName=g(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});A.getElementsByClassName=Y.test(b.getElementsByClassName)&&g(function(a){a.innerHTML=
"<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});A.getById=g(function(a){Qa.appendChild(a).id=N;return!b.getElementsByName||!b.getElementsByName(N).length});A.getById?(z.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&R){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(lb,Ba);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=
function(a){var b=a.replace(lb,Ba);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});z.find.TAG=A.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],g=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[g++];)1===c.nodeType&&d.push(c);return d}return e};z.find.CLASS=A.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&
R)return b.getElementsByClassName(a)};P=[];G=[];if(A.qsa=Y.test(b.querySelectorAll))g(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&G.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||G.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||
G.push(":checked")}),g(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&G.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||G.push(":enabled",":disabled");a.querySelectorAll("*,:x");G.push(",.*:")});(A.matchesSelector=Y.test(ic=Qa.matches||Qa.webkitMatchesSelector||Qa.mozMatchesSelector||Qa.oMatchesSelector||Qa.msMatchesSelector))&&g(function(a){A.disconnectedMatch=
ic.call(a,"div");ic.call(a,"[s!='']:x");P.push("!=",Pa)});G=G.length&&new RegExp(G.join("|"));P=P.length&&new RegExp(P.join("|"));$b=(a=Y.test(Qa.compareDocumentPosition))||Y.test(Qa.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Ra=a?function(a,c){if(a===c)return F=!0,0;var d=
!a.compareDocumentPosition-!c.compareDocumentPosition;if(d)return d;d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return d&1||!A.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===L&&$b(L,a)?-1:c===b||c.ownerDocument===L&&$b(L,c)?1:Ya?xa.call(Ya,a)-xa.call(Ya,c):0:d&4?-1:1}:function(a,c){if(a===c)return F=!0,0;var d,g=0;d=a.parentNode;var e=c.parentNode,l=[a],h=[c];if(!d||!e)return a===b?-1:c===b?1:d?-1:e?1:Ya?xa.call(Ya,a)-xa.call(Ya,c):0;if(d===
e)return f(a,c);for(d=a;d=d.parentNode;)l.unshift(d);for(d=c;d=d.parentNode;)h.unshift(d);for(;l[g]===h[g];)g++;return g?f(l[g],h[g]):l[g]===L?-1:h[g]===L?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==I&&D(a);c=c.replace(K,"='$1']");if(!(!A.matchesSelector||!R||P&&P.test(c)||G&&G.test(c)))try{var d=ic.call(a,c);if(d||A.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(g){}return 0<b(c,I,null,[a]).length};
b.contains=function(a,b){(a.ownerDocument||a)!==I&&D(a);return $b(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==I&&D(a);var c=z.attrHandle[b.toLowerCase()],c=c&&Q.call(z.attrHandle,b.toLowerCase())?c(a,b,!R):void 0;return void 0!==c?c:A.attributes||!R?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,g=0;F=!A.detectDuplicates;Ya=!A.sortStable&&a.slice(0);
a.sort(Ra);if(F){for(;b=a[g++];)b===a[g]&&(d=c.push(g));for(;d--;)a.splice(c[d],1)}Ya=null;return a};B=b.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d++];)c+=B(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=B(a)}else if(3===b||4===b)return a.nodeValue;return c};z=b.selectors={cacheLength:50,createPseudo:d,match:Ia,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(lb,Ba);a[3]=(a[3]||a[4]||a[5]||"").replace(lb,Ba);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(Ia.CHILD.test(a[0]))return null;a[3]?
a[2]=a[4]||a[5]||"":c&&O.test(c)&&(b=La(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(lb,Ba).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=qc[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&qc(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==
typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(g){g=b.attr(g,a);if(null==g)return"!="===c;if(!c)return!0;g+="";return"="===c?g===d:"!="===c?g!==d:"^="===c?d&&0===g.indexOf(d):"*="===c?d&&-1<g.indexOf(d):"$="===c?d&&g.slice(-d.length)===d:"~="===c?-1<(" "+g+" ").indexOf(d):"|="===c?g===d||g.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,g){var e="nth"!==a.slice(0,3),f="last"!==a.slice(-4),l="of-type"===b;return 1===d&&0===g?function(a){return!!a.parentNode}:
function(b,c,h){var p,la,r,n,q;c=e!==f?"nextSibling":"previousSibling";var v=b.parentNode,s=l&&b.nodeName.toLowerCase();h=!h&&!l;if(v){if(e){for(;c;){for(la=b;la=la[c];)if(l?la.nodeName.toLowerCase()===s:1===la.nodeType)return!1;q=c="only"===a&&!q&&"nextSibling"}return!0}q=[f?v.firstChild:v.lastChild];if(f&&h)for(h=v[N]||(v[N]={}),p=h[a]||[],n=p[0]===W&&p[1],r=p[0]===W&&p[2],la=n&&v.childNodes[n];la=++n&&la&&la[c]||(r=n=0)||q.pop();){if(1===la.nodeType&&++r&&la===b){h[a]=[W,n,r];break}}else if(h&&
(p=(b[N]||(b[N]={}))[a])&&p[0]===W)r=p[1];else for(;(la=++n&&la&&la[c]||(r=n=0)||q.pop())&&((l?la.nodeName.toLowerCase()!==s:1!==la.nodeType)||!++r||(h&&((la[N]||(la[N]={}))[a]=[W,r]),la!==b)););r-=g;return r===d||0===r%d&&0<=r/d}}},PSEUDO:function(a,c){var g,e=z.pseudos[a]||z.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[N]?e(c):1<e.length?(g=[a,a,"",c],z.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,g=e(a,c),f=g.length;f--;)d=xa.call(a,g[f]),a[d]=
!(b[d]=g[f])}):function(a){return e(a,0,g)}):e}},pseudos:{not:d(function(a){var b=[],c=[],g=C(a.replace(ac,"$1"));return g[N]?d(function(a,b,c,d){d=g(a,null,d,[]);for(var e=a.length;e--;)if(c=d[e])a[e]=!(b[e]=c)}):function(a,d,e){b[0]=a;g(b,null,e,c);return!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||B(b)).indexOf(a)}}),lang:d(function(a){ca.test(a||"")||b.error("unsupported lang: "+a);a=
a.replace(lb,Ba).toLowerCase();return function(b){var c;do if(c=R?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Qa},focus:function(a){return a===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===
a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return rb.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:p(function(){return[0]}),last:p(function(a,b){return[b-1]}),eq:p(function(a,b,c){return[0>c?c+b:c]}),even:p(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:p(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:p(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:p(function(a,b,c){for(c=
0>c?c+b:c;++c<b;)a.push(c);return a})}};z.pseudos.nth=z.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[y]=l(y);for(y in{submit:!0,reset:!0})z.pseudos[y]=h(y);n.prototype=z.filters=z.pseudos;z.setFilters=new n;La=b.tokenize=function(a,c){var d,g,e,f,l,h,p;if(l=ea[a+" "])return c?0:l.slice(0);l=a;h=[];for(p=z.preFilter;l;){if(!d||(g=na.exec(l)))g&&(l=l.slice(g[0].length)||l),h.push(e=[]);d=!1;if(g=Kc.exec(l))d=g.shift(),e.push({value:d,type:g[0].replace(ac," ")}),l=
l.slice(d.length);for(f in z.filter)!(g=Ia[f].exec(l))||p[f]&&!(g=p[f](g))||(d=g.shift(),e.push({value:d,type:f,matches:g}),l=l.slice(d.length));if(!d)break}return c?l.length:l?b.error(a):ea(a,h).slice(0)};C=b.compile=function(a,b){var c,d=[],g=[],e=M[a+" "];if(!e){b||(b=La(a));for(c=b.length;c--;)e=w(b[c]),e[N]?d.push(e):g.push(e);e=M(a,x(g,d));e.selector=a}return e};jb=b.select=function(a,b,c,d){var g,e,f,l,h="function"===typeof a&&a,p=!d&&La(a=h.selector||a);c=c||[];if(1===p.length){e=p[0]=p[0].slice(0);
if(2<e.length&&"ID"===(f=e[0]).type&&A.getById&&9===b.nodeType&&R&&z.relative[e[1].type]){b=(z.find.ID(f.matches[0].replace(lb,Ba),b)||[])[0];if(!b)return c;h&&(b=b.parentNode);a=a.slice(e.shift().value.length)}for(g=Ia.needsContext.test(a)?0:e.length;g--;){f=e[g];if(z.relative[l=f.type])break;if(l=z.find[l])if(d=l(f.matches[0].replace(lb,Ba),Na.test(e[0].type)&&r(b.parentNode)||b)){e.splice(g,1);a=d.length&&q(e);if(!a)return pb.apply(c,d),c;break}}}(h||C(a,p))(d,b,!R,c,Na.test(a)&&r(b.parentNode)||
b);return c};A.sortStable=N.split("").sort(Ra).join("")===N;A.detectDuplicates=!!F;D();A.sortDetached=g(function(a){return a.compareDocumentPosition(I.createElement("div"))&1});g(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});A.attributes&&g(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||
e("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});g(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});return b}(a);s.find=Ia;s.expr=Ia.selectors;s.expr[":"]=s.expr.pseudos;s.unique=Ia.uniqueSort;s.text=Ia.getText;
s.isXMLDoc=Ia.isXML;s.contains=Ia.contains;var Na=s.expr.match.needsContext,ab=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;s.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?s.find.matchesSelector(d,a)?[d]:[]:s.find.matches(a,s.grep(b,function(a){return 1===a.nodeType}))};s.fn.extend({find:function(a){var b,c=this.length,d=[],g=this;if("string"!==typeof a)return this.pushStack(s(a).filter(function(){for(b=0;b<c;b++)if(s.contains(g[b],this))return!0}));
for(b=0;b<c;b++)s.find(a,g[b],d);d=this.pushStack(1<c?s.unique(d):d);d.selector=this.selector?this.selector+" "+a:a;return d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"===typeof a&&Na.test(a)?s(a):a||[],!1).length}});var ta,za=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(s.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,
a,null]:za.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||ta).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof s?b[0]:b,s.merge(this,s.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:ca,!0)),ab.test(c[1])&&s.isPlainObject(b))for(c in b)if(s.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else(c=ca.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=ca,this.selector=a;return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(s.isFunction(a))return"undefined"!==
typeof ta.ready?ta.ready(a):a(s);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return s.makeArray(a,this)}).prototype=s.fn;ta=s(ca);var Ja=/^(?:parents|prev(?:Until|All))/,Ga={children:!0,contents:!0,next:!0,prev:!0};s.extend({dir:function(a,b,c){for(var d=[],g=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(g&&s(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});s.fn.extend({has:function(a){var b=
s(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(s.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,g=this.length,e=[],f=Na.test(a)||"string"!==typeof a?s(a,b||this.context):0;d<g;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&s.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?s.unique(e):e)},index:function(a){return a?"string"===typeof a?V.call(s(a),this[0]):V.call(this,a.jquery?
a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(s.unique(s.merge(this.get(),s(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});s.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return s.dir(a,"parentNode")},parentsUntil:function(a,b,c){return s.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},
nextAll:function(a){return s.dir(a,"nextSibling")},prevAll:function(a){return s.dir(a,"previousSibling")},nextUntil:function(a,b,c){return s.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return s.dir(a,"previousSibling",c)},siblings:function(a){return s.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return s.sibling(a.firstChild)},contents:function(a){return a.contentDocument||s.merge([],a.childNodes)}},function(a,b){s.fn[a]=function(c,d){var g=s.map(this,b,c);"Until"!==a.slice(-5)&&
(d=c);d&&"string"===typeof d&&(g=s.filter(d,g));1<this.length&&(Ga[a]||s.unique(g),Ja.test(a)&&g.reverse());return this.pushStack(g)}});var va=/\S+/g,Aa={};s.Callbacks=function(a){a="string"===typeof a?Aa[a]||f(a):s.extend({},a);var b,c,d,g,e,l,h=[],p=!a.once&&[],r=function(f){b=a.memory&&f;c=!0;l=g||0;g=0;e=h.length;for(d=!0;h&&l<e;l++)if(!1===h[l].apply(f[0],f[1])&&a.stopOnFalse){b=!1;break}d=!1;h&&(p?p.length&&r(p.shift()):b?h=[]:n.disable())},n={add:function(){if(h){var c=h.length;(function Uc(b){s.each(b,
function(b,c){var d=s.type(c);"function"===d?a.unique&&n.has(c)||h.push(c):c&&c.length&&"string"!==d&&Uc(c)})})(arguments);d?e=h.length:b&&(g=c,r(b))}return this},remove:function(){h&&s.each(arguments,function(a,b){for(var c;-1<(c=s.inArray(b,h,c));)h.splice(c,1),d&&(c<=e&&e--,c<=l&&l--)});return this},has:function(a){return a?-1<s.inArray(a,h):!(!h||!h.length)},empty:function(){h=[];e=0;return this},disable:function(){h=p=b=void 0;return this},disabled:function(){return!h},lock:function(){p=void 0;
b||n.disable();return this},locked:function(){return!p},fireWith:function(a,b){!h||c&&!p||(b=b||[],b=[a,b.slice?b.slice():b],d?p.push(b):r(b));return this},fire:function(){n.fireWith(this,arguments);return this},fired:function(){return!!c}};return n};s.extend({Deferred:function(a){var b=[["resolve","done",s.Callbacks("once memory"),"resolved"],["reject","fail",s.Callbacks("once memory"),"rejected"],["notify","progress",s.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){g.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return s.Deferred(function(c){s.each(b,function(b,e){var f=s.isFunction(a[b])&&a[b];g[e[1]](function(){var a=f&&f.apply(this,arguments);if(a&&s.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[e[0]+"With"](this===d?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?s.extend(a,d):d}},g={};d.pipe=d.then;s.each(b,function(a,e){var f=e[2],l=e[3];d[e[1]]=f.add;l&&f.add(function(){c=
l},b[a^1][2].disable,b[2][2].lock);g[e[0]]=function(){g[e[0]+"With"](this===g?d:this,arguments);return this};g[e[0]+"With"]=f.fireWith});d.promise(g);a&&a.call(g,g);return g},when:function(a){var b=0,c=T.call(arguments),d=c.length,g=1!==d||a&&s.isFunction(a.promise)?d:0,e=1===g?a:s.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?T.call(arguments):d;c===l?e.notifyWith(b,c):--g||e.resolveWith(b,c)}},l,h,p;if(1<d)for(l=Array(d),h=Array(d),p=Array(d);b<d;b++)c[b]&&s.isFunction(c[b].promise)?
c[b].promise().done(f(b,p,c)).fail(e.reject).progress(f(b,h,l)):--g;g||e.resolveWith(p,c);return e.promise()}});var Oa;s.fn.ready=function(a){s.ready.promise().done(a);return this};s.extend({isReady:!1,readyWait:1,holdReady:function(a){a?s.readyWait++:s.ready(!0)},ready:function(a){(!0===a?--s.readyWait:s.isReady)||(s.isReady=!0,!0!==a&&0<--s.readyWait||(Oa.resolveWith(ca,[s]),s.fn.triggerHandler&&(s(ca).triggerHandler("ready"),s(ca).off("ready"))))}});s.ready.promise=function(b){Oa||(Oa=s.Deferred(),
"complete"===ca.readyState?setTimeout(s.ready):(ca.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)));return Oa.promise(b)};s.ready.promise();var ba=s.access=function(a,b,c,d,g,e,f){var l=0,h=a.length,p=null==c;if("object"===s.type(c))for(l in g=!0,c)s.access(a,b,l,c[l],!0,e,f);else if(void 0!==d&&(g=!0,s.isFunction(d)||(f=!0),p&&(f?(b.call(a,d),b=null):(p=b,b=function(a,b,c){return p.call(s(a),c)})),b))for(;l<h;l++)b(a[l],c,f?d:d.call(a[l],l,b(a[l],c)));return g?a:p?b.call(a):
h?b(a[0],c):e};s.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1;h.accepts=s.acceptData;h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,s.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var d;a=this.key(a);var g=this.cache[a];if("string"===typeof b)g[b]=c;else if(s.isEmptyObject(g))s.extend(this.cache[a],
b);else for(d in b)g[d]=b[d];return g},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,s.camelCase(b));this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,d;c=this.key(a);var g=this.cache[c];if(void 0===b)this.cache[c]={};else for(s.isArray(b)?d=b.concat(b.map(s.camelCase)):(c=s.camelCase(b),b in g?d=[b,c]:(d=c,d=d in g?[d]:d.match(va)||[])),
c=d.length;c--;)delete g[d[c]]},hasData:function(a){return!s.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var Y=new h,qa=new h,Za=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gb=/([A-Z])/g;s.extend({hasData:function(a){return qa.hasData(a)||Y.hasData(a)},data:function(a,b,c){return qa.access(a,b,c)},removeData:function(a,b){qa.remove(a,b)},_data:function(a,b,c){return Y.access(a,b,c)},_removeData:function(a,b){Y.remove(a,b)}});s.fn.extend({data:function(a,
b){var c,d,g,e=this[0],f=e&&e.attributes;if(void 0===a){if(this.length&&(g=qa.get(e),1===e.nodeType&&!Y.get(e,"hasDataAttrs"))){for(c=f.length;c--;)f[c]&&(d=f[c].name,0===d.indexOf("data-")&&(d=s.camelCase(d.slice(5)),l(e,d,g[d])));Y.set(e,"hasDataAttrs",!0)}return g}return"object"===typeof a?this.each(function(){qa.set(this,a)}):ba(this,function(b){var c,d=s.camelCase(a);if(e&&void 0===b){c=qa.get(e,a);if(void 0!==c)return c;c=qa.get(e,d);if(void 0!==c)return c;c=l(e,d,void 0);if(void 0!==c)return c}else this.each(function(){var c=
qa.get(this,d);qa.set(this,d,b);-1!==a.indexOf("-")&&void 0!==c&&qa.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){qa.remove(this,a)})}});s.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Y.get(a,b),c&&(!d||s.isArray(c)?d=Y.access(a,b,s.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=s.queue(a,b),d=c.length,g=c.shift(),e=s._queueHooks(a,b),f=function(){s.dequeue(a,b)};"inprogress"===g&&(g=c.shift(),
d--);g&&("fx"===b&&c.unshift("inprogress"),delete e.stop,g.call(a,f,e));!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Y.get(a,c)||Y.access(a,c,{empty:s.Callbacks("once memory").add(function(){Y.remove(a,[b+"queue",c])})})}});s.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?s.queue(this[0],a):void 0===b?this:this.each(function(){var c=s.queue(this,a,b);s._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&s.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){s.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,g=s.Deferred(),e=this,f=this.length,l=function(){--d||g.resolveWith(e,[e])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)(c=Y.get(e[f],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(l));l();return g.promise(b)}});var Ka=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oa=["Top","Right","Bottom","Left"],ra=function(a,b){a=b||a;return"none"===
s.css(a,"display")||!s.contains(a.ownerDocument,a)},Ha=/^(?:checkbox|radio)$/i;(function(){var a=ca.createDocumentFragment().appendChild(ca.createElement("div")),b=ca.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);ja.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";ja.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();ja.focusinBubbles="onfocusin"in a;var rb=
/^key/,Qb=/^(?:mouse|pointer|contextmenu)|click/,Jb=/^(?:focusinfocus|focusoutblur)$/,Rb=/^([^.]*)(?:\.(.+)|)$/;s.event={global:{},add:function(a,b,c,d,g){var e,f,l,h,p,r,n,q,v;if(p=Y.get(a))for(c.handler&&(e=c,c=e.handler,g=e.selector),c.guid||(c.guid=s.guid++),(h=p.events)||(h=p.events={}),(f=p.handle)||(f=p.handle=function(b){return"undefined"!==typeof s&&s.event.triggered!==b.type?s.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(va)||[""],p=b.length;p--;)l=Rb.exec(b[p])||[],q=r=l[1],
v=(l[2]||"").split(".").sort(),q&&(l=s.event.special[q]||{},q=(g?l.delegateType:l.bindType)||q,l=s.event.special[q]||{},r=s.extend({type:q,origType:r,data:d,handler:c,guid:c.guid,selector:g,needsContext:g&&s.expr.match.needsContext.test(g),namespace:v.join(".")},e),(n=h[q])||(n=h[q]=[],n.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,v,f)||a.addEventListener&&a.addEventListener(q,f,!1)),l.add&&(l.add.call(a,r),r.handler.guid||(r.handler.guid=c.guid)),g?n.splice(n.delegateCount++,0,r):n.push(r),s.event.global[q]=
!0)},remove:function(a,b,c,d,g){var e,f,l,h,p,r,n,q,v,u,Ta,w=Y.hasData(a)&&Y.get(a);if(w&&(h=w.events)){b=(b||"").match(va)||[""];for(p=b.length;p--;)if(l=Rb.exec(b[p])||[],v=Ta=l[1],u=(l[2]||"").split(".").sort(),v){n=s.event.special[v]||{};v=(d?n.delegateType:n.bindType)||v;q=h[v]||[];l=l[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=e=q.length;e--;)r=q[e],!g&&Ta!==r.origType||c&&c.guid!==r.guid||l&&!l.test(r.namespace)||d&&d!==r.selector&&("**"!==d||!r.selector)||(q.splice(e,
1),r.selector&&q.delegateCount--,n.remove&&n.remove.call(a,r));f&&!q.length&&(n.teardown&&!1!==n.teardown.call(a,u,w.handle)||s.removeEvent(a,v,w.handle),delete h[v])}else for(v in h)s.event.remove(a,v+b[p],c,d,!0);s.isEmptyObject(h)&&(delete w.handle,Y.remove(a,"events"))}},trigger:function(b,c,d,g){var e,f,l,h,p,r,n=[d||ca],q=na.call(b,"type")?b.type:b;r=na.call(b,"namespace")?b.namespace.split("."):[];f=e=d=d||ca;if(3!==d.nodeType&&8!==d.nodeType&&!Jb.test(q+s.event.triggered)&&(0<=q.indexOf(".")&&
(r=q.split("."),q=r.shift(),r.sort()),h=0>q.indexOf(":")&&"on"+q,b=b[s.expando]?b:new s.Event(q,"object"===typeof b&&b),b.isTrigger=g?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:s.makeArray(c,[b]),r=s.event.special[q]||{},g||!r.trigger||!1!==r.trigger.apply(d,c))){if(!g&&!r.noBubble&&!s.isWindow(d)){l=r.delegateType||q;Jb.test(l+q)||(f=f.parentNode);for(;f;f=f.parentNode)n.push(f),
e=f;e===(d.ownerDocument||ca)&&n.push(e.defaultView||e.parentWindow||a)}for(e=0;(f=n[e++])&&!b.isPropagationStopped();)b.type=1<e?l:r.bindType||q,(p=(Y.get(f,"events")||{})[b.type]&&Y.get(f,"handle"))&&p.apply(f,c),(p=h&&f[h])&&p.apply&&s.acceptData(f)&&(b.result=p.apply(f,c),!1===b.result&&b.preventDefault());b.type=q;g||b.isDefaultPrevented()||r._default&&!1!==r._default.apply(n.pop(),c)||!s.acceptData(d)||!h||!s.isFunction(d[q])||s.isWindow(d)||((e=d[h])&&(d[h]=null),s.event.triggered=q,d[q](),
s.event.triggered=void 0,e&&(d[h]=e));return b.result}},dispatch:function(a){a=s.event.fix(a);var b,c,d,g,e=[],f=T.call(arguments);b=(Y.get(this,"events")||{})[a.type]||[];var l=s.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!l.preDispatch||!1!==l.preDispatch.call(this,a)){e=s.event.handlers.call(this,a,b);for(b=0;(g=e[b++])&&!a.isPropagationStopped();)for(a.currentTarget=g.elem,c=0;(d=g.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=
d,a.data=d.data,d=((s.event.special[d.origType]||{}).handle||d.handler).apply(g.elem,f),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());l.postDispatch&&l.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,g,e,f=[],l=b.delegateCount,h=a.target;if(l&&h.nodeType&&(!a.button||"click"!==a.type))for(;h!==this;h=h.parentNode||this)if(!0!==h.disabled||"click"!==a.type){d=[];for(c=0;c<l;c++)e=b[c],g=e.selector+" ",void 0===d[g]&&(d[g]=e.needsContext?0<=s(g,this).index(h):
s.find(g,this,null,[h]).length),d[g]&&d.push(e);d.length&&f.push({elem:h,handlers:d})}l<b.length&&f.push({elem:this,handlers:b.slice(l)});return f},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,b){var c,d,g=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||ca,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));a.which||void 0===g||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[s.expando])return a;var b,c,d;b=a.type;var g=a,e=this.fixHooks[b];e||(this.fixHooks[b]=e=Qb.test(b)?this.mouseHooks:
rb.test(b)?this.keyHooks:{});d=e.props?this.props.concat(e.props):this.props;a=new s.Event(g);for(b=d.length;b--;)c=d[b],a[c]=g[c];a.target||(a.target=ca);3===a.target.nodeType&&(a.target=a.target.parentNode);return e.filter?e.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==n()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===n()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===
this.type&&this.click&&s.nodeName(this,"input"))return this.click(),!1},_default:function(a){return s.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=s.extend(new s.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?s.event.trigger(a,null,b):s.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};s.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)};s.Event=function(a,b){if(!(this instanceof s.Event))return new s.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?p:r):this.type=a;b&&s.extend(this,b);this.timeStamp=a&&a.timeStamp||s.now();this[s.expando]=!0};s.Event.prototype={isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=p;a&&a.preventDefault&&
a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=p;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=p;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};s.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){s.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,
d=a.relatedTarget,g=a.handleObj;if(!d||d!==this&&!s.contains(this,d))a.type=g.origType,c=g.handler.apply(this,arguments),a.type=b;return c}}});ja.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){s.event.simulate(b,a.target,s.event.fix(a),!0)};s.event.special[b]={setup:function(){var d=this.ownerDocument||this,g=Y.access(d,b);g||d.addEventListener(a,c,!0);Y.access(d,b,(g||0)+1)},teardown:function(){var d=this.ownerDocument||this,g=Y.access(d,b)-1;g?Y.access(d,
b,g):(d.removeEventListener(a,c,!0),Y.remove(d,b))}}});s.fn.extend({on:function(a,b,c,d,g){var e,f;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],g);return this}null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=r;else if(!d)return this;1===g&&(e=d,d=function(a){s().off(a);return e.apply(this,arguments)},d.guid=e.guid||(e.guid=s.guid++));return this.each(function(){s.event.add(this,a,d,c,b)})},
one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,s(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=r);return this.each(function(){s.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){s.event.trigger(a,b,this)})},triggerHandler:function(a,
b){var c=this[0];if(c)return s.event.trigger(a,b,c,!0)}});var Pa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,sb=/<([\w:]+)/,lb=/<|&#?\w+;/,ec=/<(?:script|style|link)/i,oc=/checked\s*(?:[^=]|=\s*.checked.)/i,ka=/^$|\/(?:java|ecma)script/i,ia=/^true\/(.*)/,db=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ba={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ba.optgroup=Ba.option;Ba.tbody=Ba.tfoot=Ba.colgroup=Ba.caption=Ba.thead;Ba.th=Ba.td;s.extend({clone:function(a,b,c){var d,g,e,f,l=a.cloneNode(!0),h=s.contains(a.ownerDocument,a);if(!(ja.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||s.isXMLDoc(a)))for(f=y(l),e=y(a),d=0,g=e.length;d<g;d++){var p=e[d],r=f[d],n=r.nodeName.toLowerCase();if("input"===n&&Ha.test(p.type))r.checked=p.checked;else if("input"===n||"textarea"===n)r.defaultValue=
p.defaultValue}if(b)if(c)for(e=e||y(a),f=f||y(l),d=0,g=e.length;d<g;d++)z(e[d],f[d]);else z(a,l);f=y(l,"script");0<f.length&&x(f,!h&&y(a,"script"));return l},buildFragment:function(a,b,c,d){for(var g,e,f,l=b.createDocumentFragment(),h=[],p=0,r=a.length;p<r;p++)if((g=a[p])||0===g)if("object"===s.type(g))s.merge(h,g.nodeType?[g]:g);else if(lb.test(g)){e=e||l.appendChild(b.createElement("div"));f=(sb.exec(g)||["",""])[1].toLowerCase();f=Ba[f]||Ba._default;e.innerHTML=f[1]+g.replace(Pa,"<$1></$2>")+f[2];
for(f=f[0];f--;)e=e.lastChild;s.merge(h,e.childNodes);e=l.firstChild;e.textContent=""}else h.push(b.createTextNode(g));l.textContent="";for(p=0;g=h[p++];)if(!d||-1===s.inArray(g,d))if(a=s.contains(g.ownerDocument,g),e=y(l.appendChild(g),"script"),a&&x(e),c)for(f=0;g=e[f++];)ka.test(g.type||"")&&c.push(g);return l},cleanData:function(a){for(var b,c,d,g,e=s.event.special,f=0;void 0!==(c=a[f]);f++){if(s.acceptData(c)&&(g=c[Y.expando])&&(b=Y.cache[g])){if(b.events)for(d in b.events)e[d]?s.event.remove(c,
d):s.removeEvent(c,d,b.handle);Y.cache[g]&&delete Y.cache[g]}delete qa.cache[c[qa.expando]]}}});s.fn.extend({text:function(a){return ba(this,function(a){return void 0===a?s.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||u(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,
function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=u(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?s.filter(a,this):this,g=0;null!=(c=d[g]);g++)b||1!==c.nodeType||s.cleanData(y(c)),c.parentNode&&
(b&&s.contains(c.ownerDocument,c)&&x(y(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(s.cleanData(y(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return s.clone(this,a,b)})},html:function(a){return ba(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!ec.test(a)&&!Ba[(sb.exec(a)||
["",""])[1].toLowerCase()]){a=a.replace(Pa,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(s.cleanData(y(b,!1)),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;s.cleanData(y(this));a&&a.replaceChild(b,this)});return a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=K.apply([],a);var c,d,g,e,
f=0,l=this.length,h=this,p=l-1,r=a[0],n=s.isFunction(r);if(n||1<l&&"string"===typeof r&&!ja.checkClone&&oc.test(r))return this.each(function(c){var d=h.eq(c);n&&(a[0]=r.call(this,c,d.html()));d.domManip(a,b)});if(l&&(c=s.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=s.map(y(c,"script"),w);for(g=d.length;f<l;f++)e=c,f!==p&&(e=s.clone(e,!0,!0),g&&s.merge(d,y(e,"script"))),b.call(this[f],e,f);if(g)for(c=d[d.length-1].ownerDocument,s.map(d,v),f=0;f<
g;f++)e=d[f],ka.test(e.type||"")&&!Y.access(e,"globalEval")&&s.contains(c,e)&&(e.src?s._evalUrl&&s._evalUrl(e.src):s.globalEval(e.textContent.replace(db,"")))}return this}});s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){s.fn[a]=function(a){for(var c=[],d=s(a),g=d.length-1,e=0;e<=g;e++)a=e===g?this:this.clone(!0),s(d[e])[b](a),wa.apply(c,a.get());return this.pushStack(c)}});var q,wb={},xb=/^margin/,Ma=new RegExp("^("+
Ka+")(?!px)[a-z%]+$","i"),Wa=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function b(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";f.innerHTML="";g.appendChild(e);var l=a.getComputedStyle(f,null);c="1%"!==l.top;d="4px"===l.width;g.removeChild(e)}var c,d,g=ca.documentElement,e=ca.createElement("div"),f=ca.createElement("div");
f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",ja.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&s.extend(ja,{pixelPosition:function(){b();return c},boxSizingReliable:function(){null==d&&b();return d},reliableMarginRight:function(){var b;b=f.appendChild(ca.createElement("div"));b.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
b.style.marginRight=b.style.width="0";f.style.width="1px";g.appendChild(e);b=!parseFloat(a.getComputedStyle(b,null).marginRight);g.removeChild(e);return b}}))})();s.swap=function(a,b,c,d){var g,e={};for(g in b)e[g]=a.style[g],a.style[g]=b[g];c=c.apply(a,d||[]);for(g in b)a.style[g]=e[g];return c};var Kb=/^(none|table(?!-c[ea]).+)/,Ib=new RegExp("^("+Ka+")(.*)$","i"),fc=new RegExp("^([+-])=("+Ka+")","i"),gc={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},
yb=["Webkit","O","Moz","ms"];s.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=B(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,e,f,l=s.camelCase(b),h=a.style;b=s.cssProps[l]||(s.cssProps[l]=F(h,l));f=s.cssHooks[b]||s.cssHooks[l];if(void 0!==
c)e=typeof c,"string"===e&&(g=fc.exec(c))&&(c=(g[1]+1)*g[2]+parseFloat(s.css(a,b)),e="number"),null!=c&&c===c&&("number"!==e||s.cssNumber[l]||(c+="px"),ja.clearCloneStyle||""!==c||0!==b.indexOf("background")||(h[b]="inherit"),f&&"set"in f&&void 0===(c=f.set(a,c,d))||(h[b]=c));else return f&&"get"in f&&void 0!==(g=f.get(a,!1,d))?g:h[b]}},css:function(a,b,c,d){var g,e;e=s.camelCase(b);b=s.cssProps[e]||(s.cssProps[e]=F(a.style,e));(e=s.cssHooks[b]||s.cssHooks[e])&&"get"in e&&(g=e.get(a,!0,c));void 0===
g&&(g=B(a,b,d));"normal"===g&&b in Sb&&(g=Sb[b]);return""===c||c?(a=parseFloat(g),!0===c||s.isNumeric(a)?a||0:g):g}});s.each(["height","width"],function(a,b){s.cssHooks[b]={get:function(a,c,d){if(c)return Kb.test(s.css(a,"display"))&&0===a.offsetWidth?s.swap(a,gc,function(){return G(a,b,d)}):G(a,b,d)},set:function(a,c,d){var g=d&&Wa(a);return I(a,c,d?D(a,b,d,"border-box"===s.css(a,"boxSizing",!1,g),g):0)}}});s.cssHooks.marginRight=E(ja.reliableMarginRight,function(a,b){if(b)return s.swap(a,{display:"inline-block"},
B,[a,"marginRight"])});s.each({margin:"",padding:"",border:"Width"},function(a,b){s.cssHooks[a+b]={expand:function(c){var d=0,g={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)g[a+oa[d]+b]=c[d]||c[d-2]||c[0];return g}};xb.test(a)||(s.cssHooks[a+b].set=I)});s.fn.extend({css:function(a,b){return ba(this,function(a,b,c){var d,g={},e=0;if(s.isArray(b)){c=Wa(a);for(d=b.length;e<d;e++)g[b[e]]=s.css(a,b[e],!1,c);return g}return void 0!==c?s.style(a,b,c):s.css(a,b)},a,b,1<arguments.length)},show:function(){return P(this,
!0)},hide:function(){return P(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ra(this)?s(this).show():s(this).hide()})}});s.Tween=L;L.prototype={constructor:L,init:function(a,b,c,d,g,e){this.elem=a;this.prop=c;this.easing=g||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=e||(s.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,
c=L.propHooks[this.prop];this.pos=this.options.duration?b=s.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):L.propHooks._default.set(this);return this}};L.prototype.init.prototype=L.prototype;L.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=s.css(a.elem,a.prop,""))&&"auto"!==a?
a:0:a.elem[a.prop]},set:function(a){if(s.fx.step[a.prop])s.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[s.cssProps[a.prop]]||s.cssHooks[a.prop])?s.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};s.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};s.fx=L.prototype.init;s.fx.step={};var bb,Tb,hc=/^(?:toggle|show|hide)$/,
Lb=new RegExp("^(?:([+-])=|)("+Ka+")([a-z%]*)$","i"),pc=/queueHooks$/,vb=[function(a,b,c){var d,g,e,f,l,h,p=this,r={},n=a.style,q=a.nodeType&&ra(a),v=Y.get(a,"fxshow");c.queue||(f=s._queueHooks(a,"fx"),null==f.unqueued&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,p.always(function(){p.always(function(){f.unqueued--;s.queue(a,"fx").length||f.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],h=s.css(a,
"display"),g="none"===h?Y.get(a,"olddisplay")||C(a.nodeName):h,"inline"===g&&"none"===s.css(a,"float")&&(n.display="inline-block"));c.overflow&&(n.overflow="hidden",p.always(function(){n.overflow=c.overflow[0];n.overflowX=c.overflow[1];n.overflowY=c.overflow[2]}));for(d in b)if(g=b[d],hc.exec(g)){delete b[d];e=e||"toggle"===g;if(g===(q?"hide":"show"))if("show"===g&&v&&void 0!==v[d])q=!0;else continue;r[d]=v&&v[d]||s.style(a,d)}else h=void 0;if(s.isEmptyObject(r))"inline"===("none"===h?C(a.nodeName):
h)&&(n.display=h);else for(d in v?"hidden"in v&&(q=v.hidden):v=Y.access(a,"fxshow",{}),e&&(v.hidden=!q),q?s(a).show():p.done(function(){s(a).hide()}),p.done(function(){var b;Y.remove(a,"fxshow");for(b in r)s.style(a,b,r[b])}),r)b=R(q?v[d]:0,d,p),d in v||(v[d]=b.start,q&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],$a={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),g=Lb.exec(b),e=g&&g[3]||(s.cssNumber[a]?"":"px"),f=(s.cssNumber[a]||"px"!==e&&+d)&&Lb.exec(s.css(c.elem,a)),l=1,
h=20;if(f&&f[3]!==e){e=e||f[3];g=g||[];f=+d||1;do l=l||".5",f/=l,s.style(c.elem,a,f+e);while(l!==(l=c.cur()/d)&&1!==l&&--h)}g&&(f=c.start=+f||+d||0,c.unit=e,c.end=g[1]?f+(g[1]+1)*g[2]:+g[2]);return c}]};s.Animation=s.extend(Q,{tweener:function(a,b){s.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,g=a.length;d<g;d++)c=a[d],$a[c]=$a[c]||[],$a[c].unshift(b)},prefilter:function(a,b){b?vb.unshift(a):vb.push(a)}});s.speed=function(a,b,c){var d=a&&"object"===typeof a?s.extend({},a):{complete:c||
!c&&b||s.isFunction(a)&&a,duration:a,easing:c&&b||b&&!s.isFunction(b)&&b};d.duration=s.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in s.fx.speeds?s.fx.speeds[d.duration]:s.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){s.isFunction(d.old)&&d.old.call(this);d.queue&&s.dequeue(this,d.queue)};return d};s.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ra).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){var g=s.isEmptyObject(a),e=s.speed(b,c,d);b=function(){var b=Q(this,s.extend({},a),e);(g||Y.get(this,"finish"))&&b.stop(!0)};b.finish=b;return g||!1===e.queue?this.each(b):this.queue(e.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",e=s.timers,f=Y.get(this);if(g)f[g]&&f[g].stop&&d(f[g]);else for(g in f)f[g]&&f[g].stop&&pc.test(g)&&
d(f[g]);for(g=e.length;g--;)e[g].elem!==this||null!=a&&e[g].queue!==a||(e[g].anim.stop(c),b=!1,e.splice(g,1));!b&&c||s.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,c=Y.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var g=s.timers,e=d?d.length:0;c.finish=!0;s.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=g.length;b--;)g[b].elem===this&&g[b].queue===a&&(g[b].anim.stop(!0),g.splice(b,1));for(b=0;b<e;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});
s.each(["toggle","show","hide"],function(a,b){var c=s.fn[b];s.fn[b]=function(a,d,g){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(M(b,!0),a,d,g)}});s.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){s.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});s.timers=[];s.fx.tick=function(){var a,b=0,c=s.timers;for(bb=s.now();b<c.length;b++)a=c[b],a()||c[b]!==a||
c.splice(b--,1);c.length||s.fx.stop();bb=void 0};s.fx.timer=function(a){s.timers.push(a);a()?s.fx.start():s.timers.pop()};s.fx.interval=13;s.fx.start=function(){Tb||(Tb=setInterval(s.fx.tick,s.fx.interval))};s.fx.stop=function(){clearInterval(Tb);Tb=null};s.fx.speeds={slow:600,fast:200,_default:400};s.fn.delay=function(a,b){a=s.fx?s.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=ca.createElement("input"),b=ca.createElement("select"),
c=b.appendChild(ca.createElement("option"));a.type="checkbox";ja.checkOn=""!==a.value;ja.optSelected=c.selected;b.disabled=!0;ja.optDisabled=!c.disabled;a=ca.createElement("input");a.value="t";a.type="radio";ja.radioValue="t"===a.value})();var Mb,ib=s.expr.attrHandle;s.fn.extend({attr:function(a,b){return ba(this,s.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){s.removeAttr(this,a)})}});s.extend({attr:function(a,b,c){var d,g,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if("undefined"===
typeof a.getAttribute)return s.prop(a,b,c);1===e&&s.isXMLDoc(a)||(b=b.toLowerCase(),d=s.attrHooks[b]||(s.expr.match.bool.test(b)?Mb:void 0));if(void 0!==c)if(null===c)s.removeAttr(a,b);else{if(d&&"set"in d&&void 0!==(g=d.set(a,c,b)))return g;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(g=d.get(a,b)))return g;g=s.find.attr(a,b);return null==g?void 0:g}}},removeAttr:function(a,b){var c,d,g=0,e=b&&b.match(va);if(e&&1===a.nodeType)for(;c=e[g++];)d=s.propFix[c]||c,s.expr.match.bool.test(c)&&
(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!ja.radioValue&&"radio"===b&&s.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});Mb={set:function(a,b,c){!1===b?s.removeAttr(a,c):a.setAttribute(c,c);return c}};s.each(s.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ib[b]||s.find.attr;ib[b]=function(a,b,d){var g,e;d||(e=ib[b],ib[b]=g,g=null!=c(a,b,d)?b.toLowerCase():null,ib[b]=e);return g}});var Zb=/^(?:input|select|textarea|button)$/i;
s.fn.extend({prop:function(a,b){return ba(this,s.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[s.propFix[a]||a]})}});s.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,g,e;e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(e=1!==e||!s.isXMLDoc(a))b=s.propFix[b]||b,g=s.propHooks[b];return void 0!==c?g&&"set"in g&&void 0!==(d=g.set(a,c,b))?d:a[b]=c:g&&"get"in g&&null!==(d=g.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||
Zb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});ja.optSelected||(s.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});s.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){s.propFix[this.toLowerCase()]=this});var Ub=/[\t\r\n\f]/g;s.fn.extend({addClass:function(a){var b,c,d,g,e;b="string"===typeof a&&a;var f=0,l=this.length;if(s.isFunction(a))return this.each(function(b){s(this).addClass(a.call(this,
b,this.className))});if(b)for(b=(a||"").match(va)||[];f<l;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ub," "):" ")){for(e=0;g=b[e++];)0>d.indexOf(" "+g+" ")&&(d+=g+" ");d=s.trim(d);c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,g,e;b=0===arguments.length||"string"===typeof a&&a;var f=0,l=this.length;if(s.isFunction(a))return this.each(function(b){s(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(va)||[];f<
l;f++)if(c=this[f],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ub," "):"")){for(e=0;g=b[e++];)for(;0<=d.indexOf(" "+g+" ");)d=d.replace(" "+g+" "," ");d=a?s.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):s.isFunction(a)?this.each(function(c){s(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,g=s(this),
e=a.match(va)||[];b=e[d++];)g.hasClass(b)?g.removeClass(b):g.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&Y.set(this,"__className__",this.className),this.className=this.className||!1===a?"":Y.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ub," ").indexOf(a))return!0;return!1}});var Nb=/\r/g;s.fn.extend({val:function(a){var b,c,d,g=this[0];if(arguments.length)return d=
s.isFunction(a),this.each(function(c){1===this.nodeType&&(c=d?a.call(this,c,s(this).val()):a,null==c?c="":"number"===typeof c?c+="":s.isArray(c)&&(c=s.map(c,function(a){return null==a?"":a+""})),b=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(g){if((b=s.valHooks[g.type]||s.valHooks[g.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(g,"value")))return c;c=g.value;return"string"===typeof c?c.replace(Nb,""):null==
c?"":c}}});s.extend({valHooks:{option:{get:function(a){var b=s.find.attr(a,"value");return null!=b?b:s.trim(s.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,g=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,f=0>d?e:a?d:0;f<e;f++)if(b=c[f],!(!b.selected&&f!==d||(ja.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&s.nodeName(b.parentNode,"optgroup"))){b=s(b).val();if(a)return b;g.push(b)}return g},set:function(a,b){for(var c,d,g=a.options,
e=s.makeArray(b),f=g.length;f--;)if(d=g[f],d.selected=0<=s.inArray(d.value,e))c=!0;c||(a.selectedIndex=-1);return e}}}});s.each(["radio","checkbox"],function(){s.valHooks[this]={set:function(a,b){if(s.isArray(b))return a.checked=0<=s.inArray(s(a).val(),b)}};ja.checkOn||(s.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){s.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});s.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Vb=s.now(),Wb=/\?/;s.parseJSON=function(a){return JSON.parse(a+"")};s.parseXML=
function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||s.error("Invalid XML: "+a);return b};var Ta,La,jb=/#.*$/,Xa=/([?&])_=[^&]*/,Ya=/^(.*?):[ \t]*([^\r\n]*)$/mg,ic=/^(?:GET|HEAD)$/,$b=/^\/\//,Qa=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ac={},pb={},qc="*/".concat("*");try{La=location.href}catch(Kc){La=ca.createElement("a"),La.href="",La=La.href}Ta=Qa.exec(La.toLowerCase())||
[];s.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:La,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ta[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,
"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Z(Z(a,s.ajaxSettings),b):Z(s.ajaxSettings,a)},ajaxPrefilter:J(ac),ajaxTransport:J(pb),ajax:function(a,b){function c(a,b,f,h){var r,Ta,y,A;A=b;if(2!==z){z=2;l&&clearTimeout(l);d=void 0;e=h||"";C.readyState=0<a?4:0;h=200<=a&&300>a||304===a;if(f){y=n;for(var B=C,Xa,La,jb,E,Ya=y.contents,F=y.dataTypes;"*"===F[0];)F.shift(),void 0===Xa&&(Xa=y.mimeType||B.getResponseHeader("Content-Type"));
if(Xa)for(La in Ya)if(Ya[La]&&Ya[La].test(Xa)){F.unshift(La);break}if(F[0]in f)jb=F[0];else{for(La in f){if(!F[0]||y.converters[La+" "+F[0]]){jb=La;break}E||(E=La)}jb=jb||E}jb?(jb!==F[0]&&F.unshift(jb),y=f[jb]):y=void 0}a:{f=n;Xa=y;La=C;jb=h;var D,I,Qa,B={},Ya=f.dataTypes.slice();if(Ya[1])for(I in f.converters)B[I.toLowerCase()]=f.converters[I];for(E=Ya.shift();E;)if(f.responseFields[E]&&(La[f.responseFields[E]]=Xa),!Qa&&jb&&f.dataFilter&&(Xa=f.dataFilter(Xa,f.dataType)),Qa=E,E=Ya.shift())if("*"===
E)E=Qa;else if("*"!==Qa&&Qa!==E){I=B[Qa+" "+E]||B["* "+E];if(!I)for(D in B)if(y=D.split(" "),y[1]===E&&(I=B[Qa+" "+y[0]]||B["* "+y[0]])){!0===I?I=B[D]:!0!==B[D]&&(E=y[0],Ya.unshift(y[1]));break}if(!0!==I)if(I&&f["throws"])Xa=I(Xa);else try{Xa=I(Xa)}catch(R){y={state:"parsererror",error:I?R:"No conversion from "+Qa+" to "+E};break a}}y={state:"success",data:Xa}}if(h)n.ifModified&&((A=C.getResponseHeader("Last-Modified"))&&(s.lastModified[g]=A),(A=C.getResponseHeader("etag"))&&(s.etag[g]=A)),204===
a||"HEAD"===n.type?A="nocontent":304===a?A="notmodified":(A=y.state,r=y.data,Ta=y.error,h=!Ta);else if(Ta=A,a||!A)A="error",0>a&&(a=0);C.status=a;C.statusText=(b||A)+"";h?u.resolveWith(q,[r,A,C]):u.rejectWith(q,[C,A,Ta]);C.statusCode(x);x=void 0;p&&v.trigger(h?"ajaxSuccess":"ajaxError",[C,n,h?r:Ta]);w.fireWith(q,[C,A]);p&&(v.trigger("ajaxComplete",[C,n]),--s.active||s.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var d,g,e,f,l,h,p,r,n=s.ajaxSetup({},b),q=n.context||n,v=n.context&&
(q.nodeType||q.jquery)?s(q):s.event,u=s.Deferred(),w=s.Callbacks("once memory"),x=n.statusCode||{},y={},A={},z=0,B="canceled",C={readyState:0,getResponseHeader:function(a){var b;if(2===z){if(!f)for(f={};b=Ya.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===z?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();z||(a=A[c]=A[c]||a,y[a]=b);return this},overrideMimeType:function(a){z||(n.mimeType=a);return this},statusCode:function(a){var b;
if(a)if(2>z)for(b in a)x[b]=[x[b],a[b]];else C.always(a[C.status]);return this},abort:function(a){a=a||B;d&&d.abort(a);c(0,a);return this}};u.promise(C).complete=w.add;C.success=C.done;C.error=C.fail;n.url=((a||n.url||La)+"").replace(jb,"").replace($b,Ta[1]+"//");n.type=b.method||b.type||n.method||n.type;n.dataTypes=s.trim(n.dataType||"*").toLowerCase().match(va)||[""];null==n.crossDomain&&(h=Qa.exec(n.url.toLowerCase()),n.crossDomain=!(!h||h[1]===Ta[1]&&h[2]===Ta[2]&&(h[3]||("http:"===h[1]?"80":
"443"))===(Ta[3]||("http:"===Ta[1]?"80":"443"))));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=s.param(n.data,n.traditional));H(ac,n,b,C);if(2===z)return C;(p=n.global)&&0===s.active++&&s.event.trigger("ajaxStart");n.type=n.type.toUpperCase();n.hasContent=!ic.test(n.type);g=n.url;n.hasContent||(n.data&&(g=n.url+=(Wb.test(g)?"&":"?")+n.data,delete n.data),!1===n.cache&&(n.url=Xa.test(g)?g.replace(Xa,"$1_="+Vb++):g+(Wb.test(g)?"&":"?")+"_="+Vb++));n.ifModified&&(s.lastModified[g]&&C.setRequestHeader("If-Modified-Since",
s.lastModified[g]),s.etag[g]&&C.setRequestHeader("If-None-Match",s.etag[g]));(n.data&&n.hasContent&&!1!==n.contentType||b.contentType)&&C.setRequestHeader("Content-Type",n.contentType);C.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+qc+"; q=0.01":""):n.accepts["*"]);for(r in n.headers)C.setRequestHeader(r,n.headers[r]);if(n.beforeSend&&(!1===n.beforeSend.call(q,C,n)||2===z))return C.abort();B="abort";for(r in{success:1,error:1,
complete:1})C[r](n[r]);if(d=H(pb,n,b,C)){C.readyState=1;p&&v.trigger("ajaxSend",[C,n]);n.async&&0<n.timeout&&(l=setTimeout(function(){C.abort("timeout")},n.timeout));try{z=1,d.send(y,c)}catch(E){if(2>z)c(-1,E);else throw E;}}else c(-1,"No Transport");return C},getJSON:function(a,b,c){return s.get(a,b,c,"json")},getScript:function(a,b){return s.get(a,void 0,b,"script")}});s.each(["get","post"],function(a,b){s[b]=function(a,c,d,g){s.isFunction(c)&&(g=g||d,d=c,c=void 0);return s.ajax({url:a,type:b,dataType:g,
data:c,success:d})}});s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){s.fn[b]=function(a){return this.on(b,a)}});s._evalUrl=function(a){return s.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};s.fn.extend({wrapAll:function(a){var b;if(s.isFunction(a))return this.each(function(b){s(this).wrapAll(a.call(this,b))});this[0]&&(b=s(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=
this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return s.isFunction(a)?this.each(function(b){s(this).wrapInner(a.call(this,b))}):this.each(function(){var b=s(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=s.isFunction(a);return this.each(function(c){s(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()}});
s.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};s.expr.filters.visible=function(a){return!s.expr.filters.hidden(a)};var Xc=/%20/g,Dc=/\[\]$/,wc=/\r?\n/g,Yc=/^(?:submit|button|image|reset|file)$/i,Zc=/^(?:input|select|textarea|keygen)/i;s.param=function(a,b){var c,d=[],g=function(a,b){b=s.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=s.ajaxSettings&&s.ajaxSettings.traditional);if(s.isArray(a)||a.jquery&&!s.isPlainObject(a))s.each(a,
function(){g(this.name,this.value)});else for(c in a)X(c,a[c],b,g);return d.join("&").replace(Xc,"+")};s.fn.extend({serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=s.prop(this,"elements");return a?s.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!s(this).is(":disabled")&&Zc.test(this.nodeName)&&!Yc.test(a)&&(this.checked||!Ha.test(a))}).map(function(a,b){var c=s(this).val();return null==c?null:s.isArray(c)?
s.map(c,function(a){return{name:b.name,value:a.replace(wc,"\r\n")}}):{name:b.name,value:c.replace(wc,"\r\n")}}).get()}});s.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var $c=0,xc={},ad={0:200,1223:204},rc=s.ajaxSettings.xhr();if(a.ActiveXObject)s(a).on("unload",function(){for(var a in xc)xc[a]()});ja.cors=!!rc&&"withCredentials"in rc;ja.ajax=rc=!!rc;s.ajaxTransport(function(a){var b;if(ja.cors||rc&&!a.crossDomain)return{send:function(c,d){var g,e=a.xhr(),f=++$c;e.open(a.type,
a.url,a.async,a.username,a.password);if(a.xhrFields)for(g in a.xhrFields)e[g]=a.xhrFields[g];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(g in c)e.setRequestHeader(g,c[g]);b=function(a){return function(){b&&(delete xc[f],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?d(e.status,e.statusText):d(ad[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,
e.getAllResponseHeaders()))}};e.onload=b();e.onerror=b("error");b=xc[f]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(l){if(b)throw l;}},abort:function(){b&&b()}}});s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){s.globalEval(a);return a}}});s.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});
s.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,g){b=s("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&g("error"===a.type?404:200,a.type)});ca.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Lc=[],Ec=/(=)\?(?=&|$)|\?\?/;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Lc.pop()||s.expando+"_"+Vb++;this[a]=!0;return a}});s.ajaxPrefilter("json jsonp",function(b,c,d){var g,e,f,
l=!1!==b.jsonp&&(Ec.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ec.test(b.data)&&"data");if(l||"jsonp"===b.dataTypes[0])return g=b.jsonpCallback=s.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,l?b[l]=b[l].replace(Ec,"$1"+g):!1!==b.jsonp&&(b.url+=(Wb.test(b.url)?"&":"?")+b.jsonp+"="+g),b.converters["script json"]=function(){f||s.error(g+" was not called");return f[0]},b.dataTypes[0]="json",e=a[g],a[g]=function(){f=arguments},
d.always(function(){a[g]=e;b[g]&&(b.jsonpCallback=c.jsonpCallback,Lc.push(g));f&&s.isFunction(e)&&e(f[0]);f=e=void 0}),"script"});s.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||ca;var d=ab.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=s.buildFragment([a],b,c);c&&c.length&&s(c).remove();return s.merge([],d.childNodes)};var sc=s.fn.load;s.fn.load=function(a,b,c){if("string"!==typeof a&&sc)return sc.apply(this,arguments);var d,g,e,f=this,
l=a.indexOf(" ");0<=l&&(d=s.trim(a.slice(l)),a=a.slice(0,l));s.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(g="POST");0<f.length&&s.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){e=arguments;f.html(d?s("<div>").append(s.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){f.each(c,e||[a.responseText,b,a])});return this};s.expr.filters.animated=function(a){return s.grep(s.timers,function(b){return a===b.elem}).length};var Mc=a.document.documentElement;s.offset={setOffset:function(a,
b,c){var d,g,e,f=s.css(a,"position"),l=s(a),h={};"static"===f&&(a.style.position="relative");e=l.offset();g=s.css(a,"top");d=s.css(a,"left");("absolute"===f||"fixed"===f)&&-1<(g+d).indexOf("auto")?(d=l.position(),g=d.top,d=d.left):(g=parseFloat(g)||0,d=parseFloat(d)||0);s.isFunction(b)&&(b=b.call(a,c,e));null!=b.top&&(h.top=b.top-e.top+g);null!=b.left&&(h.left=b.left-e.left+d);"using"in b?b.using.call(a,h):l.css(h)}};s.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){s.offset.setOffset(this,
a,b)});var b,c;c=this[0];var d={top:0,left:0},g=c&&c.ownerDocument;if(g){b=g.documentElement;if(!s.contains(b,c))return d;"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=aa(g);return{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};"fixed"===s.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),s.nodeName(a[0],"html")||(d=a.offset()),d.top+=
s.css(a[0],"borderTopWidth",!0),d.left+=s.css(a[0],"borderLeftWidth",!0));return{top:b.top-d.top-s.css(c,"marginTop",!0),left:b.left-d.left-s.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Mc;a&&!s.nodeName(a,"html")&&"static"===s.css(a,"position");)a=a.offsetParent;return a||Mc})}});s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;s.fn[b]=function(g){return ba(this,function(b,g,e){var f=aa(b);
if(void 0===e)return f?f[c]:b[g];f?f.scrollTo(d?a.pageXOffset:e,d?e:a.pageYOffset):b[g]=e},b,g,arguments.length,null)}});s.each(["top","left"],function(a,b){s.cssHooks[b]=E(ja.pixelPosition,function(a,c){if(c)return c=B(a,b),Ma.test(c)?s(a).position()[b]+"px":c})});s.each({Height:"height",Width:"width"},function(a,b){s.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){s.fn[d]=function(d,g){var e=arguments.length&&(c||"boolean"!==typeof d),f=c||(!0===d||!0===g?"margin":"border");return ba(this,
function(b,c,d){return s.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?s.css(b,c,f):s.style(b,c,d,f)},b,e?d:void 0,e,null)}})});s.fn.size=function(){return this.length};s.fn.andSelf=s.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return s});var bd=a.jQuery,cd=a.$;s.noConflict=function(b){a.$===s&&(a.$=cd);b&&a.jQuery===s&&
(a.jQuery=bd);return s};"undefined"===typeof b&&(a.jQuery=a.$=s);return s});
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(b,d){var e,f;e=b.nodeName.toLowerCase();if("area"===e){e=b.parentNode;f=e.name;if(!b.href||!f||"map"!==e.nodeName.toLowerCase())return!1;e=a("img[usemap='#"+f+"']")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,
"visibility")}).length}a.ui=a.ui||{};a.extend(a.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);
return"fixed"!==c&&b.length?b:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,
"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||0<=d)&&b(c,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,g,f){a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0;g&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);f&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),n={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,
outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?n["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})};a.fn["outer"+c]=function(b,g){return"number"!==typeof b?n["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,g)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?
b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.fn.extend({focus:function(b){return function(c,d){return"number"===typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),
enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if("absolute"===c||"relative"===c||"fixed"===c)if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&0!==c)return c;b=b.parent()}}return 0}});a.ui.plugin={add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c,
d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{(d=a._data(e,"events"))&&d.remove&&a(e).triggerHandler("remove")}catch(n){}b(c)}}(a.cleanData);a.widget=function(b,c,d){var e,f,n,u,w={},v=b.split(".")[0];b=b.split(".")[1];e=v+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=
function(b){return!!a.data(b,e)};a[v]=a[v]||{};f=a[v][b];n=a[v][b]=function(a,b){if(!this._createWidget)return new n(a,b);arguments.length&&this._createWidget(a,b)};a.extend(n,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]});u=new c;u.options=a.widget.extend({},u.options);a.each(d,function(b,d){a.isFunction(d)?w[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},g=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,
e;this._super=a;this._superApply=g;e=d.apply(this,arguments);this._super=b;this._superApply=c;return e}}():w[b]=d});n.prototype=a.widget.extend(u,{widgetEventPrefix:f?u.widgetEventPrefix||b:b},w,{constructor:n,namespace:v,widgetName:b,widgetFullName:e});f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,n,c._proto)}),delete f._childConstructors):c._childConstructors.push(n);a.widget.bridge(b,n);return n};a.widget.extend=function(b){for(var c=e.call(arguments,
1),d=0,f=c.length,r,n;d<f;d++)for(r in c[d])n=c[d][r],c[d].hasOwnProperty(r)&&void 0!==n&&(a.isPlainObject(n)?b[r]=a.isPlainObject(b[r])?a.widget.extend({},b[r],n):a.widget.extend({},n):b[r]=n);return b};a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var r="string"===typeof f,n=e.call(arguments,1),u=this;f=!r&&n.length?a.widget.extend.apply(null,[f].concat(n)):f;r?this.each(function(){var c,e=a.data(this,d);if("instance"===f)return u=e,!1;if(!e)return a.error("cannot call methods on "+
b+" prior to initialization; attempted to call method '"+f+"'");if(!a.isFunction(e[f])||"_"===f.charAt(0))return a.error("no such method '"+f+"' for "+b+" widget instance");c=e[f].apply(e,n);if(c!==e&&void 0!==c)return u=c&&c.jquery?u.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))});return u}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",
options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=d++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||
this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d=b,e,f,n;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof b)if(d={},e=b.split("."),b=e.shift(),e.length){f=d[b]=a.widget.extend({},this.options[b]);for(n=0;n<e.length-1;n++)f[e[n]]=f[e[n]]||{},f=f[e[n]];b=e.pop();if(1===arguments.length)return void 0===f[b]?null:f[b];f[b]=c}else{if(1===arguments.length)return void 0===
this.options[b]?null:this.options[b];d[b]=c}this._setOptions(d);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_on:function(b,c,d){var e,f=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget());a.each(d,function(d,l){function w(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof l?f[l]:l).apply(f,arguments)}"string"!==typeof l&&(w.guid=l.guid=l.guid||w.guid||a.guid++);var v=d.match(/^([\w:-]*)\s*(.*)$/),x=v[1]+f.eventNamespace;(v=v[2])?e.delegate(v,x,w):c.bind(x,w)})},_off:function(a,b){b=(b||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,
{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(f)&&!1===f.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",
hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"===typeof e&&(e={effect:e});var n,u=e?!0===e||"number"===typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});n=!a.isEmptyObject(e);e.complete=f;e.delay&&d.delay(e.delay);if(n&&a.effects&&a.effects.effect[u])d[b](e);else if(u!==b&&d[u])d[u](e.duration,e.easing,f);else d.queue(function(c){a(this)[b]();f&&f.call(d[0]);c()})}});var f=!1;a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.1",
options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!d||e||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));
if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);
b.preventDefault();return f=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button||!b.which)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return f=!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
a.widget("ui.draggable",a.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var c=this.document[0],d=this.options;try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(e){}if(this.helper||d.disabled||0<a(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===d.iframeFix?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+
"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=
this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b,!1);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);
this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b,!0);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(!1===
this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=this,d=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||a.isFunction(this.options.revert)&&
this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",b)&&c._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);this.element.focus();return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?
this._mouseUp({}):this._clear();return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?
a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo);b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in
b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&
(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0});return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?
0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var b,c,d;b=this.options;c=this.document[0];this.relativeContainer=null;if(b.containment)if("window"===b.containment)this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
else if("document"===b.containment)this.containment=[0,0,a(c).width()-this.helperProportions.width-this.margins.left,(a(c).height()||c.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(b.containment.constructor===Array)this.containment=b.containment;else{if("parent"===b.containment&&(b.containment=this.helper[0].parentNode),c=a(b.containment),d=c[0])b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),
10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],
this.relativeContainer=c}else this.containment=null},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,
b){var c,d,e,f=this.options,u=this._isRootNode(this.scrollParent[0]);e=a.pageX;d=a.pageY;u&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});b&&(this.containment&&(this.relativeContainer?(c=this.relativeContainer.offset(),c=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(e=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<
c[1]&&(d=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(e=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(d=c[3]+this.offset.click.top)),f.grid&&(d=f.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,d=c?d-this.offset.click.top>=c[1]||d-this.offset.click.top>c[3]?d:d-this.offset.click.top>=c[1]?d-f.grid[1]:d+f.grid[1]:d,e=f.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,
e=c?e-this.offset.click.left>=c[0]||e-this.offset.click.left>c[2]?e:e-this.offset.click.left>=c[0]?e-f.grid[0]:e+f.grid[0]:e),"y"===f.axis&&(e=this.originalPageX),"x"===f.axis&&(d=this.originalPageY));return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:u?0:
this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d,this],!0);"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,
position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[];a(e.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});a.each(d.sortables,
function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c,d){var e=this;a.each(d.sortables,function(){var f=
!1,n=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!==n&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(n.instance.element[0],this.instance.element[0])&&
(f=!1);return f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,
this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),
this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",
{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,
c,d){c=d.options;var e=!1,f=d.scrollParentNotHidden[0],n=d.document[0];f!==n&&"HTML"!==f.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+f.offsetHeight-b.pageY<c.scrollSensitivity?f.scrollTop=e=f.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(f.scrollTop=e=f.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+f.offsetWidth-b.pageX<c.scrollSensitivity?f.scrollLeft=e=f.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(f.scrollLeft=
e=f.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(n).scrollTop()<c.scrollSensitivity?e=a(n).scrollTop(a(n).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(n).scrollTop())<c.scrollSensitivity&&(e=a(n).scrollTop(a(n).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(n).scrollLeft()<c.scrollSensitivity?e=a(n).scrollLeft(a(n).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(n).scrollLeft())<c.scrollSensitivity&&(e=a(n).scrollLeft(a(n).scrollLeft()+c.scrollSpeed))));
!1!==e&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,n,u,w,v,x,z,y,A,C=d.options,B=C.snapTolerance,E=c.offset.left,F=
E+d.helperProportions.width,I=c.offset.top,D=I+d.helperProportions.height;for(y=d.snapElements.length-1;0<=y;y--)w=d.snapElements[y].left,v=w+d.snapElements[y].width,x=d.snapElements[y].top,z=x+d.snapElements[y].height,F<w-B||E>v+B||D<x-B||I>z+B||!a.contains(d.snapElements[y].item.ownerDocument,d.snapElements[y].item)?(d.snapElements[y].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[y].item})),d.snapElements[y].snapping=!1):
("inner"!==C.snapMode&&(e=Math.abs(x-D)<=B,f=Math.abs(z-I)<=B,n=Math.abs(w-F)<=B,u=Math.abs(v-E)<=B,e&&(c.position.top=d._convertPositionTo("relative",{top:x-d.helperProportions.height,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:z,left:0}).top-d.margins.top),n&&(c.position.left=d._convertPositionTo("relative",{top:0,left:w-d.helperProportions.width}).left-d.margins.left),u&&(c.position.left=d._convertPositionTo("relative",{top:0,left:v}).left-d.margins.left)),
A=e||f||n||u,"outer"!==C.snapMode&&(e=Math.abs(x-I)<=B,f=Math.abs(z-D)<=B,n=Math.abs(w-E)<=B,u=Math.abs(v-F)<=B,e&&(c.position.top=d._convertPositionTo("relative",{top:x,left:0}).top-d.margins.top),f&&(c.position.top=d._convertPositionTo("relative",{top:z-d.helperProportions.height,left:0}).top-d.margins.top),n&&(c.position.left=d._convertPositionTo("relative",{top:0,left:w}).left-d.margins.left),u&&(c.position.left=d._convertPositionTo("relative",{top:0,left:v-d.helperProportions.width}).left-d.margins.left)),
!d.snapElements[y].snapping&&(e||f||n||u||A)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[y].item})),d.snapElements[y].snapping=e||f||n||u||A)}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e;b=a.makeArray(a(d.options.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});b.length&&(e=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",e+
b)}),this.css("zIndex",e+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.effects={effect:{}};(function(a,b){function c(a,b,d){var e=x[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);return isNaN(a)?b.def:e.mod?(a+e.mod)%e.mod:0>a?0:e.max<a?e.max:a}function d(b){var c=
w(),e=c._rgba=[];b=b.toLowerCase();C(u,function(a,d){var g,f=d.re.exec(b);g=f&&d.parse(f);f=d.space||"rgba";if(g)return g=c[f](g),c[v[f].cache]=g[v[f].cache],e=c._rgba=g._rgba,!1});return e.length?("0,0,0,0"===e.join()&&a.extend(e,A.transparent),c):A[b]}function e(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],
a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],w=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},v={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},x={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},z=w.support={},y=a("<p>")[0],A,C=a.each;y.style.cssText="background-color:rgba(1,1,1,.5)";
z.rgba=-1<y.style.backgroundColor.indexOf("rgba");C(v,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});w.fn=a.extend(w.prototype,{parse:function(e,f,r,n){if(e===b)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=a(e).css(f),f=b;var u=this,x=a.type(e),y=this._rgba=[];f!==b&&(e=[e,f,r,n],x="array");if("string"===x)return this.parse(d(e)||A._default);if("array"===x)return C(v.rgba.props,function(a,b){y[b.idx]=c(e[b.idx],b)}),this;if("object"===x)return e instanceof
w?C(v,function(a,b){e[b.cache]&&(u[b.cache]=e[b.cache].slice())}):C(v,function(b,d){var f=d.cache;C(d.props,function(a,b){if(!u[f]&&d.to){if("alpha"===a||null==e[a])return;u[f]=d.to(u._rgba)}u[f][b.idx]=c(e[a],b,!0)});u[f]&&0>a.inArray(null,u[f].slice(0,3))&&(u[f][3]=1,d.from&&(u._rgba=d.from(u[f])))}),this},is:function(a){var b=w(a),c=!0,d=this;C(v,function(a,e){var g,f=b[e.cache];f&&(g=d[e.cache]||e.to&&e.to(d._rgba)||[],C(e.props,function(a,b){if(null!=f[b.idx])return c=f[b.idx]===g[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;C(v,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var d=w(a),e=d._space(),g=v[e],f=0===this.alpha()?w("transparent"):this,h=f[g.cache]||g.to(f._rgba),p=h.slice(),d=d[g.cache];C(g.props,function(a,e){var g=e.idx,f=h[g],r=d[g],n=x[e.type]||{};null!==r&&(null===f?p[g]=r:(n.mod&&(r-f>n.mod/2?f+=n.mod:f-r>n.mod/2&&(f-=n.mod)),p[g]=c((r-f)*b+f,e)))});return this[e](p)},blend:function(b){if(1===this._rgba[3])return this;
var c=this._rgba.slice(),d=c.pop(),e=w(b)._rgba;return w(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),b="rgb(");return b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),b="hsl(");return b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();
b&&c.push(~~(255*d));return"#"+a.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});w.fn.parse.prototype=w.fn;v.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),g=Math.min(b,c,d),f=e-g,l=e+g,h=.5*l,l=0===f?0:.5>=h?f/l:f/(2-l);return[Math.round(g===e?0:b===e?60*(c-d)/f+360:c===e?60*(d-b)/
f+120:60*(b-c)/f+240)%360,l,h,null==a?1:a]};v.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-1/3)),a]};C(v,function(d,e){var p=e.props,r=e.cache,v=e.to,u=e.from;w.fn[d]=function(d){v&&!this[r]&&(this[r]=v(this._rgba));if(d===b)return this[r].slice();var e,f=a.type(d),n="array"===f||"object"===f?d:arguments,
x=this[r].slice();C(p,function(a,b){var d=n["object"===f?a:b.idx];null==d&&(d=x[b.idx]);x[b.idx]=c(d,b)});return u?(e=w(u(x)),e[r]=x,e):w(x)};C(p,function(b,c){w.fn[b]||(w.fn[b]=function(e){var l=a.type(e),h="alpha"===b?this._hsla?"hsla":"rgba":d,p=this[h](),r=p[c.idx];if("undefined"===l)return r;"function"===l&&(e=e.call(this,r),l=a.type(e));if(null==e&&c.empty)return this;"string"===l&&(l=f.exec(e))&&(e=r+parseFloat(l[2])*("+"===l[1]?1:-1));p[c.idx]=e;return this[h](p)})})});w.hook=function(b){b=
b.split(" ");C(b,function(b,c){a.cssHooks[c]={set:function(b,e){var f,l="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){e=w(f||e);if(!z.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===c?b.parentNode:b;(""===l||"transparent"===l)&&f&&f.style;)try{l=a.css(f,"backgroundColor"),f=f.parentNode}catch(h){}e=e.blend(l&&"transparent"!==l?l:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(r){}}};a.fx.step[c]=function(b){b.colorInit||(b.start=w(b.elem,c),b.end=w(b.end),b.colorInit=!0);a.cssHooks[c].set(b.elem,
b.start.transition(b.end,b.pos))}})};w.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};C(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};A=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",
purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(a);(function(){function b(c){var d,e=c.ownerDocument.defaultView?c.ownerDocument.defaultView.getComputedStyle(c,null):c.currentStyle,g={};if(e&&e.length&&e[0]&&e[e[0]])for(c=e.length;c--;)d=e[c],"string"===typeof e[d]&&(g[a.camelCase(d)]=e[d]);else for(d in e)"string"===typeof e[d]&&(g[d]=e[d]);return g}var c=["add","remove","toggle"],d={border:1,borderBottom:1,
borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(b){if("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)a.style(b.elem,c,b.end),b.setAttr=!0}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(e,f,n,u){var w=a.speed(f,n,u);return this.queue(function(){var f=
a(this),r=f.attr("class")||"",n,u=w.children?f.find("*").addBack():f,u=u.map(function(){return{el:a(this),start:b(this)}});n=function(){a.each(c,function(a,b){if(e[b])f[b+"Class"](e[b])})};n();u=u.map(function(){this.end=b(this.el[0]);var c=this.start,e=this.end,f={},h,p;for(h in e)p=e[h],c[h]===p||d[h]||!a.fx.step[h]&&isNaN(parseFloat(p))||(f[h]=p);this.diff=f;return this});f.attr("class",r);u=u.map(function(){var b=this,c=a.Deferred(),d=a.extend({},w,{queue:!1,complete:function(){c.resolve(b)}});
this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,u.get()).done(function(){n();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});w.complete.call(f[0])})})};a.fn.extend({addClass:function(b){return function(c,d,e,g){return d?a.effects.animateClass.call(this,{add:c},d,e,g):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,g){return 1<arguments.length?a.effects.animateClass.call(this,{remove:c},d,e,g):b.apply(this,
arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,g,f){return"boolean"===typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,g,f):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,g){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,g)}})})();(function(){function b(c,d,e,g){a.isPlainObject(c)&&(d=c,c=c.effect);c={effect:c};null==d&&(d={});a.isFunction(d)&&(g=d,
e=null,d={});if("number"===typeof d||a.fx.speeds[d])g=e,e=d,d={};a.isFunction(e)&&(g=e,e=null);d&&a.extend(c,d);e=e||d.duration;c.duration=a.fx.off?0:"number"===typeof e?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default;c.complete=g||d.complete;return c}function c(b){return!b||"number"===typeof b||a.fx.speeds[b]||"string"===typeof b&&!a.effects.effect[b]||a.isFunction(b)||"object"===typeof b&&!b.effect?!0:!1}a.extend(a.effects,{version:"1.11.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==
b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,d;for(d=0;d<b.length;d++)null!==b[d]&&(c=a.data("ui-effects-"+b[d]),void 0===c&&(c=""),a.css(b[d],c))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/
b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},g=document.activeElement;try{g.id}catch(f){g=document.body}b.wrap(d);(b[0]===g||a.contains(b[0],g))&&a(g).focus();d=b.parent();"static"===b.css("position")?
(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());
return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var g=b.cssUnit(c);0<g[0]&&(e[c]=g[0]*d+g[1])});return e}});a.fn.extend({effect:function(){function c(b){function e(){a.isFunction(f)&&f.call(g[0]);a.isFunction(b)&&b()}var g=a(this),f=d.complete,l=d.mode;(g.is(":hidden")?"hide"===l:"show"===l)?(g[l](),e()):h.call(g[0],d,e)}var d=b.apply(this,arguments),e=d.mode,f=d.queue,h=a.effects.effect[d.effect];return a.fx.off||!h?e?this[e](d.duration,d.complete):this.each(function(){d.complete&&
d.complete.call(this)}):!1===f?this.each(c):this.queue(f||"fx",c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="show";return this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);e.mode="hide";return this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"===typeof d)return a.apply(this,arguments);var e=b.apply(this,
arguments);e.mode="toggle";return this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*
(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})();a.effects.effect.blind=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,
b.mode||"hide"),n=b.direction||"up",u=/up|down|vertical/.test(n),w=u?"height":"width",v=u?"top":"left",n=/up|left|vertical|horizontal/.test(n),x={},z="show"===f,y,A,C;d.parent().is(".ui-effects-wrapper")?a.effects.save(d.parent(),e):a.effects.save(d,e);d.show();y=a.effects.createWrapper(d).css({overflow:"hidden"});A=y[w]();C=parseFloat(y.css(v))||0;x[w]=z?A:0;n||(d.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),x[v]=z?C:A+C);z&&(y.css(w,0),n||y.css(v,C+A));y.animate(x,
{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.bounce=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"effect"),n="hide"===f,u="show"===f,w=b.direction||"up",f=b.distance,v=b.times||5,x=2*v+(u||n?1:0),z=b.duration/x,y=b.easing,A="up"===w||"down"===w?"top":"left",w="up"===w||"left"===w,C,B,E=d.queue(),F=E.length;(u||
n)&&e.push("opacity");a.effects.save(d,e);d.show();a.effects.createWrapper(d);f||(f=d["top"===A?"outerHeight":"outerWidth"]()/3);u&&(B={opacity:1},B[A]=0,d.css("opacity",0).css(A,w?2*-f:2*f).animate(B,z,y));n&&(f/=Math.pow(2,v-1));B={};for(u=B[A]=0;u<v;u++)C={},C[A]=(w?"-=":"+=")+f,d.animate(C,z,y).animate(B,z,y),f=n?2*f:f/2;n&&(C={opacity:0},C[A]=(w?"-=":"+=")+f,d.animate(C,z,y));d.queue(function(){n&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<F&&E.splice.apply(E,[1,0].concat(E.splice(F,
x+1)));d.dequeue()};a.effects.effect.clip=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f="show"===a.effects.setMode(d,b.mode||"hide"),n="vertical"===(b.direction||"vertical"),u=n?"height":"width",n=n?"top":"left",w={},v,x;a.effects.save(d,e);d.show();v=a.effects.createWrapper(d).css({overflow:"hidden"});v="IMG"===d[0].tagName?v:d;x=v[u]();f&&(v.css(u,0),v.css(n,x/2));w[u]=f?x:0;w[n]=f?0:x/2;v.animate(w,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){f||
d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.drop=function(b,c){var d=a(this),e="position top bottom left right opacity height width".split(" "),f=a.effects.setMode(d,b.mode||"hide"),n="show"===f,u=b.direction||"left",w="up"===u||"down"===u?"top":"left",u="up"===u||"left"===u?"pos":"neg",v={opacity:n?1:0},x;a.effects.save(d,e);d.show();a.effects.createWrapper(d);x=b.distance||d["top"===w?"outerHeight":"outerWidth"](!0)/2;n&&d.css("opacity",0).css(w,"pos"===u?
-x:x);v[w]=(n?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+x;d.animate(v,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.explode=function(b,c){function d(){z.push(this);z.length===e*f&&(n.css({visibility:"visible"}),a(z).remove(),u||n.hide(),c())}var e=b.pieces?Math.round(Math.sqrt(b.pieces)):3,f=e,n=a(this),u="show"===a.effects.setMode(n,b.mode||"hide"),w=n.show().css("visibility","hidden").offset(),
v=Math.ceil(n.outerWidth()/f),x=Math.ceil(n.outerHeight()/e),z=[],y,A,C,B,E,F;for(y=0;y<e;y++)for(B=w.top+y*x,F=y-(e-1)/2,A=0;A<f;A++)C=w.left+A*v,E=A-(f-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-A*v,top:-y*x}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:x,left:C+(u?E*v:0),top:B+(u?F*x:0),opacity:u?0:1}).animate({left:C+(u?0:E*v),top:B+(u?0:F*x),opacity:u?1:0},b.duration||500,b.easing,
d)};a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})};a.effects.effect.fold=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"hide"),n="show"===f,u="hide"===f,f=b.size||15,w=/([0-9]+)%/.exec(f),v=!!b.horizFirst,x=n!==v,z=x?["width","height"]:["height","width"],y=b.duration/2,A,C={},B={};a.effects.save(d,e);d.show();
A=a.effects.createWrapper(d).css({overflow:"hidden"});x=x?[A.width(),A.height()]:[A.height(),A.width()];w&&(f=parseInt(w[1],10)/100*x[u?0:1]);n&&A.css(v?{height:0,width:f}:{height:f,width:0});C[z[0]]=n?x[0]:f;B[z[1]]=n?x[1]:0;A.animate(C,y,b.easing).animate(B,y,b.easing,function(){u&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()})};a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),n={backgroundColor:d.css("backgroundColor")};
"hide"===f&&(n.opacity=0);a.effects.save(d,e);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(n,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);c()}})};a.effects.effect.size=function(b,c){var d,e,f,n,u,w,v=a(this),x="position top bottom left right width height overflow opacity".split(" ");u="position top bottom left right overflow opacity".split(" ");var z=["width","height","overflow"],y=["fontSize"],A=
["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],B=a.effects.setMode(v,b.mode||"effect"),E=b.restore||"effect"!==B,F=b.scale||"both";w=b.origin||["middle","center"];var I=v.css("position"),D=E?x:u,G={height:0,width:0,outerHeight:0,outerWidth:0};"show"===B&&v.show();u={height:v.height(),width:v.width(),outerHeight:v.outerHeight(),outerWidth:v.outerWidth()};"toggle"===b.mode&&"show"===B?(v.from=b.to||G,v.to=b.from||
u):(v.from=b.from||("show"===B?G:u),v.to=b.to||("hide"===B?G:u));f=v.from.height/u.height;n=v.from.width/u.width;d=v.to.height/u.height;e=v.to.width/u.width;if("box"===F||"both"===F)f!==d&&(D=D.concat(A),v.from=a.effects.setTransition(v,A,f,v.from),v.to=a.effects.setTransition(v,A,d,v.to)),n!==e&&(D=D.concat(C),v.from=a.effects.setTransition(v,C,n,v.from),v.to=a.effects.setTransition(v,C,e,v.to));"content"!==F&&"both"!==F||f===d||(D=D.concat(y).concat(z),v.from=a.effects.setTransition(v,y,f,v.from),
v.to=a.effects.setTransition(v,y,d,v.to));a.effects.save(v,D);v.show();a.effects.createWrapper(v);v.css("overflow","hidden").css(v.from);w&&(w=a.effects.getBaseline(w,u),v.from.top=(u.outerHeight-v.outerHeight())*w.y,v.from.left=(u.outerWidth-v.outerWidth())*w.x,v.to.top=(u.outerHeight-v.to.outerHeight)*w.y,v.to.left=(u.outerWidth-v.to.outerWidth)*w.x);v.css(v.from);if("content"===F||"both"===F)A=A.concat(["marginTop","marginBottom"]).concat(y),C=C.concat(["marginLeft","marginRight"]),z=x.concat(A).concat(C),
v.find("*[width]").each(function(){var c=a(this),h=c.height(),v=c.width(),u=c.outerHeight(),w=c.outerWidth();E&&a.effects.save(c,z);c.from={height:h*f,width:v*n,outerHeight:u*f,outerWidth:w*n};c.to={height:h*d,width:v*e,outerHeight:h*d,outerWidth:v*e};f!==d&&(c.from=a.effects.setTransition(c,A,f,c.from),c.to=a.effects.setTransition(c,A,d,c.to));n!==e&&(c.from=a.effects.setTransition(c,C,n,c.from),c.to=a.effects.setTransition(c,C,e,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){E&&
a.effects.restore(c,z)})});v.animate(v.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===v.to.opacity&&v.css("opacity",v.from.opacity);"hide"===B&&v.hide();a.effects.restore(v,D);E||("static"===I?v.css({position:"relative",top:v.to.top,left:v.to.left}):a.each(["top","left"],function(a,b){v.css(b,function(b,c){var d=parseInt(c,10),e=a?v.to.left:v.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(v);c()}})};a.effects.effect.scale=function(b,c){var d=a(this),
e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),n=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),u=b.direction||"both",w=b.origin,v={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},x="horizontal"!==u?n/100:1,n="vertical"!==u?n/100:1;e.effect="size";e.queue=!1;e.complete=c;"effect"!==f&&(e.origin=w||["middle","center"],e.restore=!0);e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:v);e.to={height:v.height*
x,width:v.width*n,outerHeight:v.outerHeight*x,outerWidth:v.outerWidth*n};e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0));d.effect(e)};a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,n=parseInt(b.percent,10)||150,u=n/100,w={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?n:100,from:f?
w:{height:w.height*u,width:w.width*u,outerHeight:w.outerHeight*u,outerWidth:w.outerWidth*u}});d.effect(b)};a.effects.effect.pulsate=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"show"),f="show"===e,n="hide"===e,e=2*(b.times||5)+(f||"hide"===e?1:0),u=b.duration/e,w=0,v=d.queue(),x=v.length;if(f||!d.is(":visible"))d.css("opacity",0).show(),w=1;for(f=1;f<e;f++)d.animate({opacity:w},u,b.easing),w=1-w;d.animate({opacity:w},u,b.easing);d.queue(function(){n&&d.hide();c()});1<x&&v.splice.apply(v,
[1,0].concat(v.splice(x,e+1)));d.dequeue()};a.effects.effect.shake=function(b,c){var d=a(this),e="position top bottom left right height width".split(" "),f=a.effects.setMode(d,b.mode||"effect"),n=b.direction||"left",u=b.distance||20,w=b.times||3,v=2*w+1,x=Math.round(b.duration/v),z="up"===n||"down"===n?"top":"left",y="up"===n||"left"===n,n={},A={},C={},B=d.queue(),E=B.length;a.effects.save(d,e);d.show();a.effects.createWrapper(d);n[z]=(y?"-=":"+=")+u;A[z]=(y?"+=":"-=")+2*u;C[z]=(y?"-=":"+=")+2*u;
d.animate(n,x,b.easing);for(u=1;u<w;u++)d.animate(A,x,b.easing).animate(C,x,b.easing);d.animate(A,x,b.easing).animate(n,x/2,b.easing).queue(function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()});1<E&&B.splice.apply(B,[1,0].concat(B.splice(E,v+1)));d.dequeue()};a.effects.effect.slide=function(b,c){var d=a(this),e="position top bottom left right width height".split(" "),f=a.effects.setMode(d,b.mode||"show"),n="show"===f,u=b.direction||"left",w="up"===u||"down"===u?"top":
"left",u="up"===u||"left"===u,v,x={};a.effects.save(d,e);d.show();v=b.distance||d["top"===w?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(d).css({overflow:"hidden"});n&&d.css(w,u?isNaN(v)?"-"+v:-v:v);x[w]=(n?u?"+=":"-=":u?"-=":"+=")+v;d.animate(x,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide();a.effects.restore(d,e);a.effects.removeWrapper(d);c()}})};a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),n=a("body"),
u=f?n.scrollTop():0,n=f?n.scrollLeft():0,w=e.offset(),e={top:w.top-u,left:w.left-n,height:e.innerHeight(),width:e.innerWidth()},w=d.offset(),v=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:w.top-u,left:w.left-n,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(e,b.duration,b.easing,function(){v.remove();c()})}});Flory.Renderable=function(){this.mesh={};this.geometry={};this.material={};this.updateGeometry=!1};
Flory.Renderable.prototype={};Flory.Entity=function(){Flory.Renderable.call(this);this.id=Flory.Entity.entityIDCount++;this.name="";this.data={}};Flory.Entity.prototype=Object.create(Flory.Renderable.prototype);Flory.Entity.entityIDCount=0;Flory.Environment=function(){this.entities=[];this.renderer={};this.data={};this.data.rendererType=Flory.Environment.RendererType.Default;this.visualization=!1};
Flory.Environment.prototype={constuctor:Flory.Environment,add:function(a){if(this.id==a.id)console.log("Flory: Can't add an entity to itself.");else{for(var b=0,c=this.entities.length;b<c;b++)if(this.entities[b].id===a.id){console.log("Flory : Can't add an entity twice to the same enviroment.");return}this.addedEntity(this.entities[this.entities.push(a)-1])}return this},addPair:function(a,b){if(this.id==a.id||this.id==b.id)console.log("Flory: Can't add an entity to itself.");else{for(var c=0,d=this.entities.length;c<
d;c++)if(this.entities[c].id===a.id||this.entities[c].id===b.id){console.log("Flory : Can't add an entity twice to the same enviroment.");return}this.addedEntityPair(this.entities[this.entities.push(a)-1],this.entities[this.entities.push(b)-1])}return this},remove:function(a){for(var b=0,c=this.entities.length;b<c;b++)this.entities[b].id===a.id&&(this.entities.splice(b),this.removedEntity(a,a.id,b));return this},removedEntity:function(a,b,c){},addedEntity:function(){},addedEntityPair:function(){},
update:function(a){},enableVisualization:function(a){this.data.rendererType==Flory.Environment.RendererType.Default||""==this.data.rendererType?this.renderer=new Flory.Renderer:this.data.rendererType==Flory.Environment.RendererType.PointCloud&&(this.renderer=new Flory.PointCloudRenderer);this.visualization=!0;this.setUpVisualization(a);return this},disableVisualization:function(){this.renderer={};var a=this.renderer.renderer.domElement;a.parentElement.removeChild(a);this.visualization=!1;this.disabledVisualization();
return this},setUpVisualization:function(){},disabledVisualization:function(){},resetEnvironment:function(){}};Flory.Environment.RendererType={Default:"default",PointCloud:"pointCloud"};
Flory.Field=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector(a[b][0]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector(a[b].position):void 0!=a[b].position.components&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector(a[b][1]):a[b].vector instanceof Array?this.data[b].vector=new Flory.Vector(a[b].vector):void 0!=a[b].vector.components&&
(this.data[b].vector=a[b].vector.clone())};Flory.Field.prototype=Object.create(Flory.Entity.prototype);Flory.Field.prototype.constructor=Flory.Field;Flory.Field.prototype.getForce=function(a,b){for(var c=Infinity,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field.prototype.combine=function(a){};Flory.Field.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};
Flory.Field.prototype.clone=function(){return new Flory.Field(this.data)};
Flory.Field2D=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector2(a[b][0][0],a[b][0][1]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector2(a[b].position[0],a[b].position[1]):void 0!=a[b].position.x&&void 0!=a[b].position.y&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector2(a[b][1][0],a[b][1][1]):a[b].vector instanceof Array?
this.data[b].vector=new Flory.Vector2(a[b].vector[0],a[b].vector[1]):void 0!=a[b].vector.x&&void 0!=a[b].vector.y&&(this.data[b].vector=a[b].vector.clone())};Flory.Field2D.prototype=Object.create(Flory.Entity.prototype);Flory.Field2D.prototype.constructor=Flory.Field2D;Flory.Field2D.prototype.getForce=function(a,b){for(var c=0,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field2D.prototype.combine=function(a){};
Flory.Field2D.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};Flory.Field2D.prototype.clone=function(){return new Flory.Field2D(this.data)};
Flory.Field3D=function(a){Flory.Entity.call(this);this.data=[];for(var b=0,c=a.length;b<c;b++)this.data[b]={},void 0==a[b].position?this.data[b].position=new Flory.Vector3(a[b][0][0],a[b][0][1],a[b][0][2]):a[b].position instanceof Array?this.data[b].position=new Flory.Vector3(a[b].position[0],a[b].position[1],a[b].position[2]):void 0!=a[b].position.x&&void 0!=a[b].position.y&&void 0!=a[b].position.z&&(this.data[b].position=a[b].position.clone()),void 0==a[b].vector?this.data[b].vector=new Flory.Vector3(a[b][1][0],
a[b][1][1],a[b][1][2]):a[b].vector instanceof Array?this.data[b].vector=new Flory.Vector3(a[b].vector[0],a[b].vector[1],a[b].vector[2]):void 0!=a[b].vector.x&&void 0!=a[b].vector.y&&void 0!=a[b].postiion.z&&(this.data[b].vector=a[b].vector.clone())};Flory.Field3D.prototype=Object.create(Flory.Entity.prototype);Flory.Field3D.prototype.constructor=Flory.Field3D;
Flory.Field3D.prototype.getForce=function(a,b){for(var c=0,d=0,e=0,f=this.data.length;e<f;e++){var g=this.data[e].position.distanceToSq(a);g<=c&&(d=e,c=g)}return this.data[d].vector};Flory.Field3D.prototype.combine=function(a){};Flory.Field3D.prototype.scale=function(a){for(var b=0,c=this.data.length;b<c;b++)this.data[b].vector.scale(a)};Flory.Field3D.prototype.clone=function(){return new Flory.Field3D(this.data)};Flory.DataProcessor=function(){};
Flory.DataProcessor.prototype={constructor:Flory.DataProcessor,mean:function(a){for(var b=0,c=0,d=a.length,c=0;c<d;c++)b+=a[c];return b/d},meanSquare:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c]*a[c];return b/d},meanSquareMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].position.length(),b+=e*e;return b/d},meanSquareMonomerVelocity:function(a){for(var b=0,c=0,d=a.length,e=0;c<d;c++)e=a[c].velocity.length(),b+=e*e;return b/d},meanSquareMonomerAcceleration:function(a){for(var b=
0,c=0,d=a.length,e=0;c<d;c++)e=a[c].acceleration.length(),b+=e*e;return b/d},meanMonomerDisplacement:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].position.length();return b/d},meanMonomerPosition:function(a){for(var b=0,c=a.length,d=new Flory.Vector;b<c;b++)d.add(a[b].position);return d.mult(1/c)},meanMonomerSpeed:function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].velocity.length();return b/d},meanMonomerVelocity:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].velocity);
return b.mult(1/d)},meanMonomerAcceleration:function(a){for(var b=new Flory.Vector,c=0,d=a.length;c<d;c++)b.add(a[c].acceleration);return b.mult(1/d)}};var THREE={REVISION:"68"};"object"===typeof module&&(module.exports=THREE);THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;
THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;
THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;
THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;
THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*
c:.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a};b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=d(c,b,a+1/3);this.g=d(c,b,a);this.b=d(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var l=e-f,f=.5>=h?l/(e+f):l/(2-e-f);switch(e){case b:g=(c-d)/l+(c<d?6:0);break;case c:g=(d-b)/l+2;break;case d:g=(b-c)/l+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;
this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2);"XYZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=
c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===a.order&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],l=b[6],b=b[10],p=c+f+b;0<p?(c=.5/Math.sqrt(p+1),this._w=.25/c,this._x=(l-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(l-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+l)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,l=b._z,p=b._w;this._x=c*p+f*g+d*l-e*h;this._y=d*p+f*h+e*g-c*l;this._z=e*p+f*l+c*h-d*g;this._w=f*p-c*g-d*h-e*l;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(g),l=Math.sqrt(1-g*g);if(.001>Math.abs(l))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;g=Math.sin((1-b)*h)/l;h=Math.sin(b*h)/l;this._w=f*g+this._w*h;this._x=c*g+
this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,
this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},
subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,
b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=
a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,
c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=
(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,l=a*c+g*b-e*d,p=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+l*-g-p*-f;this.y=l*a+b*-f+p*-e-h*-g;this.z=p*a+b*-g+h*-f-l*-e;return this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;
this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=
b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=
e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;this.z=c*g-d*f;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===
a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=
a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=
this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},
setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],l=a[9];c=a[2];b=a[6];var p=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>Math.abs(l-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(l+b)&&.1>Math.abs(e+h+p-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;p=(p+1)/2;d=(d+g)/4;f=(f+c)/4;l=(l+b)/4;e>h&&e>p?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>p?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),
b=d/c,d=l/c):.01>p?(c=b=.707106781,d=0):(d=Math.sqrt(p),b=f/d,c=l/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-l)*(b-l)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-l)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+p-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);
return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);
return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,
this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},copy:function(a){this._x=
a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b){var c=THREE.Math.clamp,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[1],l=d[5],p=d[9],r=d[2],n=d[6],d=d[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-p,d),this._z=Math.atan2(-f,e)):(this._x=Math.atan2(n,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(g,d),this._z=Math.atan2(h,l)):(this._y=
Math.atan2(-r,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(-r,d),this._z=Math.atan2(-f,l)):(this._y=0,this._z=Math.atan2(h,e))):"ZYX"===b?(this._y=Math.asin(-c(r,-1,1)),.99999>Math.abs(r)?(this._x=Math.atan2(n,d),this._z=Math.atan2(h,e)):(this._x=0,this._z=Math.atan2(-f,l))):"YZX"===b?(this._z=Math.asin(c(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-p,l),this._y=Math.atan2(-r,e)):(this._x=0,this._y=Math.atan2(g,d))):"XZY"===b?(this._z=Math.asin(-c(f,
-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(n,l),this._y=Math.atan2(g,e)):(this._x=Math.atan2(-p,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;this.onChangeCallback();return this},setFromQuaternion:function(a,b,c){var d=THREE.Math.clamp,e=a.x*a.x,f=a.y*a.y,g=a.z*a.z,h=a.w*a.w;b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),h-e-f+g),this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w),-1,1)),this._z=Math.atan2(2*(a.z*a.w-a.x*
a.y),h+e-f-g)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h-e-f+g),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h-e+f-g)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),h-e-f+g),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h-e+f-g)):"ZYX"===b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),h-e-f+g),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z),-1,1)),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h+e-f-g)):"YZX"===b?(this._x=Math.atan2(2*
(a.x*a.w-a.z*a.y),h-e+f-g),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),h+e-f-g),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w),-1,1))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),h-e+f-g),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h+e-f-g),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y),-1,1))):console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);
this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};
THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var e=b.geometry.vertices,f=0,g=e.length;f<g;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},
center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<
this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<
this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);
this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);
a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};
THREE.Matrix3=function(a,b,c,d,e,f,g,h,l){var p=this.elements=new Float32Array(9);p[0]=void 0!==a?a:1;p[3]=b||0;p[6]=c||0;p[1]=d||0;p[4]=void 0!==e?e:1;p[7]=f||0;p[2]=g||0;p[5]=h||0;p[8]=void 0!==l?l:1};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,h,l){var p=this.elements;p[0]=a;p[3]=b;p[6]=c;p[1]=d;p[4]=e;p[7]=f;p[2]=g;p[5]=h;p[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=
a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],l=a[7],a=a[8];return b*f*a-b*g*l-c*e*a+c*g*h+d*e*l-d*f*h},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];
c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],
a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,d,e,f,g,h,l,p,r,n,u,w,v,x){var z=this.elements=new Float32Array(16);z[0]=void 0!==a?a:1;z[4]=b||0;z[8]=c||0;z[12]=d||0;z[1]=e||0;z[5]=void 0!==f?f:1;z[9]=g||0;z[13]=h||0;z[2]=l||0;z[6]=p||0;z[10]=void 0!==r?r:1;z[14]=n||0;z[3]=u||0;z[7]=w||0;z[11]=v||0;z[15]=void 0!==x?x:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,l,p,r,n,u,w,v,x){var z=this.elements;z[0]=a;z[4]=b;z[8]=c;z[12]=d;z[1]=e;z[5]=f;z[9]=g;z[13]=h;z[2]=l;z[6]=p;z[10]=r;z[14]=n;z[3]=u;z[7]=w;z[11]=v;z[15]=x;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMatrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&
console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*h;var l=f*e,p=c*h,r=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+p*d;b[5]=a-r*d;b[9]=-c*g;b[2]=r-a*d;b[6]=p+l*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,l=g*e,p=d*h,r=d*e,b[0]=a+r*c,b[4]=p*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-p,b[6]=r+a*c,
b[10]=f*g):"ZXY"===a.order?(a=g*h,l=g*e,p=d*h,r=d*e,b[0]=a-r*c,b[4]=-f*e,b[8]=p+l*c,b[1]=l+p*c,b[5]=f*h,b[9]=r-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,l=f*e,p=c*h,r=c*e,b[0]=g*h,b[4]=p*d-l,b[8]=a*d+r,b[1]=g*e,b[5]=r*d+a,b[9]=l*d-p,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,l=f*d,p=c*g,r=c*d,b[0]=g*h,b[4]=r-a*e,b[8]=p*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+p,b[10]=a-r*e):"XZY"===a.order&&(a=f*g,l=f*d,p=c*g,r=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+r,b[5]=f*h,b[9]=l*
e-p,b[2]=p*e-l,b[6]=c*h,b[10]=r*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,l=e+e;a=c*g;var p=c*h,c=c*l,r=d*h,d=d*l,e=e*l,g=f*g,h=f*h,f=f*l;b[0]=1-(r+e);b[4]=p-f;b[8]=c+h;b[1]=p+f;b[5]=1-
(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+r);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var g=this.elements;c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],l=c[12],p=c[1],r=c[5],n=c[9],u=c[13],w=c[2],v=c[6],x=c[10],z=c[14],y=c[3],A=c[7],C=c[11],c=c[15],B=d[0],E=d[4],F=d[8],I=d[12],D=d[1],G=d[5],P=d[9],L=d[13],ea=d[2],M=d[6],R=d[10],W=d[14],Q=d[3],
J=d[7],H=d[11],d=d[15];e[0]=f*B+g*D+h*ea+l*Q;e[4]=f*E+g*G+h*M+l*J;e[8]=f*F+g*P+h*R+l*H;e[12]=f*I+g*L+h*W+l*d;e[1]=p*B+r*D+n*ea+u*Q;e[5]=p*E+r*G+n*M+u*J;e[9]=p*F+r*P+n*R+u*H;e[13]=p*I+r*L+n*W+u*d;e[2]=w*B+v*D+x*ea+z*Q;e[6]=w*E+v*G+x*M+z*J;e[10]=w*F+v*P+x*R+z*H;e[14]=w*I+v*L+x*W+z*d;e[3]=y*B+A*D+C*ea+c*Q;e[7]=y*E+A*G+C*M+c*J;e[11]=y*F+A*P+C*R+c*H;e[15]=y*I+A*L+C*W+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];
c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=
b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=
a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],l=a[13],p=a[2],r=a[6],n=a[10],u=a[14];return a[3]*(+e*h*r-d*l*r-e*g*n+c*l*n+d*g*u-c*h*u)+a[7]*(+b*h*u-b*l*n+e*f*n-d*f*u+d*l*p-e*h*p)+a[11]*(+b*l*r-b*g*u-e*f*r+c*f*u+e*g*p-c*l*p)+a[15]*(-d*g*p-b*h*r+b*g*n+d*f*r-c*f*n+c*h*p)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,
b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=
this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],l=d[1],p=d[5],r=d[9],n=d[13],u=d[2],w=d[6],v=d[10],x=d[14],z=d[3],y=d[7],A=d[11],d=d[15];c[0]=r*x*y-n*v*y+n*w*A-p*x*A-r*w*d+p*v*d;c[4]=h*v*y-g*x*y-h*w*A+f*x*A+g*w*d-f*v*d;c[8]=g*n*y-h*r*y+h*p*A-f*n*A-g*p*d+f*r*d;c[12]=h*r*w-g*n*w-h*p*v+f*n*v+g*p*x-f*r*x;c[1]=n*v*z-r*x*z-n*u*A+l*x*A+r*u*d-l*v*d;c[5]=g*x*z-h*v*z+h*u*A-e*x*A-g*u*d+e*v*d;c[9]=h*r*z-g*n*z-h*l*
A+e*n*A+g*l*d-e*r*d;c[13]=g*n*u-h*r*u+h*l*v-e*n*v-g*l*x+e*r*x;c[2]=p*x*z-n*w*z+n*u*y-l*x*y-p*u*d+l*w*d;c[6]=h*w*z-f*x*z-h*u*y+e*x*y+f*u*d-e*w*d;c[10]=f*n*z-h*p*z+h*l*y-e*n*y-f*l*d+e*p*d;c[14]=h*p*u-f*n*u-h*l*w+e*n*w+f*l*x-e*p*x;c[3]=r*w*z-p*v*z-r*u*y+l*v*y+p*u*A-l*w*A;c[7]=f*v*z-g*w*z+g*u*y-e*v*y-f*u*A+e*w*A;c[11]=g*p*z-f*r*z-g*l*y+e*r*y+f*l*A-e*p*A;c[15]=f*r*u-g*p*u+g*l*w-e*r*w-f*l*v+e*p*v;c=e*c[0]+l*c[4]+u*c[8]+z*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,l=e*f,p=e*g;this.set(l*f+c,l*g-d*h,l*h+d*g,0,l*g+d*h,p*g+c,p*h-d*f,0,l*h-d*g,p*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),l=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,p=1/l;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=p;b.elements[9]*=p;b.elements[10]*=p;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=l;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));
var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=b-a,l=c-d,p=f-e;g[0]=2/h;g[4]=0;g[8]=0;g[12]=-((b+a)/h);g[1]=0;g[5]=2/l;g[9]=0;g[13]=-((c+d)/l);g[2]=0;g[6]=0;g[10]=-2/p;g[14]=-((f+e)/p);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=
this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,d){var e=a.clone().add(b).multiplyScalar(.5),f=b.clone().sub(a).normalize(),g=.5*a.distanceTo(b),h=
this.origin.clone().sub(e);a=-this.direction.dot(f);b=h.dot(this.direction);var l=-h.dot(f),p=h.lengthSq(),r=Math.abs(1-a*a),n,u;0<=r?(h=a*l-b,n=a*b-l,u=g*r,0<=h?n>=-u?n<=u?(g=1/r,h*=g,n*=g,a=h*(h+a*n+2*b)+n*(a*h+n+2*l)+p):(n=g,h=Math.max(0,-(a*n+b)),a=-h*h+n*(n+2*l)+p):(n=-g,h=Math.max(0,-(a*n+b)),a=-h*h+n*(n+2*l)+p):n<=-u?(h=Math.max(0,-(-a*g+b)),n=0<h?-g:Math.min(Math.max(-g,-l),g),a=-h*h+n*(n+2*l)+p):n<=u?(h=0,n=Math.min(Math.max(-g,-l),g),a=n*(n+2*l)+p):(h=Math.max(0,-(a*g+b)),n=0<h?g:Math.min(Math.max(-g,
-l),g),a=-h*h+n*(n+2*l)+p)):(n=0<a?-g:g,h=Math.max(0,-(a*n+b)),a=-h*h+n*(n+2*l)+p);c&&c.copy(this.direction.clone().multiplyScalar(h).add(this.origin));d&&d.copy(f.clone().multiplyScalar(n).add(e));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;
d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;
return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==
c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h,l){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;
e=-h*a.dot(d);return 0>e?null:this.at(e/f,l)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],l=c[6],p=c[7],r=c[8],n=c[9],u=c[10],w=c[11],v=c[12],x=c[13],z=c[14],c=c[15];b[0].setComponents(f-a,p-g,w-r,c-v).normalize();b[1].setComponents(f+
a,p+g,w+r,c+v).normalize();b[2].setComponents(f+d,p+h,w+n,c+x).normalize();b[3].setComponents(f-d,p-h,w-n,c-x).normalize();b[4].setComponents(f-e,p-l,w-u,c-z).normalize();b[5].setComponents(f+e,p+l,w+u,c+z).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f){if(0==this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),f=a.copy(this.normal).applyMatrix3(f),g=this.coplanarPoint(b);g.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,g);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*
a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,g,h,l,p,r,n,u;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:f+
2;p=this.points[c[0]];r=this.points[c[1]];n=this.points[c[2]];u=this.points[c[3]];h=g*g;l=g*h;d.x=b(p.x,r.x,n.x,u.x,g,h,l);d.y=b(p.y,r.y,n.y,u.y,g,h,l);d.z=b(p.z,r.z,n.z,u.z,g,h,l);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],l=0;h[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),g.copy(d),l+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=e&&(h[b]=l,e=b);h[h.length]=l;return{chunks:h,total:l}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],l=new THREE.Vector3,n=this.getLength();h.push(l.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=n.chunks[b]-n.chunks[b-1];g=Math.ceil(a*c/n.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),h.push(l.copy(d).clone());
h.push(l.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var l=b.dot(b);g=b.dot(c);var p=d*l-e*e;h=h||new THREE.Vector3;if(0==p)return h.set(-2,-1,-1);p=1/p;l=(l*f-e*g)*p;d=(d*g-e*f)*p;return h.set(1-l-d,d,l)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;e<d;e++)c[e]=b[e];for(e=0;e<d;e++)c[e].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,f,g){this.ray=new a.Ray(b,c);this.near=f||0;this.far=g||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,f,g){a.raycast(b,f);if(!0===g){a=a.children;g=0;for(var h=a.length;g<h;g++)c(a[g],b,f,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,precision:1E-4,linePrecision:1,set:function(a,b){this.ray.set(a,b)},intersectObject:function(a,e){var f=[];c(a,this,f,e);
f.sort(b);return f},intersectObjects:function(a,e){for(var f=[],g=0,h=a.length;g<h;g++)c(a[g],this,f,e);f.sort(b);return f}}})(THREE);
THREE.Object3D=function(){this.id=Flory.Entity.entityIDCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.parent=void 0;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,
value:c},scale:{enumerable:!0,value:d}});this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,
c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));
return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,
b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add:",
a,"can't be added as a child of itself."),this;if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children.push(a);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}else console.error("THREE.Object3D.add:",a,"is not an instance of THREE.Object3D.");return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);
if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},raycast:function(){},traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverseVisible(a)}},getObjectById:function(a,b){for(var c=0,d=this.children.length;c<
d;c++){var e=this.children[c];if(e.id===a||!0===b&&(e=e.getObjectById(a,b),void 0!==e))return e}},getObjectByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getObjectByName(a,b),void 0!==e))return e}},getChildByName:function(a,b){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,b)},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);
this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D);void 0===b&&(b=!0);a.name=this.name;a.up.copy(this.up);
a.position.copy(this.position);a.quaternion.copy(this.quaternion);a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));if(!0===
b)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(n===w){var a=new THREE.RenderableVertex;u.push(a);w++;n++;return a}return u[n++]}function b(){if(x===y){var a=new THREE.RenderableFace;z.push(a);y++;x++;return a}return z[x++]}function c(){if(C===E){var a=new THREE.RenderableLine;B.push(a);E++;C++;return a}return B[C++]}function d(){if(I===G){var a=new THREE.RenderableSprite;D.push(a);G++;I++;return a}return D[I++]}function e(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function f(a,b){var c=0,d=
1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=h)return!0;if(0>e&&0>f||0>g&&0>h)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var g,h,l=[],p=0,r,n,u=[],w=0,v,x,z=[],y=0,A,C,B=[],E=0,F,I,D=[],G=0,P={objects:[],lights:[],elements:[]},L=new THREE.Vector3,ea=new THREE.Vector3,M=new THREE.Vector3,R=new THREE.Vector3,W=new THREE.Vector4,Q=new THREE.Box3(new THREE.Vector3(-1,
-1,-1),new THREE.Vector3(1,1,1)),J=new THREE.Box3,H=Array(3),Z=new THREE.Matrix4,X=new THREE.Matrix4,aa,ha=new THREE.Matrix4,T=new THREE.Matrix3,K=new THREE.Frustum,wa=new THREE.Vector4,V=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);X.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(X)};this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,c){a.getInverse(c.projectionMatrix);X.multiplyMatrices(c.matrixWorld,
a);return b.applyProjection(X)}}();this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,c)};var U=new function(){var d=[],e=[],f=null,g=null,h=new THREE.Matrix3,l=function(a){var b=a.positionWorld,c=a.positionScreen;b.copy(a.position).applyMatrix4(aa);c.copy(b).applyMatrix4(X);b=1/c.w;c.x*=b;c.y*=b;c.z*=b;a.visible=-1<=c.x&&1>=c.x&&-1<=c.y&&1>=c.y&&-1<=c.z&&1>=c.z},n=function(a,
b,c){if(!0===a.visible||!0===b.visible||!0===c.visible)return!0;H[0]=a.positionScreen;H[1]=b.positionScreen;H[2]=c.positionScreen;return Q.isIntersectionBox(J.setFromPoints(H))},p=function(a,b,c){return 0>(c.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){f=a;g=f.material;h.getNormalMatrix(f.matrixWorld);d.length=0;e.length=0},projectVertex:l,checkTriangleVisibility:n,
checkBackfaceCulling:p,pushVertex:function(b,c,d){r=a();r.position.set(b,c,d);l(r)},pushNormal:function(a,b,c){d.push(a,b,c)},pushUv:function(a,b){e.push(a,b)},pushLine:function(a,b){var d=u[a],e=u[b];A=c();A.id=f.id;A.v1.copy(d);A.v2.copy(e);A.z=(d.positionScreen.z+e.positionScreen.z)/2;A.material=f.material;P.elements.push(A)},pushTriangle:function(a,c,l){var r=u[a],w=u[c],x=u[l];if(!1!==n(r,w,x)&&(g.side===THREE.DoubleSide||!0===p(r,w,x))){v=b();v.id=f.id;v.v1.copy(r);v.v2.copy(w);v.v3.copy(x);
v.z=(r.positionScreen.z+w.positionScreen.z+x.positionScreen.z)/3;for(r=0;3>r;r++)w=3*arguments[r],x=v.vertexNormalsModel[r],x.set(d[w],d[w+1],d[w+2]),x.applyMatrix3(h).normalize(),w=2*arguments[r],v.uvs[r].set(e[w],e[w+1]);v.vertexNormalsLength=3;v.material=f.material;P.elements.push(v)}}}};this.projectScene=function(r,w,y,z){I=C=x=0;P.elements.length=0;!0===r.autoUpdate&&r.updateMatrixWorld();void 0===w.parent&&w.updateMatrixWorld();Z.copy(w.matrixWorldInverse.getInverse(w.matrixWorld));X.multiplyMatrices(w.projectionMatrix,
Z);K.setFromMatrix(X);h=0;P.objects.length=0;P.lights.length=0;r.traverseVisible(function(a){if(a instanceof THREE.Light)P.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Sprite)if(!1===a.frustumCulled||!0===K.intersectsObject(a)){if(h===p){var b=new THREE.RenderableObject;l.push(b);p++;h++;g=b}else g=l[h++];g.id=a.id;g.object=a;null!==a.renderDepth?g.z=a.renderDepth:(R.setFromMatrixPosition(a.matrixWorld),R.applyProjection(X),g.z=R.z);P.objects.push(g)}});
!0===y&&P.objects.sort(e);r=0;for(y=P.objects.length;r<y;r++){var s=P.objects[r].object,B=s.geometry;U.setObject(s);aa=s.matrixWorld;n=0;if(s instanceof THREE.Mesh)if(B instanceof THREE.BufferGeometry){var E=B.attributes,s=B.offsets;if(void 0!==E.position){for(var D=E.position.array,B=0,G=D.length;B<G;B+=3)U.pushVertex(D[B],D[B+1],D[B+2]);if(void 0!==E.normal)for(var H=E.normal.array,B=0,G=H.length;B<G;B+=3)U.pushNormal(H[B],H[B+1],H[B+2]);if(void 0!==E.uv)for(H=E.uv.array,B=0,G=H.length;B<G;B+=2)U.pushUv(H[B],
H[B+1]);if(void 0!==E.index)if(E=E.index.array,0<s.length)for(r=0;r<s.length;r++)for(G=s[r],D=G.index,B=G.start,G=G.start+G.count;B<G;B+=3)U.pushTriangle(E[B]+D,E[B+1]+D,E[B+2]+D);else for(B=0,G=E.length;B<G;B+=3)U.pushTriangle(E[B],E[B+1],E[B+2]);else for(B=0,G=D.length/3;B<G;B+=3)U.pushTriangle(B,B+1,B+2)}}else{if(B instanceof THREE.Geometry){var J=B.vertices,G=B.faces,E=B.faceVertexUvs[0];T.getNormalMatrix(aa);for(var D=s.material instanceof THREE.MeshFaceMaterial,H=!0===D?s.material:null,Q=0,
ma=J.length;Q<ma;Q++){var ta=J[Q];U.pushVertex(ta.x,ta.y,ta.z)}J=0;for(Q=G.length;J<Q;J++){var ma=G[J],za=!0===D?H.materials[ma.materialIndex]:s.material;if(void 0!==za){var Ja=za.side,ta=u[ma.a],Ga=u[ma.b],va=u[ma.c];if(!0===za.morphTargets){var Aa=B.morphTargets,Oa=s.morphTargetInfluences,ba=ta.position,Y=Ga.position,qa=va.position;L.set(0,0,0);ea.set(0,0,0);M.set(0,0,0);for(var Za=0,gb=Aa.length;Za<gb;Za++){var Ka=Oa[Za];if(0!==Ka){var oa=Aa[Za].vertices;L.x+=(oa[ma.a].x-ba.x)*Ka;L.y+=(oa[ma.a].y-
ba.y)*Ka;L.z+=(oa[ma.a].z-ba.z)*Ka;ea.x+=(oa[ma.b].x-Y.x)*Ka;ea.y+=(oa[ma.b].y-Y.y)*Ka;ea.z+=(oa[ma.b].z-Y.z)*Ka;M.x+=(oa[ma.c].x-qa.x)*Ka;M.y+=(oa[ma.c].y-qa.y)*Ka;M.z+=(oa[ma.c].z-qa.z)*Ka}}ta.position.add(L);Ga.position.add(ea);va.position.add(M);U.projectVertex(ta);U.projectVertex(Ga);U.projectVertex(va)}if(!1!==U.checkTriangleVisibility(ta,Ga,va)){Aa=U.checkBackfaceCulling(ta,Ga,va);if(Ja!==THREE.DoubleSide){if(Ja===THREE.FrontSide&&!1===Aa)continue;if(Ja===THREE.BackSide&&!0===Aa)continue}v=
b();v.id=s.id;v.v1.copy(ta);v.v2.copy(Ga);v.v3.copy(va);v.normalModel.copy(ma.normal);!1!==Aa||Ja!==THREE.BackSide&&Ja!==THREE.DoubleSide||v.normalModel.negate();v.normalModel.applyMatrix3(T).normalize();Oa=ma.vertexNormals;ba=0;for(Y=Math.min(Oa.length,3);ba<Y;ba++)qa=v.vertexNormalsModel[ba],qa.copy(Oa[ba]),!1!==Aa||Ja!==THREE.BackSide&&Ja!==THREE.DoubleSide||qa.negate(),qa.applyMatrix3(T).normalize();v.vertexNormalsLength=Oa.length;Ja=E[J];if(void 0!==Ja)for(Aa=0;3>Aa;Aa++)v.uvs[Aa].copy(Ja[Aa]);
v.color=ma.color;v.material=za;v.z=(ta.positionScreen.z+Ga.positionScreen.z+va.positionScreen.z)/3;P.elements.push(v)}}}}}else if(s instanceof THREE.Line)if(B instanceof THREE.BufferGeometry){if(E=B.attributes,void 0!==E.position){D=E.position.array;B=0;for(G=D.length;B<G;B+=3)U.pushVertex(D[B],D[B+1],D[B+2]);if(void 0!==E.index)for(E=E.index.array,B=0,G=E.length;B<G;B+=2)U.pushLine(E[B],E[B+1]);else for(E=s.type===THREE.LinePieces?2:1,B=0,G=D.length/3-1;B<G;B+=E)U.pushLine(B,B+1)}}else{if(B instanceof
THREE.Geometry&&(ha.multiplyMatrices(X,aa),J=s.geometry.vertices,0!==J.length))for(ta=a(),ta.positionScreen.copy(J[0]).applyMatrix4(ha),E=s.type===THREE.LinePieces?2:1,Q=1,ma=J.length;Q<ma;Q++)ta=a(),ta.positionScreen.copy(J[Q]).applyMatrix4(ha),0<(Q+1)%E||(Ga=u[n-2],wa.copy(ta.positionScreen),V.copy(Ga.positionScreen),!0===f(wa,V)&&(wa.multiplyScalar(1/wa.w),V.multiplyScalar(1/V.w),A=c(),A.id=s.id,A.v1.positionScreen.copy(wa),A.v2.positionScreen.copy(V),A.z=Math.max(wa.z,V.z),A.material=s.material,
s.material.vertexColors===THREE.VertexColors&&(A.vertexColors[0].copy(s.geometry.colors[Q]),A.vertexColors[1].copy(s.geometry.colors[Q-1])),P.elements.push(A)))}else s instanceof THREE.Sprite&&(W.set(aa.elements[12],aa.elements[13],aa.elements[14],1),W.applyMatrix4(X),B=1/W.w,W.z*=B,-1<=W.z&&1>=W.z&&(F=d(),F.id=s.id,F.x=W.x*B,F.y=W.y*B,F.z=W.z,F.object=s,F.rotation=s.rotation,F.scale.x=s.scale.x*Math.abs(F.x-(W.x+w.projectionMatrix.elements[0])/(W.w+w.projectionMatrix.elements[12])),F.scale.y=s.scale.y*
Math.abs(F.y-(W.y+w.projectionMatrix.elements[5])/(W.w+w.projectionMatrix.elements[13])),F.material=s.material,P.elements.push(F)))}!0===z&&P.elements.sort(e);return P}};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.materialIndex=this.materialIndex;for(var b=0,c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}};
THREE.Face4=function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,g)};THREE.BufferAttribute=function(a,b){this.array=a;this.itemSize=b};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(a){this.array.set(a);return this},setX:function(a,b){this.array[a*this.itemSize]=b;return this},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a]=b;this.array[a+1]=
c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this}};THREE.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};THREE.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(a,b)};
THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.attributes={};this.offsets=this.drawcalls=[];this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:c}):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),
b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0)},fromGeometry:function(a,b){b=b||{vertexColors:THREE.NoColors};var c=a.vertices,d=a.faces,e=a.faceVertexUvs,f=b.vertexColors,g=0<e[0].length,h=3==d[0].vertexNormals.length,l=new Float32Array(9*d.length);this.addAttribute("position",new THREE.BufferAttribute(l,3));var p=new Float32Array(9*d.length);this.addAttribute("normal",new THREE.BufferAttribute(p,3));if(f!==
THREE.NoColors){var r=new Float32Array(9*d.length);this.addAttribute("color",new THREE.BufferAttribute(r,3))}if(!0===g){var n=new Float32Array(6*d.length);this.addAttribute("uvs",new THREE.BufferAttribute(n,2))}for(var u=0,w=0,v=0;u<d.length;u++,w+=6,v+=9){var x=d[u],z=c[x.a],y=c[x.b],A=c[x.c];l[v]=z.x;l[v+1]=z.y;l[v+2]=z.z;l[v+3]=y.x;l[v+4]=y.y;l[v+5]=y.z;l[v+6]=A.x;l[v+7]=A.y;l[v+8]=A.z;!0===h?(z=x.vertexNormals[0],y=x.vertexNormals[1],A=x.vertexNormals[2],p[v]=z.x,p[v+1]=z.y,p[v+2]=z.z,p[v+3]=
y.x,p[v+4]=y.y,p[v+5]=y.z,p[v+6]=A.x,p[v+7]=A.y,p[v+8]=A.z):(z=x.normal,p[v]=z.x,p[v+1]=z.y,p[v+2]=z.z,p[v+3]=z.x,p[v+4]=z.y,p[v+5]=z.z,p[v+6]=z.x,p[v+7]=z.y,p[v+8]=z.z);f===THREE.FaceColors?(x=x.color,r[v]=x.r,r[v+1]=x.g,r[v+2]=x.b,r[v+3]=x.r,r[v+4]=x.g,r[v+5]=x.b,r[v+6]=x.r,r[v+7]=x.g,r[v+8]=x.b):f===THREE.VertexColors&&(z=x.vertexColors[0],y=x.vertexColors[1],x=x.vertexColors[2],r[v]=z.r,r[v+1]=z.g,r[v+2]=z.b,r[v+3]=y.r,r[v+4]=y.g,r[v+5]=y.b,r[v+6]=x.r,r[v+7]=x.g,r[v+8]=x.b);!0===g&&(x=e[0][u][0],
z=e[0][u][1],y=e[0][u][2],n[w]=x.x,n[w+1]=x.y,n[w+2]=z.x,n[w+3]=z.y,n[w+4]=y.x,n[w+5]=y.y)}this.computeBoundingSphere();return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,d=a.length;c<d;c+=3){var e=a[c],f=a[c+1],g=a[c+2];e<b.min.x?b.min.x=e:e>b.max.x&&(b.max.x=e);f<b.min.y?b.min.y=f:f>b.max.y&&
(b.max.y=f);g<b.min.z?b.min.z=g:g>b.max.z&&(b.max.z=g)}}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&
(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),a.expandByPoint(b);a.center(d);for(var g=0,e=0,f=c.length;e<f;e+=3)b.set(c[e],c[e+1],c[e+2]),g=Math.max(g,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),
computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d;a=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var e=this.attributes.position.array,f=this.attributes.normal.array,g,h,l,p,r,n,u=new THREE.Vector3,w=new THREE.Vector3,v=new THREE.Vector3,x=new THREE.Vector3,z=new THREE.Vector3;
if(this.attributes.index){var y=this.attributes.index.array,A=0<this.offsets.length?this.offsets:[{start:0,count:y.length,index:0}];c=0;for(d=A.length;c<d;++c){b=A[c].start;g=A[c].count;var C=A[c].index;a=b;for(b+=g;a<b;a+=3)g=C+y[a],h=C+y[a+1],l=C+y[a+2],p=e[3*g],r=e[3*g+1],n=e[3*g+2],u.set(p,r,n),p=e[3*h],r=e[3*h+1],n=e[3*h+2],w.set(p,r,n),p=e[3*l],r=e[3*l+1],n=e[3*l+2],v.set(p,r,n),x.subVectors(v,w),z.subVectors(u,w),x.cross(z),f[3*g]+=x.x,f[3*g+1]+=x.y,f[3*g+2]+=x.z,f[3*h]+=x.x,f[3*h+1]+=x.y,
f[3*h+2]+=x.z,f[3*l]+=x.x,f[3*l+1]+=x.y,f[3*l+2]+=x.z}}else for(a=0,b=e.length;a<b;a+=9)p=e[a],r=e[a+1],n=e[a+2],u.set(p,r,n),p=e[a+3],r=e[a+4],n=e[a+5],w.set(p,r,n),p=e[a+6],r=e[a+7],n=e[a+8],v.set(p,r,n),x.subVectors(v,w),z.subVectors(u,w),x.cross(z),f[a]=x.x,f[a+1]=x.y,f[a+2]=x.z,f[a+3]=x.x,f[a+4]=x.y,f[a+5]=x.z,f[a+6]=x.x,f[a+7]=x.y,f[a+8]=x.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},computeTangents:function(){function a(a,b,c){n=d[3*a];u=d[3*a+1];w=d[3*a+2];v=d[3*b];x=d[3*b+1];z=d[3*
b+2];y=d[3*c];A=d[3*c+1];C=d[3*c+2];B=f[2*a];E=f[2*a+1];F=f[2*b];I=f[2*b+1];D=f[2*c];G=f[2*c+1];P=v-n;L=y-n;ea=x-u;M=A-u;R=z-w;W=C-w;Q=F-B;J=D-B;H=I-E;Z=G-E;X=1/(Q*Z-J*H);aa.set((Z*P-H*L)*X,(Z*ea-H*M)*X,(Z*R-H*W)*X);ha.set((Q*L-J*P)*X,(Q*M-J*ea)*X,(Q*W-J*R)*X);l[a].add(aa);l[b].add(aa);l[c].add(aa);p[a].add(ha);p[b].add(ha);p[c].add(ha)}function b(a){s.x=e[3*a];s.y=e[3*a+1];s.z=e[3*a+2];Ra.copy(s);N=l[a];ja.copy(N);ja.sub(s.multiplyScalar(s.dot(N))).normalize();ca.crossVectors(Ra,N);xa=ca.dot(p[a]);
Va=0>xa?-1:1;h[4*a]=ja.x;h[4*a+1]=ja.y;h[4*a+2]=ja.z;h[4*a+3]=Va}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,d=this.attributes.position.array,e=this.attributes.normal.array,f=this.attributes.uv.array,g=d.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent=
{itemSize:4,array:new Float32Array(4*g)});for(var h=this.attributes.tangent.array,l=[],p=[],r=0;r<g;r++)l[r]=new THREE.Vector3,p[r]=new THREE.Vector3;var n,u,w,v,x,z,y,A,C,B,E,F,I,D,G,P,L,ea,M,R,W,Q,J,H,Z,X,aa=new THREE.Vector3,ha=new THREE.Vector3,T,K,wa,V,U,sa=this.offsets,r=0;for(K=sa.length;r<K;++r){T=sa[r].start;wa=sa[r].count;var na=sa[r].index,g=T;for(T+=wa;g<T;g+=3)wa=na+c[g],V=na+c[g+1],U=na+c[g+2],a(wa,V,U)}var ja=new THREE.Vector3,ca=new THREE.Vector3,s=new THREE.Vector3,Ra=new THREE.Vector3,
Va,N,xa,r=0;for(K=sa.length;r<K;++r)for(T=sa[r].start,wa=sa[r].count,na=sa[r].index,g=T,T+=wa;g<T;g+=3)wa=na+c[g],V=na+c[g+1],U=na+c[g+2],b(wa),b(V),b(U)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);Date.now();a=this.attributes.index.array;for(var c=this.attributes.position.array,d=a.length/3,e=new Uint16Array(a.length),f=0,g=0,h=[{start:0,count:0,index:0}],l=h[0],p=0,r=0,n=new Int32Array(6),u=new Int32Array(c.length),w=new Int32Array(c.length),v=0;v<c.length;v++)u[v]=-1,w[v]=-1;for(c=
0;c<d;c++){for(var x=r=0;3>x;x++)v=a[3*c+x],-1==u[v]?(n[2*x]=v,n[2*x+1]=-1,r++):u[v]<l.index?(n[2*x]=v,n[2*x+1]=-1,p++):(n[2*x]=v,n[2*x+1]=u[v]);if(g+r>l.index+b)for(l={start:f,count:0,index:g},h.push(l),r=0;6>r;r+=2)x=n[r+1],-1<x&&x<l.index&&(n[r+1]=-1);for(r=0;6>r;r+=2)v=n[r],x=n[r+1],-1===x&&(x=g++),u[v]=x,w[x]=v,e[f++]=x-l.index,l.count++}this.reorderBuffers(e,w,g);return this.offsets=h},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var a=this.attributes.normal.array,
b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},reorderBuffers:function(a,b,c){var d={},e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f;for(f in this.attributes)if("index"!=f)for(var g=this.attributes[f].array,h=0,l=e.length;h<l;h++){var p=e[h];if(g instanceof p){d[f]=new p(this.attributes[f].itemSize*c);break}}for(e=0;e<c;e++)for(f in g=b[e],this.attributes)if("index"!=
f)for(var h=this.attributes[f].array,l=this.attributes[f].itemSize,p=d[f],r=0;r<l;r++)p[e*l+r]=h[g*l+r];this.attributes.index.array=a;for(f in this.attributes)"index"!=f&&(this.attributes[f].array=d[f],this.attributes[f].numItems=this.attributes[f].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,
array:null},d=0,g=b.length;d<g;d++){var h=b[d];if(e instanceof h){f.array=new h(e);break}}a.attributes[c]=f}d=0;for(g=this.offsets.length;d<g;d++)b=this.offsets[d],a.offsets.push({start:b.start,index:b.index,count:b.count});return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.groupsNeedUpdate=this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=
this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},
center:function(){this.computeBoundingBox();var a=new THREE.Vector3;a.addVectors(this.boundingBox.min,this.boundingBox.max);a.multiplyScalar(-.5);this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x,a.y,a.z));this.computeBoundingBox();return a},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},
computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new THREE.Vector3;if(a){var e,f,g,h=new THREE.Vector3,l=new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),l.subVectors(e,f),h.cross(l),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],
d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.vertexNormals[0]=d[c.a].clone(),c.vertexNormals[1]=d[c.b].clone(),c.vertexNormals[2]=d[c.c].clone()},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||
(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,h,l;c=
0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,l={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),g.push(l)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=g.faceNormals[c],l=g.vertexNormals[c],h.copy(e.normal),l.a.copy(e.vertexNormals[0]),l.b.copy(e.vertexNormals[1]),l.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=
e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,f,g,h,l,p,r,n,u,w,v,x,z,y=[],A=[];c=new THREE.Vector3;var C=new THREE.Vector3,B=new THREE.Vector3,E=new THREE.Vector3,F=new THREE.Vector3;a=0;for(b=this.vertices.length;a<b;a++)y[a]=new THREE.Vector3,A[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],f=this.faceVertexUvs[0][a],d=e.a,z=e.b,e=e.c,g=this.vertices[d],h=this.vertices[z],l=this.vertices[e],p=f[0],r=f[1],n=f[2],
f=h.x-g.x,u=l.x-g.x,w=h.y-g.y,v=l.y-g.y,h=h.z-g.z,g=l.z-g.z,l=r.x-p.x,x=n.x-p.x,r=r.y-p.y,p=n.y-p.y,n=1/(l*p-x*r),c.set((p*f-r*u)*n,(p*w-r*v)*n,(p*h-r*g)*n),C.set((l*u-x*f)*n,(l*v-x*w)*n,(l*g-x*h)*n),y[d].add(c),y[z].add(c),y[e].add(c),A[d].add(C),A[z].add(C),A[e].add(C);C=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(e=this.faces[a],c=0;c<Math.min(e.vertexNormals.length,3);c++)F.copy(e.vertexNormals[c]),d=e[C[c]],z=y[d],B.copy(z),B.sub(F.multiplyScalar(F.dot(z))).normalize(),E.crossVectors(e.vertexNormals[c],
z),d=E.dot(A[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(B.x,B.y,B.z,d);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},
merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,l=a.faces,p=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var r=0,n=g.length;r<n;r++){var u=g[r].clone();void 0!==b&&u.applyMatrix4(b);f.push(u)}r=0;for(n=l.length;r<n;r++){var g=l[r],w,v=g.vertexNormals,x=
g.vertexColors,u=new THREE.Face3(g.a+e,g.b+e,g.c+e);u.normal.copy(g.normal);void 0!==d&&u.normal.applyMatrix3(d).normalize();b=0;for(f=v.length;b<f;b++)w=v[b].clone(),void 0!==d&&w.applyMatrix3(d).normalize(),u.vertexNormals.push(w);u.color.copy(g.color);b=0;for(f=x.length;b<f;b++)w=x[b],u.vertexColors.push(w.clone());u.materialIndex=g.materialIndex+c;h.push(u)}r=0;for(n=a.length;r<n;r++)if(c=a[r],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(new THREE.Vector2(c[b].x,c[b].y));p.push(d)}}},mergeVertices:function(){var a=
{},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]==e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,
1);f=this.vertices.length-b.length;this.vertices=b;return f},makeGroups:function(){var a=0;return function(b,c){var d,e,f,g,h={},l,p=this.morphTargets.length,r=this.morphNormals.length;this.geometryGroups={};this.geometryGroupsList=[];d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],f=b?f.materialIndex:0,f in h||(h[f]={hash:f,counter:0}),g=h[f].hash+"_"+h[f].counter,g in this.geometryGroups||(l={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:p,numMorphNormals:r},this.geometryGroups[g]=
l,this.geometryGroupsList.push(l)),this.geometryGroups[g].vertices+3>c&&(h[f].counter+=1,g=h[f].hash+"_"+h[f].counter,g in this.geometryGroups||(l={id:a++,faces3:[],materialIndex:f,vertices:0,numMorphTargets:p,numMorphNormals:r},this.geometryGroups[g]=l,this.geometryGroupsList.push(l))),this.geometryGroups[g].faces3.push(d),this.geometryGroups[g].vertices+=3}}(),clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=
b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,h=e.length;g<h;g++)f.push(new THREE.Vector2(e[g].x,e[g].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);return a};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new THREE.Vector3(0,-1,0));this.add(g);var h=new THREE.PerspectiveCamera(90,
1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var l=new THREE.PerspectiveCamera(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,-1));this.add(l);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,u=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=
2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.generateMipmaps=u;c.activeCubeFace=5;a.render(b,l,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};
THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,.99,.998];this.shadowCascadeFarZ=[.99,.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=
this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;a.shadowCascade=this.shadowCascade;a.shadowCascadeOffset.copy(this.shadowCascadeOffset);a.shadowCascadeCount=this.shadowCascadeCount;a.shadowCascadeBias=this.shadowCascadeBias.slice(0);a.shadowCascadeWidth=this.shadowCascadeWidth.slice(0);a.shadowCascadeHeight=this.shadowCascadeHeight.slice(0);a.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0);
a.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0);return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};
THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);
THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraFov=this.shadowCameraFov;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=
this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.Cache=function(){this.files={}};THREE.Cache.prototype={constructor:THREE.Cache,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.imageLoader=new THREE.ImageLoader;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+
"%"):b+((a.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=this.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function d(a,
d,e,g,h,l,x){var z=b+e,y,A=THREE.Loader.Handlers.get(z);null!==A?y=A.load(z):(y=new THREE.Texture,A=f.imageLoader,A.crossOrigin=f.crossOrigin,A.load(z,function(a){if(!1===THREE.Math.isPowerOfTwo(a.width)||!1===THREE.Math.isPowerOfTwo(a.height)){var b=c(a.width),d=c(a.height),e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(a,0,0,b,d);y.image=e}else y.image=a;y.needsUpdate=!0}));y.sourceFile=e;g&&(y.repeat.set(g[0],g[1]),1!==g[0]&&(y.wrapS=THREE.RepeatWrapping),
1!==g[1]&&(y.wrapT=THREE.RepeatWrapping));h&&y.offset.set(h[0],h[1]);l&&(e={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==e[l[0]]&&(y.wrapS=e[l[0]]),void 0!==e[l[1]]&&(y.wrapT=e[l[1]]));x&&(y.anisotropy=x);a[d]=y}function e(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var f=this,g="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var l=a.shading.toLowerCase();"phong"===l?g="MeshPhongMaterial":
"basic"===l&&(g="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(h.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)h.transparent=a.transparent;void 0!==a.depthTest&&(h.depthTest=a.depthTest);void 0!==a.depthWrite&&(h.depthWrite=a.depthWrite);void 0!==a.visible&&(h.visible=a.visible);void 0!==a.flipSided&&(h.side=THREE.BackSide);void 0!==a.doubleSided&&(h.side=THREE.DoubleSide);void 0!==a.wireframe&&(h.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===
a.vertexColors?h.vertexColors=THREE.FaceColors:a.vertexColors&&(h.vertexColors=THREE.VertexColors));a.colorDiffuse?h.color=e(a.colorDiffuse):a.DbgColor&&(h.color=a.DbgColor);a.colorSpecular&&(h.specular=e(a.colorSpecular));a.colorAmbient&&(h.ambient=e(a.colorAmbient));a.colorEmissive&&(h.emissive=e(a.colorEmissive));a.transparency&&(h.opacity=a.transparency);a.specularCoef&&(h.shininess=a.specularCoef);a.mapDiffuse&&b&&d(h,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,
a.mapDiffuseAnisotropy);a.mapLight&&b&&d(h,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&d(h,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&d(h,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&d(h,"specularMap",a.mapSpecular,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapAlpha&&
b&&d(h,"alphaMap",a.mapAlpha,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);a.mapBumpScale&&(h.bumpScale=a.mapBumpScale);a.mapNormal?(g=THREE.ShaderLib.normalmap,l=THREE.UniformsUtils.clone(g.uniforms),l.tNormal.value=h.normalMap,a.mapNormalFactor&&l.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),h.map&&(l.tDiffuse.value=h.map,l.enableDiffuse.value=!0),h.specularMap&&(l.tSpecular.value=h.specularMap,l.enableSpecular.value=!0),h.lightMap&&(l.tAO.value=h.lightMap,
l.enableAO.value=!0),l.diffuse.value.setHex(h.color),l.specular.value.setHex(h.specular),l.ambient.value.setHex(h.ambient),l.shininess.value=h.shininess,void 0!==h.opacity&&(l.opacity.value=h.opacity),g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:l,lights:!0,fog:!0}),h.transparent&&(g.transparent=!0)):g=new THREE[g](h);void 0!==a.DbgName&&(g.name=a.DbgName);return g}};
THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=0,c=this.handlers.length;b<c;b+=2){var d=this.handlers[b+1];if(this.handlers[b].test(a))return d}return null}};THREE.XHRLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);void 0!==f?b&&b(f):(f=new XMLHttpRequest,f.open("GET",a,!0),f.addEventListener("load",function(c){e.cache.add(a,this.response);b&&b(this.response);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(f.responseType=
this.responseType),f.send(null),e.manager.itemStart(a))},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.ImageLoader=function(a){this.cache=new THREE.Cache;this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);if(void 0!==f)b(f);else return f=document.createElement("img"),void 0!==b&&f.addEventListener("load",function(c){e.cache.add(a,this);b(this);e.manager.itemEnd(a)},!1),void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&f.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),f.src=a,e.manager.itemStart(a),f},setCrossOrigin:function(a){this.crossOrigin=
a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var h=JSON.parse(f.responseText);if(void 0!==h.metadata&&"scene"===h.metadata.type){console.error('THREE.JSONLoader: "'+b+'" seems to be a Scene. Use THREE.SceneLoader instead.');return}h=a.parse(h,d);c(h.geometry,h.materials)}else console.error('THREE.JSONLoader: "'+b+'" seems to be unreachable or the file is empty.');
a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+b+'" ('+f.status+")");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.withCredentials=this.withCredentials;f.send(null)};
THREE.JSONLoader.prototype.parse=function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,h,l,p,r,n,u,w,v,x,z,y,A=a.faces;r=a.vertices;var C=a.normals,B=a.colors,E=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&E++;for(d=0;d<E;d++)c.faceVertexUvs[d]=[]}l=0;for(p=r.length;l<p;)d=new THREE.Vector3,d.x=r[l++]*b,d.y=r[l++]*b,d.z=r[l++]*b,c.vertices.push(d);l=0;for(p=A.length;l<p;)if(b=A[l++],w=b&1,h=b&2,d=b&8,n=b&16,v=b&32,r=b&64,b&=128,w){w=new THREE.Face3;
w.a=A[l];w.b=A[l+1];w.c=A[l+3];x=new THREE.Face3;x.a=A[l+1];x.b=A[l+2];x.c=A[l+3];l+=4;h&&(h=A[l++],w.materialIndex=h,x.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<E;d++)for(z=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4>g;g++)u=A[l++],y=z[2*u],u=z[2*u+1],y=new THREE.Vector2(y,u),2!==g&&c.faceVertexUvs[d][h].push(y),0!==g&&c.faceVertexUvs[d][h+1].push(y);n&&(n=3*A[l++],w.normal.set(C[n++],C[n++],C[n]),x.normal.copy(w.normal));if(v)for(d=0;4>d;d++)n=3*A[l++],v=new THREE.Vector3(C[n++],
C[n++],C[n]),2!==d&&w.vertexNormals.push(v),0!==d&&x.vertexNormals.push(v);r&&(r=A[l++],r=B[r],w.color.setHex(r),x.color.setHex(r));if(b)for(d=0;4>d;d++)r=A[l++],r=B[r],2!==d&&w.vertexColors.push(new THREE.Color(r)),0!==d&&x.vertexColors.push(new THREE.Color(r));c.faces.push(w);c.faces.push(x)}else{w=new THREE.Face3;w.a=A[l++];w.b=A[l++];w.c=A[l++];h&&(h=A[l++],w.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<E;d++)for(z=a.uvs[d],c.faceVertexUvs[d][h]=[],g=0;3>g;g++)u=A[l++],y=z[2*u],u=z[2*u+1],
y=new THREE.Vector2(y,u),c.faceVertexUvs[d][h].push(y);n&&(n=3*A[l++],w.normal.set(C[n++],C[n++],C[n]));if(v)for(d=0;3>d;d++)n=3*A[l++],v=new THREE.Vector3(C[n++],C[n++],C[n]),w.vertexNormals.push(v);r&&(r=A[l++],w.color.setHex(B[r]));if(b)for(d=0;3>d;d++)r=A[l++],w.vertexColors.push(new THREE.Color(B[r]));c.faces.push(w)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],
1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+
"), and skinWeights ("+c.skinWeights.length+") should match.");c.animation=a.animation;c.animations=a.animations})();(function(b){if(void 0!==a.morphTargets){var d,g,h,l,p,r;d=0;for(g=a.morphTargets.length;d<g;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=a.morphTargets[d].name,c.morphTargets[d].vertices=[],p=c.morphTargets[d].vertices,r=a.morphTargets[d].vertices,h=0,l=r.length;h<l;h+=3){var n=new THREE.Vector3;n.x=r[h]*b;n.y=r[h+1]*b;n.z=r[h+2]*b;p.push(n)}}if(void 0!==a.morphColors)for(d=
0,g=a.morphColors.length;d<g;d++)for(c.morphColors[d]={},c.morphColors[d].name=a.morphColors[d].name,c.morphColors[d].colors=[],l=c.morphColors[d].colors,p=a.morphColors[d].colors,b=0,h=p.length;b<h;b+=3)r=new THREE.Color(16755200),r.setRGB(p[b],p[b+1],p[b+2]),l.push(r)})(d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=this.initMaterials(a.materials,b);this.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}};
THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++};this.itemEnd=function(a){e++;if(void 0!==d.onProgress)d.onProgress(a,e,f);if(e===f&&void 0!==d.onLoad)d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d;for(d in c){var e=c[d];b.attributes[d]={itemSize:e.itemSize,array:new self[e.type](e.array)}}c=a.offsets;void 0!==c&&(b.offsets=JSON.parse(JSON.stringify(c)));a=a.boundingSphere;
void 0!==a&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==a.center?a.center:[0,0,0]),a.radius));return b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.ambient&&b.ambient.setHex(a.ambient);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&
(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&(b.wireframe=a.wireframe);if(void 0!==a.materials)for(var c=
0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(e.manager);f.setCrossOrigin(this.crossOrigin);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials);return this.parseObject(a.object,b,c)},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,
e=0,f=a.length;e<f;e++){var g,h=a[e];switch(h.type){case "PlaneGeometry":g=new THREE.PlaneGeometry(h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "CubeGeometry":g=new THREE.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":g=new THREE.CircleGeometry(h.radius,h.segments);break;case "CylinderGeometry":g=new THREE.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded);
break;case "SphereGeometry":g=new THREE.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "IcosahedronGeometry":g=new THREE.IcosahedronGeometry(h.radius,h.detail);break;case "TorusGeometry":g=new THREE.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":g=new THREE.TorusKnotGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale);break;case "BufferGeometry":g=
d.parse(h.data);break;case "Geometry":g=c.parse(h.data).geometry}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);b[h.uuid]=g}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;d<e;d++){var f=a[d],g=c.parse(f);g.uuid=f.uuid;void 0!==f.name&&(g.name=f.name);b[f.uuid]=g}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,
b.aspect,b.near,b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,
b.groundColor,b.intensity);break;case "Mesh":e=c[b.geometry];var f=d[b.material];void 0===e&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry);void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Mesh(e,f);break;case "Sprite":f=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined material "+b.material);e=new THREE.Sprite(f);break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?
(a.fromArray(b.matrix),a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var g in b.children)e.add(this.parseObject(b.children[g],c,d));return e}}()};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.ImageLoader(this.manager);e.setCrossOrigin(this.crossOrigin);e.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)},c,d)},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;
a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.wrapAround=this.metal=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=
1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};THREE.PointCloudMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.PointCloudMaterial.prototype.clone=function(){var a=new THREE.PointCloudMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.defines={};this.uniforms={};this.attributes=null;this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=
!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a)};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;THREE.ShaderMaterial.prototype.clone.call(this,a);return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};
THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.fog=this.fog;return a};THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(a,c){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial;
THREE.Texture=function(a,b,c,d,e,f,g,h,l){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==l?l:1;this.format=void 0!==
g?g:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this._needsUpdate=!1;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=
this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CubeTexture=function(a,b,c,d,e,f,g,h,l){THREE.Texture.call(this,a,b,c,d,e,f,g,h,l);this.images=a};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.clone=function(a){void 0===a&&(a=new THREE.CubeTexture);THREE.Texture.prototype.clone.call(this,a);a.images=this.images;return a};THREE.CompressedTexture=function(a,b,c,d,e,f,g,h,l,p,r){THREE.Texture.call(this,null,f,g,h,l,p,d,e,r);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,d,e,f,g,h,l,p,r){THREE.Texture.call(this,null,f,g,h,l,p,d,e,r);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};
THREE.PointCloud=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointCloudMaterial({color:16777215*Math.random()});this.sortParticles=!1};THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype);
THREE.PointCloud.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){var e=this,f=e.geometry,g=c.params.PointCloud.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===f.boundingBox||!1!==b.isIntersectionBox(f.boundingBox)){var h=g/((this.scale.x+this.scale.y+this.scale.z)/3),l=new THREE.Vector3,g=function(a,f){var g=b.distanceToPoint(a);if(g<h){var l=b.closestPointToPoint(a);l.applyMatrix4(e.matrixWorld);var n=c.ray.origin.distanceTo(l);
d.push({distance:n,distanceToRay:g,point:l.clone(),index:f,face:null,object:e})}};if(f instanceof THREE.BufferGeometry){var p=f.attributes,r=p.position.array;if(void 0!==p.index){var p=p.index.array,n=f.offsets;0===n.length&&(n=[{start:0,count:p.length,index:0}]);for(var u=0,w=n.length;u<w;++u)for(var v=n[u].start,x=n[u].index,f=v,v=v+n[u].count;f<v;f++){var z=x+p[f];l.set(r[3*z],r[3*z+1],r[3*z+2]);g(l,z)}}else for(p=r.length/3,f=0;f<p;f++)l.set(r[3*f],r[3*f+1],r[3*f+2]),g(l,f)}else for(l=this.geometry.vertices,
f=0;f<l.length;f++)g(l[f],f)}}}();THREE.PointCloud.prototype.clone=function(a){void 0===a&&(a=new THREE.PointCloud(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new THREE.PointCloud(a,b)};
THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(d.ray).applyMatrix4(a),g instanceof THREE.Geometry))for(var g=g.vertices,h=g.length,l=new THREE.Vector3,p=new THREE.Vector3,r=this.type===THREE.LineStrip?
1:2,n=0;n<h-1;n+=r)if(!(b.distanceSqToSegment(g[n],g[n+1],p,l)>f)){var u=b.origin.distanceTo(p);u<d.near||u>d.far||e.push({distance:u,point:l.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}();THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3;return function(g,h){var l=this.geometry;null===l.boundingSphere&&l.computeBoundingSphere();c.copy(l.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==g.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(g.ray).applyMatrix4(a),null===l.boundingBox||!1!==b.isIntersectionBox(l.boundingBox)))if(l instanceof THREE.BufferGeometry){var p=
this.material;if(void 0!==p){var r=l.attributes,n,u,w=g.precision;if(void 0!==r.index){var v=r.index.array,x=r.position.array,z=l.offsets;0===z.length&&(z=[{start:0,count:v.length,index:0}]);for(var y=0,A=z.length;y<A;++y)for(var r=z[y].start,C=z[y].index,l=r,B=r+z[y].count;l<B;l+=3){r=C+v[l];n=C+v[l+1];u=C+v[l+2];d.set(x[3*r],x[3*r+1],x[3*r+2]);e.set(x[3*n],x[3*n+1],x[3*n+2]);f.set(x[3*u],x[3*u+1],x[3*u+2]);var E=p.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,p.side!==
THREE.DoubleSide);if(null!==E){E.applyMatrix4(this.matrixWorld);var F=g.ray.origin.distanceTo(E);F<w||F<g.near||F>g.far||h.push({distance:F,point:E,indices:[r,n,u],face:null,faceIndex:null,object:this})}}}else for(x=r.position.array,v=l=0,B=x.length;l<B;l+=3,v+=9)r=l,n=l+1,u=l+2,d.set(x[v],x[v+1],x[v+2]),e.set(x[v+3],x[v+4],x[v+5]),f.set(x[v+6],x[v+7],x[v+8]),E=p.side===THREE.BackSide?b.intersectTriangle(f,e,d,!0):b.intersectTriangle(d,e,f,p.side!==THREE.DoubleSide),null!==E&&(E.applyMatrix4(this.matrixWorld),
F=g.ray.origin.distanceTo(E),F<w||F<g.near||F>g.far||h.push({distance:F,point:E,indices:[r,n,u],face:null,faceIndex:null,object:this}))}}else if(l instanceof THREE.Geometry)for(v=this.material instanceof THREE.MeshFaceMaterial,x=!0===v?this.material.materials:null,w=g.precision,z=l.vertices,y=0,A=l.faces.length;y<A;y++)if(C=l.faces[y],p=!0===v?x[C.materialIndex]:this.material,void 0!==p){r=z[C.a];n=z[C.b];u=z[C.c];if(!0===p.morphTargets){E=l.morphTargets;F=this.morphTargetInfluences;d.set(0,0,0);
e.set(0,0,0);f.set(0,0,0);for(var B=0,I=E.length;B<I;B++){var D=F[B];if(0!==D){var G=E[B].vertices;d.x+=(G[C.a].x-r.x)*D;d.y+=(G[C.a].y-r.y)*D;d.z+=(G[C.a].z-r.z)*D;e.x+=(G[C.b].x-n.x)*D;e.y+=(G[C.b].y-n.y)*D;e.z+=(G[C.b].z-n.z)*D;f.x+=(G[C.c].x-u.x)*D;f.y+=(G[C.c].y-u.y)*D;f.z+=(G[C.c].z-u.z)*D}}d.add(r);e.add(n);f.add(u);r=d;n=e;u=f}E=p.side===THREE.BackSide?b.intersectTriangle(u,n,r,!0):b.intersectTriangle(r,n,u,p.side!==THREE.DoubleSide);null!==E&&(E.applyMatrix4(this.matrixWorld),F=g.ray.origin.distanceTo(E),
F<w||F<g.near||F>g.far||h.push({distance:F,point:E,face:C,faceIndex:y,object:this}))}}}();THREE.Mesh.prototype.clone=function(a,b){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a,b);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.updateMatrixWorld=function(a){THREE.Object3D.prototype.updateMatrixWorld.call(this,a);this.accumulatedSclWeight=this.accumulatedPosWeight=this.accumulatedRotWeight=0};
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),
this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};
THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};
THREE.Skeleton.prototype.update=function(){for(var a=new THREE.Matrix4,b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e,f,g,h=0,l=this.geometry.bones.length;h<l;++h)d=this.geometry.bones[h],e=d.pos,f=d.rotq,g=d.scl,b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.set(e[0],e[1],e[2]),b.quaternion.set(f[0],f[1],f[2],f[3]),void 0!==g?b.scale.set(g[0],g[1],g[2]):b.scale.set(1,1,1);h=0;for(l=
this.geometry.bones.length;h<l;++h)d=this.geometry.bones[h],-1!==d.parent?a[d.parent].add(a[h]):this.add(a[h])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c))};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};
THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)};
THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)_?(\d+)/,e=0,f=a.morphTargets.length;e<f;e++){var g=a.morphTargets[e].name.match(d);if(g&&1<g.length){g=g[1];c[g]||(c[g]={start:Infinity,end:-Infinity});var h=c[g];e<h.start&&(h.start=e);e>h.end&&(h.end=e);b||(b=g)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=(c.end-c.start)/b*1E3,this.time=0):console.warn("animation["+a+"] undefined")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a!==this.currentKeyframe&&
(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[a]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=a);b=this.time%b/b;this.directionBackwards&&(b=1-b);this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};
THREE.MorphAnimMesh.prototype.interpolateTargets=function(a,b,c){for(var d=this.morphTargetInfluences,e=0,f=d.length;e<f;e++)d[e]=0;-1<a&&(d[a]=1-c);-1<b&&(d[b]=c)};
THREE.MorphAnimMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material));a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var d=1,e=this.objects.length;d<e;d++)if(c>=this.objects[d].distance)this.objects[d-1].object.visible=!1,this.objects[d].object.visible=!0;else break;for(;d<e;d++)this.objects[d].object.visible=!1}}}();
THREE.LOD.prototype.clone=function(a){void 0===a&&(a=new THREE.LOD);THREE.Object3D.prototype.clone.call(this,a);for(var b=0,c=this.objects.length;b<c;b++){var d=this.objects[b].object.clone();d.visible=0===b;a.addLevel(d,this.objects[b].distance)}return a};
THREE.Sprite=function(){var a=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0]),b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(a,3));return function(a){THREE.Object3D.call(this);this.geometry=b;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);
THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceToPoint(a);d>this.scale.x||c.push({distance:d,point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};
THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a});a.dispatchEvent({type:"addedToScene",scene:this});for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));this.dispatchEvent({type:"objectRemoved",object:a});a.dispatchEvent({type:"removedFromScene",scene:this});for(b=
0;b<a.children.length;b++)this.__removeObject(a.children[b])};THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};
THREE.CanvasRenderer=function(a){function b(a,b,c,d){p(b);r(c);n(d);u(a.getStyle());R.stroke();Y.expandByScalar(2*b)}function c(a){w(a.getStyle());R.fill()}function d(a){e(a.target)}function e(a){if(!(a instanceof THREE.CompressedTexture)){var b=a.wrapS===THREE.RepeatWrapping,c=a.wrapT===THREE.RepeatWrapping,d=a.image,e=document.createElement("canvas");e.width=d.width;e.height=d.height;var f=e.getContext("2d");f.setTransform(1,0,0,-1,0,d.height);f.drawImage(d,0,0);ab[a.id]=R.createPattern(e,!0===
b&&!0===c?"repeat":!0===b&&!1===c?"repeat-x":!1===b&&!0===c?"repeat-y":"no-repeat")}}function f(a,b,c,f,g,h,l,n,p,r,s,v,u){if(!(u instanceof THREE.DataTexture)){!1===u.hasEventListener("update",d)&&(void 0!==u.image&&0<u.image.width&&e(u),u.addEventListener("update",d));var q=ab[u.id];if(void 0!==q){w(q);var q=u.offset.x/u.repeat.x,x=u.offset.y/u.repeat.y,y=u.image.width*u.repeat.x;u=u.image.height*u.repeat.y;l=(l+q)*y;n=(n+x)*u;c-=a;f-=b;g-=a;h-=b;p=(p+q)*y-l;r=(r+x)*u-n;s=(s+q)*y-l;v=(v+x)*u-n;
u=p*v-s*r;0!==u&&(q=1/u,u=(v*c-r*g)*q,r=(v*f-r*h)*q,c=(p*g-s*c)*q,f=(p*h-s*f)*q,a=a-u*l-c*n,b=b-r*l-f*n,R.save(),R.transform(u,r,c,f,a,b),R.fill(),R.restore())}else w("rgba(0,0,0,1)"),R.fill()}}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function h(a){J!==a&&(J=R.globalAlpha=a)}function l(a){H!==a&&(a===THREE.NormalBlending?R.globalCompositeOperation="source-over":a===THREE.AdditiveBlending?R.globalCompositeOperation="lighter":
a===THREE.SubtractiveBlending&&(R.globalCompositeOperation="darker"),H=a)}function p(a){aa!==a&&(aa=R.lineWidth=a)}function r(a){ha!==a&&(ha=R.lineCap=a)}function n(a){T!==a&&(T=R.lineJoin=a)}function u(a){Z!==a&&(Z=R.strokeStyle=a)}function w(a){X!==a&&(X=R.fillStyle=a)}function v(a){K.length!==a.length&&(R.setLineDash(a),K=a)}console.log("THREE.CanvasRenderer",THREE.REVISION);var x=THREE.Math.smoothstep;a=a||{};var z=this,y,A,C,B=new THREE.Projector,E=void 0!==a.canvas?a.canvas:document.createElement("canvas"),
F=E.width,I=E.height,D=Math.floor(F/2),G=Math.floor(I/2),P=0,L=0,ea=F,M=I,R=E.getContext("2d",{alpha:!0===a.alpha}),W=new THREE.Color(0),Q=0,J=1,H=0,Z=null,X=null,aa=null,ha=null,T=null,K=[],wa,V,U,sa;new THREE.RenderableVertex;new THREE.RenderableVertex;var na,ja,ca,s,Ra,Va,N=new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;var xa=new THREE.Color,Ia=new THREE.Color,Na=new THREE.Color,ab={},ma,ta,za,Ja,Ga,va,Aa,Oa=new THREE.Box2,ba=new THREE.Box2,Y=new THREE.Box2,qa=
new THREE.Color,Za=new THREE.Color,gb=new THREE.Color,Ka=new THREE.Vector3,oa=new THREE.Vector3,ra=new THREE.Vector3,Ha=new THREE.Matrix3;void 0===R.setLineDash&&(R.setLineDash=function(){});this.domElement=E;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=
function(a,b,c){F=a*this.devicePixelRatio;I=b*this.devicePixelRatio;E.width=F;E.height=I;D=Math.floor(F/2);G=Math.floor(I/2);!1!==c&&(E.style.width=a+"px",E.style.height=b+"px");Oa.min.set(-D,-G);Oa.max.set(D,G);ba.min.set(-D,-G);ba.max.set(D,G);J=1;H=0;T=ha=aa=X=Z=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){P=a*this.devicePixelRatio;L=b*this.devicePixelRatio;ea=c*this.devicePixelRatio;M=d*this.devicePixelRatio};this.setScissor=function(){};this.enableScissorTest=function(){};
this.setClearColor=function(a,b){W.set(a);Q=void 0!==b?b:1;ba.min.set(-D,-G);ba.max.set(D,G)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return W};this.getClearAlpha=function(){return Q};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===ba.empty()&&(ba.intersect(Oa),ba.expandByScalar(2),ba.min.x+=D,ba.min.y=-ba.min.y+G,ba.max.x+=
D,ba.max.y=-ba.max.y+G,1>Q&&R.clearRect(ba.min.x|0,ba.min.y|0,ba.max.x-ba.min.x|0,ba.max.y-ba.min.y|0),0<Q&&(l(THREE.NormalBlending),h(1),w("rgba("+Math.floor(255*W.r)+","+Math.floor(255*W.g)+","+Math.floor(255*W.b)+","+Q+")"),R.fillRect(ba.min.x|0,ba.min.y|0,ba.max.x-ba.min.x|0,ba.max.y-ba.min.y|0)),ba.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,E){if(!1===E instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");
else{!0===this.autoClear&&this.clear();z.info.render.vertices=0;z.info.render.faces=0;R.setTransform(ea/F,0,0,-M/I,P,I-L);R.translate(D,G);y=B.projectScene(a,E,this.sortObjects,this.sortElements);A=y.elements;C=y.lights;wa=E;Ha.getNormalMatrix(E.matrixWorldInverse);qa.setRGB(0,0,0);Za.setRGB(0,0,0);gb.setRGB(0,0,0);for(var W=0,H=C.length;W<H;W++){var J=C[W],Q=J.color;J instanceof THREE.AmbientLight?qa.add(Q):J instanceof THREE.DirectionalLight?Za.add(Q):J instanceof THREE.PointLight&&gb.add(Q)}W=
0;for(H=A.length;W<H;W++){var K=A[W],X=K.material;if(void 0!==X&&0!==X.opacity){Y.makeEmpty();if(K instanceof THREE.RenderableSprite){V=K;V.x*=D;V.y*=G;var J=V,Z=K,Q=X;h(Q.opacity);l(Q.blending);var ka=Z.scale.x*D,Z=Z.scale.y*G,K=.5*Math.sqrt(ka*ka+Z*Z);Y.min.set(J.x-K,J.y-K);Y.max.set(J.x+K,J.y+K);if(Q instanceof THREE.SpriteMaterial){var ia=Q.map;if(null!==ia&&void 0!==ia.image){!1===ia.hasEventListener("update",d)&&(0<ia.image.width&&e(ia),ia.addEventListener("update",d));K=ab[ia.id];void 0!==
K?w(K):w("rgba( 0, 0, 0, 1 )");var aa=ia.image,K=aa.width*ia.offset.x,X=aa.height*ia.offset.y,T=aa.width*ia.repeat.x,ia=aa.height*ia.repeat.y,aa=ka/T,q=Z/ia;R.save();R.translate(J.x,J.y);0!==Q.rotation&&R.rotate(Q.rotation);R.translate(-ka/2,-Z/2);R.scale(aa,q);R.translate(-K,-X);R.fillRect(K,X,T,ia)}else w(Q.color.getStyle()),R.save(),R.translate(J.x,J.y),0!==Q.rotation&&R.rotate(Q.rotation),R.scale(ka,-Z),R.fillRect(-.5,-.5,1,1);R.restore()}else Q instanceof THREE.SpriteCanvasMaterial&&(u(Q.color.getStyle()),
w(Q.color.getStyle()),R.save(),R.translate(J.x,J.y),0!==Q.rotation&&R.rotate(Q.rotation),R.scale(ka,Z),Q.program(R),R.restore())}else if(K instanceof THREE.RenderableLine){if(V=K.v1,U=K.v2,V.positionScreen.x*=D,V.positionScreen.y*=G,U.positionScreen.x*=D,U.positionScreen.y*=G,Y.setFromPoints([V.positionScreen,U.positionScreen]),!0===Oa.isIntersectionBox(Y))if(J=V,Q=U,ka=K,Z=X,h(Z.opacity),l(Z.blending),R.beginPath(),R.moveTo(J.positionScreen.x,J.positionScreen.y),R.lineTo(Q.positionScreen.x,Q.positionScreen.y),
Z instanceof THREE.LineBasicMaterial){p(Z.linewidth);r(Z.linecap);n(Z.linejoin);if(Z.vertexColors!==THREE.VertexColors)u(Z.color.getStyle());else if(K=ka.vertexColors[0].getStyle(),ka=ka.vertexColors[1].getStyle(),K===ka)u(K);else{try{var ha=R.createLinearGradient(J.positionScreen.x,J.positionScreen.y,Q.positionScreen.x,Q.positionScreen.y);ha.addColorStop(0,K);ha.addColorStop(1,ka)}catch(xb){ha=K}u(ha)}R.stroke();Y.expandByScalar(2*Z.linewidth)}else Z instanceof THREE.LineDashedMaterial&&(p(Z.linewidth),
r(Z.linecap),n(Z.linejoin),u(Z.color.getStyle()),v([Z.dashSize,Z.gapSize]),R.stroke(),Y.expandByScalar(2*Z.linewidth),v([]))}else if(K instanceof THREE.RenderableFace){V=K.v1;U=K.v2;sa=K.v3;if(-1>V.positionScreen.z||1<V.positionScreen.z)continue;if(-1>U.positionScreen.z||1<U.positionScreen.z)continue;if(-1>sa.positionScreen.z||1<sa.positionScreen.z)continue;V.positionScreen.x*=D;V.positionScreen.y*=G;U.positionScreen.x*=D;U.positionScreen.y*=G;sa.positionScreen.x*=D;sa.positionScreen.y*=G;0<X.overdraw&&
(g(V.positionScreen,U.positionScreen,X.overdraw),g(U.positionScreen,sa.positionScreen,X.overdraw),g(sa.positionScreen,V.positionScreen,X.overdraw));Y.setFromPoints([V.positionScreen,U.positionScreen,sa.positionScreen]);if(!0===Oa.isIntersectionBox(Y)){Q=V;ka=U;Z=sa;J=X;z.info.render.vertices+=3;z.info.render.faces++;h(J.opacity);l(J.blending);na=Q.positionScreen.x;ja=Q.positionScreen.y;ca=ka.positionScreen.x;s=ka.positionScreen.y;Ra=Z.positionScreen.x;Va=Z.positionScreen.y;var X=na,T=ja,ia=ca,aa=
s,q=Ra,Ma=Va;R.beginPath();R.moveTo(X,T);R.lineTo(ia,aa);R.lineTo(q,Ma);R.closePath();if((J instanceof THREE.MeshLambertMaterial||J instanceof THREE.MeshPhongMaterial)&&null===J.map){xa.copy(J.color);Ia.copy(J.emissive);J.vertexColors===THREE.FaceColors&&xa.multiply(K.color);N.copy(qa);oa.copy(Q.positionWorld).add(ka.positionWorld).add(Z.positionWorld).divideScalar(3);Q=oa;ka=K.normalModel;Z=N;K=0;for(X=C.length;K<X;K++)T=C[K],Na.copy(T.color),T instanceof THREE.DirectionalLight?(ia=Ka.setFromMatrixPosition(T.matrixWorld).normalize(),
aa=ka.dot(ia),0>=aa||(aa*=T.intensity,Z.add(Na.multiplyScalar(aa)))):T instanceof THREE.PointLight&&(ia=Ka.setFromMatrixPosition(T.matrixWorld),aa=ka.dot(Ka.subVectors(ia,Q).normalize()),0>=aa||(aa*=0==T.distance?1:1-Math.min(Q.distanceTo(ia)/T.distance,1),0!=aa&&(aa*=T.intensity,Z.add(Na.multiplyScalar(aa)))));N.multiply(xa).add(Ia);!0===J.wireframe?b(N,J.wireframeLinewidth,J.wireframeLinecap,J.wireframeLinejoin):c(N)}else J instanceof THREE.MeshBasicMaterial||J instanceof THREE.MeshLambertMaterial||
J instanceof THREE.MeshPhongMaterial?null!==J.map?J.map.mapping instanceof THREE.UVMapping&&(ma=K.uvs,f(na,ja,ca,s,Ra,Va,ma[0].x,ma[0].y,ma[1].x,ma[1].y,ma[2].x,ma[2].y,J.map)):null!==J.envMap?J.envMap.mapping instanceof THREE.SphericalReflectionMapping?(ra.copy(K.vertexNormalsModel[0]).applyMatrix3(Ha),ta=.5*ra.x+.5,za=.5*ra.y+.5,ra.copy(K.vertexNormalsModel[1]).applyMatrix3(Ha),Ja=.5*ra.x+.5,Ga=.5*ra.y+.5,ra.copy(K.vertexNormalsModel[2]).applyMatrix3(Ha),va=.5*ra.x+.5,Aa=.5*ra.y+.5,f(na,ja,ca,s,
Ra,Va,ta,za,Ja,Ga,va,Aa,J.envMap)):J.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(ra.copy(K.vertexNormalsModel[0]).applyMatrix3(Ha),ta=-.5*ra.x+.5,za=-.5*ra.y+.5,ra.copy(K.vertexNormalsModel[1]).applyMatrix3(Ha),Ja=-.5*ra.x+.5,Ga=-.5*ra.y+.5,ra.copy(K.vertexNormalsModel[2]).applyMatrix3(Ha),va=-.5*ra.x+.5,Aa=-.5*ra.y+.5,f(na,ja,ca,s,Ra,Va,ta,za,Ja,Ga,va,Aa,J.envMap)):(N.copy(J.color),J.vertexColors===THREE.FaceColors&&N.multiply(K.color),!0===J.wireframe?b(N,J.wireframeLinewidth,J.wireframeLinecap,
J.wireframeLinejoin):c(N)):(J instanceof THREE.MeshDepthMaterial?N.r=N.g=N.b=1-x(Q.positionScreen.z*Q.positionScreen.w,wa.near,wa.far):J instanceof THREE.MeshNormalMaterial?(ra.copy(K.normalModel).applyMatrix3(Ha),N.setRGB(ra.x,ra.y,ra.z).multiplyScalar(.5).addScalar(.5)):N.setRGB(1,1,1),!0===J.wireframe?b(N,J.wireframeLinewidth,J.wireframeLinecap,J.wireframeLinejoin):c(N))}}ba.union(Y)}}R.setTransform(1,0,0,1,0,0)}}};THREE.ShaderChunk={};THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\tvec3 dirVector = normalize( lDirection.xyz );\n\n\tfloat dotProduct = dot( transformedNormal, dirVector );\n\tvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t#endif\n\n\t#endif\n\n\t#ifdef WRAP_AROUND\n\n\t\tvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\tdirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tdirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n\t\t#endif\n\n\t#endif\n\n\tvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n\t#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\tpointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tpointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t\tvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\tfloat lDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\t\tlVector = normalize( lVector );\n\n\t\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\t\t\tvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n\t\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\t\tvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n\t\t\t\tspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n\t\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\t\tspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\tfloat dotProduct = dot( transformedNormal, lVector );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\tfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n\tmvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n\tmvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";
THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tvec3 pointDiffuse = vec3( 0.0 );\n\tvec3 pointSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tpointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n\t\t\t\t// specular\n\n\t\tvec3 pointHalfVector = normalize( lVector + viewPosition );\n\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\tfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tvec3 spotDiffuse = vec3( 0.0 );\n\tvec3 spotSpecular = vec3( 0.0 );\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n\t\tfloat lDistance = 1.0;\n\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\tlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n\t\tlVector = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n\t\t\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\n\t\t\t#ifdef WRAP_AROUND\n\n\t\t\t\tfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n\t\t\t#else\n\n\t\t\t\tfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t\t#endif\n\n\t\t\tspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n\t\t\t\t\t// specular\n\n\t\t\tvec3 spotHalfVector = normalize( lVector + viewPosition );\n\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\tfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tvec3 dirDiffuse = vec3( 0.0 );\n\tvec3 dirSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\tvec3 dirVector = normalize( lDirection.xyz );\n\n\t\t\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, dirVector );\n\n\t\t#ifdef WRAP_AROUND\n\n\t\t\tfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\n\t\t\tfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n\t\t\tvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n\t\t#else\n\n\t\t\tfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n\n\t\t#endif\n\n\t\tdirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n\t\t// specular\n\n\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\tfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n\t\t/*\n\t\t// fresnel term from skin shader\n\t\tconst float F0 = 0.128;\n\n\t\tfloat base = 1.0 - dot( viewPosition, dirHalfVector );\n\t\tfloat exponential = pow( base, 5.0 );\n\n\t\tfloat fresnel = exponential + F0 * ( 1.0 - exponential );\n\t\t*/\n\n\t\t/*\n\t\t// fresnel term from fresnel shader\n\t\tconst float mFresnelBias = 0.08;\n\t\tconst float mFresnelScale = 0.3;\n\t\tconst float mFresnelPower = 5.0;\n\n\t\tfloat fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n\t\t*/\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\t// \t\tdirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tvec3 hemiDiffuse = vec3( 0.0 );\n\tvec3 hemiSpecular = vec3( 0.0 );\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\tvec3 lVector = normalize( lDirection.xyz );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lVector );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\themiDiffuse += diffuse * hemiColor;\n\n\t\t// specular (sky light)\n\n\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\tfloat hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n\t\t// specular (ground light)\n\n\t\tvec3 lVectorGround = -lVector;\n\n\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\tfloat hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\n\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n\t}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n\ttotalDiffuse += dirDiffuse;\n\ttotalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\ttotalDiffuse += hemiDiffuse;\n\ttotalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\ttotalDiffuse += pointDiffuse;\n\ttotalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\ttotalDiffuse += spotDiffuse;\n\ttotalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\tuniform samplerCube envMap;\n\tuniform float flipEnvMap;\n\tuniform int combine;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tuniform bool useRefract;\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tvarying vec2 vUv2;\n\tuniform sampler2D lightMap;\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";
THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\t#ifdef GAMMA_INPUT\n\n\t\ttexelColor.xyz *= texelColor.xyz;\n\n\t#endif\n\n\tgl_FragColor = gl_FragColor * texelColor;\n\n#endif";THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n\tvUv2 = uv2;\n\n#endif";
THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tgl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\t#ifdef GAMMA_INPUT\n\n\t\tvColor = color * color;\n\n\t#else\n\n\t\tvColor = color;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\tuniform bool useRefract;\n\n#endif\n";THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n\tgl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n";
THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\tvec3 reflectVec;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\n\t\tvec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n\t\tif ( useRefract ) {\n\n\t\t\treflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t} else { \n\n\t\t\treflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t}\n\n\t#else\n\n\t\treflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t\tvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#endif\n\n\t#ifdef GAMMA_INPUT\n\n\t\tcubeColor.xyz *= cubeColor.xyz;\n\n\t#endif\n\n\tif ( combine == 1 ) {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n\t} else if ( combine == 2 ) {\n\n\t\tgl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n\t} else {\n\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n\t}\n\n#endif";
THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t\t\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t\t\t//\thttp://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif";
THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n\tobjectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n\tobjectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n\tobjectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n\tuniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\tgl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tgl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\n\n\tvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n\tworldNormal = normalize( worldNormal );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tif ( useRefract ) {\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t} else {\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\t#ifdef SHADOWMAP_CASCADE\n\n\t\tint inFrustumCount = 0;\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\t\t// don't shadow pixels outside of light frustum\n\t\t\t\t// use just first frustum (for cascades)\n\t\t\t\t// don't shadow pixels behind far plane of light frustum\n\n\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\tinFrustumCount += int( inFrustum );\n\t\t\tbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n\t\t#else\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t#endif\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\t#ifdef SHADOWMAP_CASCADE\n\n\t\t\t\tif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n\t\t\t#endif\n\n\t\t#endif\n\n\t}\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\tshadowColor *= shadowColor;\n\n\t#endif\n\n\tgl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#endif\n\n\t#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#endif\n\n\t#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tgl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++)for(c in d=this.clone(a[b]),d)e[c]=d[c];return e},clone:function(a){var b,c,d,e={};for(b in a)for(c in e[b]={},a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d;return e}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",
value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},
hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},
opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,
THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,
THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,
{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,
THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,
THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\tgl_FragColor.xyz *= vLightFront;\n\t\telse\n\t\t\tgl_FragColor.xyz *= vLightBack;\n\t#else\n\t\tgl_FragColor.xyz *= vLightFront;\n\t#endif",
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},
specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\tvNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = -mvPosition.xyz;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,
THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,
THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",
THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,
"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,
"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,
"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",
value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},
specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n\tuniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\tgl_FragColor = vec4( vec3( 1.0 ), opacity );\n\tvec3 specularTex = vec3( 1.0 );\n\tvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n\tnormalTex.xy *= uNormalScale;\n\tnormalTex = normalize( normalTex );\n\tif( enableDiffuse ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 texelColor = texture2D( tDiffuse, vUv );\n\t\t\ttexelColor.xyz *= texelColor.xyz;\n\t\t\tgl_FragColor = gl_FragColor * texelColor;\n\t\t#else\n\t\t\tgl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n\t\t#endif\n\t}\n\tif( enableAO ) {\n\t\t#ifdef GAMMA_INPUT\n\t\t\tvec4 aoColor = texture2D( tAO, vUv );\n\t\t\taoColor.xyz *= aoColor.xyz;\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n\t\t#else\n\t\t\tgl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n\t\t#endif\n\t}",
THREE.ShaderChunk.alphatest_fragment,"\tif( enableSpecular )\n\t\tspecularTex = texture2D( tSpecular, vUv ).xyz;\n\tmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n\tvec3 finalNormal = tsb * normalTex;\n\t#ifdef FLIP_SIDED\n\t\tfinalNormal = -finalNormal;\n\t#endif\n\tvec3 normal = normalize( finalNormal );\n\tvec3 viewPosition = normalize( vViewPosition );\n\t#if MAX_POINT_LIGHTS > 0\n\t\tvec3 pointDiffuse = vec3( 0.0 );\n\t\tvec3 pointSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\t\tvec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat pointDistance = 1.0;\n\t\t\tif ( pointLightDistance[ i ] > 0.0 )\n\t\t\t\tpointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n\t\t\tpointVector = normalize( pointVector );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n\t\t\t\tfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n\t\t\t#endif\n\t\t\tpointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n\t\t\tvec3 pointHalfVector = normalize( pointVector + viewPosition );\n\t\t\tfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n\t\t\tfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n\t\t\tpointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\tvec3 spotDiffuse = vec3( 0.0 );\n\t\tvec3 spotSpecular = vec3( 0.0 );\n\t\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\t\t\tvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n\t\t\tvec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n\t\t\tfloat spotDistance = 1.0;\n\t\t\tif ( spotLightDistance[ i ] > 0.0 )\n\t\t\t\tspotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n\t\t\tspotVector = normalize( spotVector );\n\t\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\t\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\t\t\t\tspotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\t\t\t\t#ifdef WRAP_AROUND\n\t\t\t\t\tfloat spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t\tfloat spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n\t\t\t\t\tvec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\t\t\t\t#else\n\t\t\t\t\tfloat spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n\t\t\t\t#endif\n\t\t\t\tspotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n\t\t\t\tvec3 spotHalfVector = normalize( spotVector + viewPosition );\n\t\t\t\tfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n\t\t\t\tfloat spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\t\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n\t\t\t\tspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n\t\t\t}\n\t\t}\n\t#endif\n\t#if MAX_DIR_LIGHTS > 0\n\t\tvec3 dirDiffuse = vec3( 0.0 );\n\t\tvec3 dirSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n\t\t\tvec3 dirVector = normalize( lDirection.xyz );\n\t\t\t#ifdef WRAP_AROUND\n\t\t\t\tfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n\t\t\t\tfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n\t\t\t\tvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n\t\t\t#else\n\t\t\t\tfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n\t\t\t#endif\n\t\t\tdirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n\t\t\tvec3 dirHalfVector = normalize( dirVector + viewPosition );\n\t\t\tfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n\t\t\tfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n\t\t\tdirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\t\t}\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\tvec3 hemiDiffuse = vec3( 0.0 );\n\t\tvec3 hemiSpecular = vec3( 0.0 );\n\t\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\t\t\tvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n\t\t\tvec3 lVector = normalize( lDirection.xyz );\n\t\t\tfloat dotProduct = dot( normal, lVector );\n\t\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\t\t\tvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\t\t\themiDiffuse += diffuse * hemiColor;\n\t\t\tvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n\t\t\tfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n\t\t\tfloat hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\t\t\tvec3 lVectorGround = -lVector;\n\t\t\tvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n\t\t\tfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n\t\t\tfloat hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\t\t\tfloat dotProductGround = dot( normal, lVectorGround );\n\t\t\tfloat specularNormalization = ( shininess + 2.0 ) / 8.0;\n\t\t\tvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n\t\t\tvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n\t\t\themiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\t\t}\n\t#endif\n\tvec3 totalDiffuse = vec3( 0.0 );\n\tvec3 totalSpecular = vec3( 0.0 );\n\t#if MAX_DIR_LIGHTS > 0\n\t\ttotalDiffuse += dirDiffuse;\n\t\ttotalSpecular += dirSpecular;\n\t#endif\n\t#if MAX_HEMI_LIGHTS > 0\n\t\ttotalDiffuse += hemiDiffuse;\n\t\ttotalSpecular += hemiSpecular;\n\t#endif\n\t#if MAX_POINT_LIGHTS > 0\n\t\ttotalDiffuse += pointDiffuse;\n\t\ttotalSpecular += pointSpecular;\n\t#endif\n\t#if MAX_SPOT_LIGHTS > 0\n\t\ttotalDiffuse += spotDiffuse;\n\t\ttotalSpecular += spotSpecular;\n\t#endif\n\t#ifdef METAL\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\t#else\n\t\tgl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\t#endif\n\tif ( enableReflection ) {\n\t\tvec3 vReflect;\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tif ( useRefract ) {\n\t\t\tvReflect = refract( cameraToVertex, normal, refractionRatio );\n\t\t} else {\n\t\t\tvReflect = reflect( cameraToVertex, normal );\n\t\t}\n\t\tvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n\t\t#ifdef GAMMA_INPUT\n\t\t\tcubeColor.xyz *= cubeColor.xyz;\n\t\t#endif\n\t\tgl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n\t}",
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n\tuniform sampler2D tDisplacement;\n\tuniform float uDisplacementScale;\n\tuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",
THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"\t#ifdef USE_SKINNING\n\t\tvNormal = normalize( normalMatrix * skinnedNormal.xyz );\n\t\tvec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n\t\tvTangent = normalize( normalMatrix * skinnedTangent.xyz );\n\t#else\n\t\tvNormal = normalize( normalMatrix * normal );\n\t\tvTangent = normalize( normalMatrix * tangent.xyz );\n\t#endif\n\tvBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n\tvUv = uv * uRepeat + uOffset;\n\tvec3 displacedPosition;\n\t#ifdef VERTEX_TEXTURES\n\t\tif ( enableDisplacement ) {\n\t\t\tvec3 dv = texture2D( tDisplacement, uv ).xyz;\n\t\t\tfloat df = uDisplacementScale * dv.x + uDisplacementBias;\n\t\t\tdisplacedPosition = position + normalize( normal ) * df;\n\t\t} else {\n\t\t\t#ifdef USE_SKINNING\n\t\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\t\tdisplacedPosition = skinned.xyz;\n\t\t\t#else\n\t\t\t\tdisplacedPosition = position;\n\t\t\t#endif\n\t\t}\n\t#else\n\t\t#ifdef USE_SKINNING\n\t\t\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\t\t\tvec4 skinned = vec4( 0.0 );\n\t\t\tskinned += boneMatX * skinVertex * skinWeight.x;\n\t\t\tskinned += boneMatY * skinVertex * skinWeight.y;\n\t\t\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\t\t\tskinned += boneMatW * skinVertex * skinWeight.w;\n\t\t\tskinned  = bindMatrixInverse * skinned;\n\t\t\tdisplacedPosition = skinned.xyz;\n\t\t#else\n\t\t\tdisplacedPosition = position;\n\t\t#endif\n\t#endif\n\tvec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n\tvec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,"\tvWorldPosition = worldPosition.xyz;\n\tvViewPosition = -mvPosition.xyz;\n\t#ifdef USE_SHADOWMAP\n\t\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\t\t}\n\t#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\tvWorldPosition = worldPosition.xyz;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",
THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3);f.size=g;f.array=new Float32Array(c*g);f.buffer=q.createBuffer();f.buffer.belongsToAttribute=e;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}
function c(a,b){var c=b.geometry,g=a.faces3,h=3*g.length,l=1*g.length,n=3*g.length,g=d(b,a),p=f(g),r=e(g),s=g.vertexColors?g.vertexColors:!1;a.__vertexArray=new Float32Array(3*h);r&&(a.__normalArray=new Float32Array(3*h));c.hasTangents&&(a.__tangentArray=new Float32Array(4*h));s&&(a.__colorArray=new Float32Array(3*h));p&&(0<c.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*h)),1<c.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*h)));b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&
(a.__skinIndexArray=new Float32Array(4*h),a.__skinWeightArray=new Float32Array(4*h));c=null!==Kb&&21845<l?Uint32Array:Uint16Array;a.__typeArray=c;a.__faceArray=new c(3*l);a.__lineArray=new c(2*n);if(a.numMorphTargets)for(a.__morphTargetsArrays=[],c=0,p=a.numMorphTargets;c<p;c++)a.__morphTargetsArrays.push(new Float32Array(3*h));if(a.numMorphNormals)for(a.__morphNormalsArrays=[],c=0,p=a.numMorphNormals;c<p;c++)a.__morphNormalsArrays.push(new Float32Array(3*h));a.__webglFaceCount=3*l;a.__webglLineCount=
2*n;if(g.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var u in g.attributes){var l=g.attributes[u],n={},v;for(v in l)n[v]=l[v];if(!n.__webglInitialized||n.createUniqueBuffers)n.__webglInitialized=!0,c=1,"v2"===n.type?c=2:"v3"===n.type?c=3:"v4"===n.type?c=4:"c"===n.type&&(c=3),n.size=c,n.array=new Float32Array(h*c),n.buffer=q.createBuffer(),n.buffer.belongsToAttribute=u,l.needsUpdate=!0,n.__original=l;a.__webglCustomAttributesList.push(n)}}a.__inittedArrays=
!0}function d(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function f(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a instanceof THREE.ShaderMaterial?!0:!1}function g(a){for(var b in a.attributes){var c=
"index"===b?q.ELEMENT_ARRAY_BUFFER:q.ARRAY_BUFFER,d=a.attributes[b];d.buffer=q.createBuffer();q.bindBuffer(c,d.buffer);q.bufferData(c,d.array,q.STATIC_DRAW)}}function h(a,b,c,d){for(var e in b){var f=b[e],g=c[e];if(0<=f)if(g){var h=g.itemSize;q.bindBuffer(q.ARRAY_BUFFER,g.buffer);p(f);q.vertexAttribPointer(f,h,q.FLOAT,!1,0,d*h*4)}else a.defaultAttributeValues&&(2===a.defaultAttributeValues[e].length?q.vertexAttrib2fv(f,a.defaultAttributeValues[e]):3===a.defaultAttributeValues[e].length&&q.vertexAttrib3fv(f,
a.defaultAttributeValues[e]))}r()}function l(){for(var a=0,b=Pa.length;a<b;a++)Pa[a]=0}function p(a){Pa[a]=1;0===sb[a]&&(q.enableVertexAttribArray(a),sb[a]=1)}function r(){for(var a=0,b=sb.length;a<b;a++)sb[a]!==Pa[a]&&(q.disableVertexAttribArray(a),sb[a]=0)}function n(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function u(a,b){return a.z!==b.z?a.z-b.z:a.id-b.id}function w(a,b){return b[0]-a[0]}function v(a,b,h){if(!1!==b.visible){var l=a.__webglObjects[b.id];if(l&&(!1===b.frustumCulled||!0===lb.intersectsObject(b))){var n=
b.geometry,p,r,s;if(n instanceof THREE.BufferGeometry){var u=q.DYNAMIC_DRAW,x=n.attributes,y,A;for(y in x)A=x[y],A.needsUpdate&&("index"===y?(q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,A.buffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,A.array,u)):(q.bindBuffer(q.ARRAY_BUFFER,A.buffer),q.bufferData(q.ARRAY_BUFFER,A.array,u)),A.needsUpdate=!1)}else if(b instanceof THREE.Mesh){if(n.buffersNeedUpdate||n.groupsNeedUpdate)n instanceof THREE.BufferGeometry?g(n):b instanceof THREE.Mesh&&C(a,b,n);for(var z=0,B=n.geometryGroupsList.length;z<
B;z++)if(p=n.geometryGroupsList[z],s=d(b,p),(n.buffersNeedUpdate||n.groupsNeedUpdate)&&c(p,b),r=s.attributes&&E(s),n.verticesNeedUpdate||n.morphTargetsNeedUpdate||n.elementsNeedUpdate||n.uvsNeedUpdate||n.normalsNeedUpdate||n.colorsNeedUpdate||n.tangentsNeedUpdate||r){var D=p,R=b,I=q.DYNAMIC_DRAW,G=!n.dynamic,J=s;if(D.__inittedArrays){var Q=e(J),W=J.vertexColors?J.vertexColors:!1,K=f(J),P=Q===THREE.SmoothShading,H=void 0,L=void 0,X=void 0,M=void 0,ea=void 0,Z=void 0,sa=void 0,Y=void 0,ja=void 0,ca=
void 0,aa=void 0,T=void 0,V=void 0,U=void 0,ba=void 0,na=void 0,xa=void 0,ha=void 0,da=void 0,ia=void 0,ma=void 0,qa=void 0,ta=void 0,ra=void 0,va=void 0,wa=void 0,Ia=void 0,Aa=void 0,Ba=void 0,oa=void 0,Ja=void 0,Ga=void 0,Ka=void 0,Oa=void 0,za=void 0,ab=void 0,Ha=void 0,Na=void 0,Wa=void 0,Za=void 0,Ma=0,Pa=0,bb=0,gb=0,ib=0,Ab=0,kb=0,$a=0,qb=0,Fa=0,Sa=0,S=0,hb=void 0,Bb=D.__vertexArray,rb=D.__uvArray,sb=D.__uv2Array,db=D.__normalArray,nb=D.__tangentArray,Cb=D.__colorArray,ob=D.__skinIndexArray,
mb=D.__skinWeightArray,wb=D.__morphTargetsArrays,xb=D.__morphNormalsArrays,yb=D.__webglCustomAttributesList,O=void 0,vb=D.__faceArray,Yb=D.__lineArray,cb=R.geometry,Qb=cb.elementsNeedUpdate,Kb=cb.uvsNeedUpdate,Tb=cb.normalsNeedUpdate,Ub=cb.tangentsNeedUpdate,Vb=cb.colorsNeedUpdate,Wb=cb.morphTargetsNeedUpdate,Jb=cb.vertices,ua=D.faces3,zb=cb.faces,Rb=cb.faceVertexUvs[0],Sb=cb.faceVertexUvs[1],Mb=cb.skinIndices,Ib=cb.skinWeights,Lb=cb.morphTargets,Zb=cb.morphNormals;if(cb.verticesNeedUpdate){H=0;for(L=
ua.length;H<L;H++)M=zb[ua[H]],T=Jb[M.a],V=Jb[M.b],U=Jb[M.c],Bb[Pa]=T.x,Bb[Pa+1]=T.y,Bb[Pa+2]=T.z,Bb[Pa+3]=V.x,Bb[Pa+4]=V.y,Bb[Pa+5]=V.z,Bb[Pa+6]=U.x,Bb[Pa+7]=U.y,Bb[Pa+8]=U.z,Pa+=9;q.bindBuffer(q.ARRAY_BUFFER,D.__webglVertexBuffer);q.bufferData(q.ARRAY_BUFFER,Bb,I)}if(Wb)for(za=0,ab=Lb.length;za<ab;za++){H=Sa=0;for(L=ua.length;H<L;H++)Wa=ua[H],M=zb[Wa],T=Lb[za].vertices[M.a],V=Lb[za].vertices[M.b],U=Lb[za].vertices[M.c],Ha=wb[za],Ha[Sa]=T.x,Ha[Sa+1]=T.y,Ha[Sa+2]=T.z,Ha[Sa+3]=V.x,Ha[Sa+4]=V.y,Ha[Sa+
5]=V.z,Ha[Sa+6]=U.x,Ha[Sa+7]=U.y,Ha[Sa+8]=U.z,J.morphNormals&&(P?(Za=Zb[za].vertexNormals[Wa],ha=Za.a,da=Za.b,ia=Za.c):ia=da=ha=Zb[za].faceNormals[Wa],Na=xb[za],Na[Sa]=ha.x,Na[Sa+1]=ha.y,Na[Sa+2]=ha.z,Na[Sa+3]=da.x,Na[Sa+4]=da.y,Na[Sa+5]=da.z,Na[Sa+6]=ia.x,Na[Sa+7]=ia.y,Na[Sa+8]=ia.z),Sa+=9;q.bindBuffer(q.ARRAY_BUFFER,D.__webglMorphTargetsBuffers[za]);q.bufferData(q.ARRAY_BUFFER,wb[za],I);J.morphNormals&&(q.bindBuffer(q.ARRAY_BUFFER,D.__webglMorphNormalsBuffers[za]),q.bufferData(q.ARRAY_BUFFER,xb[za],
I))}if(Ib.length){H=0;for(L=ua.length;H<L;H++)M=zb[ua[H]],ra=Ib[M.a],va=Ib[M.b],wa=Ib[M.c],mb[Fa]=ra.x,mb[Fa+1]=ra.y,mb[Fa+2]=ra.z,mb[Fa+3]=ra.w,mb[Fa+4]=va.x,mb[Fa+5]=va.y,mb[Fa+6]=va.z,mb[Fa+7]=va.w,mb[Fa+8]=wa.x,mb[Fa+9]=wa.y,mb[Fa+10]=wa.z,mb[Fa+11]=wa.w,Ia=Mb[M.a],Aa=Mb[M.b],Ba=Mb[M.c],ob[Fa]=Ia.x,ob[Fa+1]=Ia.y,ob[Fa+2]=Ia.z,ob[Fa+3]=Ia.w,ob[Fa+4]=Aa.x,ob[Fa+5]=Aa.y,ob[Fa+6]=Aa.z,ob[Fa+7]=Aa.w,ob[Fa+8]=Ba.x,ob[Fa+9]=Ba.y,ob[Fa+10]=Ba.z,ob[Fa+11]=Ba.w,Fa+=12;0<Fa&&(q.bindBuffer(q.ARRAY_BUFFER,
D.__webglSkinIndicesBuffer),q.bufferData(q.ARRAY_BUFFER,ob,I),q.bindBuffer(q.ARRAY_BUFFER,D.__webglSkinWeightsBuffer),q.bufferData(q.ARRAY_BUFFER,mb,I))}if(Vb&&W){H=0;for(L=ua.length;H<L;H++)M=zb[ua[H]],sa=M.vertexColors,Y=M.color,3===sa.length&&W===THREE.VertexColors?(ma=sa[0],qa=sa[1],ta=sa[2]):ta=qa=ma=Y,Cb[qb]=ma.r,Cb[qb+1]=ma.g,Cb[qb+2]=ma.b,Cb[qb+3]=qa.r,Cb[qb+4]=qa.g,Cb[qb+5]=qa.b,Cb[qb+6]=ta.r,Cb[qb+7]=ta.g,Cb[qb+8]=ta.b,qb+=9;0<qb&&(q.bindBuffer(q.ARRAY_BUFFER,D.__webglColorBuffer),q.bufferData(q.ARRAY_BUFFER,
Cb,I))}if(Ub&&cb.hasTangents){H=0;for(L=ua.length;H<L;H++)M=zb[ua[H]],ja=M.vertexTangents,ba=ja[0],na=ja[1],xa=ja[2],nb[kb]=ba.x,nb[kb+1]=ba.y,nb[kb+2]=ba.z,nb[kb+3]=ba.w,nb[kb+4]=na.x,nb[kb+5]=na.y,nb[kb+6]=na.z,nb[kb+7]=na.w,nb[kb+8]=xa.x,nb[kb+9]=xa.y,nb[kb+10]=xa.z,nb[kb+11]=xa.w,kb+=12;q.bindBuffer(q.ARRAY_BUFFER,D.__webglTangentBuffer);q.bufferData(q.ARRAY_BUFFER,nb,I)}if(Tb&&Q){H=0;for(L=ua.length;H<L;H++)if(M=zb[ua[H]],ea=M.vertexNormals,Z=M.normal,3===ea.length&&P)for(oa=0;3>oa;oa++)Ga=ea[oa],
db[Ab]=Ga.x,db[Ab+1]=Ga.y,db[Ab+2]=Ga.z,Ab+=3;else for(oa=0;3>oa;oa++)db[Ab]=Z.x,db[Ab+1]=Z.y,db[Ab+2]=Z.z,Ab+=3;q.bindBuffer(q.ARRAY_BUFFER,D.__webglNormalBuffer);q.bufferData(q.ARRAY_BUFFER,db,I)}if(Kb&&Rb&&K){H=0;for(L=ua.length;H<L;H++)if(X=ua[H],ca=Rb[X],void 0!==ca)for(oa=0;3>oa;oa++)Ka=ca[oa],rb[bb]=Ka.x,rb[bb+1]=Ka.y,bb+=2;0<bb&&(q.bindBuffer(q.ARRAY_BUFFER,D.__webglUVBuffer),q.bufferData(q.ARRAY_BUFFER,rb,I))}if(Kb&&Sb&&K){H=0;for(L=ua.length;H<L;H++)if(X=ua[H],aa=Sb[X],void 0!==aa)for(oa=
0;3>oa;oa++)Oa=aa[oa],sb[gb]=Oa.x,sb[gb+1]=Oa.y,gb+=2;0<gb&&(q.bindBuffer(q.ARRAY_BUFFER,D.__webglUV2Buffer),q.bufferData(q.ARRAY_BUFFER,sb,I))}if(Qb){H=0;for(L=ua.length;H<L;H++)vb[ib]=Ma,vb[ib+1]=Ma+1,vb[ib+2]=Ma+2,ib+=3,Yb[$a]=Ma,Yb[$a+1]=Ma+1,Yb[$a+2]=Ma,Yb[$a+3]=Ma+2,Yb[$a+4]=Ma+1,Yb[$a+5]=Ma+2,$a+=6,Ma+=3;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,D.__webglFaceBuffer);q.bufferData(q.ELEMENT_ARRAY_BUFFER,vb,I);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,D.__webglLineBuffer);q.bufferData(q.ELEMENT_ARRAY_BUFFER,
Yb,I)}if(yb)for(oa=0,Ja=yb.length;oa<Ja;oa++)if(O=yb[oa],O.__original.needsUpdate){S=0;if(1===O.size)if(void 0===O.boundTo||"vertices"===O.boundTo)for(H=0,L=ua.length;H<L;H++)M=zb[ua[H]],O.array[S]=O.value[M.a],O.array[S+1]=O.value[M.b],O.array[S+2]=O.value[M.c],S+=3;else{if("faces"===O.boundTo)for(H=0,L=ua.length;H<L;H++)hb=O.value[ua[H]],O.array[S]=hb,O.array[S+1]=hb,O.array[S+2]=hb,S+=3}else if(2===O.size)if(void 0===O.boundTo||"vertices"===O.boundTo)for(H=0,L=ua.length;H<L;H++)M=zb[ua[H]],T=O.value[M.a],
V=O.value[M.b],U=O.value[M.c],O.array[S]=T.x,O.array[S+1]=T.y,O.array[S+2]=V.x,O.array[S+3]=V.y,O.array[S+4]=U.x,O.array[S+5]=U.y,S+=6;else{if("faces"===O.boundTo)for(H=0,L=ua.length;H<L;H++)U=V=T=hb=O.value[ua[H]],O.array[S]=T.x,O.array[S+1]=T.y,O.array[S+2]=V.x,O.array[S+3]=V.y,O.array[S+4]=U.x,O.array[S+5]=U.y,S+=6}else if(3===O.size){var Ea;Ea="c"===O.type?["r","g","b"]:["x","y","z"];if(void 0===O.boundTo||"vertices"===O.boundTo)for(H=0,L=ua.length;H<L;H++)M=zb[ua[H]],T=O.value[M.a],V=O.value[M.b],
U=O.value[M.c],O.array[S]=T[Ea[0]],O.array[S+1]=T[Ea[1]],O.array[S+2]=T[Ea[2]],O.array[S+3]=V[Ea[0]],O.array[S+4]=V[Ea[1]],O.array[S+5]=V[Ea[2]],O.array[S+6]=U[Ea[0]],O.array[S+7]=U[Ea[1]],O.array[S+8]=U[Ea[2]],S+=9;else if("faces"===O.boundTo)for(H=0,L=ua.length;H<L;H++)U=V=T=hb=O.value[ua[H]],O.array[S]=T[Ea[0]],O.array[S+1]=T[Ea[1]],O.array[S+2]=T[Ea[2]],O.array[S+3]=V[Ea[0]],O.array[S+4]=V[Ea[1]],O.array[S+5]=V[Ea[2]],O.array[S+6]=U[Ea[0]],O.array[S+7]=U[Ea[1]],O.array[S+8]=U[Ea[2]],S+=9;else if("faceVertices"===
O.boundTo)for(H=0,L=ua.length;H<L;H++)hb=O.value[ua[H]],T=hb[0],V=hb[1],U=hb[2],O.array[S]=T[Ea[0]],O.array[S+1]=T[Ea[1]],O.array[S+2]=T[Ea[2]],O.array[S+3]=V[Ea[0]],O.array[S+4]=V[Ea[1]],O.array[S+5]=V[Ea[2]],O.array[S+6]=U[Ea[0]],O.array[S+7]=U[Ea[1]],O.array[S+8]=U[Ea[2]],S+=9}else if(4===O.size)if(void 0===O.boundTo||"vertices"===O.boundTo)for(H=0,L=ua.length;H<L;H++)M=zb[ua[H]],T=O.value[M.a],V=O.value[M.b],U=O.value[M.c],O.array[S]=T.x,O.array[S+1]=T.y,O.array[S+2]=T.z,O.array[S+3]=T.w,O.array[S+
4]=V.x,O.array[S+5]=V.y,O.array[S+6]=V.z,O.array[S+7]=V.w,O.array[S+8]=U.x,O.array[S+9]=U.y,O.array[S+10]=U.z,O.array[S+11]=U.w,S+=12;else if("faces"===O.boundTo)for(H=0,L=ua.length;H<L;H++)U=V=T=hb=O.value[ua[H]],O.array[S]=T.x,O.array[S+1]=T.y,O.array[S+2]=T.z,O.array[S+3]=T.w,O.array[S+4]=V.x,O.array[S+5]=V.y,O.array[S+6]=V.z,O.array[S+7]=V.w,O.array[S+8]=U.x,O.array[S+9]=U.y,O.array[S+10]=U.z,O.array[S+11]=U.w,S+=12;else if("faceVertices"===O.boundTo)for(H=0,L=ua.length;H<L;H++)hb=O.value[ua[H]],
T=hb[0],V=hb[1],U=hb[2],O.array[S]=T.x,O.array[S+1]=T.y,O.array[S+2]=T.z,O.array[S+3]=T.w,O.array[S+4]=V.x,O.array[S+5]=V.y,O.array[S+6]=V.z,O.array[S+7]=V.w,O.array[S+8]=U.x,O.array[S+9]=U.y,O.array[S+10]=U.z,O.array[S+11]=U.w,S+=12;q.bindBuffer(q.ARRAY_BUFFER,O.buffer);q.bufferData(q.ARRAY_BUFFER,O.array,I)}G&&(delete D.__inittedArrays,delete D.__colorArray,delete D.__normalArray,delete D.__tangentArray,delete D.__uvArray,delete D.__uv2Array,delete D.__faceArray,delete D.__vertexArray,delete D.__lineArray,
delete D.__skinIndexArray,delete D.__skinWeightArray)}}n.verticesNeedUpdate=!1;n.morphTargetsNeedUpdate=!1;n.elementsNeedUpdate=!1;n.uvsNeedUpdate=!1;n.normalsNeedUpdate=!1;n.colorsNeedUpdate=!1;n.tangentsNeedUpdate=!1;n.buffersNeedUpdate=!1;s.attributes&&F(s)}else if(b instanceof THREE.Line){s=d(b,n);r=s.attributes&&E(s);if(n.verticesNeedUpdate||n.colorsNeedUpdate||n.lineDistancesNeedUpdate||r){var Nb=q.DYNAMIC_DRAW,lc,mc,nc,uc,Da,vc,fc=n.vertices,gc=n.colors,hc=n.lineDistances,pc=fc.length,Vc=gc.length,
Wc=hc.length,yc=n.__vertexArray,zc=n.__colorArray,Nc=n.__lineDistanceArray,dd=n.colorsNeedUpdate,ed=n.lineDistancesNeedUpdate,Fc=n.__webglCustomAttributesList,Ac,Oc,Ua,jc,eb,Ca;if(n.verticesNeedUpdate){for(lc=0;lc<pc;lc++)uc=fc[lc],Da=3*lc,yc[Da]=uc.x,yc[Da+1]=uc.y,yc[Da+2]=uc.z;q.bindBuffer(q.ARRAY_BUFFER,n.__webglVertexBuffer);q.bufferData(q.ARRAY_BUFFER,yc,Nb)}if(dd){for(mc=0;mc<Vc;mc++)vc=gc[mc],Da=3*mc,zc[Da]=vc.r,zc[Da+1]=vc.g,zc[Da+2]=vc.b;q.bindBuffer(q.ARRAY_BUFFER,n.__webglColorBuffer);
q.bufferData(q.ARRAY_BUFFER,zc,Nb)}if(ed){for(nc=0;nc<Wc;nc++)Nc[nc]=hc[nc];q.bindBuffer(q.ARRAY_BUFFER,n.__webglLineDistanceBuffer);q.bufferData(q.ARRAY_BUFFER,Nc,Nb)}if(Fc)for(Ac=0,Oc=Fc.length;Ac<Oc;Ac++)if(Ca=Fc[Ac],Ca.needsUpdate&&(void 0===Ca.boundTo||"vertices"===Ca.boundTo)){Da=0;jc=Ca.value.length;if(1===Ca.size)for(Ua=0;Ua<jc;Ua++)Ca.array[Ua]=Ca.value[Ua];else if(2===Ca.size)for(Ua=0;Ua<jc;Ua++)eb=Ca.value[Ua],Ca.array[Da]=eb.x,Ca.array[Da+1]=eb.y,Da+=2;else if(3===Ca.size)if("c"===Ca.type)for(Ua=
0;Ua<jc;Ua++)eb=Ca.value[Ua],Ca.array[Da]=eb.r,Ca.array[Da+1]=eb.g,Ca.array[Da+2]=eb.b,Da+=3;else for(Ua=0;Ua<jc;Ua++)eb=Ca.value[Ua],Ca.array[Da]=eb.x,Ca.array[Da+1]=eb.y,Ca.array[Da+2]=eb.z,Da+=3;else if(4===Ca.size)for(Ua=0;Ua<jc;Ua++)eb=Ca.value[Ua],Ca.array[Da]=eb.x,Ca.array[Da+1]=eb.y,Ca.array[Da+2]=eb.z,Ca.array[Da+3]=eb.w,Da+=4;q.bindBuffer(q.ARRAY_BUFFER,Ca.buffer);q.bufferData(q.ARRAY_BUFFER,Ca.array,Nb)}}n.verticesNeedUpdate=!1;n.colorsNeedUpdate=!1;n.lineDistancesNeedUpdate=!1;s.attributes&&
F(s)}else if(b instanceof THREE.PointCloud){s=d(b,n);r=s.attributes&&E(s);if(n.verticesNeedUpdate||n.colorsNeedUpdate||b.sortParticles||r){var Gc=q.DYNAMIC_DRAW,fb,Db,Eb,ga,Fb,Xb,Bc=n.vertices,Hc=Bc.length,Ic=n.colors,Pc=Ic.length,bc=n.__vertexArray,cc=n.__colorArray,Ob=n.__sortArray,Qc=n.verticesNeedUpdate,Rc=n.colorsNeedUpdate,Pb=n.__webglCustomAttributesList,tb,kc,pa,ub,ya,fa;if(b.sortParticles){oc.copy(ec);oc.multiply(b.matrixWorld);for(fb=0;fb<Hc;fb++)Eb=Bc[fb],ka.copy(Eb),ka.applyProjection(oc),
Ob[fb]=[ka.z,fb];Ob.sort(w);for(fb=0;fb<Hc;fb++)Eb=Bc[Ob[fb][1]],ga=3*fb,bc[ga]=Eb.x,bc[ga+1]=Eb.y,bc[ga+2]=Eb.z;for(Db=0;Db<Pc;Db++)ga=3*Db,Xb=Ic[Ob[Db][1]],cc[ga]=Xb.r,cc[ga+1]=Xb.g,cc[ga+2]=Xb.b;if(Pb)for(tb=0,kc=Pb.length;tb<kc;tb++)if(fa=Pb[tb],void 0===fa.boundTo||"vertices"===fa.boundTo)if(ga=0,ub=fa.value.length,1===fa.size)for(pa=0;pa<ub;pa++)Fb=Ob[pa][1],fa.array[pa]=fa.value[Fb];else if(2===fa.size)for(pa=0;pa<ub;pa++)Fb=Ob[pa][1],ya=fa.value[Fb],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,ga+=
2;else if(3===fa.size)if("c"===fa.type)for(pa=0;pa<ub;pa++)Fb=Ob[pa][1],ya=fa.value[Fb],fa.array[ga]=ya.r,fa.array[ga+1]=ya.g,fa.array[ga+2]=ya.b,ga+=3;else for(pa=0;pa<ub;pa++)Fb=Ob[pa][1],ya=fa.value[Fb],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,fa.array[ga+2]=ya.z,ga+=3;else if(4===fa.size)for(pa=0;pa<ub;pa++)Fb=Ob[pa][1],ya=fa.value[Fb],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,fa.array[ga+2]=ya.z,fa.array[ga+3]=ya.w,ga+=4}else{if(Qc)for(fb=0;fb<Hc;fb++)Eb=Bc[fb],ga=3*fb,bc[ga]=Eb.x,bc[ga+1]=Eb.y,bc[ga+
2]=Eb.z;if(Rc)for(Db=0;Db<Pc;Db++)Xb=Ic[Db],ga=3*Db,cc[ga]=Xb.r,cc[ga+1]=Xb.g,cc[ga+2]=Xb.b;if(Pb)for(tb=0,kc=Pb.length;tb<kc;tb++)if(fa=Pb[tb],fa.needsUpdate&&(void 0===fa.boundTo||"vertices"===fa.boundTo))if(ub=fa.value.length,ga=0,1===fa.size)for(pa=0;pa<ub;pa++)fa.array[pa]=fa.value[pa];else if(2===fa.size)for(pa=0;pa<ub;pa++)ya=fa.value[pa],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,ga+=2;else if(3===fa.size)if("c"===fa.type)for(pa=0;pa<ub;pa++)ya=fa.value[pa],fa.array[ga]=ya.r,fa.array[ga+1]=ya.g,
fa.array[ga+2]=ya.b,ga+=3;else for(pa=0;pa<ub;pa++)ya=fa.value[pa],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,fa.array[ga+2]=ya.z,ga+=3;else if(4===fa.size)for(pa=0;pa<ub;pa++)ya=fa.value[pa],fa.array[ga]=ya.x,fa.array[ga+1]=ya.y,fa.array[ga+2]=ya.z,fa.array[ga+3]=ya.w,ga+=4}if(Qc||b.sortParticles)q.bindBuffer(q.ARRAY_BUFFER,n.__webglVertexBuffer),q.bufferData(q.ARRAY_BUFFER,bc,Gc);if(Rc||b.sortParticles)q.bindBuffer(q.ARRAY_BUFFER,n.__webglColorBuffer),q.bufferData(q.ARRAY_BUFFER,cc,Gc);if(Pb)for(tb=
0,kc=Pb.length;tb<kc;tb++)if(fa=Pb[tb],fa.needsUpdate||b.sortParticles)q.bindBuffer(q.ARRAY_BUFFER,fa.buffer),q.bufferData(q.ARRAY_BUFFER,fa.array,Gc)}n.verticesNeedUpdate=!1;n.colorsNeedUpdate=!1;s.attributes&&F(s)}for(var dc=0,Jc=l.length;dc<Jc;dc++){var Cc=l[dc],Gb=Cc,Sc=Gb.object,fd=Gb.buffer,gd=Sc.geometry,Hb=Sc.material;Hb instanceof THREE.MeshFaceMaterial?(Hb=Hb.materials[gd instanceof THREE.BufferGeometry?0:fd.materialIndex],Hb.transparent?(Gb.material=Hb,Va.push(Gb)):(Gb.material=Hb,Ra.push(Gb))):
Hb&&(Hb.transparent?(Gb.material=Hb,Va.push(Gb)):(Gb.material=Hb,Ra.push(Gb)));Cc.render=!0;!0===N.sortObjects&&(null!==b.renderDepth?Cc.z=b.renderDepth:(ka.setFromMatrixPosition(b.matrixWorld),ka.applyProjection(ec),Cc.z=ka.z))}}dc=0;for(Jc=b.children.length;dc<Jc;dc++)v(a,b.children[dc],h)}}function x(a,b,c){if(0!==a.length)for(var d=0,e=a.length;d<e;d++)ta=Ia=null,ab=ma=Ga=Ja=qa=Y=va=-1,db=!0,a[d].render(b,c,Jb,Rb),ta=Ia=null,ab=ma=Ga=Ja=qa=Y=va=-1,db=!0}function z(a,b,c,d,e,f){for(var g,h,l,n=
a.length-1;-1!==n;n--){g=a[n];h=g.object;l=g.buffer;L(h,b);if(f)g=f;else{g=g.material;if(!g)continue;e&&N.setBlending(g.blending,g.blendEquation,g.blendSrc,g.blendDst);N.setDepthTest(g.depthTest);N.setDepthWrite(g.depthWrite);W(g.polygonOffset,g.polygonOffsetFactor,g.polygonOffsetUnits)}N.setMaterialFaces(g);l instanceof THREE.BufferGeometry?N.renderBufferDirect(b,c,d,g,l,h):N.renderBuffer(b,c,d,g,l,h)}}function y(a,b,c,d,e,f,g){for(var h,l,n=0,q=a.length;n<q;n++)if(h=a[n],l=h.object,l.visible){if(g)h=
g;else{h=h[b];if(!h)continue;f&&N.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst);N.setDepthTest(h.depthTest);N.setDepthWrite(h.depthWrite);W(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}N.renderImmediateObject(c,d,e,h,l)}}function A(a){var b=a.object.material;b.transparent?(a.transparent=b,a.opaque=null):(a.opaque=b,a.transparent=null)}function C(a,b,d){var e,f=!1;e=b.material;if(void 0===d.geometryGroups||d.groupsNeedUpdate)delete a.__webglObjects[b.id],d.makeGroups(e instanceof
THREE.MeshFaceMaterial,Kb?4294967296:65535),d.groupsNeedUpdate=!1;for(var g=0,h=d.geometryGroupsList.length;g<h;g++){e=d.geometryGroupsList[g];if(e.__webglVertexBuffer)f=!1;else{f=e;f.__webglVertexBuffer=q.createBuffer();f.__webglNormalBuffer=q.createBuffer();f.__webglTangentBuffer=q.createBuffer();f.__webglColorBuffer=q.createBuffer();f.__webglUVBuffer=q.createBuffer();f.__webglUV2Buffer=q.createBuffer();f.__webglSkinIndicesBuffer=q.createBuffer();f.__webglSkinWeightsBuffer=q.createBuffer();f.__webglFaceBuffer=
q.createBuffer();f.__webglLineBuffer=q.createBuffer();var l=void 0,n=void 0;if(f.numMorphTargets)for(f.__webglMorphTargetsBuffers=[],l=0,n=f.numMorphTargets;l<n;l++)f.__webglMorphTargetsBuffers.push(q.createBuffer());if(f.numMorphNormals)for(f.__webglMorphNormalsBuffers=[],l=0,n=f.numMorphNormals;l<n;l++)f.__webglMorphNormalsBuffers.push(q.createBuffer());N.info.memory.geometries++;c(e,b);d.verticesNeedUpdate=!0;d.morphTargetsNeedUpdate=!0;d.elementsNeedUpdate=!0;d.uvsNeedUpdate=!0;d.normalsNeedUpdate=
!0;d.tangentsNeedUpdate=!0;f=d.colorsNeedUpdate=!0}(f||void 0===b.__webglActive)&&B(a.__webglObjects,e,b)}b.__webglActive=!0}function B(a,b,c){var d=c.id;a[d]=a[d]||[];a[d].push({id:d,buffer:b,object:c,material:null,z:0})}function E(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function F(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function I(a,b){if(a instanceof THREE.Mesh||a instanceof THREE.PointCloud||a instanceof THREE.Line)delete b.__webglObjects[a.id];
else if(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)for(var c=b.__webglObjectsImmediate,d=c.length-1;0<=d;d--)c[d].object===a&&c.splice(d,1);delete a.__webglActive}function D(a,b,c,d,e){za=0;d.needsUpdate&&(d.program&&Vb(d),N.initMaterial(d,b,c,e),d.needsUpdate=!1);d.morphTargets&&!e.__webglMorphTargetInfluences&&(e.__webglMorphTargetInfluences=new Float32Array(N.maxMorphTargets));var f=!1,g=!1,h=!1,l=d.program,n=l.uniforms,p=d.__webglShader.uniforms;l.id!==Ia&&(q.useProgram(l.program),
Ia=l.id,h=g=f=!0);d.id!==ab&&(-1===ab&&(h=!0),ab=d.id,g=!0);if(f||a!==ta)q.uniformMatrix4fv(n.projectionMatrix,!1,a.projectionMatrix.elements),ja&&q.uniform1f(n.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==ta&&(ta=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==n.cameraPosition&&(ka.setFromMatrixPosition(a.matrixWorld),q.uniform3f(n.cameraPosition,ka.x,ka.y,ka.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof
THREE.ShaderMaterial||d.skinning)&&null!==n.viewMatrix&&q.uniformMatrix4fv(n.viewMatrix,!1,a.matrixWorldInverse.elements);d.skinning&&(e.bindMatrix&&null!==n.bindMatrix&&q.uniformMatrix4fv(n.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&null!==n.bindMatrixInverse&&q.uniformMatrix4fv(n.bindMatrixInverse,!1,e.bindMatrixInverse.elements),bb&&e.skeleton&&e.skeleton.useVertexTexture?(null!==n.boneTexture&&(f=P(),q.uniform1i(n.boneTexture,f),N.setTexture(e.skeleton.boneTexture,f)),null!==n.boneTextureWidth&&
q.uniform1i(n.boneTextureWidth,e.skeleton.boneTextureWidth),null!==n.boneTextureHeight&&q.uniform1i(n.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&null!==n.boneGlobalMatrices&&q.uniformMatrix4fv(n.boneGlobalMatrices,!1,e.skeleton.boneMatrices));if(g){c&&d.fog&&(p.fogColor.value=c.color,c instanceof THREE.Fog?(p.fogNear.value=c.near,p.fogFar.value=c.far):c instanceof THREE.FogExp2&&(p.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof
THREE.MeshLambertMaterial||d.lights){if(db){var h=!0,r,s=f=0,u=0,v,w,x,y=Ba,A=y.directional.colors,z=y.directional.positions,B=y.point.colors,C=y.point.positions,D=y.point.distances,E=y.spot.colors,R=y.spot.positions,F=y.spot.distances,I=y.spot.directions,H=y.spot.anglesCos,J=y.spot.exponents,L=y.hemi.skyColors,W=y.hemi.groundColors,K=y.hemi.positions,T=0,V=0,U=0,sa=0,Z=0,Y=0,ca=0,ba=0,na=r=0;c=x=na=0;for(g=b.length;c<g;c++)r=b[c],r.onlyShadow||(v=r.color,w=r.intensity,x=r.distance,r instanceof THREE.AmbientLight?
r.visible&&(N.gammaInput?(f+=v.r*v.r,s+=v.g*v.g,u+=v.b*v.b):(f+=v.r,s+=v.g,u+=v.b)):r instanceof THREE.DirectionalLight?(Z+=1,r.visible&&(ia.setFromMatrixPosition(r.matrixWorld),ka.setFromMatrixPosition(r.target.matrixWorld),ia.sub(ka),ia.normalize(),r=3*T,z[r]=ia.x,z[r+1]=ia.y,z[r+2]=ia.z,N.gammaInput?ea(A,r,v,w*w):M(A,r,v,w),T+=1)):r instanceof THREE.PointLight?(Y+=1,r.visible&&(na=3*V,N.gammaInput?ea(B,na,v,w*w):M(B,na,v,w),ka.setFromMatrixPosition(r.matrixWorld),C[na]=ka.x,C[na+1]=ka.y,C[na+2]=
ka.z,D[V]=x,V+=1)):r instanceof THREE.SpotLight?(ca+=1,r.visible&&(na=3*U,N.gammaInput?ea(E,na,v,w*w):M(E,na,v,w),ka.setFromMatrixPosition(r.matrixWorld),R[na]=ka.x,R[na+1]=ka.y,R[na+2]=ka.z,F[U]=x,ia.copy(ka),ka.setFromMatrixPosition(r.target.matrixWorld),ia.sub(ka),ia.normalize(),I[na]=ia.x,I[na+1]=ia.y,I[na+2]=ia.z,H[U]=Math.cos(r.angle),J[U]=r.exponent,U+=1)):r instanceof THREE.HemisphereLight&&(ba+=1,r.visible&&(ia.setFromMatrixPosition(r.matrixWorld),ia.normalize(),x=3*sa,K[x]=ia.x,K[x+1]=ia.y,
K[x+2]=ia.z,v=r.color,r=r.groundColor,N.gammaInput?(w*=w,ea(L,x,v,w),ea(W,x,r,w)):(M(L,x,v,w),M(W,x,r,w)),sa+=1)));c=3*T;for(g=Math.max(A.length,3*Z);c<g;c++)A[c]=0;c=3*V;for(g=Math.max(B.length,3*Y);c<g;c++)B[c]=0;c=3*U;for(g=Math.max(E.length,3*ca);c<g;c++)E[c]=0;c=3*sa;for(g=Math.max(L.length,3*ba);c<g;c++)L[c]=0;c=3*sa;for(g=Math.max(W.length,3*ba);c<g;c++)W[c]=0;y.directional.length=T;y.point.length=V;y.spot.length=U;y.hemi.length=sa;y.ambient[0]=f;y.ambient[1]=s;y.ambient[2]=u;db=!1}h?(h=Ba,
p.ambientLightColor.value=h.ambient,p.directionalLightColor.value=h.directional.colors,p.directionalLightDirection.value=h.directional.positions,p.pointLightColor.value=h.point.colors,p.pointLightPosition.value=h.point.positions,p.pointLightDistance.value=h.point.distances,p.spotLightColor.value=h.spot.colors,p.spotLightPosition.value=h.spot.positions,p.spotLightDistance.value=h.spot.distances,p.spotLightDirection.value=h.spot.directions,p.spotLightAngleCos.value=h.spot.anglesCos,p.spotLightExponent.value=
h.spot.exponents,p.hemisphereLightSkyColor.value=h.hemi.skyColors,p.hemisphereLightGroundColor.value=h.hemi.groundColors,p.hemisphereLightDirection.value=h.hemi.positions,G(p,!0)):G(p,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){p.opacity.value=d.opacity;N.gammaInput?p.diffuse.value.copyGammaToLinear(d.color):p.diffuse.value=d.color;p.map.value=d.map;p.lightMap.value=d.lightMap;p.specularMap.value=d.specularMap;p.alphaMap.value=
d.alphaMap;d.bumpMap&&(p.bumpMap.value=d.bumpMap,p.bumpScale.value=d.bumpScale);d.normalMap&&(p.normalMap.value=d.normalMap,p.normalScale.value.copy(d.normalScale));var da;d.map?da=d.map:d.specularMap?da=d.specularMap:d.normalMap?da=d.normalMap:d.bumpMap?da=d.bumpMap:d.alphaMap&&(da=d.alphaMap);void 0!==da&&(h=da.offset,da=da.repeat,p.offsetRepeat.value.set(h.x,h.y,da.x,da.y));p.envMap.value=d.envMap;p.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;p.reflectivity.value=d.reflectivity;
p.refractionRatio.value=d.refractionRatio;p.combine.value=d.combine;p.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(p.diffuse.value=d.color,p.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(p.diffuse.value=d.color,p.opacity.value=d.opacity,p.dashSize.value=d.dashSize,p.totalSize.value=d.dashSize+d.gapSize,p.scale.value=d.scale):d instanceof THREE.PointCloudMaterial?(p.psColor.value=d.color,p.opacity.value=d.opacity,
p.size.value=d.size,p.scale.value=aa.height/2,p.map.value=d.map):d instanceof THREE.MeshPhongMaterial?(p.shininess.value=d.shininess,N.gammaInput?(p.ambient.value.copyGammaToLinear(d.ambient),p.emissive.value.copyGammaToLinear(d.emissive),p.specular.value.copyGammaToLinear(d.specular)):(p.ambient.value=d.ambient,p.emissive.value=d.emissive,p.specular.value=d.specular),d.wrapAround&&p.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?(N.gammaInput?(p.ambient.value.copyGammaToLinear(d.ambient),
p.emissive.value.copyGammaToLinear(d.emissive)):(p.ambient.value=d.ambient,p.emissive.value=d.emissive),d.wrapAround&&p.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(p.mNear.value=a.near,p.mFar.value=a.far,p.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(p.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&p.shadowMatrix)for(da=a=0,h=b.length;da<h;da++)c=b[da],c.castShadow&&(c instanceof THREE.SpotLight||c instanceof THREE.DirectionalLight&&!c.shadowCascade)&&
(p.shadowMap.value[a]=c.shadowMap,p.shadowMapSize.value[a]=c.shadowMapSize,p.shadowMatrix.value[a]=c.shadowMatrix,p.shadowDarkness.value[a]=c.shadowDarkness,p.shadowBias.value[a]=c.shadowBias,a++);b=d.uniformsList;d=0;for(p=b.length;d<p;d++)if(a=b[d][0],!1!==a.needsUpdate)switch(c=a.type,h=a.value,da=b[d][1],c){case "1i":q.uniform1i(da,h);break;case "1f":q.uniform1f(da,h);break;case "2f":q.uniform2f(da,h[0],h[1]);break;case "3f":q.uniform3f(da,h[0],h[1],h[2]);break;case "4f":q.uniform4f(da,h[0],h[1],
h[2],h[3]);break;case "1iv":q.uniform1iv(da,h);break;case "3iv":q.uniform3iv(da,h);break;case "1fv":q.uniform1fv(da,h);break;case "2fv":q.uniform2fv(da,h);break;case "3fv":q.uniform3fv(da,h);break;case "4fv":q.uniform4fv(da,h);break;case "Matrix3fv":q.uniformMatrix3fv(da,!1,h);break;case "Matrix4fv":q.uniformMatrix4fv(da,!1,h);break;case "i":q.uniform1i(da,h);break;case "f":q.uniform1f(da,h);break;case "v2":q.uniform2f(da,h.x,h.y);break;case "v3":q.uniform3f(da,h.x,h.y,h.z);break;case "v4":q.uniform4f(da,
h.x,h.y,h.z,h.w);break;case "c":q.uniform3f(da,h.r,h.g,h.b);break;case "iv1":q.uniform1iv(da,h);break;case "iv":q.uniform3iv(da,h);break;case "fv1":q.uniform1fv(da,h);break;case "fv":q.uniform3fv(da,h);break;case "v2v":void 0===a._array&&(a._array=new Float32Array(2*h.length));c=0;for(g=h.length;c<g;c++)f=2*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y;q.uniform2fv(da,a._array);break;case "v3v":void 0===a._array&&(a._array=new Float32Array(3*h.length));c=0;for(g=h.length;c<g;c++)f=3*c,a._array[f]=h[c].x,
a._array[f+1]=h[c].y,a._array[f+2]=h[c].z;q.uniform3fv(da,a._array);break;case "v4v":void 0===a._array&&(a._array=new Float32Array(4*h.length));c=0;for(g=h.length;c<g;c++)f=4*c,a._array[f]=h[c].x,a._array[f+1]=h[c].y,a._array[f+2]=h[c].z,a._array[f+3]=h[c].w;q.uniform4fv(da,a._array);break;case "m3":q.uniformMatrix3fv(da,!1,h.elements);break;case "m3v":void 0===a._array&&(a._array=new Float32Array(9*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,9*c);q.uniformMatrix3fv(da,
!1,a._array);break;case "m4":q.uniformMatrix4fv(da,!1,h.elements);break;case "m4v":void 0===a._array&&(a._array=new Float32Array(16*h.length));c=0;for(g=h.length;c<g;c++)h[c].flattenToArrayOffset(a._array,16*c);q.uniformMatrix4fv(da,!1,a._array);break;case "t":f=h;h=P();q.uniform1i(da,h);if(!f)continue;if(f instanceof THREE.CubeTexture||f.image instanceof Array&&6===f.image.length){if(a=f,da=h,6===a.image.length)if(a.needsUpdate){a.image.__webglTextureCube||(a.addEventListener("dispose",ib),a.image.__webglTextureCube=
q.createTexture(),N.info.memory.textures++);q.activeTexture(q.TEXTURE0+da);q.bindTexture(q.TEXTURE_CUBE_MAP,a.image.__webglTextureCube);q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,a.flipY);da=a instanceof THREE.CompressedTexture;h=[];for(c=0;6>c;c++)N.autoScaleCubemaps&&!da?(g=c,f=a.image[c],u=gc,f.width<=u&&f.height<=u||(y=Math.max(f.width,f.height),s=Math.floor(f.width*u/y),u=Math.floor(f.height*u/y),y=document.createElement("canvas"),y.width=s,y.height=u,y.getContext("2d").drawImage(f,0,0,f.width,f.height,
0,0,s,u),f=y),h[g]=f):h[c]=a.image[c];c=h[0];g=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height);f=X(a.format);s=X(a.type);Q(q.TEXTURE_CUBE_MAP,a,g);for(c=0;6>c;c++)if(da)for(y=h[c].mipmaps,A=0,z=y.length;A<z;A++)u=y[A],a.format!==THREE.RGBAFormat?q.compressedTexImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_X+c,A,f,u.width,u.height,0,u.data):q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_X+c,A,f,u.width,u.height,0,f,s,u.data);else q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,f,f,s,h[c]);a.generateMipmaps&&
g&&q.generateMipmap(q.TEXTURE_CUBE_MAP);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else q.activeTexture(q.TEXTURE0+da),q.bindTexture(q.TEXTURE_CUBE_MAP,a.image.__webglTextureCube)}else f instanceof THREE.WebGLRenderTargetCube?(a=f,q.activeTexture(q.TEXTURE0+h),q.bindTexture(q.TEXTURE_CUBE_MAP,a.__webglTexture)):N.setTexture(f,h);break;case "tv":void 0===a._array&&(a._array=[]);c=0;for(g=a.value.length;c<g;c++)a._array[c]=P();q.uniform1iv(da,a._array);c=0;for(g=a.value.length;c<g;c++)f=a.value[c],
h=a._array[c],f&&N.setTexture(f,h);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+c)}}q.uniformMatrix4fv(n.modelViewMatrix,!1,e._modelViewMatrix.elements);n.normalMatrix&&q.uniformMatrix3fv(n.normalMatrix,!1,e._normalMatrix.elements);null!==n.modelMatrix&&q.uniformMatrix4fv(n.modelMatrix,!1,e.matrixWorld.elements);return l}function G(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=
b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function P(){var a=za;a>=Ib&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+
Ib);za+=1;return a}function L(a,b){a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld);a._normalMatrix.getNormalMatrix(a._modelViewMatrix)}function ea(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function M(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function R(a){a!==oa&&(q.lineWidth(a),oa=a)}function W(a,b,c){Za!==a&&(a?q.enable(q.POLYGON_OFFSET_FILL):q.disable(q.POLYGON_OFFSET_FILL),Za=a);!a||gb===b&&Ka===c||(q.polygonOffset(b,c),gb=b,Ka=c)}function Q(a,b,c){c?
(q.texParameteri(a,q.TEXTURE_WRAP_S,X(b.wrapS)),q.texParameteri(a,q.TEXTURE_WRAP_T,X(b.wrapT)),q.texParameteri(a,q.TEXTURE_MAG_FILTER,X(b.magFilter)),q.texParameteri(a,q.TEXTURE_MIN_FILTER,X(b.minFilter))):(q.texParameteri(a,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(a,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(a,q.TEXTURE_MAG_FILTER,Z(b.magFilter)),q.texParameteri(a,q.TEXTURE_MIN_FILTER,Z(b.minFilter)));Ma&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(q.texParameterf(a,
Ma.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Sb)),b.__oldAnisotropy=b.anisotropy)}function J(a,b){q.bindRenderbuffer(q.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(q.renderbufferStorage(q.RENDERBUFFER,q.DEPTH_COMPONENT16,b.width,b.height),q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(q.renderbufferStorage(q.RENDERBUFFER,q.DEPTH_STENCIL,b.width,b.height),q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_STENCIL_ATTACHMENT,q.RENDERBUFFER,
a)):q.renderbufferStorage(q.RENDERBUFFER,q.RGBA4,b.width,b.height)}function H(a){a instanceof THREE.WebGLRenderTargetCube?(q.bindTexture(q.TEXTURE_CUBE_MAP,a.__webglTexture),q.generateMipmap(q.TEXTURE_CUBE_MAP),q.bindTexture(q.TEXTURE_CUBE_MAP,null)):(q.bindTexture(q.TEXTURE_2D,a.__webglTexture),q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null))}function Z(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?q.NEAREST:q.LINEAR}
function X(a){if(a===THREE.RepeatWrapping)return q.REPEAT;if(a===THREE.ClampToEdgeWrapping)return q.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return q.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return q.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return q.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return q.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return q.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return q.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return q.LINEAR_MIPMAP_LINEAR;
if(a===THREE.UnsignedByteType)return q.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return q.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return q.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return q.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return q.BYTE;if(a===THREE.ShortType)return q.SHORT;if(a===THREE.UnsignedShortType)return q.UNSIGNED_SHORT;if(a===THREE.IntType)return q.INT;if(a===THREE.UnsignedIntType)return q.UNSIGNED_INT;if(a===THREE.FloatType)return q.FLOAT;
if(a===THREE.AlphaFormat)return q.ALPHA;if(a===THREE.RGBFormat)return q.RGB;if(a===THREE.RGBAFormat)return q.RGBA;if(a===THREE.LuminanceFormat)return q.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return q.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return q.FUNC_ADD;if(a===THREE.SubtractEquation)return q.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return q.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return q.ZERO;if(a===THREE.OneFactor)return q.ONE;if(a===THREE.SrcColorFactor)return q.SRC_COLOR;
if(a===THREE.OneMinusSrcColorFactor)return q.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return q.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return q.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return q.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return q.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return q.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return q.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return q.SRC_ALPHA_SATURATE;if(void 0!==Wa){if(a===THREE.RGB_S3TC_DXT1_Format)return Wa.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT1_Format)return Wa.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Wa.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Wa.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var aa=void 0!==a.canvas?a.canvas:document.createElement("canvas"),ha=void 0!==a.context?a.context:null,T=void 0!==a.precision?a.precision:"highp",K=void 0!==a.alpha?a.alpha:!1,wa=void 0!==a.depth?a.depth:!0,V=
void 0!==a.stencil?a.stencil:!0,U=void 0!==a.antialias?a.antialias:!1,sa=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,na=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,ja=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,ca=new THREE.Color(0),s=0,Ra=[],Va=[];this.domElement=aa;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.sortObjects=this.autoClearStencil=this.autoClearDepth=
this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var N=this,xa=[],Ia=null,Na=
null,ab=-1,ma=null,ta=null,za=0,Ja=-1,Ga=-1,va=-1,Aa=-1,Oa=-1,ba=-1,Y=-1,qa=-1,Za=null,gb=null,Ka=null,oa=null,ra=0,Ha=0,rb=aa.width,Qb=aa.height,Jb=0,Rb=0,Pa=new Uint8Array(16),sb=new Uint8Array(16),lb=new THREE.Frustum,ec=new THREE.Matrix4,oc=new THREE.Matrix4,ka=new THREE.Vector3,ia=new THREE.Vector3,db=!0,Ba={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],
exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},q,wb,xb,Ma,Wa,Kb;(function(){try{var a={alpha:K,depth:wa,stencil:V,antialias:U,premultipliedAlpha:sa,preserveDrawingBuffer:na};q=ha||aa.getContext("webgl",a)||aa.getContext("experimental-webgl",a);if(null===q)throw"Error creating WebGL context.";}catch(b){console.error(b)}wb=q.getExtension("OES_texture_float");q.getExtension("OES_texture_float_linear");xb=q.getExtension("OES_standard_derivatives");Ma=q.getExtension("EXT_texture_filter_anisotropic")||
q.getExtension("MOZ_EXT_texture_filter_anisotropic")||q.getExtension("WEBKIT_EXT_texture_filter_anisotropic");Wa=q.getExtension("WEBGL_compressed_texture_s3tc")||q.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||q.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Kb=q.getExtension("OES_element_index_uint");null===wb&&console.log("THREE.WebGLRenderer: Float textures not supported.");null===xb&&console.log("THREE.WebGLRenderer: Standard derivatives not supported.");null===Ma&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
null===Wa&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");null===Kb&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported.");void 0===q.getShaderPrecisionFormat&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});ja&&q.getExtension("EXT_frag_depth")})();q.clearColor(0,0,0,1);q.clearDepth(1);q.clearStencil(0);q.enable(q.DEPTH_TEST);q.depthFunc(q.LEQUAL);q.frontFace(q.CCW);q.cullFace(q.BACK);q.enable(q.CULL_FACE);
q.enable(q.BLEND);q.blendEquation(q.FUNC_ADD);q.blendFunc(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA);q.viewport(ra,Ha,rb,Qb);q.clearColor(ca.r,ca.g,ca.b,s);this.context=q;var Ib=q.getParameter(q.MAX_TEXTURE_IMAGE_UNITS),fc=q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS);q.getParameter(q.MAX_TEXTURE_SIZE);var gc=q.getParameter(q.MAX_CUBE_MAP_TEXTURE_SIZE),Sb=Ma?q.getParameter(Ma.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,yb=0<fc,bb=yb&&wb;Wa&&q.getParameter(q.COMPRESSED_TEXTURE_FORMATS);var Tb=q.getShaderPrecisionFormat(q.VERTEX_SHADER,
q.HIGH_FLOAT),hc=q.getShaderPrecisionFormat(q.VERTEX_SHADER,q.MEDIUM_FLOAT);q.getShaderPrecisionFormat(q.VERTEX_SHADER,q.LOW_FLOAT);var Lb=q.getShaderPrecisionFormat(q.FRAGMENT_SHADER,q.HIGH_FLOAT),pc=q.getShaderPrecisionFormat(q.FRAGMENT_SHADER,q.MEDIUM_FLOAT);q.getShaderPrecisionFormat(q.FRAGMENT_SHADER,q.LOW_FLOAT);var vb=0<Tb.precision&&0<Lb.precision,$a=0<hc.precision&&0<pc.precision;"highp"!==T||vb||($a?(T="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(T=
"lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")));"mediump"!==T||$a||(T="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));this.getContext=function(){return q};this.supportsVertexTextures=function(){return yb};this.supportsFloatTextures=function(){return wb};this.supportsStandardDerivatives=function(){return xb};this.supportsCompressedTextureS3TC=function(){return Wa};this.getMaxAnisotropy=function(){return Sb};this.getPrecision=
function(){return T};this.setSize=function(a,b,c){aa.width=a*this.devicePixelRatio;aa.height=b*this.devicePixelRatio;!1!==c&&(aa.style.width=a+"px",aa.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){ra=a*this.devicePixelRatio;Ha=b*this.devicePixelRatio;rb=c*this.devicePixelRatio;Qb=d*this.devicePixelRatio;q.viewport(ra,Ha,rb,Qb)};this.setScissor=function(a,b,c,d){q.scissor(a*this.devicePixelRatio,b*this.devicePixelRatio,c*this.devicePixelRatio,d*this.devicePixelRatio)};
this.enableScissorTest=function(a){a?q.enable(q.SCISSOR_TEST):q.disable(q.SCISSOR_TEST)};this.setClearColor=function(a,b){ca.set(a);s=void 0!==b?b:1;q.clearColor(ca.r,ca.g,ca.b,s)};this.setClearColorHex=function(a,b){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return ca};this.getClearAlpha=function(){return s};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=q.COLOR_BUFFER_BIT;
if(void 0===b||b)d|=q.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=q.STENCIL_BUFFER_BIT;q.clear(d)};this.clearColor=function(){q.clear(q.COLOR_BUFFER_BIT)};this.clearDepth=function(){q.clear(q.DEPTH_BUFFER_BIT)};this.clearStencil=function(){q.clear(q.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=
function(a,b){Ia=null;ab=ma=qa=Y=va=-1;db=!0;Ga=Ja=-1;Wb(a);this.shadowMapPlugin.update(a,b)};var Mb=function(a){a=a.target;a.removeEventListener("dispose",Mb);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){a=a.attributes;for(var b in a)void 0!==a[b].buffer&&q.deleteBuffer(a[b].buffer);N.info.memory.geometries--}else if(void 0!==a.geometryGroups){b=0;for(var c=a.geometryGroupsList.length;b<c;b++){var d=a.geometryGroupsList[b];if(void 0!==d.numMorphTargets)for(var e=0,f=d.numMorphTargets;e<
f;e++)q.deleteBuffer(d.__webglMorphTargetsBuffers[e]);if(void 0!==d.numMorphNormals)for(e=0,f=d.numMorphNormals;e<f;e++)q.deleteBuffer(d.__webglMorphNormalsBuffers[e]);Nb(d)}}else Nb(a)},ib=function(a){a=a.target;a.removeEventListener("dispose",ib);a.image&&a.image.__webglTextureCube?q.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,q.deleteTexture(a.__webglTexture));N.info.memory.textures--},Zb=function(a){a=a.target;a.removeEventListener("dispose",Zb);if(a&&a.__webglTexture)if(q.deleteTexture(a.__webglTexture),
a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)q.deleteFramebuffer(a.__webglFramebuffer[b]),q.deleteRenderbuffer(a.__webglRenderbuffer[b]);else q.deleteFramebuffer(a.__webglFramebuffer),q.deleteRenderbuffer(a.__webglRenderbuffer);N.info.memory.textures--},Ub=function(a){a=a.target;a.removeEventListener("dispose",Ub);Vb(a)},Nb=function(a){void 0!==a.__webglVertexBuffer&&q.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&q.deleteBuffer(a.__webglNormalBuffer);void 0!==
a.__webglTangentBuffer&&q.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&q.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&q.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&q.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&q.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&q.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&q.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&
q.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&q.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)q.deleteBuffer(a.__webglCustomAttributesList[b].buffer);N.info.memory.geometries--},Vb=function(a){var b=a.program.program;if(void 0!==b){a.program=void 0;var c,d,e=!1;a=0;for(c=xa.length;a<c;a++)if(d=xa[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=[];a=0;for(c=xa.length;a<
c;a++)d=xa[a],d.program!==b&&e.push(d);xa=e;q.deleteProgram(b);N.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){l();a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=q.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=q.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=q.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=q.createBuffer());a.hasPositions&&(q.bindBuffer(q.ARRAY_BUFFER,a.__webglVertexBuffer),
q.bufferData(q.ARRAY_BUFFER,a.positionArray,q.DYNAMIC_DRAW),p(b.attributes.position),q.vertexAttribPointer(b.attributes.position,3,q.FLOAT,!1,0,0));if(a.hasNormals){q.bindBuffer(q.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var d,e,f,g,h,n,s,u,v,w,x,y=3*a.count;for(x=0;x<y;x+=9)w=a.normalArray,d=w[x],e=w[x+1],f=w[x+2],g=w[x+3],n=w[x+4],u=w[x+5],h=w[x+6],s=w[x+7],v=w[x+8],d=(d+g+h)/3,e=(e+n+s)/3,f=(f+u+v)/3,w[x]=d,w[x+1]=e,w[x+2]=f,w[x+3]=d,w[x+4]=e,w[x+5]=f,w[x+6]=d,w[x+
7]=e,w[x+8]=f}q.bufferData(q.ARRAY_BUFFER,a.normalArray,q.DYNAMIC_DRAW);p(b.attributes.normal);q.vertexAttribPointer(b.attributes.normal,3,q.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(q.bindBuffer(q.ARRAY_BUFFER,a.__webglUvBuffer),q.bufferData(q.ARRAY_BUFFER,a.uvArray,q.DYNAMIC_DRAW),p(b.attributes.uv),q.vertexAttribPointer(b.attributes.uv,2,q.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(q.bindBuffer(q.ARRAY_BUFFER,a.__webglColorBuffer),q.bufferData(q.ARRAY_BUFFER,a.colorArray,q.DYNAMIC_DRAW),
p(b.attributes.color),q.vertexAttribPointer(b.attributes.color,3,q.FLOAT,!1,0,0));r();q.drawArrays(q.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var g=D(a,b,c,d,f);a=g.attributes;b=e.attributes;c=!1;g=16777215*e.id+2*g.id+(d.wireframe?1:0);g!==ma&&(ma=g,c=!0);c&&l();if(f instanceof THREE.Mesh)if(g=b.index){var n,p;g.array instanceof Uint32Array?(n=q.UNSIGNED_INT,p=4):(n=q.UNSIGNED_SHORT,p=2);e=e.offsets;if(0===e.length)c&&(h(d,a,b,0),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,
g.buffer)),q.drawElements(q.TRIANGLES,g.array.length,n,0),N.info.render.calls++,N.info.render.vertices+=g.array.length,N.info.render.faces+=g.array.length/3;else{c=!0;for(var r=0,s=e.length;r<s;r++){var u=e[r].index;c&&(h(d,a,b,u),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,g.buffer));q.drawElements(q.TRIANGLES,e[r].count,n,e[r].start*p);N.info.render.calls++;N.info.render.vertices+=e[r].count;N.info.render.faces+=e[r].count/3}}}else c&&h(d,a,b,0),d=e.attributes.position,q.drawArrays(q.TRIANGLES,0,d.array.length/
3),N.info.render.calls++,N.info.render.vertices+=d.array.length/3,N.info.render.faces+=d.array.length/9;else if(f instanceof THREE.PointCloud)c&&h(d,a,b,0),d=b.position,q.drawArrays(q.POINTS,0,d.array.length/3),N.info.render.calls++,N.info.render.points+=d.array.length/3;else if(f instanceof THREE.Line)if(f=f.type===THREE.LineStrip?q.LINE_STRIP:q.LINES,R(d.linewidth),g=b.index)if(g.array instanceof Uint32Array?(n=q.UNSIGNED_INT,p=4):(n=q.UNSIGNED_SHORT,p=2),e=e.offsets,0===e.length)c&&(h(d,a,b,0),
q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,g.buffer)),q.drawElements(f,g.array.length,n,0),N.info.render.calls++,N.info.render.vertices+=g.array.length;else for(1<e.length&&(c=!0),r=0,s=e.length;r<s;r++)u=e[r].index,c&&(h(d,a,b,u),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,g.buffer)),q.drawElements(f,e[r].count,n,e[r].start*p),N.info.render.calls++,N.info.render.vertices+=e[r].count;else c&&h(d,a,b,0),d=b.position,q.drawArrays(f,0,d.array.length/3),N.info.render.calls++,N.info.render.points+=d.array.length/3}};
this.renderBuffer=function(a,b,c,d,e,f){if(!1!==d.visible){var g,h;c=D(a,b,c,d,f);b=c.attributes;a=!1;c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==ma&&(ma=c,a=!0);a&&l();if(!d.morphTargets&&0<=b.position)a&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglVertexBuffer),p(b.position),q.vertexAttribPointer(b.position,3,q.FLOAT,!1,0,0));else if(f.morphTargetBase){c=d.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(q.bindBuffer(q.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),p(c.position),
q.vertexAttribPointer(c.position,3,q.FLOAT,!1,0,0)):0<=c.position&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglVertexBuffer),p(c.position),q.vertexAttribPointer(c.position,3,q.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var n=0;h=f.morphTargetForcedOrder;for(g=f.morphTargetInfluences;n<d.numSupportedMorphTargets&&n<h.length;)0<=c["morphTarget"+n]&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[h[n]]),p(c["morphTarget"+n]),q.vertexAttribPointer(c["morphTarget"+n],3,q.FLOAT,!1,0,0)),0<=
c["morphNormal"+n]&&d.morphNormals&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[h[n]]),p(c["morphNormal"+n]),q.vertexAttribPointer(c["morphNormal"+n],3,q.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[n]=g[h[n]],n++}else{h=[];g=f.morphTargetInfluences;var s,u=g.length;for(s=0;s<u;s++)n=g[s],0<n&&h.push([n,s]);h.length>d.numSupportedMorphTargets?(h.sort(w),h.length=d.numSupportedMorphTargets):h.length>d.numSupportedMorphNormals?h.sort(w):0===h.length&&h.push([0,0]);for(n=0;n<d.numSupportedMorphTargets;)h[n]?
(s=h[n][1],0<=c["morphTarget"+n]&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[s]),p(c["morphTarget"+n]),q.vertexAttribPointer(c["morphTarget"+n],3,q.FLOAT,!1,0,0)),0<=c["morphNormal"+n]&&d.morphNormals&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[s]),p(c["morphNormal"+n]),q.vertexAttribPointer(c["morphNormal"+n],3,q.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[n]=g[s]):f.__webglMorphTargetInfluences[n]=0,n++}null!==d.program.uniforms.morphTargetInfluences&&q.uniform1fv(d.program.uniforms.morphTargetInfluences,
f.__webglMorphTargetInfluences)}if(a){if(e.__webglCustomAttributesList)for(g=0,h=e.__webglCustomAttributesList.length;g<h;g++)c=e.__webglCustomAttributesList[g],0<=b[c.buffer.belongsToAttribute]&&(q.bindBuffer(q.ARRAY_BUFFER,c.buffer),p(b[c.buffer.belongsToAttribute]),q.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,q.FLOAT,!1,0,0));0<=b.color&&(0<f.geometry.colors.length||0<f.geometry.faces.length?(q.bindBuffer(q.ARRAY_BUFFER,e.__webglColorBuffer),p(b.color),q.vertexAttribPointer(b.color,
3,q.FLOAT,!1,0,0)):d.defaultAttributeValues&&q.vertexAttrib3fv(b.color,d.defaultAttributeValues.color));0<=b.normal&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglNormalBuffer),p(b.normal),q.vertexAttribPointer(b.normal,3,q.FLOAT,!1,0,0));0<=b.tangent&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglTangentBuffer),p(b.tangent),q.vertexAttribPointer(b.tangent,4,q.FLOAT,!1,0,0));0<=b.uv&&(f.geometry.faceVertexUvs[0]?(q.bindBuffer(q.ARRAY_BUFFER,e.__webglUVBuffer),p(b.uv),q.vertexAttribPointer(b.uv,2,q.FLOAT,!1,0,0)):
d.defaultAttributeValues&&q.vertexAttrib2fv(b.uv,d.defaultAttributeValues.uv));0<=b.uv2&&(f.geometry.faceVertexUvs[1]?(q.bindBuffer(q.ARRAY_BUFFER,e.__webglUV2Buffer),p(b.uv2),q.vertexAttribPointer(b.uv2,2,q.FLOAT,!1,0,0)):d.defaultAttributeValues&&q.vertexAttrib2fv(b.uv2,d.defaultAttributeValues.uv2));d.skinning&&0<=b.skinIndex&&0<=b.skinWeight&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),p(b.skinIndex),q.vertexAttribPointer(b.skinIndex,4,q.FLOAT,!1,0,0),q.bindBuffer(q.ARRAY_BUFFER,
e.__webglSkinWeightsBuffer),p(b.skinWeight),q.vertexAttribPointer(b.skinWeight,4,q.FLOAT,!1,0,0));0<=b.lineDistance&&(q.bindBuffer(q.ARRAY_BUFFER,e.__webglLineDistanceBuffer),p(b.lineDistance),q.vertexAttribPointer(b.lineDistance,1,q.FLOAT,!1,0,0))}r();f instanceof THREE.Mesh?(f=e.__typeArray===Uint32Array?q.UNSIGNED_INT:q.UNSIGNED_SHORT,d.wireframe?(R(d.wireframeLinewidth),a&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),q.drawElements(q.LINES,e.__webglLineCount,f,0)):(a&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,
e.__webglFaceBuffer),q.drawElements(q.TRIANGLES,e.__webglFaceCount,f,0)),N.info.render.calls++,N.info.render.vertices+=e.__webglFaceCount,N.info.render.faces+=e.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?q.LINE_STRIP:q.LINES,R(d.linewidth),q.drawArrays(f,0,e.__webglLineCount),N.info.render.calls++):f instanceof THREE.PointCloud&&(q.drawArrays(q.POINTS,0,e.__webglParticleCount),N.info.render.calls++,N.info.render.points+=e.__webglParticleCount)}};this.render=function(a,
b,c,d){function e(a){a instanceof THREE.SkinnedMesh&&a.skeleton.update();for(var b=0,c=a.children.length;b<c;b++)e(a.children[b])}if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f,g,h,l,p=a.__lights,q=a.fog;ab=-1;ta=null;db=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();e(a);b.matrixWorldInverse.getInverse(b.matrixWorld);ec.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);
lb.setFromMatrix(ec);Wb(a);Ra.length=0;Va.length=0;v(a,a,b);!0===N.sortObjects&&(Ra.sort(n),Va.sort(u));x(this.renderPluginsPre,a,b);N.info.render.calls=0;N.info.render.vertices=0;N.info.render.faces=0;N.info.render.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);l=a.__webglObjectsImmediate;d=0;for(f=l.length;d<f;d++)g=l[d],h=g.object,h.visible&&(L(h,b),A(g));a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,
d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),W(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),z(Ra,b,p,q,!0,d),z(Va,b,p,q,!0,d),y(a.__webglObjectsImmediate,"",b,p,q,!1,d)):(d=null,this.setBlending(THREE.NoBlending),z(Ra,b,p,q,!1,d),y(a.__webglObjectsImmediate,"opaque",b,p,q,!1,d),z(Va,b,p,q,!0,d),y(a.__webglObjectsImmediate,"transparent",b,p,q,!0,d));x(this.renderPluginsPost,a,b);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&
c.minFilter!==THREE.LinearFilter&&H(c);this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,b,c,d,e){var f=D(a,b,c,d,e);ma=-1;N.setMaterialFaces(d);e.immediateRenderCallback?e.immediateRenderCallback(f,q,lb):e.render(function(a){N.renderBufferImmediate(a,f,d)})};var Wb=function(a){a.__webglObjects||(a.__webglObjects={},a.__webglObjectsImmediate=[]);for(;a.__objectsAdded.length;){var c=a.__objectsAdded[0],d=a,e=void 0,f=void 0;void 0===c.__webglInit&&(c.__webglInit=
!0,c._modelViewMatrix=new THREE.Matrix4,c._normalMatrix=new THREE.Matrix3);e=c.geometry;if(void 0!==e&&void 0===e.__webglInit)if(e.__webglInit=!0,e.addEventListener("dispose",Mb),e instanceof THREE.BufferGeometry)g(e);else if(c instanceof THREE.Mesh)void 0!==c.__webglActive&&I(c,d),C(d,c,e);else if(c instanceof THREE.Line){if(!e.__webglVertexBuffer){f=e;f.__webglVertexBuffer=q.createBuffer();f.__webglColorBuffer=q.createBuffer();f.__webglLineDistanceBuffer=q.createBuffer();N.info.memory.geometries++;
var f=e,h=c,l=f.vertices.length;f.__vertexArray=new Float32Array(3*l);f.__colorArray=new Float32Array(3*l);f.__lineDistanceArray=new Float32Array(1*l);f.__webglLineCount=l;b(f,h);e.verticesNeedUpdate=!0;e.colorsNeedUpdate=!0;e.lineDistancesNeedUpdate=!0}}else c instanceof THREE.PointCloud&&!e.__webglVertexBuffer&&(f=e,f.__webglVertexBuffer=q.createBuffer(),f.__webglColorBuffer=q.createBuffer(),N.info.memory.geometries++,f=e,h=c,l=f.vertices.length,f.__vertexArray=new Float32Array(3*l),f.__colorArray=
new Float32Array(3*l),f.__sortArray=[],f.__webglParticleCount=l,b(f,h),e.verticesNeedUpdate=!0,e.colorsNeedUpdate=!0);if(void 0===c.__webglActive){if(c instanceof THREE.Mesh)if(e=c.geometry,e instanceof THREE.BufferGeometry)B(d.__webglObjects,e,c);else{if(e instanceof THREE.Geometry)for(h=0,l=e.geometryGroupsList.length;h<l;h++)f=e.geometryGroupsList[h],B(d.__webglObjects,f,c)}else c instanceof THREE.Line||c instanceof THREE.PointCloud?(e=c.geometry,B(d.__webglObjects,e,c)):(c instanceof THREE.ImmediateRenderObject||
c.immediateRenderCallback)&&d.__webglObjectsImmediate.push({id:null,object:c,opaque:null,transparent:null,z:0});c.__webglActive=!0}a.__objectsAdded.splice(0,1)}for(;a.__objectsRemoved.length;)I(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1)};this.initMaterial=function(a,b,c,d){var e,f,g,h;a.addEventListener("dispose",Ub);var l,n,p,r;a instanceof THREE.MeshDepthMaterial?r="depth":a instanceof THREE.MeshNormalMaterial?r="normal":a instanceof THREE.MeshBasicMaterial?r="basic":a instanceof THREE.MeshLambertMaterial?
r="lambert":a instanceof THREE.MeshPhongMaterial?r="phong":a instanceof THREE.LineBasicMaterial?r="basic":a instanceof THREE.LineDashedMaterial?r="dashed":a instanceof THREE.PointCloudMaterial&&(r="particle_basic");r?(e=THREE.ShaderLib[r],a.__webglShader={uniforms:THREE.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}):a.__webglShader={uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader};p=h=g=f=e=0;for(var s=b.length;p<s;p++){var u=
b[p];u.onlyShadow||!1===u.visible||(u instanceof THREE.DirectionalLight&&e++,u instanceof THREE.PointLight&&f++,u instanceof THREE.SpotLight&&g++,u instanceof THREE.HemisphereLight&&h++)}s=p=0;for(u=b.length;s<u;s++){var v=b[s];v.castShadow&&(v instanceof THREE.SpotLight&&p++,v instanceof THREE.DirectionalLight&&!v.shadowCascade&&p++)}b=p;bb&&d&&d.skeleton&&d.skeleton.useVertexTexture?p=1024:(p=q.getParameter(q.MAX_VERTEX_UNIFORM_VECTORS),p=Math.floor((p-20)/4),void 0!==d&&d instanceof THREE.SkinnedMesh&&
(p=Math.min(d.skeleton.bones.length,p),p<d.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+d.skeleton.bones.length+", this GPU supports just "+p+" (try OpenGL instead of ANGLE)")));c={precision:T,supportsVertexTextures:yb,map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,
logarithmicDepthBuffer:ja,skinning:a.skinning,maxBones:p,useVertexTexture:bb&&d&&d.skeleton&&d.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:e,maxPointLights:f,maxSpotLights:g,maxHemiLights:h,maxShadows:b,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow&&0<b,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,
metal:a.metal,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide};d=[];r?d.push(r):(d.push(a.fragmentShader),d.push(a.vertexShader));for(var w in a.defines)d.push(w),d.push(a.defines[w]);for(n in c)d.push(n),d.push(c[n]);r=d.join();var x;n=0;for(w=xa.length;n<w;n++)if(d=xa[n],d.code===r){x=d;x.usedTimes++;break}void 0===x&&(x=new THREE.WebGLProgram(this,r,a,c),xa.push(x),N.info.memory.programs=xa.length);a.program=x;x=a.program.attributes;if(a.morphTargets)for(a.numSupportedMorphTargets=
0,w="morphTarget",n=0;n<this.maxMorphTargets;n++)r=w+n,0<=x[r]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(a.numSupportedMorphNormals=0,w="morphNormal",n=0;n<this.maxMorphNormals;n++)r=w+n,0<=x[r]&&a.numSupportedMorphNormals++;a.uniformsList=[];for(l in a.__webglShader.uniforms)(n=a.program.uniforms[l])&&a.uniformsList.push([a.__webglShader.uniforms[l],n])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?q.disable(q.CULL_FACE):(b===THREE.FrontFaceDirectionCW?q.frontFace(q.CW):q.frontFace(q.CCW),
a===THREE.CullFaceBack?q.cullFace(q.BACK):a===THREE.CullFaceFront?q.cullFace(q.FRONT):q.cullFace(q.FRONT_AND_BACK),q.enable(q.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;Ja!==b&&(b?q.disable(q.CULL_FACE):q.enable(q.CULL_FACE),Ja=b);Ga!==a&&(a?q.frontFace(q.CW):q.frontFace(q.CCW),Ga=a)};this.setDepthTest=function(a){Y!==a&&(a?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),Y=a)};this.setDepthWrite=function(a){qa!==a&&(q.depthMask(a),qa=a)};
this.setBlending=function(a,b,c,d){a!==va&&(a===THREE.NoBlending?q.disable(q.BLEND):a===THREE.AdditiveBlending?(q.enable(q.BLEND),q.blendEquation(q.FUNC_ADD),q.blendFunc(q.SRC_ALPHA,q.ONE)):a===THREE.SubtractiveBlending?(q.enable(q.BLEND),q.blendEquation(q.FUNC_ADD),q.blendFunc(q.ZERO,q.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(q.enable(q.BLEND),q.blendEquation(q.FUNC_ADD),q.blendFunc(q.ZERO,q.SRC_COLOR)):a===THREE.CustomBlending?q.enable(q.BLEND):(q.enable(q.BLEND),q.blendEquationSeparate(q.FUNC_ADD,
q.FUNC_ADD),q.blendFuncSeparate(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA,q.ONE,q.ONE_MINUS_SRC_ALPHA)),va=a);if(a===THREE.CustomBlending){if(b!==Aa&&(q.blendEquation(X(b)),Aa=b),c!==Oa||d!==ba)q.blendFunc(X(c),X(d)),Oa=c,ba=d}else ba=Oa=Aa=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",ib),a.__webglTexture=q.createTexture(),N.info.memory.textures++);q.activeTexture(q.TEXTURE0+b);q.bindTexture(q.TEXTURE_2D,a.__webglTexture);q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,
a.flipY);q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);q.pixelStorei(q.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height),e=X(a.format),f=X(a.type);Q(q.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var h=0,l=g.length;h<l;h++)c=g[h],q.texImage2D(q.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else q.texImage2D(q.TEXTURE_2D,0,e,c.width,c.height,0,e,
f,c.data);else if(a instanceof THREE.CompressedTexture)for(h=0,l=g.length;h<l;h++)c=g[h],a.format!==THREE.RGBAFormat?q.compressedTexImage2D(q.TEXTURE_2D,h,e,c.width,c.height,0,c.data):q.texImage2D(q.TEXTURE_2D,h,e,c.width,c.height,0,e,f,c.data);else if(0<g.length&&d){h=0;for(l=g.length;h<l;h++)c=g[h],q.texImage2D(q.TEXTURE_2D,h,e,e,f,c);a.generateMipmaps=!1}else q.texImage2D(q.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&q.generateMipmap(q.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else q.activeTexture(q.TEXTURE0+
b),q.bindTexture(q.TEXTURE_2D,a.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",Zb);a.__webglTexture=q.createTexture();N.info.memory.textures++;var c=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),d=X(a.format),e=X(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];q.bindTexture(q.TEXTURE_CUBE_MAP,
a.__webglTexture);Q(q.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=q.createFramebuffer();a.__webglRenderbuffer[f]=q.createRenderbuffer();q.texImage2D(q.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=q.TEXTURE_CUBE_MAP_POSITIVE_X+f;q.bindFramebuffer(q.FRAMEBUFFER,a.__webglFramebuffer[f]);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,h,g.__webglTexture,0);J(a.__webglRenderbuffer[f],a)}c&&q.generateMipmap(q.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=
q.createFramebuffer(),a.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:q.createRenderbuffer(),q.bindTexture(q.TEXTURE_2D,a.__webglTexture),Q(q.TEXTURE_2D,a,c),q.texImage2D(q.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=q.TEXTURE_2D,q.bindFramebuffer(q.FRAMEBUFFER,a.__webglFramebuffer),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,d,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,
q.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_STENCIL_ATTACHMENT,q.RENDERBUFFER,a.__webglRenderbuffer):J(a.__webglRenderbuffer,a),c&&q.generateMipmap(q.TEXTURE_2D);b?q.bindTexture(q.TEXTURE_CUBE_MAP,null):q.bindTexture(q.TEXTURE_2D,null);q.bindRenderbuffer(q.RENDERBUFFER,null);q.bindFramebuffer(q.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=rb,a=Qb,
d=ra,e=Ha);b!==Na&&(q.bindFramebuffer(q.FRAMEBUFFER,b),q.viewport(d,e,c,a),Na=b);Jb=c;Rb=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){this.width=a;this.height=b},clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;
a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLProgram=function(){var a=0;return function(b,c,d,e){var f=b.context,g=d.defines,h=d.__webglShader.uniforms,l=d.attributes,p=d.__webglShader.vertexShader,r=d.__webglShader.fragmentShader,n=d.index0AttributeName;void 0===n&&!0===e.morphTargets&&(n="position");var u="SHADOWMAP_TYPE_BASIC";e.shadowMapType===THREE.PCFShadowMap?u="SHADOWMAP_TYPE_PCF":e.shadowMapType===THREE.PCFSoftShadowMap&&(u="SHADOWMAP_TYPE_PCF_SOFT");var w,v;w=[];for(var x in g)v=g[x],!1!==v&&(v="#define "+x+" "+v,w.push(v));
w=w.join("\n");g=f.createProgram();d instanceof THREE.RawShaderMaterial?b=d="":(d=["precision "+e.precision+" float;","precision "+e.precision+" int;",w,e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,"#define MAX_BONES "+
e.maxBones,e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.skinning?"#define USE_SKINNING":"",e.useVertexTexture?"#define BONE_TEXTURE":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals?"#define USE_MORPHNORMALS":"",e.wrapAround?"#define WRAP_AROUND":
"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n\tattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n\tattribute vec3 morphTarget0;\n\tattribute vec3 morphTarget1;\n\tattribute vec3 morphTarget2;\n\tattribute vec3 morphTarget3;\n\t#ifdef USE_MORPHNORMALS\n\t\tattribute vec3 morphNormal0;\n\t\tattribute vec3 morphNormal1;\n\t\tattribute vec3 morphNormal2;\n\t\tattribute vec3 morphNormal3;\n\t#else\n\t\tattribute vec3 morphTarget4;\n\t\tattribute vec3 morphTarget5;\n\t\tattribute vec3 morphTarget6;\n\t\tattribute vec3 morphTarget7;\n\t#endif\n#endif\n#ifdef USE_SKINNING\n\tattribute vec4 skinIndex;\n\tattribute vec4 skinWeight;\n#endif\n"].join("\n"),
b=["precision "+e.precision+" float;","precision "+e.precision+" int;",e.bumpMap||e.normalMap?"#extension GL_OES_standard_derivatives : enable":"",w,"#define MAX_DIR_LIGHTS "+e.maxDirLights,"#define MAX_POINT_LIGHTS "+e.maxPointLights,"#define MAX_SPOT_LIGHTS "+e.maxSpotLights,"#define MAX_HEMI_LIGHTS "+e.maxHemiLights,"#define MAX_SHADOWS "+e.maxShadows,e.alphaTest?"#define ALPHATEST "+e.alphaTest:"",b.gammaInput?"#define GAMMA_INPUT":"",b.gammaOutput?"#define GAMMA_OUTPUT":"",e.useFog&&e.fog?"#define USE_FOG":
"",e.useFog&&e.fogExp?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.lightMap?"#define USE_LIGHTMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.vertexColors?"#define USE_COLOR":"",e.metal?"#define METAL":"",e.wrapAround?"#define WRAP_AROUND":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":
"",e.shadowMapEnabled?"#define "+u:"",e.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",e.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"));p=new THREE.WebGLShader(f,f.VERTEX_SHADER,d+p);r=new THREE.WebGLShader(f,f.FRAGMENT_SHADER,b+r);f.attachShader(g,p);f.attachShader(g,r);void 0!==n&&f.bindAttribLocation(g,0,n);f.linkProgram(g);!1===f.getProgramParameter(g,f.LINK_STATUS)&&(console.error("THREE.WebGLProgram: Could not initialise shader."),
console.error("gl.VALIDATE_STATUS",f.getProgramParameter(g,f.VALIDATE_STATUS)),console.error("gl.getError()",f.getError()));""!==f.getProgramInfoLog(g)&&console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f.getProgramInfoLog(g));f.deleteShader(p);f.deleteShader(r);n="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" ");e.useVertexTexture?(n.push("boneTexture"),n.push("boneTextureWidth"),n.push("boneTextureHeight")):
n.push("boneGlobalMatrices");e.logarithmicDepthBuffer&&n.push("logDepthBufFC");for(var z in h)n.push(z);h=n;z={};n=0;for(b=h.length;n<b;n++)u=h[n],z[u]=f.getUniformLocation(g,u);this.uniforms=z;n="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(h=0;h<e.maxMorphTargets;h++)n.push("morphTarget"+h);for(h=0;h<e.maxMorphNormals;h++)n.push("morphNormal"+h);for(var y in l)n.push(y);e=n;l={};y=0;for(h=e.length;y<h;y++)z=e[y],l[z]=f.getAttribLocation(g,z);this.attributes=
l;this.id=a++;this.code=c;this.usedTimes=1;this.program=g;this.vertexShader=p;this.fragmentShader=r;return this}}();
THREE.WebGLShader=function(){var a=function(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")};return function(b,c,d){c=b.createShader(c);b.shaderSource(c,d);b.compileShader(c);!1===b.getShaderParameter(c,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(c)&&(console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",b.getShaderInfoLog(c)),console.warn(a(d)));return c}}();
THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0};THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0};
THREE.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.Texture(void 0,b);e.load(a,function(a){f.image=a;f.needsUpdate=!0;c&&c(f)},void 0,function(a){d&&d(a)});f.sourceFile=a;return f},loadTextureCube:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.CubeTexture([],b);f.flipY=!1;var g=0;b=function(b){e.load(a[b],function(a){f.images[b]=a;g+=1;6===g&&(f.needsUpdate=!0,c&&
c(f))})};d=0;for(var h=a.length;d<h;++d)b(d);return f},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var d=a.width,e=a.height,f=document.createElement("canvas");
f.width=d;f.height=e;var g=f.getContext("2d");g.drawImage(a,0,0);for(var h=g.getImageData(0,0,d,e).data,l=g.createImageData(d,e),p=l.data,r=0;r<d;r++)for(var n=0;n<e;n++){var u=0>n-1?0:n-1,w=n+1>e-1?e-1:n+1,v=0>r-1?0:r-1,x=r+1>d-1?d-1:r+1,z=[],y=[0,0,h[4*(n*d+r)]/255*b];z.push([-1,0,h[4*(n*d+v)]/255*b]);z.push([-1,-1,h[4*(u*d+v)]/255*b]);z.push([0,-1,h[4*(u*d+r)]/255*b]);z.push([1,-1,h[4*(u*d+x)]/255*b]);z.push([1,0,h[4*(n*d+x)]/255*b]);z.push([1,1,h[4*(w*d+x)]/255*b]);z.push([0,1,h[4*(w*d+r)]/255*
b]);z.push([-1,1,h[4*(w*d+v)]/255*b]);u=[];v=z.length;for(w=0;w<v;w++){var x=z[w],A=z[(w+1)%v],x=[x[0]-y[0],x[1]-y[1],x[2]-y[2]],A=[A[0]-y[0],A[1]-y[1],A[2]-y[2]];u.push(c([x[1]*A[2]-x[2]*A[1],x[2]*A[0]-x[0]*A[2],x[0]*A[1]-x[1]*A[0]]))}z=[0,0,0];for(w=0;w<u.length;w++)z[0]+=u[w][0],z[1]+=u[w][1],z[2]+=u[w][2];z[0]/=u.length;z[1]/=u.length;z[2]/=u.length;y=4*(n*d+r);p[y]=(z[0]+1)/2*255|0;p[y+1]=(z[1]+1)/2*255|0;p[y+2]=255*z[2]|0;p[y+3]=255}g.putImageData(l,0,0);return f},generateDataTexture:function(a,
b,c){var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),g=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var h=0;h<d;h++)e[3*h]=f,e[3*h+1]=g,e[3*h+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=
a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,d=0,e=String(a).split(""),f=e.length,g=[];for(a=0;a<f;a++){var h=new THREE.Path,h=this.extractGlyphPoints(e[a],b,c,d,h),d=d+h.offset;g.push(h.path)}return{paths:g,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var f=[],g,h,l,p,r,n,u,w,v,x,z,y=b.glyphs[a]||b.glyphs["?"];if(y){if(y.o)for(b=y._cachedOutline||(y._cachedOutline=y.o.split(" ")),p=b.length,a=0;a<p;)switch(l=b[a++],l){case "m":l=b[a++]*c+d;r=b[a++]*c;e.moveTo(l,r);
break;case "l":l=b[a++]*c+d;r=b[a++]*c;e.lineTo(l,r);break;case "q":l=b[a++]*c+d;r=b[a++]*c;w=b[a++]*c+d;v=b[a++]*c;e.quadraticCurveTo(w,v,l,r);if(g=f[f.length-1])for(n=g.x,u=g.y,g=1,h=this.divisions;g<=h;g++){var A=g/h;THREE.Shape.Utils.b2(A,n,w,l);THREE.Shape.Utils.b2(A,u,v,r)}break;case "b":if(l=b[a++]*c+d,r=b[a++]*c,w=b[a++]*c+d,v=b[a++]*c,x=b[a++]*c+d,z=b[a++]*c,e.bezierCurveTo(w,v,x,z,l,r),g=f[f.length-1])for(n=g.x,u=g.y,g=1,h=this.divisions;g<=h;g++)A=g/h,THREE.Shape.Utils.b3(A,n,w,x,l),THREE.Shape.Utils.b3(A,
u,v,z,r)}return{offset:y.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",f=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=f;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(f=c.length;e<f;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,f=b-1,g=0;g<b;f=g++)e+=a[f].x*a[g].y-a[g].x*a[f].y;return.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var f=[],g=[],h=[],l,p,r;if(0<b(a))for(p=0;p<e;p++)g[p]=p;else for(p=0;p<e;p++)g[p]=e-1-p;var n=2*e;for(p=e-1;2<e;){if(0>=n--){console.log("Warning, unable to triangulate polygon!");break}l=p;e<=l&&(l=0);p=l+1;e<=p&&(p=0);r=p+1;e<=r&&(r=0);var u;a:{var w=u=void 0,v=void 0,x=void 0,z=void 0,y=void 0,A=void 0,C=void 0,B=void 0,
w=a[g[l]].x,v=a[g[l]].y,x=a[g[p]].x,z=a[g[p]].y,y=a[g[r]].x,A=a[g[r]].y;if(1E-10>(x-w)*(A-v)-(z-v)*(y-w))u=!1;else{var E=void 0,F=void 0,I=void 0,D=void 0,G=void 0,P=void 0,L=void 0,ea=void 0,M=void 0,R=void 0,M=ea=L=B=C=void 0,E=y-x,F=A-z,I=w-y,D=v-A,G=x-w,P=z-v;for(u=0;u<e;u++)if(C=a[g[u]].x,B=a[g[u]].y,!(C===w&&B===v||C===x&&B===z||C===y&&B===A)&&(L=C-w,ea=B-v,M=C-x,R=B-z,C-=y,B-=A,M=E*R-F*M,L=G*ea-P*L,ea=I*B-D*C,-1E-10<=M&&-1E-10<=ea&&-1E-10<=L)){u=!1;break a}u=!0}}if(u){f.push([a[g[l]],a[g[p]],
a[g[r]]]);h.push([g[l],g[p],g[r]]);l=p;for(r=p+1;r<e;l++,r++)g[l]=g[r];e--;n=2*e}}return d?h:f};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(a){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};
THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};
THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b};THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};
THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,h=e-1,l;g<=h;)if(d=Math.floor(g+(h-g)/2),l=c[d]-f,0>l)g=d+1;else if(0<l)h=d-1;else{h=d;break}d=h;if(c[d]==f)return d/(e-1);g=c[d];return c=(d+(f-g)/(c[d+1]-g))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};
THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,f,g;b=c=Number.NEGATIVE_INFINITY;e=f=Number.POSITIVE_INFINITY;var h,l,p,r,n=a[0]instanceof THREE.Vector3;r=n?new THREE.Vector3:new THREE.Vector2;l=0;for(p=a.length;l<p;l++)h=a[l],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<f&&(f=h.y),n&&(h.z>d?d=h.z:h.z<g&&(g=h.z)),r.add(h);a={minX:e,minY:f,maxX:b,maxY:c};n&&(a.maxZ=d,a.minZ=g);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,f,g,h,l;d=0;for(e=a.length;d<e;d++)f=a[d],g=f.x,h=f.y,l=g/c.maxX,l=b.getUtoTmapping(l,g),g=b.getPoint(l),l=b.getTangent(l),l.set(-l.y,l.x).multiplyScalar(h),f.x=g.x+l.x,f.y=g.y+l.y;return a};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;
THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};
THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,f=new THREE.QuadraticBezierCurve(new THREE.Vector2(f[f.length-2],f[f.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(f);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,h=new THREE.CubicBezierCurve(new THREE.Vector2(h[h.length-2],h[h.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(h);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:g})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,f){var g=this.actions[this.actions.length-1].args;this.absarc(a+g[g.length-2],b+g[g.length-1],c,d,e,f)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,g){var h=this.actions[this.actions.length-1].args;this.absellipse(a+h[h.length-2],b+h[h.length-1],c,d,e,f,g)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(a,b,c,d,e,f,g);this.curves.push(l);l=l.getPoint(1);h.push(l.x);h.push(l.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:h})};
THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;d<a;d++)c.push(this.getPoint(d/a));return c};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);a=a||12;var c=[],d,e,f,g,h,l,p,r,n,u,w,v,x;d=0;for(e=this.actions.length;d<e;d++)switch(f=this.actions[d],g=f.action,f=f.args,g){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(f[0],f[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:h=f[2];l=f[3];n=f[0];u=f[1];0<c.length?(g=c[c.length-1],w=g.x,
v=g.y):(g=this.actions[d-1].args,w=g[g.length-2],v=g[g.length-1]);for(f=1;f<=a;f++)x=f/a,g=THREE.Shape.Utils.b2(x,w,n,h),x=THREE.Shape.Utils.b2(x,v,u,l),c.push(new THREE.Vector2(g,x));break;case THREE.PathActions.BEZIER_CURVE_TO:h=f[4];l=f[5];n=f[0];u=f[1];p=f[2];r=f[3];0<c.length?(g=c[c.length-1],w=g.x,v=g.y):(g=this.actions[d-1].args,w=g[g.length-2],v=g[g.length-1]);for(f=1;f<=a;f++)x=f/a,g=THREE.Shape.Utils.b3(x,w,n,p,h),x=THREE.Shape.Utils.b3(x,v,u,r,l),c.push(new THREE.Vector2(g,x));break;case THREE.PathActions.CSPLINE_THRU:g=
this.actions[d-1].args;x=[new THREE.Vector2(g[g.length-2],g[g.length-1])];g=a*f[0].length;x=x.concat(f[0]);x=new THREE.SplineCurve(x);for(f=1;f<=g;f++)c.push(x.getPointAt(f/g));break;case THREE.PathActions.ARC:h=f[0];l=f[1];u=f[2];p=f[3];g=f[4];n=!!f[5];w=g-p;v=2*a;for(f=1;f<=v;f++)x=f/v,n||(x=1-x),x=p+x*w,g=h+u*Math.cos(x),x=l+u*Math.sin(x),c.push(new THREE.Vector2(g,x));break;case THREE.PathActions.ELLIPSE:for(h=f[0],l=f[1],u=f[2],r=f[3],p=f[4],g=f[5],n=!!f[6],w=g-p,v=2*a,f=1;f<=v;f++)x=f/v,n||
(x=1-x),x=p+x*w,g=h+u*Math.cos(x),x=l+r*Math.sin(x),c.push(new THREE.Vector2(g,x))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],l=h.x-g.x,n=h.y-g.y;if(1E-10<Math.abs(n)){if(0>n&&(g=b[f],l=-l,h=b[e],n=-n),!(a.y<g.y||a.y>h.y))if(a.y==g.y){if(a.x==g.x)return!0}else{e=n*(a.x-g.x)-l*(a.y-g.y);if(0==e)return!0;0>e||(d=!d)}}else if(a.y==g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=
h.x))return!0}return d}var e=function(a){var b,c,d,e,f=[],g=new THREE.Path;b=0;for(c=a.length;b<c;b++)d=a[b],e=d.args,d=d.action,d==THREE.PathActions.MOVE_TO&&0!=g.actions.length&&(f.push(g),g=new THREE.Path),g[d].apply(g,e);0!=g.actions.length&&f.push(g);return f}(this.actions);if(0==e.length)return[];if(!0===b)return c(e);var f,g,h,l=[];if(1==e.length)return g=e[0],h=new THREE.Shape,h.actions=g.actions,h.curves=g.curves,l.push(h),l;var p=!THREE.Shape.Utils.isClockWise(e[0].getPoints()),p=a?!p:p;
h=[];var r=[],n=[],u=0,w;r[u]=void 0;n[u]=[];var v,x;v=0;for(x=e.length;v<x;v++)g=e[v],w=g.getPoints(),f=THREE.Shape.Utils.isClockWise(w),(f=a?!f:f)?(!p&&r[u]&&u++,r[u]={s:new THREE.Shape,p:w},r[u].s.actions=g.actions,r[u].s.curves=g.curves,p&&u++,n[u]=[]):n[u].push({h:g,p:w[0]});if(!r[0])return c(e);if(1<r.length){v=!1;x=[];g=0;for(e=r.length;g<e;g++)h[g]=[];g=0;for(e=r.length;g<e;g++)for(f=n[g],p=0;p<f.length;p++){u=f[p];w=!0;for(var z=0;z<r.length;z++)d(u.p,r[z].p)&&(g!=z&&x.push({froms:g,tos:z,
hole:p}),w?(w=!1,h[z].push(u)):v=!0);w&&h[g].push(u)}0<x.length&&(v||(n=h))}v=0;for(x=r.length;v<x;v++)for(h=r[v].s,l.push(h),g=n[v],e=0,f=g.length;e<f;e++)h.holes.push(g[e].h);return l};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};
THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};
THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={triangulateShape:function(a,b){function c(a,b,c){return a.x!=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,h=b.y-a.y,l=e.x-d.x,n=e.y-d.y,p=a.x-d.x,r=a.y-d.y,I=h*l-g*n,D=h*p-g*r;if(1E-10<Math.abs(I)){if(0<I){if(0>D||D>I)return[];l=n*p-l*r;if(0>l||l>I)return[]}else{if(0<D||D<I)return[];l=n*p-l*r;if(0<l||l<I)return[]}if(0==l)return!f||0!=D&&D!=I?[a]:[];if(l==I)return!f||0!=D&&D!=I?[b]:[];if(0==D)return[d];
if(D==I)return[e];f=l/I;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!=D||n*p!=l*r)return[];h=0==g&&0==h;l=0==l&&0==n;if(h&&l)return a.x!=d.x||a.y!=d.y?[]:[a];if(h)return c(d,e,a)?[a]:[];if(l)return c(a,b,d)?[d]:[];0!=g?(a.x<b.x?(g=a,l=a.x,h=b,a=b.x):(g=b,l=b.x,h=a,a=a.x),d.x<e.x?(b=d,I=d.x,n=e,d=e.x):(b=e,I=e.x,n=d,d=d.x)):(a.y<b.y?(g=a,l=a.y,h=b,a=b.y):(g=b,l=b.y,h=a,a=a.y),d.y<e.y?(b=d,I=d.y,n=e,d=e.y):(b=e,I=e.y,n=d,d=d.y));return l<=I?a<I?[]:a==I?f?[]:[b]:a<=d?[b,h]:[b,n]:l>d?[]:l==d?f?[]:[g]:a<=d?[g,h]:
[g,n]}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return 1E-10<Math.abs(a)?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var f,g,h,l,p,r={};h=a.concat();f=0;for(g=b.length;f<g;f++)Array.prototype.push.apply(h,b[f]);f=0;for(g=h.length;f<g;f++)p=h[f].x+":"+h[f].y,void 0!==r[p]&&console.log("Duplicate point",p),r[p]=f;f=function(a,b){function c(a,b){var d=h.length-1,f=a-1;0>f&&(f=d);var g=a+1;g>d&&(g=0);d=e(h[a],h[f],h[g],l[b]);if(!d)return!1;
d=l.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return(d=e(l[b],l[f],l[g],h[a]))?!0:!1}function f(a,b){var c,e;for(c=0;c<h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function g(a,c){var e,f,h,l;for(e=0;e<n.length;e++)for(f=b[n[e]],h=0;h<f.length;h++)if(l=h+1,l%=f.length,l=d(a,c,f[h],f[l],!0),0<l.length)return!0;return!1}var h=a.concat(),l,n=[],p,r,F,I,D,G=[],P,L,ea,M=0;for(p=b.length;M<p;M++)n.push(M);P=0;for(var R=2*n.length;0<n.length;){R--;if(0>R){console.log("Infinite Loop! Holes left:"+
n.length+", Probably Hole outside Shape!");break}for(r=P;r<h.length;r++){F=h[r];p=-1;for(M=0;M<n.length;M++)if(I=n[M],D=F.x+":"+F.y+":"+I,void 0===G[D]){l=b[I];for(L=0;L<l.length;L++)if(I=l[L],c(r,L)&&!f(F,I)&&!g(F,I)){p=L;n.splice(M,1);P=h.slice(0,r+1);I=h.slice(r);L=l.slice(p);ea=l.slice(0,p+1);h=P.concat(L).concat(ea).concat(I);P=r;break}if(0<=p)break;G[D]=!0}if(0<=p)break}}return h}(a,b);var n=THREE.FontUtils.Triangulate(f,!1);f=0;for(g=n.length;f<g;f++)for(l=n[f],h=0;3>h;h++)p=l[h].x+":"+l[h].y,
p=r[p],void 0!==p&&(l[h]=p);return n.concat()},isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,
b)+this.b3p1(a,c)+this.b3p2(a,d)+this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};
THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(a){var b=new THREE.Vector2,c=[],d=this.points,e;e=(d.length-1)*a;a=Math.floor(e);e-=a;c[0]=0==a?a:a-1;c[1]=a;c[2]=a>d.length-2?d.length-1:a+1;c[3]=a>d.length-3?d.length-1:a+2;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);return b};
THREE.EllipseCurve=function(a,b,c,d,e,f,g){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.getPoint=function(a){var b;b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);b=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(a,b)};THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);
THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b,c;b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);a=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,c,a)});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b,c;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);a=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,c,a)});
THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;a*=d.length-1;e=Math.floor(a);a-=e;c[0]=0==e?e:e-1;c[1]=e;c[2]=e>d.length-2?d.length-1:e+1;c[3]=e>d.length-3?d.length-1:e+2;e=d[c[0]];var f=d[c[1]],g=d[c[2]],c=d[c[3]];b.x=THREE.Curve.Utils.interpolate(e.x,f.x,g.x,c.x,a);b.y=THREE.Curve.Utils.interpolate(e.y,f.y,g.y,c.y,a);b.z=THREE.Curve.Utils.interpolate(e.z,f.z,g.z,c.z,a);return b});
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=new THREE.Vector3,c=[],d=this.points,e;e=(d.length-0)*a;a=Math.floor(e);e-=a;a+=0<a?0:(Math.floor(Math.abs(a)/d.length)+1)*d.length;c[0]=(a-1)%d.length;c[1]=a%d.length;c[2]=(a+1)%d.length;c[3]=(a+2)%d.length;b.x=THREE.Curve.Utils.interpolate(d[c[0]].x,d[c[1]].x,d[c[2]].x,d[c[3]].x,e);b.y=THREE.Curve.Utils.interpolate(d[c[0]].y,d[c[1]].y,d[c[2]].y,d[c[3]].y,e);b.z=THREE.Curve.Utils.interpolate(d[c[0]].z,
d[c[1]].z,d[c[2]].z,d[c[3]].z,e);return b});
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(a){if(!0!==a.initialized){for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=
0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var d=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(d)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){d={};for(c=0;c<a.hierarchy[b].keys.length;c++)for(var e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++){var f=a.hierarchy[b].keys[c].morphTargets[e];d[f]=-1}a.hierarchy[b].usedMorphTargets=d;for(c=0;c<a.hierarchy[b].keys.length;c++){var g=
{};for(f in d){for(e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++)if(a.hierarchy[b].keys[c].morphTargets[e]===f){g[f]=a.hierarchy[b].keys[c].morphTargetsInfluences[e];break}e===a.hierarchy[b].keys[c].morphTargets.length&&(g[f]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=g}}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=
!0;return a}},parse:function(a){var b=function(a,c){c.push(a);for(var d=0;d<a.children.length;d++)b(a.children[d],c)},c=[];if(a instanceof THREE.SkinnedMesh)for(var d=0;d<a.skeleton.bones.length;d++)c.push(a.skeleton.bones[d]);else b(a,c);return c},play:function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)},stop:function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)},update:function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)}};
THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.keyTypes=["pos","rot","scl"];THREE.Animation.prototype.play=function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)};
THREE.Animation.prototype.stop=function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)};
THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0;void 0===c.animationCache&&(c.animationCache={});void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].originalMatrix=c.matrix);for(var c=c.animationCache[this.data.name],d=0;3>d;d++){for(var e=
this.keyTypes[d],f=this.data.hierarchy[a].keys[0],g=this.getNextKeyWith(e,a,1);g.time<this.currentTime&&g.index>f.index;)f=g,g=this.getNextKeyWith(e,a,g.index+1);c.prevKey[e]=f;c.nextKey[e]=g}}};
THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Quaternion,e=function(a,b){var c=[],d=[],e,n,u,w,v,x;e=(a.length-1)*b;n=Math.floor(e);e-=n;c[0]=0===n?n:n-1;c[1]=n;c[2]=n>a.length-2?n:n+1;c[3]=n>a.length-3?n:n+2;n=a[c[0]];w=a[c[1]];v=a[c[2]];x=a[c[3]];c=e*e;u=e*c;d[0]=f(n[0],w[0],v[0],x[0],e,c,u);d[1]=f(n[1],w[1],v[1],x[1],e,c,u);d[2]=f(n[2],w[2],v[2],x[2],e,c,u);return d},f=function(a,b,c,d,e,f,u){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*u+
(-3*(b-c)-2*a-d)*f+a*e+b};return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,0!==this.weight)){f=this.data.length;if(!0===this.loop&&this.currentTime>f)this.currentTime%=f,this.reset();else if(!1===this.loop&&this.currentTime>f){this.stop();return}f=0;for(var h=this.hierarchy.length;f<h;f++)for(var l=this.hierarchy[f],p=l.animationCache[this.data.name],r=0;3>r;r++){var n=this.keyTypes[r],u=p.prevKey[n],w=p.nextKey[n];if(w.time<=this.currentTime){u=this.data.hierarchy[f].keys[0];
for(w=this.getNextKeyWith(n,f,1);w.time<this.currentTime&&w.index>u.index;)u=w,w=this.getNextKeyWith(n,f,w.index+1);p.prevKey[n]=u;p.nextKey[n]=w}l.matrixAutoUpdate=!0;l.matrixWorldNeedsUpdate=!0;var v=(this.currentTime-u.time)/(w.time-u.time),x=u[n],z=w[n];0>v&&(v=0);1<v&&(v=1);if("pos"===n)if(this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=x[0]+(z[0]-x[0])*v,c.y=x[1]+(z[1]-x[1])*v,c.z=x[2]+(z[2]-x[2])*v,l instanceof THREE.Bone?(u=this.weight/(this.weight+l.accumulatedPosWeight),l.position.lerp(c,
u),l.accumulatedPosWeight+=this.weight):l.position.copy(c);else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",f,u.index-1).pos,a[1]=x,a[2]=z,a[3]=this.getNextKeyWith("pos",f,w.index+1).pos,v=.33*v+.33,w=e(a,v),u=1,l instanceof THREE.Bone&&(u=this.weight/(this.weight+l.accumulatedPosWeight),l.accumulatedPosWeight+=this.weight),n=l.position,n.x+=(w[0]-n.x)*u,n.y+=(w[1]-n.y)*u,n.z+=(w[2]-
n.z)*u,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(v=e(a,1.01*v),b.set(v[0],v[1],v[2]),b.sub(n),b.y=0,b.normalize(),v=Math.atan2(b.x,b.z),l.rotation.set(0,v,0))}else"rot"===n?(THREE.Quaternion.slerp(x,z,d,v),l instanceof THREE.Bone?0===l.accumulatedRotWeight?(l.quaternion.copy(d),l.accumulatedRotWeight=this.weight):(u=this.weight/(this.weight+l.accumulatedRotWeight),THREE.Quaternion.slerp(l.quaternion,d,l.quaternion,u),l.accumulatedRotWeight+=this.weight):l.quaternion.copy(d)):
"scl"===n&&(c.x=x[0]+(z[0]-x[0])*v,c.y=x[1]+(z[1]-x[1])*v,c.z=x[2]+(z[2]-x[2])*v,l instanceof THREE.Bone?(u=this.weight/(this.weight+l.accumulatedSclWeight),l.scale.lerp(c,u),l.accumulatedSclWeight+=this.weight):l.scale.copy(c))}return!0}}}();
THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]};
THREE.KeyFrameAnimation=function(a){this.root=a.node;this.data=THREE.AnimationHandler.init(a);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=!1;this.loop=this.isPaused=!0;a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var f=c[e],g=this.getNextKeyWith(f,a,0);g&&g.apply(f)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,d;for(a=0;a<b;a++)c=this.hierarchy[a],d=this.data.hierarchy[a],void 0===d.animationCache&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=c.matrix),c=this.data.hierarchy[a].keys,c.length&&(d.animationCache.prevKey=c[0],d.animationCache.nextKey=c[1],this.startTime=Math.min(c[0].time,
this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;d.copy(b.matrix);b.matrix=d;delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(!1!==this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],d=this.data.hierarchy[a],e=d.keys,d=d.animationCache;if(e.length){var f=d.prevKey,g=d.nextKey;if(g.time<=this.currentTime){for(;g.time<this.currentTime&&g.index>f.index;)f=g,g=e[f.index+1];d.prevKey=
f;d.nextKey=g}g.time>=this.currentTime?f.interpolate(g,this.currentTime):f.interpolate(g,g.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};
THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};THREE.MorphAnimation=function(a){this.mesh=a;this.frames=a.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var a=0,b=0;return function(c){if(!1!==this.isPlaying){this.currentTime+=c;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);c=this.duration/this.frames;var d=Math.floor(this.currentTime/c);d!=b&&(this.mesh.morphTargetInfluences[a]=0,this.mesh.morphTargetInfluences[b]=1,this.mesh.morphTargetInfluences[d]=
0,a=b,b=d);this.mesh.morphTargetInfluences[d]=this.currentTime%c/c;this.mesh.morphTargetInfluences[a]=1-this.mesh.morphTargetInfluences[d]}}}()};
THREE.BoxGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,x){var z,y=h.widthSegments,A=h.heightSegments,C=e/2,B=f/2,E=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)z="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)z="y",A=h.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)z="x",y=h.depthSegments;var F=y+1,I=A+1,D=e/y,G=f/A,P=new THREE.Vector3;P[z]=0<g?1:-1;for(e=0;e<I;e++)for(f=0;f<F;f++){var L=new THREE.Vector3;L[a]=(f*D-C)*c;L[b]=(e*G-B)*d;L[z]=g;h.vertices.push(L)}for(e=
0;e<A;e++)for(f=0;f<y;f++)B=f+F*e,a=f+F*(e+1),b=f+1+F*(e+1),c=f+1+F*e,d=new THREE.Vector2(f/y,1-e/A),g=new THREE.Vector2(f/y,1-(e+1)/A),z=new THREE.Vector2((f+1)/y,1-(e+1)/A),C=new THREE.Vector2((f+1)/y,1-e/A),B=new THREE.Face3(B+E,a+E,c+E),B.normal.copy(P),B.vertexNormals.push(P.clone(),P.clone(),P.clone()),B.materialIndex=x,h.faces.push(B),h.faceVertexUvs[0].push([d,g,C]),B=new THREE.Face3(a+E,b+E,c+E),B.normal.copy(P),B.vertexNormals.push(P.clone(),P.clone(),P.clone()),B.materialIndex=x,h.faces.push(B),
h.faceVertexUvs[0].push([g.clone(),z,C.clone()])}THREE.Geometry.call(this);this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=f||1;var h=this;d=a/2;e=b/2;f=c/2;g("z","y",-1,-1,c,b,d,0);g("z","y",1,-1,c,b,-d,1);g("x","z",1,1,a,c,e,2);g("x","z",1,-1,a,c,-e,3);g("x","y",1,-1,a,b,f,4);g("x","y",-1,-1,a,b,-f,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e,f=[];e=new THREE.Vector3;var g=new THREE.Vector2(.5,.5);this.vertices.push(e);f.push(g);for(e=0;e<=b;e++){var h=new THREE.Vector3,l=c+e/b*d;h.x=a*Math.cos(l);h.y=a*Math.sin(l);this.vertices.push(h);f.push(new THREE.Vector2((h.x/a+1)/2,(h.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(e=1;e<=
b;e++)this.faces.push(new THREE.Face3(e,e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),g.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,b,c,d,e,f){console.warn("THEE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new THREE.BoxGeometry(a,b,c,d,e,f)};
THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;f=void 0!==f?f:!1;var g=c/2,h,l,p=[],r=[];for(l=0;l<=e;l++){var n=[],u=[],w=l/e,v=w*(b-a)+a;for(h=0;h<=d;h++){var x=h/d,z=new THREE.Vector3;z.x=v*Math.sin(x*Math.PI*2);z.y=-w*c+g;z.z=v*Math.cos(x*Math.PI*2);this.vertices.push(z);n.push(this.vertices.length-1);u.push(new THREE.Vector2(x,
1-w))}p.push(n);r.push(u)}c=(b-a)/c;for(h=0;h<d;h++)for(0!==a?(n=this.vertices[p[0][h]].clone(),u=this.vertices[p[0][h+1]].clone()):(n=this.vertices[p[1][h]].clone(),u=this.vertices[p[1][h+1]].clone()),n.setY(Math.sqrt(n.x*n.x+n.z*n.z)*c).normalize(),u.setY(Math.sqrt(u.x*u.x+u.z*u.z)*c).normalize(),l=0;l<e;l++){var w=p[l][h],v=p[l+1][h],x=p[l+1][h+1],z=p[l][h+1],y=n.clone(),A=n.clone(),C=u.clone(),B=u.clone(),E=r[l][h].clone(),F=r[l+1][h].clone(),I=r[l+1][h+1].clone(),D=r[l][h+1].clone();this.faces.push(new THREE.Face3(w,
v,z,[y,A,B]));this.faceVertexUvs[0].push([E,F,D]);this.faces.push(new THREE.Face3(v,x,z,[A.clone(),C,B.clone()]));this.faceVertexUvs[0].push([F.clone(),I,D.clone()])}if(!1===f&&0<a)for(this.vertices.push(new THREE.Vector3(0,g,0)),h=0;h<d;h++)w=p[0][h],v=p[0][h+1],x=this.vertices.length-1,y=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,1,0),C=new THREE.Vector3(0,1,0),E=r[0][h].clone(),F=r[0][h+1].clone(),I=new THREE.Vector2(F.x,0),this.faces.push(new THREE.Face3(w,v,x,[y,A,C])),this.faceVertexUvs[0].push([E,
F,I]);if(!1===f&&0<b)for(this.vertices.push(new THREE.Vector3(0,-g,0)),h=0;h<d;h++)w=p[l][h+1],v=p[l][h],x=this.vertices.length-1,y=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),C=new THREE.Vector3(0,-1,0),E=r[l][h+1].clone(),F=r[l][h].clone(),I=new THREE.Vector2(F.x,1),this.faces.push(new THREE.Face3(w,v,x,[y,A,C])),this.faceVertexUvs[0].push([E,F,I]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.log("die");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=THREE.Math.sign,e=1,e=a.x-b.x,f=a.y-b.y,g=c.x-a.x,h=c.y-a.y,l=e*e+f*f;if(1E-10<Math.abs(e*h-f*g)){var n=Math.sqrt(l),d=Math.sqrt(g*g+h*h),l=b.x-f/n;b=b.y+e/n;g=((c.x-h/d-l)*h-(c.y+g/d-b)*g)/(e*h-f*g);c=l+e*g-a.x;a=b+f*g-a.y;e=c*c+a*a;if(2>=e)return new THREE.Vector2(c,a);e=Math.sqrt(e/2)}else a=!1,1E-10<e?1E-10<g&&(a=!0):-1E-10>e?-1E-10>g&&
(a=!0):d(f)==d(h)&&(a=!0),a?(c=-f,a=e,e=Math.sqrt(l)):(c=e,a=f,e=Math.sqrt(l/2));return new THREE.Vector2(c/e,a/e)}function e(c,d){var e,f;for(K=c.length;0<=--K;){e=K;f=K-1;0>f&&(f=c.length-1);for(var g=0,h=w+2*r,g=0;g<h;g++){var l=aa*g,n=aa*(g+1),p=d+e+l,l=d+f+l,v=d+f+n,n=d+e+n,u=c,x=g,y=h,z=e,B=f,p=p+ea,l=l+ea,v=v+ea,n=n+ea;L.faces.push(new THREE.Face3(p,l,n,null,null,A));L.faces.push(new THREE.Face3(l,v,n,null,null,A));p=C.generateSideWallUV(L,a,u,b,p,l,v,n,x,y,z,B);L.faceVertexUvs[0].push([p[0],
p[1],p[3]]);L.faceVertexUvs[0].push([p[1],p[2],p[3]])}}}function f(a,b,c){L.vertices.push(new THREE.Vector3(a,b,c))}function g(c,d,e,f){c+=ea;d+=ea;e+=ea;L.faces.push(new THREE.Face3(c,d,e,null,null,y));c=f?C.generateBottomUV(L,a,b,c,d,e):C.generateTopUV(L,a,b,c,d,e);L.faceVertexUvs[0].push(c)}var h=void 0!==b.amount?b.amount:100,l=void 0!==b.bevelThickness?b.bevelThickness:6,p=void 0!==b.bevelSize?b.bevelSize:l-2,r=void 0!==b.bevelSegments?b.bevelSegments:3,n=void 0!==b.bevelEnabled?b.bevelEnabled:
!0,u=void 0!==b.curveSegments?b.curveSegments:12,w=void 0!==b.steps?b.steps:1,v=b.extrudePath,x,z=!1,y=b.material,A=b.extrudeMaterial,C=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,B,E,F,I;v&&(x=v.getSpacedPoints(w),z=!0,n=!1,B=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(v,w,!1),E=new THREE.Vector3,F=new THREE.Vector3,I=new THREE.Vector3);n||(p=l=r=0);var D,G,P,L=this,ea=this.vertices.length,v=a.extractPoints(u),u=v.shape,M=v.holes;if(v=!THREE.Shape.Utils.isClockWise(u)){u=
u.reverse();G=0;for(P=M.length;G<P;G++)D=M[G],THREE.Shape.Utils.isClockWise(D)&&(M[G]=D.reverse());v=!1}var R=THREE.Shape.Utils.triangulateShape(u,M),W=u;G=0;for(P=M.length;G<P;G++)D=M[G],u=u.concat(D);var Q,J,H,Z,X,aa=u.length,ha,T=R.length,v=[],K=0;H=W.length;Q=H-1;for(J=K+1;K<H;K++,Q++,J++)Q===H&&(Q=0),J===H&&(J=0),v[K]=d(W[K],W[Q],W[J]);var wa=[],V,U=v.concat();G=0;for(P=M.length;G<P;G++){D=M[G];V=[];K=0;H=D.length;Q=H-1;for(J=K+1;K<H;K++,Q++,J++)Q===H&&(Q=0),J===H&&(J=0),V[K]=d(D[K],D[Q],D[J]);
wa.push(V);U=U.concat(V)}for(Q=0;Q<r;Q++){H=Q/r;Z=l*(1-H);J=p*Math.sin(H*Math.PI/2);K=0;for(H=W.length;K<H;K++)X=c(W[K],v[K],J),f(X.x,X.y,-Z);G=0;for(P=M.length;G<P;G++)for(D=M[G],V=wa[G],K=0,H=D.length;K<H;K++)X=c(D[K],V[K],J),f(X.x,X.y,-Z)}J=p;for(K=0;K<aa;K++)X=n?c(u[K],U[K],J):u[K],z?(F.copy(B.normals[0]).multiplyScalar(X.x),E.copy(B.binormals[0]).multiplyScalar(X.y),I.copy(x[0]).add(F).add(E),f(I.x,I.y,I.z)):f(X.x,X.y,0);for(H=1;H<=w;H++)for(K=0;K<aa;K++)X=n?c(u[K],U[K],J):u[K],z?(F.copy(B.normals[H]).multiplyScalar(X.x),
E.copy(B.binormals[H]).multiplyScalar(X.y),I.copy(x[H]).add(F).add(E),f(I.x,I.y,I.z)):f(X.x,X.y,h/w*H);for(Q=r-1;0<=Q;Q--){H=Q/r;Z=l*(1-H);J=p*Math.sin(H*Math.PI/2);K=0;for(H=W.length;K<H;K++)X=c(W[K],v[K],J),f(X.x,X.y,h+Z);G=0;for(P=M.length;G<P;G++)for(D=M[G],V=wa[G],K=0,H=D.length;K<H;K++)X=c(D[K],V[K],J),z?f(X.x,X.y+x[w-1].y,x[w-1].x+Z):f(X.x,X.y,h+Z)}(function(){if(n){var a;a=0*aa;for(K=0;K<T;K++)ha=R[K],g(ha[2]+a,ha[1]+a,ha[0]+a,!0);a=w+2*r;a*=aa;for(K=0;K<T;K++)ha=R[K],g(ha[0]+a,ha[1]+a,ha[2]+
a,!1)}else{for(K=0;K<T;K++)ha=R[K],g(ha[2],ha[1],ha[0],!0);for(K=0;K<T;K++)ha=R[K],g(ha[0]+aa*w,ha[1]+aa*w,ha[2]+aa*w,!1)}})();(function(){var a=0;e(W,a);a+=W.length;G=0;for(P=M.length;G<P;G++)D=M[G],e(D,a),a+=D.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){b=a.vertices[e].x;e=a.vertices[e].y;c=a.vertices[f].x;f=a.vertices[f].y;return[new THREE.Vector2(a.vertices[d].x,a.vertices[d].y),new THREE.Vector2(b,e),new THREE.Vector2(c,f)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,g,h,l,p,r,n){b=a.vertices[e].x;c=a.vertices[e].y;e=a.vertices[e].z;d=a.vertices[f].x;l=a.vertices[f].y;f=a.vertices[f].z;p=a.vertices[g].x;
r=a.vertices[g].y;g=a.vertices[g].z;n=a.vertices[h].x;var u=a.vertices[h].y;a=a.vertices[h].z;return.01>Math.abs(c-l)?[new THREE.Vector2(b,1-e),new THREE.Vector2(d,1-f),new THREE.Vector2(p,1-g),new THREE.Vector2(n,1-a)]:[new THREE.Vector2(c,1-e),new THREE.Vector2(l,1-f),new THREE.Vector2(r,1-g),new THREE.Vector2(u,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,g,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var l=e.shape,p=e.holes;if(!THREE.Shape.Utils.isClockWise(l))for(l=l.reverse(),e=0,f=p.length;e<f;e++)g=p[e],THREE.Shape.Utils.isClockWise(g)&&(p[e]=g.reverse());var r=THREE.Shape.Utils.triangulateShape(l,p);e=0;for(f=p.length;e<f;e++)g=p[e],
l=l.concat(g);p=l.length;f=r.length;for(e=0;e<p;e++)g=l[e],this.vertices.push(new THREE.Vector3(g.x,g.y,0));for(e=0;e<f;e++)p=r[e],l=p[0]+h,g=p[1]+h,p=p[2]+h,this.faces.push(new THREE.Face3(l,g,p,null,null,c)),this.faceVertexUvs[0].push(d.generateBottomUV(this,a,b,l,g,p))};
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),f=1/b,g=0,h=b;g<=h;g++)for(var l=c+g*f*d,p=Math.cos(l),r=Math.sin(l),l=0,n=a.length;l<n;l++){var u=a[l],w=new THREE.Vector3;w.x=p*u.x-r*u.y;w.y=r*u.x+p*u.y;w.z=u.z;this.vertices.push(w)}c=a.length;g=0;for(h=b;g<h;g++)for(l=0,n=a.length-1;l<n;l++){b=r=l+c*g;d=r+c;var p=r+1+c,r=r+1,u=g*f,w=l*e,v=u+f,x=w+e;this.faces.push(new THREE.Face3(b,d,r));this.faceVertexUvs[0].push([new THREE.Vector2(u,
w),new THREE.Vector2(v,w),new THREE.Vector2(u,x)]);this.faces.push(new THREE.Face3(d,p,r));this.faceVertexUvs[0].push([new THREE.Vector2(v,w),new THREE.Vector2(v,x),new THREE.Vector2(u,x)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=c||1;d=d||1;var g=c+1,h=d+1,l=a/c,p=b/d,r=new THREE.Vector3(0,0,1);for(a=0;a<h;a++){var n=a*p-f;for(b=0;b<g;b++)this.vertices.push(new THREE.Vector3(b*l-e,-n,0))}for(a=0;a<d;a++)for(b=0;b<c;b++){var u=b+g*a,e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,l=new THREE.Vector2(b/c,1-a/d),p=new THREE.Vector2(b/c,1-(a+1)/d),n=new THREE.Vector2((b+1)/c,1-(a+1)/d),w=new THREE.Vector2((b+
1)/c,1-a/d),u=new THREE.Face3(u,e,h);u.normal.copy(r);u.vertexNormals.push(r.clone(),r.clone(),r.clone());this.faces.push(u);this.faceVertexUvs[0].push([l,p,w]);u=new THREE.Face3(e,f,h);u.normal.copy(r);u.vertexNormals.push(r.clone(),r.clone(),r.clone());this.faces.push(u);this.faceVertexUvs[0].push([p.clone(),n,w.clone()])}};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);a=a||0;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var g,h=[],l=a,p=(b-a)/d;for(a=0;a<d+1;a++){for(g=0;g<c+1;g++){var r=new THREE.Vector3,n=e+g/c*f;r.x=l*Math.cos(n);r.y=l*Math.sin(n);this.vertices.push(r);h.push(new THREE.Vector2((r.x/b+1)/2,(r.y/b+1)/2))}l+=p}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++)for(e=a*(c+1),g=0;g<c;g++)f=n=g+e,p=n+c+1,r=n+c+2,this.faces.push(new THREE.Face3(f,
p,r,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[f].clone(),h[p].clone(),h[r].clone()]),f=n,p=n+c+2,r=n+1,this.faces.push(new THREE.Face3(f,p,r,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[f].clone(),h[p].clone(),h[r].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,l)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h,l,p=[],r=[];for(l=0;l<=c;l++){var n=[],u=[];for(h=0;h<=b;h++){var w=h/b,v=l/c,x=new THREE.Vector3;x.x=-a*Math.cos(d+w*e)*Math.sin(f+v*g);x.y=a*Math.cos(f+v*g);x.z=
a*Math.sin(d+w*e)*Math.sin(f+v*g);this.vertices.push(x);n.push(this.vertices.length-1);u.push(new THREE.Vector2(w,1-v))}p.push(n);r.push(u)}for(l=0;l<c;l++)for(h=0;h<b;h++){d=p[l][h+1];e=p[l][h];f=p[l+1][h];g=p[l+1][h+1];var n=this.vertices[d].clone().normalize(),u=this.vertices[e].clone().normalize(),w=this.vertices[f].clone().normalize(),v=this.vertices[g].clone().normalize(),x=r[l][h+1].clone(),z=r[l][h].clone(),y=r[l+1][h].clone(),A=r[l+1][h+1].clone();Math.abs(this.vertices[d].y)===a?(x.x=(x.x+
z.x)/2,this.faces.push(new THREE.Face3(d,f,g,[n,w,v])),this.faceVertexUvs[0].push([x,y,A])):Math.abs(this.vertices[f].y)===a?(y.x=(y.x+A.x)/2,this.faces.push(new THREE.Face3(d,e,f,[n,u,w])),this.faceVertexUvs[0].push([x,z,y])):(this.faces.push(new THREE.Face3(d,e,g,[n,u,v])),this.faceVertexUvs[0].push([x,z,A]),this.faces.push(new THREE.Face3(e,f,g,[u.clone(),w,v.clone()])),this.faceVertexUvs[0].push([z.clone(),y,A.clone()]))}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,
a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var f=new THREE.Vector3,g=[],h=[],l=0;l<=c;l++)for(var p=0;p<=d;p++){var r=p/d*e,n=l/c*Math.PI*2;f.x=a*Math.cos(r);f.y=a*Math.sin(r);var u=new THREE.Vector3;u.x=(a+b*Math.cos(n))*Math.cos(r);u.y=(a+b*Math.cos(n))*Math.sin(r);u.z=b*Math.sin(n);this.vertices.push(u);g.push(new THREE.Vector2(p/d,l/c));h.push(u.clone().sub(f).normalize())}for(l=
1;l<=c;l++)for(p=1;p<=d;p++)a=(d+1)*l+p-1,b=(d+1)*(l-1)+p-1,e=(d+1)*(l-1)+p,f=(d+1)*l+p,r=new THREE.Face3(a,b,f,[h[a].clone(),h[b].clone(),h[f].clone()]),this.faces.push(r),this.faceVertexUvs[0].push([g[a].clone(),g[b].clone(),g[f].clone()]),r=new THREE.Face3(b,e,f,[h[b].clone(),h[e].clone(),h[f].clone()]),this.faces.push(r),this.faceVertexUvs[0].push([g[b].clone(),g[e].clone(),g[f].clone()]);this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=b/c;b=Math.cos(a);f*=d*(2+b)*.5;g=d*(2+b)*g*.5;d=e*d*Math.sin(a)*.5;return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:f,heightScale:g};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;f=f||3;g=g||1;for(var l=Array(c),p=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,u=0;u<c;++u){l[u]=Array(d);var w=u/c*2*e*Math.PI,
v=h(w,f,e,a,g),w=h(w+.01,f,e,a,g);p.subVectors(w,v);r.addVectors(w,v);n.crossVectors(p,r);r.crossVectors(n,p);n.normalize();r.normalize();for(w=0;w<d;++w){var x=w/d*2*Math.PI,z=-b*Math.cos(x),x=b*Math.sin(x),y=new THREE.Vector3;y.x=v.x+z*r.x+x*n.x;y.y=v.y+z*r.y+x*n.y;y.z=v.z+z*r.z+x*n.z;l[u][w]=this.vertices.push(y)-1}}for(u=0;u<c;++u)for(w=0;w<d;++w)e=(u+1)%c,f=(w+1)%d,a=l[u][w],b=l[e][w],e=l[e][f],f=l[u][f],g=new THREE.Vector2(u/c,w/d),p=new THREE.Vector2((u+1)/c,w/d),r=new THREE.Vector2((u+1)/
c,(w+1)/d),n=new THREE.Vector2(u/c,(w+1)/d),this.faces.push(new THREE.Face3(a,b,f)),this.faceVertexUvs[0].push([g,p,n]),this.faces.push(new THREE.Face3(b,e,f)),this.faceVertexUvs[0].push([p.clone(),r,n.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var f=[],g,h,l=b+1,p,r,n,u,w=new THREE.Vector3,v,x,z;v=new THREE.TubeGeometry.FrenetFrames(a,b,e);x=v.normals;z=v.binormals;this.tangents=v.tangents;this.normals=x;this.binormals=z;for(v=0;v<l;v++)for(f[v]=[],p=v/(l-1),u=a.getPointAt(p),g=x[v],h=z[v],p=0;p<d;p++)r=p/d*2*Math.PI,n=-c*Math.cos(r),r=c*Math.sin(r),w.copy(u),w.x+=n*g.x+r*
h.x,w.y+=n*g.y+r*h.y,w.z+=n*g.z+r*h.z,f[v][p]=this.vertices.push(new THREE.Vector3(w.x,w.y,w.z))-1;for(v=0;v<b;v++)for(p=0;p<d;p++)l=e?(v+1)%b:v+1,w=(p+1)%d,a=f[v][p],c=f[l][p],l=f[l][w],w=f[v][w],x=new THREE.Vector2(v/b,p/d),z=new THREE.Vector2((v+1)/b,p/d),g=new THREE.Vector2((v+1)/b,(p+1)/d),h=new THREE.Vector2(v/b,(p+1)/d),this.faces.push(new THREE.Face3(a,c,w)),this.faceVertexUvs[0].push([x,z,h]),this.faces.push(new THREE.Face3(c,l,w)),this.faceVertexUvs[0].push([z.clone(),g,h.clone()]);this.computeFaceNormals();
this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var d=new THREE.Vector3;new THREE.Vector3;var e=[],f=[],g=[],h=new THREE.Vector3,l=new THREE.Matrix4;b+=1;var p,r,n;this.tangents=e;this.normals=f;this.binormals=g;for(p=0;p<b;p++)r=p/(b-1),e[p]=a.getTangentAt(r),e[p].normalize();f[0]=new THREE.Vector3;g[0]=new THREE.Vector3;a=Number.MAX_VALUE;p=Math.abs(e[0].x);r=Math.abs(e[0].y);n=Math.abs(e[0].z);p<=a&&(a=p,d.set(1,0,0));r<=a&&(a=r,d.set(0,1,0));n<=a&&d.set(0,0,1);h.crossVectors(e[0],
d).normalize();f[0].crossVectors(e[0],h);g[0].crossVectors(e[0],f[0]);for(p=1;p<b;p++)f[p]=f[p-1].clone(),g[p]=g[p-1].clone(),h.crossVectors(e[p-1],e[p]),1E-4<h.length()&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[p-1].dot(e[p]),-1,1)),f[p].applyMatrix4(l.makeRotationAxis(h,d))),g[p].crossVectors(e[p],f[p]);if(c)for(d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(f[0],f[b-1]))&&(d=-d),p=1;p<b;p++)f[p].applyMatrix4(l.makeRotationAxis(e[p],d*p)),g[p].crossVectors(e[p],
f[p])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=l.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);l.faces.push(d);z.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(z.z,-z.x);l.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function g(a,b){var c=
Math.pow(2,b);Math.pow(4,b);for(var d=e(l.vertices[a.a]),g=e(l.vertices[a.b]),h=e(l.vertices[a.c]),n=[],p=0;p<=c;p++){n[p]=[];for(var r=e(d.clone().lerp(h,p/c)),v=e(g.clone().lerp(h,p/c)),u=c-p,w=0;w<=u;w++)n[p][w]=0==w&&p==c?r:e(r.clone().lerp(v,w/u))}for(p=0;p<c;p++)for(w=0;w<2*(c-p)-1;w++)d=Math.floor(w/2),0==w%2?f(n[p][d+1],n[p+1][d],n[p][d]):f(n[p][d+1],n[p+1][d+1],n[p+1][d])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,
a.y));return a.clone()}THREE.Geometry.call(this);c=c||1;d=d||0;for(var l=this,p=0,r=a.length;p<r;p+=3)e(new THREE.Vector3(a[p],a[p+1],a[p+2]));a=this.vertices;for(var n=[],u=p=0,r=b.length;p<r;p+=3,u++){var w=a[b[p]],v=a[b[p+1]],x=a[b[p+2]];n[u]=new THREE.Face3(w.index,v.index,x.index,[w.clone(),v.clone(),x.clone()])}for(var z=new THREE.Vector3,p=0,r=n.length;p<r;p++)g(n[p],d);p=0;for(r=this.faceVertexUvs[0].length;p<r;p++)b=this.faceVertexUvs[0][p],d=b[0].x,a=b[1].x,n=b[2].x,u=Math.max(d,Math.max(a,
n)),w=Math.min(d,Math.min(a,n)),.9<u&&.1>w&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>n&&(b[2].x+=1));p=0;for(r=this.vertices.length;p<r;p++)this.vertices[p].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.IcosahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.OctahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],g,h,l,p,r=b+1;for(g=0;g<=c;g++)for(p=g/c,h=0;h<=b;h++)l=h/b,l=a(l,p),d.push(l);var n,u,w,v;for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*r+h,d=g*r+h+1,p=(g+1)*r+h+1,l=(g+1)*r+h,n=new THREE.Vector2(h/b,g/c),u=new THREE.Vector2((h+1)/b,g/c),w=new THREE.Vector2((h+1)/b,(g+1)/c),v=new THREE.Vector2(h/b,(g+1)/c),e.push(new THREE.Face3(a,d,l)),f.push([n,u,v]),e.push(new THREE.Face3(d,p,l)),
f.push([u.clone(),w,v.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,a,b,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));return function(c,d,e,f,g,h){THREE.Object3D.call(this);void 0===f&&(f=16776960);void 0===e&&(e=1);void 0===g&&(g=.2*e);void 0===h&&(h=.2*g);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:f}));this.line.matrixAutoUpdate=!1;this.add(this.line);
this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:f}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,g,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};
THREE.BoxHelper=function(a){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,d=this.geometry.attributes.position.array;d[0]=b.x;d[1]=b.y;d[2]=b.z;d[3]=c.x;d[4]=b.y;d[5]=b.z;d[6]=c.x;d[7]=b.y;d[8]=b.z;d[9]=c.x;d[10]=c.y;d[11]=b.z;d[12]=c.x;d[13]=c.y;d[14]=b.z;d[15]=b.x;d[16]=c.y;d[17]=b.z;d[18]=b.x;d[19]=c.y;d[20]=b.z;d[21]=b.x;d[22]=b.y;d[23]=b.z;d[24]=b.x;d[25]=b.y;d[26]=c.z;d[27]=c.x;d[28]=b.y;d[29]=c.z;d[30]=c.x;d[31]=b.y;
d[32]=c.z;d[33]=c.x;d[34]=c.y;d[35]=c.z;d[36]=c.x;d[37]=c.y;d[38]=c.z;d[39]=b.x;d[40]=c.y;d[41]=c.z;d[42]=b.x;d[43]=c.y;d[44]=c.z;d[45]=b.x;d[46]=b.y;d[47]=c.z;d[48]=b.x;d[49]=b.y;d[50]=b.z;d[51]=b.x;d[52]=b.y;d[53]=c.z;d[54]=c.x;d[55]=b.y;d[56]=b.z;d[57]=c.x;d[58]=b.y;d[59]=c.z;d[60]=c.x;d[61]=c.y;d[62]=b.z;d[63]=c.x;d[64]=c.y;d[65]=c.z;d[66]=b.x;d[67]=c.y;d[68]=b.z;d[69]=b.x;d[70]=c.y;d[71]=c.z;this.geometry.attributes.position.needsUpdate=!0;this.geometry.computeBoundingSphere();this.matrixAutoUpdate=
!1;this.matrixWorld=a.matrixWorld};THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,d,e,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=f;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,g,h,l){a.set(g,h,l);c.unprojectVector(a,b);d=e.pointMap[d];if(void 0!==d)for(g=0,h=d.length;g<h;g++)e.geometry.vertices[d[g]].copy(a)}var e=this;b.projectionMatrix.copy(this.camera.projectionMatrix);d("c",0,0,-1);d("t",0,0,1);d("n1",-1,-1,-1);d("n2",1,-1,-1);d("n3",-1,1,-1);d("n4",1,1,-1);d("f1",-1,-1,1);d("f2",1,-1,1);d("f3",-1,1,1);d("f4",1,1,1);d("u1",.7,
1.1,-1);d("u2",-.7,1.1,-1);d("u3",0,2,-1);d("cf1",-1,0,1);d("cf2",1,0,1);d("cf3",0,-1,1);d("cf4",0,1,1);d("cn1",-1,0,-1);d("cn2",1,0,-1);d("cn3",0,-1,-1);d("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry,l=a.geometry.clone();l.mergeVertices();l.computeFaceNormals();for(var p=l.vertices,l=l.faces,r=0,n=0,u=l.length;n<u;n++)for(var w=l[n],v=0;3>v;v++){d[0]=w[g[v]];d[1]=w[g[(v+1)%3]];d.sort(f);var x=d.toString();void 0===e[x]?(e[x]={vert1:d[0],vert2:d[1],face1:n,face2:void 0},r++):e[x].face2=n}h.addAttribute("position",new THREE.Float32Attribute(6*r,3));d=h.attributes.position.array;
f=0;for(x in e)if(g=e[x],void 0===g.face2||.9999>l[g.face1].normal.dot(l[g.face2].normal))r=p[g.vert1],d[f++]=r.x,d[f++]=r.y,d[f++]=r.z,r=p[g.vert2],d[f++]=r.x,d[f++]=r.y,d[f++]=r.z;THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=new THREE.Geometry;c=0;for(var e=this.object.geometry.faces.length;c<e;c++)b.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(){var a=this.geometry.vertices,b=this.object,c=b.geometry.vertices,d=b.geometry.faces,e=b.matrixWorld;b.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(e);for(var f=b=0,g=d.length;b<g;b++,f+=2){var h=d[b];a[f].copy(c[h.a]).add(c[h.b]).add(c[h.c]).divideScalar(3).applyMatrix4(e);a[f+1].copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[f])}this.geometry.verticesNeedUpdate=!0;return this};
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b,c,d){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];a=new THREE.SphereGeometry(b,4,2);a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(a,b);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,b,c,THREE.LinePieces);this.root=a;this.matrixWorld=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype);THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var f=this.bones[e];f.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,f.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,f.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:16711680;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,h=a[e].vertexNormals.length;g<h;g++)c.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,l=0,p=f.length;l<p;l++)for(var r=f[l],n=0,u=r.vertexNormals.length;n<u;n++){var w=r.vertexNormals[n];d[h].copy(e[r[a[n]]]).applyMatrix4(g);b.copy(w).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
b.add(d[h]);h+=1;d[h].copy(b);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:255;d=void 0!==d?d:1;c=new THREE.Geometry;a=a.geometry.faces;for(var e=0,f=a.length;e<f;e++)for(var g=0,h=a[e].vertexTangents.length;g<h;g++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:d}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,l=0,p=f.length;l<p;l++)for(var r=f[l],n=0,u=r.vertexTangents.length;n<u;n++){var w=r.vertexTangents[n];d[h].copy(e[r[a[n]]]).applyMatrix4(g);b.copy(w).transformDirection(g).multiplyScalar(this.size);b.add(d[h]);h+=1;d[h].copy(b);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var l=a.geometry.vertices,p=a.geometry.faces,r=0,n=new Uint32Array(6*p.length),u=0,w=p.length;u<w;u++)for(var v=p[u],x=0;3>x;x++){d[0]=v[g[x]];d[1]=v[g[(x+1)%3]];d.sort(f);var z=d.toString();void 0===e[z]&&(n[2*r]=d[0],n[2*r+1]=d[1],e[z]=!0,r++)}d=new Float32Array(6*r);u=0;for(w=r;u<w;u++)for(x=0;2>x;x++)r=
l[n[2*u+x]],g=6*u+3*x,d[g+0]=r.x,d[g+1]=r.y,d[g+2]=r.z;h.addAttribute("position",new THREE.BufferAttribute(d,3))}else if(a.geometry instanceof THREE.BufferGeometry){if(void 0!==a.geometry.attributes.index){for(var l=a.geometry.attributes.position.array,w=a.geometry.attributes.index.array,p=a.geometry.offsets,r=0,n=new Uint32Array(2*w.length),v=0,y=p.length;v<y;++v)for(var x=p[v].start,z=p[v].count,g=p[v].index,u=x,A=x+z;u<A;u+=3)for(x=0;3>x;x++)d[0]=g+w[u+x],d[1]=g+w[u+(x+1)%3],d.sort(f),z=d.toString(),
void 0===e[z]&&(n[2*r]=d[0],n[2*r+1]=d[1],e[z]=!0,r++);d=new Float32Array(6*r);u=0;for(w=r;u<w;u++)for(x=0;2>x;x++)g=6*u+3*x,r=3*n[2*u+x],d[g+0]=l[r],d[g+1]=l[r+1],d[g+2]=l[r+2]}else for(l=a.geometry.attributes.position.array,r=l.length/3,n=r/3,d=new Float32Array(6*r),u=0,w=n;u<w;u++)for(x=0;3>x;x++)g=18*u+6*x,n=9*u+3*x,d[g+0]=l[n],d[g+1]=l[n+1],d[g+2]=l[n+2],r=9*u+(x+1)%3*3,d[g+3]=l[r],d[g+4]=l[r+1],d[g+5]=l[r+2];h.addAttribute("position",new THREE.BufferAttribute(d,3))}THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),
THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};
THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<g;f++){var h=e.morphTargets[f].name.match(b);if(h&&1<h.length){var l=h[1];d[l]||(d[l]={start:Infinity,end:-Infinity});h=d[l];f<h.start&&(h.start=f);f>h.end&&(h.end=f);c||(c=l)}}for(l in d)h=d[l],this.createAnimation(l,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;
f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*g;this.morphTargetInfluences[d.lastFrame]=(1-e)*g}}};
THREE.LensFlarePlugin=function(){function a(a,b){var d=c.createProgram(),e=c.createShader(c.FRAGMENT_SHADER),f=c.createShader(c.VERTEX_SHADER),g="precision "+b+" float;\n";c.shaderSource(e,g+a.fragmentShader);c.shaderSource(f,g+a.vertexShader);c.compileShader(e);c.compileShader(f);c.attachShader(d,e);c.attachShader(d,f);c.linkProgram(d);return d}var b=[],c,d,e,f,g,h,l,p,r,n,u,w,v;this.init=function(b){c=b.context;d=b;e=b.getPrecision();f=new Float32Array(16);g=new Uint16Array(6);b=0;f[b++]=-1;f[b++]=
-1;f[b++]=0;f[b++]=0;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=1;f[b++]=-1;f[b++]=1;f[b++]=0;f[b++]=1;b=0;g[b++]=0;g[b++]=1;g[b++]=2;g[b++]=0;g[b++]=2;g[b++]=3;h=c.createBuffer();l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h);c.bufferData(c.ARRAY_BUFFER,f,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW);p=c.createTexture();r=c.createTexture();c.bindTexture(c.TEXTURE_2D,p);c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,
16,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.bindTexture(c.TEXTURE_2D,r);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);0>=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(n=!1,u=a(THREE.ShaderFlares.lensFlare,e)):(n=!0,u=a(THREE.ShaderFlares.lensFlareVertexTexture,e));w={};v={};w.vertex=c.getAttribLocation(u,"position");w.uv=c.getAttribLocation(u,"uv");v.renderType=c.getUniformLocation(u,"renderType");v.map=c.getUniformLocation(u,"map");v.occlusionMap=c.getUniformLocation(u,"occlusionMap");v.opacity=
c.getUniformLocation(u,"opacity");v.color=c.getUniformLocation(u,"color");v.scale=c.getUniformLocation(u,"scale");v.rotation=c.getUniformLocation(u,"rotation");v.screenPosition=c.getUniformLocation(u,"screenPosition")};this.render=function(a,e,f,g){b.length=0;a.traverseVisible(function(a){a instanceof THREE.LensFlare&&b.push(a)});if(0!==b.length){a=new THREE.Vector3;var C=g/f,B=.5*f,E=.5*g,F=16/g,I=new THREE.Vector2(F*C,F),D=new THREE.Vector3(1,1,0),G=new THREE.Vector2(1,1),P=v,F=w;c.useProgram(u);
c.enableVertexAttribArray(w.vertex);c.enableVertexAttribArray(w.uv);c.uniform1i(P.occlusionMap,0);c.uniform1i(P.map,1);c.bindBuffer(c.ARRAY_BUFFER,h);c.vertexAttribPointer(F.vertex,2,c.FLOAT,!1,16,0);c.vertexAttribPointer(F.uv,2,c.FLOAT,!1,16,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l);c.disable(c.CULL_FACE);c.depthMask(!1);for(var L=0,ea=b.length;L<ea;L++){F=16/g;I.set(F*C,F);var M=b[L];a.set(M.matrixWorld.elements[12],M.matrixWorld.elements[13],M.matrixWorld.elements[14]);a.applyMatrix4(e.matrixWorldInverse);
a.applyProjection(e.projectionMatrix);D.copy(a);G.x=D.x*B+B;G.y=D.y*E+E;if(n||0<G.x&&G.x<f&&0<G.y&&G.y<g){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,p);c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,G.x-8,G.y-8,16,16,0);c.uniform1i(P.renderType,0);c.uniform2f(P.scale,I.x,I.y);c.uniform3f(P.screenPosition,D.x,D.y,D.z);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,r);c.copyTexImage2D(c.TEXTURE_2D,
0,c.RGBA,G.x-8,G.y-8,16,16,0);c.uniform1i(P.renderType,1);c.disable(c.DEPTH_TEST);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,p);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);M.positionScreen.copy(D);M.customUpdateCallback?M.customUpdateCallback(M):M.updateLensFlares();c.uniform1i(P.renderType,2);c.enable(c.BLEND);for(var R=0,W=M.lensFlares.length;R<W;R++){var Q=M.lensFlares[R];.001<Q.opacity&&.001<Q.scale&&(D.x=Q.x,D.y=Q.y,D.z=Q.z,F=Q.size*Q.scale/g,I.x=F*C,I.y=F,c.uniform3f(P.screenPosition,
D.x,D.y,D.z),c.uniform2f(P.scale,I.x,I.y),c.uniform1f(P.rotation,Q.rotation),c.uniform1f(P.opacity,Q.opacity),c.uniform3f(P.color,Q.color.r,Q.color.g,Q.color.b),d.setBlending(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst),d.setTexture(Q.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}c.enable(c.CULL_FACE);c.enable(c.DEPTH_TEST);c.depthMask(!0)}}};
THREE.ShadowMapPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&c.castShadow&&(!1===c.frustumCulled||!0===h.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var l=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);u.push(l)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}var b,c,d,e,f,g,h=new THREE.Frustum,l=new THREE.Matrix4,p=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,u=[];this.init=function(a){b=a.context;
c=a;a=THREE.ShaderLib.depthRGBA;var h=THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,
morphTargets:!0,skinning:!0});d._shadowPass=!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){c.shadowMapEnabled&&c.shadowMapAutoUpdate&&this.update(a,b)};this.update=function(w,v){var x,z,y,A,C,B,E,F,I=[];A=0;b.clearColor(1,1,1,1);b.disable(b.BLEND);b.enable(b.CULL_FACE);b.frontFace(b.CCW);c.shadowMapCullFace===THREE.CullFaceFront?b.cullFace(b.FRONT):b.cullFace(b.BACK);c.setDepthTest(!0);x=0;for(z=w.__lights.length;x<z;x++)if(y=w.__lights[x],y.castShadow)if(y instanceof
THREE.DirectionalLight&&y.shadowCascade)for(C=0;C<y.shadowCascadeCount;C++){var D;if(y.shadowCascadeArray[C])D=y.shadowCascadeArray[C];else{E=y;var G=C;D=new THREE.DirectionalLight;D.isVirtual=!0;D.onlyShadow=!0;D.castShadow=!0;D.shadowCameraNear=E.shadowCameraNear;D.shadowCameraFar=E.shadowCameraFar;D.shadowCameraLeft=E.shadowCameraLeft;D.shadowCameraRight=E.shadowCameraRight;D.shadowCameraBottom=E.shadowCameraBottom;D.shadowCameraTop=E.shadowCameraTop;D.shadowCameraVisible=E.shadowCameraVisible;
D.shadowDarkness=E.shadowDarkness;D.shadowBias=E.shadowCascadeBias[G];D.shadowMapWidth=E.shadowCascadeWidth[G];D.shadowMapHeight=E.shadowCascadeHeight[G];D.pointsWorld=[];D.pointsFrustum=[];F=D.pointsWorld;B=D.pointsFrustum;for(var P=0;8>P;P++)F[P]=new THREE.Vector3,B[P]=new THREE.Vector3;F=E.shadowCascadeNearZ[G];E=E.shadowCascadeFarZ[G];B[0].set(-1,-1,F);B[1].set(1,-1,F);B[2].set(-1,1,F);B[3].set(1,1,F);B[4].set(-1,-1,E);B[5].set(1,-1,E);B[6].set(-1,1,E);B[7].set(1,1,E);D.originalCamera=v;B=new THREE.Gyroscope;
B.position.copy(y.shadowCascadeOffset);B.add(D);B.add(D.target);v.add(B);y.shadowCascadeArray[C]=D;console.log("Created virtualLight",D)}G=y;F=C;E=G.shadowCascadeArray[F];E.position.copy(G.position);E.target.position.copy(G.target.position);E.lookAt(E.target);E.shadowCameraVisible=G.shadowCameraVisible;E.shadowDarkness=G.shadowDarkness;E.shadowBias=G.shadowCascadeBias[F];B=G.shadowCascadeNearZ[F];G=G.shadowCascadeFarZ[F];E=E.pointsFrustum;E[0].z=B;E[1].z=B;E[2].z=B;E[3].z=B;E[4].z=G;E[5].z=G;E[6].z=
G;E[7].z=G;I[A]=D;A++}else I[A]=y,A++;x=0;for(z=I.length;x<z;x++){y=I[x];y.shadowMap||(C=THREE.LinearFilter,c.shadowMapType===THREE.PCFSoftShadowMap&&(C=THREE.NearestFilter),y.shadowMap=new THREE.WebGLRenderTarget(y.shadowMapWidth,y.shadowMapHeight,{minFilter:C,magFilter:C,format:THREE.RGBAFormat}),y.shadowMapSize=new THREE.Vector2(y.shadowMapWidth,y.shadowMapHeight),y.shadowMatrix=new THREE.Matrix4);if(!y.shadowCamera){if(y instanceof THREE.SpotLight)y.shadowCamera=new THREE.PerspectiveCamera(y.shadowCameraFov,
y.shadowMapWidth/y.shadowMapHeight,y.shadowCameraNear,y.shadowCameraFar);else if(y instanceof THREE.DirectionalLight)y.shadowCamera=new THREE.OrthographicCamera(y.shadowCameraLeft,y.shadowCameraRight,y.shadowCameraTop,y.shadowCameraBottom,y.shadowCameraNear,y.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}w.add(y.shadowCamera);!0===w.autoUpdate&&w.updateMatrixWorld()}y.shadowCameraVisible&&!y.cameraHelper&&(y.cameraHelper=new THREE.CameraHelper(y.shadowCamera),y.shadowCamera.add(y.cameraHelper));
if(y.isVirtual&&D.originalCamera==v){C=v;A=y.shadowCamera;B=y.pointsFrustum;E=y.pointsWorld;p.set(Infinity,Infinity,Infinity);r.set(-Infinity,-Infinity,-Infinity);for(G=0;8>G;G++)F=E[G],F.copy(B[G]),THREE.ShadowMapPlugin.__projector.unprojectVector(F,C),F.applyMatrix4(A.matrixWorldInverse),F.x<p.x&&(p.x=F.x),F.x>r.x&&(r.x=F.x),F.y<p.y&&(p.y=F.y),F.y>r.y&&(r.y=F.y),F.z<p.z&&(p.z=F.z),F.z>r.z&&(r.z=F.z);A.left=p.x;A.right=r.x;A.top=r.y;A.bottom=p.y;A.updateProjectionMatrix()}A=y.shadowMap;B=y.shadowMatrix;
C=y.shadowCamera;C.position.setFromMatrixPosition(y.matrixWorld);n.setFromMatrixPosition(y.target.matrixWorld);C.lookAt(n);C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);y.cameraHelper&&(y.cameraHelper.visible=y.shadowCameraVisible);y.shadowCameraVisible&&y.cameraHelper.update();B.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);B.multiply(C.projectionMatrix);B.multiply(C.matrixWorldInverse);l.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);h.setFromMatrix(l);c.setRenderTarget(A);
c.clear();u.length=0;a(w,w,C);y=0;for(A=u.length;y<A;y++)E=u[y],B=E.object,E=E.buffer,G=B.material instanceof THREE.MeshFaceMaterial?B.material.materials[0]:B.material,F=void 0!==B.geometry.morphTargets&&0<B.geometry.morphTargets.length&&G.morphTargets,P=B instanceof THREE.SkinnedMesh&&G.skinning,F=B.customDepthMaterial?B.customDepthMaterial:P?F?g:f:F?e:d,c.setMaterialFaces(G),E instanceof THREE.BufferGeometry?c.renderBufferDirect(C,w.__lights,null,F,E,B):c.renderBuffer(C,w.__lights,null,F,E,B);G=
w.__webglObjectsImmediate;y=0;for(A=G.length;y<A;y++)E=G[y],B=E.object,B.visible&&B.castShadow&&(B._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,B.matrixWorld),c.renderImmediateObject(C,w.__lights,null,d,B))}x=c.getClearColor();z=c.getClearAlpha();b.clearColor(x.r,x.g,x.b,z);b.enable(b.BLEND);c.shadowMapCullFace===THREE.CullFaceFront&&b.cullFace(b.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;
THREE.SpritePlugin=function(){var a,b,c,d,e,f,g,h,l,p,r,n,u,w,v,x,z;function y(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var A,C,B,E=[],F,I,D,G,P;this.init=function(y){A=y.context;C=y;F=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);I=new Uint16Array([0,1,2,0,2,3]);D=A.createBuffer();G=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,D);A.bufferData(A.ARRAY_BUFFER,F,A.STATIC_DRAW);A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,G);A.bufferData(A.ELEMENT_ARRAY_BUFFER,I,A.STATIC_DRAW);y=A.createProgram();
var E=A.createShader(A.VERTEX_SHADER),M=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(E,["precision "+C.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
A.shaderSource(M,["precision "+C.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
A.compileShader(E);A.compileShader(M);A.attachShader(y,E);A.attachShader(y,M);A.linkProgram(y);P=y;x=A.getAttribLocation(P,"position");z=A.getAttribLocation(P,"uv");a=A.getUniformLocation(P,"uvOffset");b=A.getUniformLocation(P,"uvScale");c=A.getUniformLocation(P,"rotation");d=A.getUniformLocation(P,"scale");e=A.getUniformLocation(P,"color");f=A.getUniformLocation(P,"map");g=A.getUniformLocation(P,"opacity");h=A.getUniformLocation(P,"modelViewMatrix");l=A.getUniformLocation(P,"projectionMatrix");p=
A.getUniformLocation(P,"fogType");r=A.getUniformLocation(P,"fogDensity");n=A.getUniformLocation(P,"fogNear");u=A.getUniformLocation(P,"fogFar");w=A.getUniformLocation(P,"fogColor");v=A.getUniformLocation(P,"alphaTest");y=document.createElement("canvas");y.width=8;y.height=8;E=y.getContext("2d");E.fillStyle="white";E.fillRect(0,0,8,8);B=new THREE.Texture(y);B.needsUpdate=!0};this.render=function(F,I,M,R){E.length=0;F.traverseVisible(function(a){a instanceof THREE.Sprite&&E.push(a)});if(0!==E.length){A.useProgram(P);
A.enableVertexAttribArray(x);A.enableVertexAttribArray(z);A.disable(A.CULL_FACE);A.enable(A.BLEND);A.bindBuffer(A.ARRAY_BUFFER,D);A.vertexAttribPointer(x,2,A.FLOAT,!1,16,0);A.vertexAttribPointer(z,2,A.FLOAT,!1,16,8);A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,G);A.uniformMatrix4fv(l,!1,I.projectionMatrix.elements);A.activeTexture(A.TEXTURE0);A.uniform1i(f,0);R=M=0;var W=F.fog;W?(A.uniform3f(w,W.color.r,W.color.g,W.color.b),W instanceof THREE.Fog?(A.uniform1f(n,W.near),A.uniform1f(u,W.far),A.uniform1i(p,1),
R=M=1):W instanceof THREE.FogExp2&&(A.uniform1f(r,W.density),A.uniform1i(p,2),R=M=2)):(A.uniform1i(p,0),R=M=0);for(var W=0,Q=E.length;W<Q;W++){var J=E[W],H=J.material;J._modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,J.matrixWorld);J.z=-J._modelViewMatrix.elements[14]}E.sort(y);I=[];W=0;for(Q=E.length;W<Q;W++)J=E[W],H=J.material,A.uniform1f(v,H.alphaTest),A.uniformMatrix4fv(h,!1,J._modelViewMatrix.elements),I[0]=J.scale.x,I[1]=J.scale.y,J=0,F.fog&&H.fog&&(J=R),M!==J&&(A.uniform1i(p,J),M=J),
null!==H.map?(A.uniform2f(a,H.map.offset.x,H.map.offset.y),A.uniform2f(b,H.map.repeat.x,H.map.repeat.y)):(A.uniform2f(a,0,0),A.uniform2f(b,1,1)),A.uniform1f(g,H.opacity),A.uniform3f(e,H.color.r,H.color.g,H.color.b),A.uniform1f(c,H.rotation),A.uniform2fv(d,I),C.setBlending(H.blending,H.blendEquation,H.blendSrc,H.blendDst),C.setDepthTest(H.depthTest),C.setDepthWrite(H.depthWrite),H.map&&H.map.image&&H.map.image.width?C.setTexture(H.map,0):C.setTexture(B,0),A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,
0);A.enable(A.CULL_FACE)}}};
THREE.DepthPassPlugin=function(){function a(b,c,d){if(c.visible){var e=b.__webglObjects[c.id];if(e&&(!1===c.frustumCulled||!0===h.intersectsObject(c)))for(var f=0,g=e.length;f<g;f++){var l=e[f];c._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,c.matrixWorld);p.push(l)}f=0;for(g=c.children.length;f<g;f++)a(b,c.children[f],d)}}this.enabled=!1;this.renderTarget=null;var b,c,d,e,f,g,h=new THREE.Frustum,l=new THREE.Matrix4,p=[];this.init=function(a){b=a.context;c=a;a=THREE.ShaderLib.depthRGBA;var h=
THREE.UniformsUtils.clone(a.uniforms);d=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0});f=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});d._shadowPass=
!0;e._shadowPass=!0;f._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(r,n){var u,w,v,x,z;b.clearColor(1,1,1,1);b.disable(b.BLEND);c.setDepthTest(!0);!0===r.autoUpdate&&r.updateMatrixWorld();n.matrixWorldInverse.getInverse(n.matrixWorld);l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse);h.setFromMatrix(l);c.setRenderTarget(this.renderTarget);c.clear();p.length=0;a(r,r,n);var y;u=0;for(w=p.length;u<w;u++)v=p[u],z=v.object,v=v.buffer,
z instanceof THREE.PointCloud&&!z.customDepthMaterial||((y=z.material instanceof THREE.MeshFaceMaterial?z.material.materials[0]:z.material)&&c.setMaterialFaces(z.material),x=void 0!==z.geometry.morphTargets&&0<z.geometry.morphTargets.length&&y.morphTargets,y=z instanceof THREE.SkinnedMesh&&y.skinning,x=z.customDepthMaterial?z.customDepthMaterial:y?x?g:f:x?e:d,v instanceof THREE.BufferGeometry?c.renderBufferDirect(n,r.__lights,null,x,v,z):c.renderBuffer(n,r.__lights,null,x,v,z));x=r.__webglObjectsImmediate;
u=0;for(w=x.length;u<w;u++)v=x[u],z=v.object,z.visible&&(z._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,z.matrixWorld),c.renderImmediateObject(n,r.__lights,null,d,z));u=c.getClearColor();w=c.getClearAlpha();b.clearColor(u.r,u.g,u.b,w);b.enable(b.BLEND)}};
THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
lensFlare:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}};
THREE.OrbitControls=function(a,b){function c(a){if(!1!==f.enabled){a.preventDefault();var b=f.domElement===document?f.domElement.body:f.domElement;if(D===I.ROTATE){if(!0===f.noRotate)return;h.set(a.clientX,a.clientY);l.subVectors(h,g);f.rotateLeft(2*Math.PI*l.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*l.y/b.clientHeight*f.rotateSpeed);g.copy(h)}else if(D===I.DOLLY){if(!0===f.noZoom)return;x.set(a.clientX,a.clientY);z.subVectors(x,v);0<z.y?f.dollyIn():f.dollyOut();v.copy(x)}else if(D===I.PAN){if(!0===
f.noPan)return;r.set(a.clientX,a.clientY);n.subVectors(r,p);f.pan(n.x,n.y);p.copy(r)}f.update()}}function d(){!1!==f.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),f.dispatchEvent(M),D=I.NONE)}function e(a){if(!1!==f.enabled&&!0!==f.noZoom){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?f.dollyOut():f.dollyIn();f.update();f.dispatchEvent(ea);f.dispatchEvent(M)}}this.object=
a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var f=this,g=new THREE.Vector2,h=new THREE.Vector2,l=new THREE.Vector2,p=new THREE.Vector2,r=new THREE.Vector2,
n=new THREE.Vector2,u=new THREE.Vector3,w=new THREE.Vector3,v=new THREE.Vector2,x=new THREE.Vector2,z=new THREE.Vector2,y=0,A=0,C=1,B=new THREE.Vector3,E=new THREE.Vector3,F=new THREE.Quaternion,I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},D=I.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();var G=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),P=G.clone().inverse(),L={type:"change"},ea={type:"start"},M={type:"end"};
this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);A-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);y-=a};this.panLeft=function(a){var b=this.object.matrix.elements;u.set(b[0],b[1],b[2]);u.multiplyScalar(-a);B.add(u)};this.panUp=function(a){var b=this.object.matrix.elements;u.set(b[4],b[5],b[6]);u.multiplyScalar(a);B.add(u)};this.pan=function(a,b){var c=f.domElement===document?f.domElement.body:f.domElement;if(void 0!==f.object.fov){var d=
f.object.position.clone().sub(f.target).length(),d=d*Math.tan(f.object.fov/2*Math.PI/180);f.panLeft(2*a*d/c.clientHeight);f.panUp(2*b*d/c.clientHeight)}else void 0!==f.object.top?(f.panLeft(a*(f.object.right-f.object.left)/c.clientWidth),f.panUp(b*(f.object.top-f.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));C/=a};this.dollyOut=function(a){void 0===a&&
(a=Math.pow(.95,f.zoomSpeed));C*=a};this.update=function(){var a=this.object.position;w.copy(a).sub(this.target);w.applyQuaternion(G);var b=Math.atan2(w.x,w.z),c=Math.atan2(Math.sqrt(w.x*w.x+w.z*w.z),w.y);this.autoRotate&&this.rotateLeft(2*Math.PI/60/60*f.autoRotateSpeed);var b=b+A,c=c+y,c=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,c)),c=Math.max(1E-6,Math.min(Math.PI-1E-6,c)),d=w.length()*C,d=Math.max(this.minDistance,Math.min(this.maxDistance,d));this.target.add(B);w.x=d*Math.sin(c)*
Math.sin(b);w.y=d*Math.cos(c);w.z=d*Math.sin(c)*Math.cos(b);w.applyQuaternion(P);a.copy(this.target).add(w);this.object.lookAt(this.target);y=A=0;C=1;B.set(0,0,0);if(1E-6<E.distanceToSquared(this.object.position)||1E-6<8*(1-F.dot(this.object.quaternion)))this.dispatchEvent(L),E.copy(this.object.position),F.copy(this.object.quaternion)};this.reset=function(){D=I.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.update()};this.domElement.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){if(!1!==f.enabled){a.preventDefault();if(0===a.button){if(!0===f.noRotate)return;D=I.ROTATE;g.set(a.clientX,a.clientY)}else if(1===a.button){if(!0===f.noZoom)return;D=I.DOLLY;v.set(a.clientX,a.clientY)}else if(2===a.button){if(!0===f.noPan)return;D=I.PAN;p.set(a.clientX,a.clientY)}document.addEventListener("mousemove",c,!1);document.addEventListener("mouseup",d,!1);f.dispatchEvent(ea)}},!1);this.domElement.addEventListener("mousewheel",
e,!1);this.domElement.addEventListener("DOMMouseScroll",e,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==f.enabled){switch(a.touches.length){case 1:if(!0===f.noRotate)return;D=I.TOUCH_ROTATE;g.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===f.noZoom)return;D=I.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;b=Math.sqrt(b*b+a*a);v.set(0,b);break;case 3:if(!0===f.noPan)return;D=I.TOUCH_PAN;p.set(a.touches[0].pageX,
a.touches[0].pageY);break;default:D=I.NONE}f.dispatchEvent(ea)}},!1);this.domElement.addEventListener("touchend",function(){!1!==f.enabled&&(f.dispatchEvent(M),D=I.NONE)},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==f.enabled){a.preventDefault();a.stopPropagation();var b=f.domElement===document?f.domElement.body:f.domElement;switch(a.touches.length){case 1:if(!0===f.noRotate)break;if(D!==I.TOUCH_ROTATE)break;h.set(a.touches[0].pageX,a.touches[0].pageY);l.subVectors(h,g);f.rotateLeft(2*
Math.PI*l.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*l.y/b.clientHeight*f.rotateSpeed);g.copy(h);f.update();break;case 2:if(!0===f.noZoom)break;if(D!==I.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;a=Math.sqrt(b*b+a*a);x.set(0,a);z.subVectors(x,v);0<z.y?f.dollyOut():f.dollyIn();v.copy(x);f.update();break;case 3:if(!0===f.noPan)break;if(D!==I.TOUCH_PAN)break;r.set(a.touches[0].pageX,a.touches[0].pageY);n.subVectors(r,p);f.pan(n.x,n.y);p.copy(r);
f.update();break;default:D=I.NONE}}},!1);window.addEventListener("keydown",function(a){if(!1!==f.enabled&&!0!==f.noKeys&&!0!==f.noPan)switch(a.keyCode){case f.keys.UP:f.pan(0,f.keyPanSpeed);f.update();break;case f.keys.BOTTOM:f.pan(0,-f.keyPanSpeed);f.update();break;case f.keys.LEFT:f.pan(f.keyPanSpeed,0);f.update();break;case f.keys.RIGHT:f.pan(-f.keyPanSpeed,0),f.update()}},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);
Flory.Renderer=function(a,b,c){this.data={};null!==this.canvas?(this.renderer=new THREE.WebGLRenderer,void 0==this.renderer&&console.log("Flory : WebGL is not supported in your browser."),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement)):console.log("Flory : A canvas_id must be specified.");this.scene=void 0===a?new THREE.Scene:a;this.camera=void 0===b?new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1E4):b;this.camera.position.set(0,
0,100);this.camera.up=new THREE.Vector3(0,0,1);this.camera.lookAt(this.scene.position);this.scene.add(this.camera);this.renderables=void 0===c?{}:c;(new THREE.OrbitControls(this.camera,this.renderer.domElement)).addEventListener("change",function(){this.render})};
Flory.Renderer.prototype={constructor:Flory.Renderer,addRenderable:function(a){if(a instanceof Flory.Renderable)this.renderables[a.id]=a,this.scene.add(this.renderables[a.id].mesh);else return console.log("Flory : Attempted to add an object to Flory.Renderer.renderables that did not inherit from Flory.Renderable."),this},updateRenderablePosition:function(a){var b=a.id;a=a.position;if(a instanceof Flory.Vector){var c=a.dimension();3==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=
a.components[1],this.renderables[b].mesh.position.z=a.components[2]):2==c?(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1]):1==c?this.renderables[b].mesh.position.x=a.components[0]:3<c&&(this.renderables[b].mesh.position.x=a.components[0],this.renderables[b].mesh.position.y=a.components[1],this.renderables[b].mesh.position.z=a.components[2])}else a instanceof Flory.Vector2?(this.renderables[b].mesh.position.x=a.x,this.renderables[b].mesh.position.y=
a.y):a instanceof Flory.Vector3&&(this.renderables[b].mesh.position.x=a.x,this.renderables[b].mesh.position.y=a.y,this.renderables[b].mesh.position.z=a.z);return this},removeRenderable:function(a){for(var b in this.renderables)if(this.renderables[b].id==a){this.scene.remove(this.renderables[b]);this.renderables=this.renderables.splice(b,1);break}return this},removeAllRenderables:function(){for(var a in this.renderables)this.scene.remove(this.renderables[a]);this.renderables=[];return this},setDimension:function(a,
b){this.renderer.setSize(a,b);return this},render:function(){this.renderer.render(this.scene,this.camera);return this}};Flory.Renderer.ShaderTypes={};Flory.PointCloudRenderer=function(){Flory.Renderer.call(this);this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial)};Flory.PointCloudRenderer.prototype=Object.create(Flory.Renderer.prototype);
Flory.PointCloudRenderer.prototype.updatePointPositions=function(a){if(void 0!=a){for(var b=0,c=a.length;b<c;b++)this.data.particles.vertices[b]=new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]);this.data.particle_system.geometry.verticesNeedUpdate=!0}return this};
Flory.PointCloudRenderer.prototype.updatePointList=function(a){if(void 0==a)return this;this.data.particles=new THREE.Geometry;this.data.pMaterial=new THREE.PointCloudMaterial({color:16711680,size:2});for(var b=0,c=a.length;b<c;b++)a[b]instanceof Flory.Monomer&&this.data.particles.vertices.push(new THREE.Vector3(a[b].position.components[0],a[b].position.components[1],a[b].position.components[2]));this.scene.remove(this.data.particle_system);for(b in this.renderables)if(this.renderables[b].id==this.data.particle_system.id){this.renderables[b]=
void 0;delete this.renderables[b];break}this.data.particle_system=new THREE.PointCloud(this.data.particles,this.data.pMaterial);this.scene.add(this.data.particle_system);this.renderables[this.data.particle_system.id]=this.data.particle_system;return this};Flory.Options=function(a,b){this.data={};this.json=a;this.html_handle=$("#"+b);this.option_list=[];this.generateAndPlace(a,this.html_handle)};
Flory.Options.prototype={constructor:Flory.Options,generateAndPlace:function(a,b){var c=[],d;d="<div id='option-menu'>";for(var e=0,f=a.options.length;e<f;e++){var g=a.options[e];if("float"==g.type||"integer"==g.type||"number"==g.type){if(g.slider){var h=this.generateRangeSlider(g.value,g.min,g.max,g.name,g.label,g.step,g.has_text_box,g.text_box_is_editable),l=h.input_id,p=h.text_box_id;g.has_text_box&&c.push(function(){$("#"+l).on("input",function(){$("#"+p).val(this.value)});$("#"+p).on("change",
function(){$("#"+l).val(this.value)})})}else h=this.generateTextBox(g.value,g.name,g.label);d+=h.html}else if("string"==g.type)h=this.generateTextBox(g.value,g.name,"text",g.label),d+=h.html;else if("checkbox"==g.type)h=this.generateCheckBox(g.value,g.name,g.label),d+=h.html;else if("button"==g.type){var h=this.generateButton(g.value,g.name,g.label),r=g.callback,n=h.button_id;r&&c.push(function(){$("#"+n).on("click",function(){r(n)})});d+=h.html}}b.html(d+"</div>");for(e=0;e<c.length;e++)c[e]()},
generateButton:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<button class='button' id='"+e+"'>"+a+"</button>"),d=d+"</div>";return{html:d,button_id:e}},generateTextBox:function(a,b,c,d){var e="";void 0==d&&(d=b);var f=Flory.generateGUID(),e=e+"<div class='option'>"+("<label for='"+b+"'>"+d+"</label>"),e=e+("<input class='text-box' type='"+(void 0!=c?c:"")+"' data-key='"+b+"' id='"+f+"' name='"+b+"' value='"+
a+"'> "),e=e+"</div>";return{html:e,text_box_id:f}},generateRangeSlider:function(a,b,c,d,e,f,g,h){h="";void 0==e&&(e=d);var l=Flory.generateGUID(),p=Flory.generateGUID();h=h+"<div class='option'>"+("<label for='"+d+"'>"+e+"</label>");g?(h+="<input class='text-box-above-slider' id='"+p+"' type='number' name='"+d+"' min='"+b+"' max='"+c+"' value='"+a+"'>",h+="<input class='range-slider-with-text-box' id='"+l+"' type='range' data-key='"+d+"' value='"+a+"'' name='"+d+"' min='"+b+"' max='"+c+"' step='"+
f+"'>"):h+="<input class='range-slider' id='"+l+"' type='range' value='"+a+"'' data-key='"+d+"' name='"+d+"' min='"+b+"' max='"+c+"' step='"+f+"'>";h+="</div>";return{html:h,input_id:l,text_box_id:p}},generateCheckBox:function(a,b,c){var d="";void 0==c&&(c=b);var e=Flory.generateGUID(),d=d+"<div class='option'>"+("<label for='"+b+"'>"+c+"</label>"),d=d+("<input class='checkbox' name='"+b+"' data-key='"+b+"' id='"+e+"' type='checkbox' value='i-am-a-check-box-causing-errors' ");a&&(d+="checked");d+=
">";d+="</div>";return{html:d,check_box_id:e}},update:function(){},updateValue:function(a,b){$("[name='"+a+"']").val(b).change()},getValue:function(a){var b=$("[name='"+a+"'").val();return"i-am-a-check-box-causing-errors"==b?$("[name='"+a+"']").is(":checked"):b},getValues:function(){}};Flory.Display=function(a,b){this.data={};this.json=a;this.value_functions=[];this.html_handle=$("#"+b);this.generateAndPlace(this.json,this.html_handle)};
Flory.Display.prototype={constructor:Flory.Display,generateAndPlace:function(a,b){var c;c="<div id='display-menu'>";for(var d=0,e=this.json.display.length;d<e;d++){var f=this.json.display[d];void 0==f.label&&(f.label=f.name);var g=Flory.generateGUID(),h=f.value();c+="<div class='display-value'>";c+="<label for='"+f.name+"'>"+f.label+"</label>";c+="<input type='text' class='display-value-text-box' data-key='"+f.name+"' id='"+g+"' name = '"+f.name+"' value='"+h+"'>";c+="</div>";this.value_functions[f.name]=
f.value}b.html(c+"</div>");return this},updateValues:function(){for(var a in this.value_functions){var b=this.value_functions[a](),c=$("[data-key='"+a+"'");if("number"==typeof b||"string"==typeof b)c.val(b);else if(b instanceof Flory.Vector){var d=b.dimension(),e="";for(a=0;a<d;a++)e+=b.components[a]+",";e=e.substring(0,e.length-1);c.val(e)}else b instanceof Flory.Vector3?c.val(b.x+","+b.y+","+b.z):b instanceof Flory.Vector2&&c.val(b.x+","+b.y)}return this},updateValue:function(a){$("[data-key='"+
a+"'").val(this.value_functions[a]())}};Flory.Particle=function(){Flory.Entity.call(this);this.position={};this.velocity={};this.acceleration={};this.radius={};this.charge={};this.mass={}};Flory.Particle.prototype=Object.create(Flory.Entity.prototype);
Flory.Monomer2D=function(a,b,c,d){Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!=a?a:Flory.Monomer2D.defaultRadius;this.charge=void 0!=b?b:0;this.mass=void 0!=c?c:0;void 0==e?this.position=new Flory.Vector2(0,0):e instanceof Array?this.position=new Flory.Vector2(e[0],e[1]):void 0!=e.x&&void 0!=e.y&&(this.position=new Flory.Vector2(e.x,e.y));void 0==f?this.velocity=new Flory.Vector2(0,0):f instanceof
Array?this.velocity=new Flory.Vector2(f[0],f[1]):void 0!=f.x&&void 0!=f.y&&(this.velocity=new Flory.Vector2(f.x,f.y));void 0==g?this.acceleration=new Flory.Vector2(0,0):g instanceof Array?this.acceleration=new Flory.Vector2(g[0],g[1]):void 0!=g.x&&void 0!=g.y&&(this.acceleration=new Flory.Vector2(g.x,g.y));void 0==h?this.force=new Flory.Vector2(0,0):h instanceof Array?this.force=new Flory.Vector2(h[0],h[1]):void 0!=h.x&&void 0!=h.y&&(this.force=new Flory.Vector2(h.x,h.y))};
Flory.Monomer2D.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer2D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer2D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer2D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer2D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer2D.prototype.clone=function(){return new Flory.Monomer2D(this.radius,this.position)};Flory.Monomer2D.defaultRadius=1;
Flory.Monomer3D=function(a,b,c,d){Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!==a?a:Flory.Monomer3D.defaultRadius;this.charge=void 0!==b?b:0;this.mass=void 0!=c?c:0;void 0==e?this.position=new Flory.Vector3(0,0):e instanceof Array?this.position=new Flory.Vector3(e[0],e[1]):void 0!=e.x&&void 0!=e.y&&void 0!=e.z&&(this.position=new Flory.Vector3(e.x,e.y));void 0==f?this.velocity=new Flory.Vector3(0,
0):f instanceof Array?this.velocity=new Flory.Vector3(f[0],f[1]):void 0!=f.x&&void 0!=f.y&&void 0!=f.z&&(this.velocity=new Flory.Vector3(f.x,f.y));void 0==g?this.acceleration=new Flory.Vector3(0,0):g instanceof Array?this.acceleration=new Flory.Vector3(g[0],g[1]):void 0!=g.x&&void 0!=g.y&&void 0!=g.z&&(this.acceleration=new Flory.Vector3(g.x,g.y));void 0==h?this.force=new Flory.Vector3(0,0):h instanceof Array?this.force=new Flory.Vector3(h[0],h[1]):void 0!=h.x&&void 0!=h.y&&void 0!=h.z&&(this.force=
new Flory.Vector3(h.x,h.y))};Flory.Monomer3D.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer3D.prototype.applyForce=function(a,b){acceleration.x+=a.x/this.mass*b;acceleration.y+=a.y/this.mass*b;acceleration.z+=a.z/this.mass*b};Flory.Monomer3D.prototype.incrementX=function(a){this.position.x+=a;return this};Flory.Monomer3D.prototype.incrementY=function(a){this.position.y+=a;return this};Flory.Monomer3D.prototype.incrementZ=function(a){this.position.z+=a;return this};
Flory.Monomer3D.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer3D.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};Flory.Monomer3D.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer3D.defaultRadius=1;
Flory.Monomer=function(a,b,c,d){if(void 0==d)console.log("Flory: Flory.Monomer needs at least the kinematics.position to know what the dimension of the monomer is.");else if(void 0==d.position)console.log("Flory: Flory.Monomer needs at least the kinematics.position to know what the dimension of the monomer is.");else{Flory.Particle.call(this);var e=void 0,f=void 0,g=void 0,h=void 0;void 0!=d&&(e=d.position,f=d.velocity,g=d.acceleration,h=d.force);this.radius=void 0!=a?a:Flory.Monomer.defaultRadius;
this.charge=void 0!=b?b:0;this.mass=void 0!=c?c:0;this.position=void 0==e.components&&e instanceof Array?new Flory.Vector(e):e.clone();this.velocity=void 0==f?new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==f.components&&f instanceof Array?new Flory.Vector(f):f.clone();this.acceleration=void 0==g?new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==g.components&&g instanceof Array?new Flory.Vector(g):g.clone();this.force=void 0==h?
new Flory.Vector([].slice.apply(new Uint8Array(this.position.dimension()))):void 0==h.components&&h instanceof Array?new Flory.Vector(h):h.clone()}};Flory.Monomer.prototype=Object.create(Flory.Particle.prototype);Flory.Monomer.prototype.incrementDimension=function(a,b){this.position.components[a]+=b;return this};Flory.Monomer.prototype.distanceTo=function(a){return this.position.distanceTo(a.position)};Flory.Monomer.prototype.distanceToSq=function(a){return this.position.distanceToSq(a.position)};
Flory.Monomer.prototype.clone=function(){return new Flory.Monomer3D(this.radius,this.position)};Flory.Monomer.defaultRadius=1;Flory.Box2D=function(a,b,c,d,e){Flory.Entity.call(this);this.name=void 0==e?"Box2D":e;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.width=void 0==c?0:c;this.height=void 0==d?0:d};Flory.Box2D.prototype=Object.create(Flory.Entity);Flory.Box2D.prototype.contructor=Flory.Box2D;
Flory.Box3D=function(a,b,c,d,e,f,g){Flory.Entity.call(this);this.name=void 0==g?"Box3D":g;this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.z=void 0==b?0:c;this.width=void 0==d?0:d;this.height=void 0==e?0:e;this.length=void 0==f?0:f};Flory.Box3D.prototype=Object.create(Flory.Entity);Flory.Box3D.prototype.contructor=Flory.Box3D;Flory.Newtonian=function(){Flory.Environment.call(this);this.meshes=[]};Flory.Newtonian.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian.constructor=Flory.Newtonian;
Flory.Newtonian.prototype.addedEntity=function(a){this.visualization&&(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D)&&(this.meshes.push(this.generateMonomerMesh(a)),this.addRenderable(a));return this};
Flory.Newtonian.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.Newtonian.prototype.removedEntity=function(a,b,c){0!=this.meshes.length&&(this.visualization&&this.renderer.scene.remove(this.meshes[c]),this.meshes.splice(c))};Flory.Newtonian.prototype.disabledVisualization=function(){for(var a=0,b=this.meshes.length;a<b;a++)this.renderer.scene.remove(this.meshes[a]);this.meshes=[]};
Flory.Newtonian.prototype.setUpVisualization=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a];if(c instanceof Flory.Monomer||c instanceof Flory.Monomer2D||c instanceof Flory.Monomer3D)c=this.generateMonomerMesh(this.entities[a]),this.meshes.push(c),this.entities[a].mesh=c,this.renderer.addRenderable(this.entities[a])}};
Flory.Newtonian.prototype.update=function(a){a=this.entities.length;for(var b=0;b<a;b++){var c=this.entities[b],d=new Flory.Vector;if(c instanceof Flory.Monomer){for(var e=0;e<a;e++){var f=this.entities[e];f instanceof Flory.Field&&d.add(f.getForce(c.position))}c.force=d.clone()}}b=0;for(a=this.entities.length;b<a;b++)c=this.entities[b],c instanceof Flory.Monomer&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*Flory.timestep)),
this.visualization&&this.renderer.updateRenderablePosition(c));this.visualization&&this.renderer.render();return this};Flory.RandomWalk=function(a,b){Flory.Environment.call(this);this.randomGen=new Flory.RandomGen(a);this.step_size=void 0!=b?b:1};Flory.RandomWalk.prototype=Object.create(Flory.Environment.prototype);Flory.RandomWalk.prototype.constructor=Flory.RandomWalk;Flory.RandomWalk.prototype.removedEntity=function(a,b,c){this.visualization&&this.renderer.removeRenderable(b)};
Flory.RandomWalk.prototype.addedEntity=function(a){this.visualization&&(a.mesh=this.generateMonomerMesh(a,this.data.visualization_data),this.renderer.addRenderable(a));return this};
Flory.RandomWalk.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.RandomWalk.prototype.setUpVisualization=function(a){this.data.visualization_data=a;for(var b=0;b<this.entities.length;b++)this.entities[b].mesh=this.generateMonomerMesh(this.entities[b],a),this.renderer.addRenderable(this.entities[b])};
Flory.RandomWalk.prototype.disabledVisualization=function(){for(var a=0;a<this.entities.length;a++)this.renderer.removeRenderable(this.entity[a]);this.data.visualization_data=void 0;delete this.data.visualization_data};
Flory.RandomWalk.prototype.update=function(a){var b=this.entities.length,c,d,e,f=1;void 0!=a.number_of_steps&&(f=a.number_of_steps);for(var g=0;g<f;g++)for(var h=0;h<b;h++)if(a=this.entities[h],a instanceof Flory.Monomer){prob_right=.5;c=a.position.dimension();c=1/c;d=0;e=this.randomGen.random();for(e-=c;0<e;)e-=c,d++;e=this.randomGen.random();e<prob_right?a.position.components[d]++:a.position.components[d]--;this.visualization&&this.renderer.updateRenderablePosition(this.entities[h])}this.visualization&&
this.renderer.render();return this};Flory.RandomWalk.prototype.resetEnvironment=function(){this.entities=[]};Flory.LennardJones=function(a,b){Flory.Environment.call(this);this.epsilon=void 0!=a?a:Flory.LennardJones.default_epsilon;this.sigma=void 0!=b?b:Flory.LennardJones.default_sigma;this.data.rendererType=Flory.Environment.RendererType.PointCloud};Flory.LennardJones.prototype=Object.create(Flory.Environment.prototype);Flory.LennardJones.prototype.constructor=Flory.LennardJones;
Flory.LennardJones.prototype.addedEntity=function(a){a instanceof Flory.Monomer&&(a.data.last_position=a.position.clone(),this.visualization&&this.renderer.updatePointList(this.entities))};Flory.LennardJones.prototype.setUpVisualization=function(){this.renderer.updatePointList(this.entities)};
Flory.LennardJones.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a];c.force.zero();if(c instanceof Flory.Monomer)for(var d=0,b=this.entities.length;d<a;d++){var e=this.entities[d];if(e instanceof Flory.Monomer){var f=e.position.clone().sub(c.position),g=f.length();if(!(g>Flory.LennardJones.far_cutoff_distance)){var h=this.sigma/g,f=f.scale(-24*this.epsilon/(g*g)*(2*Math.pow(h,12)-Math.pow(h,6)));c.force.add(f);e.force.add(f.negate())}}}}a=0;for(b=this.entities.length;a<
b;a++)c=this.entities[a],c instanceof Flory.Monomer&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*Flory.timestep)));this.visualization&&(this.renderer.updatePointPositions(this.entities),this.renderer.render());return this};Flory.LennardJones.far_cutoff_distance=100;Flory.LennardJones.default_sigma=1;Flory.LennardJones.default_epsilon=1;Flory.Newtonian2D=function(){Flory.Environment.call(this)};
Flory.Newtonian2D.prototype=Object.create(Flory.Environment.prototype);Flory.Newtonian2D.constructor=Flory.Newtonian2D;
Flory.Newtonian2D.prototype.update=function(a){a=0;for(var b=this.entities.length;a<b;a++){var c=this.entities[a],d=new Flory.Vector2;if(c instanceof Flory.Monomer2D){for(var e=0,b=this.entities.length;e<b;e++){var f=this.entities[e];f instanceof Flory.Field2D&&d.add(f.getForce(c.position))}c.force=d.clone()}}a=0;for(b=this.entities.length;a<b;a++)c=this.entities[a],c instanceof Flory.Monomer2D&&(c.acceleration=c.force.mult(1/c.mass),c.velocity.add(c.acceleration.mult(Flory.timestep)),c.position.add(c.velocity.mult(.5*
Flory.timestep)),this.visualization&&this.renderer.updateRenderablePosition(this.entities[a]));this.visualization&&this.renderer.render();return this};Flory.Polymer=function(a,b,c,d){Flory.Environment.call(this);this.randomGen=new Flory.RandomGen(a);this.step_size=void 0!=b?b:1;this.data.bondPairs=[];this.springScalar=d;this.bondLength=c};Flory.Polymer.prototype=Object.create(Flory.Environment.prototype);Flory.Polymer.prototype.constructor=Flory.Polymer;
Flory.Polymer.prototype.removedEntity=function(a,b,c){this.visualization&&this.renderer.removeRenderable(b)};Flory.Polymer.prototype.addedEntity=function(a){this.visualization&&(a.mesh=this.generateMonomerMesh(a,this.data.visualization_data),this.renderer.addRenderable(a));return this};Flory.Polymer.prototype.addedEntityPair=function(a,b){this.visualization&&(entity.mesh=this.generateMonomerMesh(entity,this.data.visualization_data),this.renderer.addRenderable(entity));return this};
Flory.Polymer.prototype.createBondBetweenEntities=function(a,b){for(var c=!1,d=!1,e=0,f=0,g=0,h=this.entities.length;g<h;g++)this.entities[g].id===b.id&&(d=!0,e=g),this.entities[g].id===a.id&&(c=!0,f=g);c&&d?this.data.bondPairs.push([f,e]):console.log("Flory : Could not create bond between entities because the entities are not added to environment.");return this};
Flory.Polymer.prototype.generateMonomerMesh=function(a,b){if(a instanceof Flory.Monomer||a instanceof Flory.Monomer2D||a instanceof Flory.Monomer3D){var c={},d={},d=void 0!=b&&"number"==typeof b.segments?b.segments:20,d=3<=a.position.dimension()?new THREE.SphereGeometry(a.radius,d,d):new THREE.CircleGeometry(a.radius,d,0,6.28318530718),c=void 0!=b&&"number"==typeof b.color?b.color:16711680,c=void 0==b?new THREE.MeshBasicMaterial({color:c}):void 0!=b.material&&b.materials instanceof THREE.Material?
b.material:new THREE.MeshBasicMaterial({color:c});return new THREE.Mesh(d,c)}};Flory.Polymer.prototype.setUpVisualization=function(a){this.data.visualization_data=a;for(var b=0;b<this.entities.length;b++)this.entities[b].mesh=this.generateMonomerMesh(this.entities[b],a),this.renderer.addRenderable(this.entities[b])};Flory.Polymer.prototype.disabledVisualization=function(){for(var a=0;a<this.entities.length;a++)this.renderer.removeRenderable(this.entity[a]);this.data.visualization_data=void 0;delete this.data.visualization_data};
Flory.Polymer.prototype.update=function(a){var b=this.data.bondPairs.length,c=1;void 0!=a.number_of_steps&&(c=a.number_of_steps);for(a=0;a<c;a++){for(var d=0;d<b;d++)pair=this.data.bondPairs[d],entity1=this.entities[pair[0]],entity2=this.entities[pair[1]],entity2.applyForce(.5*this.springConstant*entity1.distanceToSq(entity2.position)),entity1.applyForce(-.5*this.springConstant*entity2.distanceToSq(entity1.position));for(d=0;d<this.entities.length;d++)this.entities[d].velocity.add(this.entities[d].acceleration.mult(Flory.timestep)),
this.entities[d].position.add(this.entities[d].velocity.mult(.5*Flory.timestep))}this.visualization&&this.renderer.render();return this};Flory.Polymer.prototype.resetEnvironment=function(){this.entities=[]};var random=new Flory.RandomGen;settings={visualization:{frames_per_second:60,ticks_per_frame:1},experiment:{side_length_of_cube:3,radius_of_monomers:1,mass_of_monomers:1,min_starting_distance_apart:1,starting_max_x:50,starting_max_y:50,starting_max_z:50,sigma:Math.pow(.5,1/6),epsilon:1}};
for(var exp=settings.experiment,number_of_monomers=exp.side_length_of_cube*exp.side_length_of_cube*exp.side_length_of_cube,monomers=[],lennard=new Flory.LennardJones(exp.epsilon,exp.sigma),i=0;i<exp.side_length_of_cube;i++)for(var j=0;j<exp.side_length_of_cube;j++)for(var k=0;k<exp.side_length_of_cube;k++)monomers.push(new Flory.Monomer(exp.radius_of_monomers,0,exp.mass_of_monomers,{position:[i*exp.min_starting_distance_apart,j*exp.min_starting_distance_apart,k*exp.min_starting_distance_apart]}));
for(i=0;i<number_of_monomers;i++)lennard.add(monomers[i]);lennard.enableVisualization();var fps=k=0;setInterval(function(){lennard.update();k++},0);setInterval(function(){fps=k;k=0},1E3);
